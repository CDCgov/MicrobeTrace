import { Injector, Component, Output, OnChanges, SimpleChange, EventEmitter, OnInit } from '@angular/core';
import { AppComponentBase } from '@shared/common/app-component-base';
import { CommonService } from '../../contactTraceCommonServices/common.service';
import Phylocanvas from 'phylocanvas';

/**
 * @title PhylogeneticComponent
 */
@Component({
    selector: 'PhylogeneticComponent',
    templateUrl: './phylogenetic-plugin.component.html',
})
export class PhylogeneticComponent extends AppComponentBase implements OnInit {

    @Output() DisplayGlobalSettingsDialogEvent = new EventEmitter();


    constructor(injector: Injector,
                private commonService: CommonService) {

        super(injector);

    }

    openTree() {
      console.log('Called the tree opening function');
      const treeString = '((gen-1653585855865-63:11.77238655090332,(gen-1653585855865-9:5.447160050675675,gen-1653585855865-31:0.5528399493243246):2.7276134490966797):0.08451271057128906,(((gen-1653585855865-45:0.07276785714285694,gen-1653585855865-70:10.927232142857143):11.987543106079102,gen-1653585855865-12:0.012456893920898438):0.08097457885742188,((((gen-1653585855865-21:16.84295654296875,gen-1653585855865-14:0.15704345703125):0.21046702067057277,(gen-1653585855865-94:6.9624481201171875,(gen-1653585855865-83:15.992027869591347,gen-1653585855865-59:0.0079721304086533):0.0375518798828125):5.289532979329428):0.17400054931640607,(((((((((gen-1653585855865-81:13.803463855421686,gen-1653585855865-7:0.1965361445783138):0.9371189024390247,gen-1653585855865-71:9.062881097560975):10.92138671875,(gen-1653585855865-95:10.8984375,gen-1653585855865-15:0.1015625):0.07861328125):9.707978142632378,(gen-1653585855865-32:9.918492759146343,(gen-1653585855865-23:12.873325892857142,gen-1653585855865-58:0.12667410714285765):0.08150724085365724):9.604521857367622):0.23813988180721507,gen-1653585855865-4:0.10561011819278493):6.943236437710849,gen-1653585855865-40:0.05676356228915136):0.05479078292846662,gen-1653585855865-82:4.913959217071533):0.3281344837612572,((((gen-1653585855865-64:0.07166666666666632,gen-1653585855865-74:12.928333333333335):0.1461148648648649,gen-1653585855865-42:20.853885135135137):0.3824914383561646,gen-1653585855865-97:13.617508561643834):13.469405324835527,((gen-1653585855865-46:11.984375,gen-1653585855865-20:0.015625):0.12019230769230771,gen-1653585855865-86:3.8798076923076925):0.5305946751644726):13.380849891238743):0.44836878776550293,(((((gen-1653585855865-26:10.951549183238637,(gen-1653585855865-0:0.00004245923913048788,gen-1653585855865-90:1.9999575407608696):0.04845081676136331):0.04337556021554129,((((gen-1653585855865-22:11.822183098591548,(gen-1653585855865-35:9.902777777777779,gen-1653585855865-19:0.09722222222222143):0.17781690140845186):6.9000244140625,((gen-1653585855865-24:0.055943080357142794,gen-1653585855865-29:2.944056919642857):0.10886896306818183,((((gen-1653585855865-33:5.46141975308642,gen-1653585855865-55:14.538580246913579):0.37578125,gen-1653585855865-51:0.12421874999999999):0.20263053797468356,(gen-1653585855865-84:10.947610294117647,((gen-1653585855865-66:16.413978494623656,gen-1653585855865-69:0.586021505376344):8.62609011627907,(gen-1653585855865-36:0.11422413793103448,((gen-1653585855865-39:0.2268041237113403,gen-1653585855865-56:6.77319587628866):9.796348314606742,(gen-1653585855865-88:6.997222222222222,gen-1653585855865-99:0.002777777777778212):0.2036516853932575):2.8857758620689653):0.12390988372093048):0.17738970588235325):4.7973694620253164):5.739680503731343,gen-1653585855865-5:0.26031949626865725):3.883318536931818):0.0726318359375):4.83717041015625,gen-1653585855865-3:0.17845458984375018):7.525797684987386,gen-1653585855865-77:17.474202315012615):0.4566244397844587):0.035595750808715465,((gen-1653585855865-41:12.999924879807693,gen-1653585855865-48:0.00007512019230659917):0.02018229166666674,gen-1653585855865-93:3.979817708333333):10.964160108566285):0.2867431891591927,(gen-1653585855865-87:13.935141509433961,gen-1653585855865-73:0.06485849056603854):10.682128881153307):13.515962174960546,((((((gen-1653585855865-85:0.2995689655172411,gen-1653585855865-30:8.700431034482758):9.688142776489258,(((((gen-1653585855865-47,gen-1653585855865-54:5):0.1333333333333333,gen-1653585855865-65:5.866666666666667):12.683161272321428,((((gen-1653585855865-60:17.847368421052632,gen-1653585855865-37:0.15263157894736779):0.18882978723404253,gen-1653585855865-57:12.811170212765958):12.710371376811594,(gen-1653585855865-76:0.02083333333333348,gen-1653585855865-89:5.979166666666666):13.289628623188406):0.7556295955882353,gen-1653585855865-68:0.24437040441176472):16.316838727678572):0.20173914292279413,(gen-1653585855865-78:12.47384982638889,(gen-1653585855865-80:0.03611111111111098,gen-1653585855865-43:4.963888888888889):5.526150173611111):0.45451085707720584):0.07261703953598485,gen-1653585855865-13:0.09925796046401515):0.1868572235107422):7.874736644603588,gen-1653585855865-91:0.1877633553964122):0.14436633770282453,((gen-1653585855865-11:2.7324869791666666,((gen-1653585855865-62:0.06779661016949134,gen-1653585855865-67:5.932203389830509):15.84538810483871,gen-1653585855865-8:0.15461189516129004):0.2675130208333334):2.0530482700892856,gen-1653585855865-16:17.446951729910715):0.5260438185471754):0.19440216064453125,(((((((gen-1653585855865-50,gen-1653585855865-72):0.3656655844155843,((gen-1653585855865-25:0.09183673469387754,gen-1653585855865-96:7.908163265306122):12.42663043478261,gen-1653585855865-18:0.5733695652173907):9.134334415584416):11.949926259566327,gen-1653585855865-92:12.050073740433673):0.6918792724609375,gen-1653585855865-1:0.3081207275390625):0.028852746841755206,((gen-1653585855865-27:17.89725378787879,gen-1653585855865-61:0.10274621212121104):0.4478365384615386,gen-1653585855865-38:5.552163461538461):7.658647253158245):0.26238350246263575,(gen-1653585855865-49:0.4638157894736843,(gen-1653585855865-75:5.198863636363637,gen-1653585855865-79:0.8011363636363633):3.536184210526316):12.893866497537363):13.917416276602909,(gen-1653585855865-6:0.4755859375,((gen-1653585855865-52:13.923076923076923,gen-1653585855865-28:1.0769230769230766):11.491966985887096,(((gen-1653585855865-53:7.9226190476190474,gen-1653585855865-10:0.07738095238095255):6.0048828125,gen-1653585855865-17:11.9951171875):0.8556547619047619,gen-1653585855865-98:0.14434523809523814):0.5080330141129039):4.5244140625):15.549380598397091):0.8352609252929688):12.773496516545613,(gen-1653585855865-34:9.935905456542969,gen-1653585855865-2:0.06409454345703125):0.18713580767313687):0.7015978779111585):4.550976395606995):7.418726396560669):7.452376047770182,gen-1653585855865-44:13.888650258382162):0.08435821533203125):0.08451271057128906)';
      // const treeString = '(A:0.1,B:0.2,(C:0.3,D:0.4)E:0.5)F;';
			let tree = Phylocanvas.createTree("phylocanvas", {
				fillCanvas: true,
				textSize: 16,
				hoverLabels: true,
			});
			tree.load(treeString);
			tree.setTreeType("rectangular");
      tree.setNodeShape("circle");
      tree.setNodeSize(30);


    }


    ngOnInit() {
      console.log('Trying to open up the phylogenetic tree view');
      this.openTree();

    }

    InitView() {
        console.log('InitView is called');
    }

    openSettings() {

    }

    openExport() {

    }

    openCenter() {

    }

    openPinAllNodes() {


    }

    openRefreshScreen() {

    }

    openSelectDataSetScreen() {

    }


}
