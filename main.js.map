{"version":3,"file":"main.js","mappings":"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,CAAC9nE,aAAa,CAACpgB,OAAO,CAACrB,KAAK,CAACC,SAAS,GAAG,IAAI,CAAC8B,CAAC,CAACmwC,MAAM,CAAC,IAAI,CAACi3C,SAAS,CAAC,CAAC,CAAC,CAAC;IAC7E,IAAI,CAAC1nE,aAAa,CAACpgB,OAAO,CAACrB,KAAK,CAACE,OAAO,GAAG,IAAI,CAAC6B,CAAC,CAACmwC,MAAM,CAAC,IAAI,CAACi3C,SAAS,CAAC,CAAC,CAAC,CAAC;IAC3E,IAAI,CAAC1nE,aAAa,CAAC5L,iBAAiB,CAAC,IAAI,CAAC;IAC1C,IAAI,CAAC4L,aAAa,CAACpM,iBAAiB,CAAC,IAAI,CAAC;IAC1C,IAAI,CAACoM,aAAa,CAAC9L,WAAW,EAAE,CAACrD,IAAI,CAAC,MAAK;MACzC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAChhB,OAAO,CAAEinB,KAAa,IAAI;QACxC9qB,MAAc,CAAC2rB,OAAO,CAACb,KAAK,GAAG,aAAa,CAAC;MAChD,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEAi1B,gBAAgBA,CAAA;IACd,IAAI,CAAC23C,OAAO,EAAE;EAChB;EACAz3C,mBAAmBA,CAAA;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B,KAAK,cAAc,+BAA+B,4BAA4B,KAAK,iBAAiB,kBAAkB,mBAAmB,4BAA4B,8BAA8B,8BAA8B,yBAAyB,KAAK,yBAAyB,gCAAgC,iCAAiC,KAAK,mBAAmB;AACzuL;AACA;;;;;;;;;;;ACvLA;AACA,4CAA4C,mBAAO,CAAC,2EAAgE;AACpH,kCAAkC,mBAAO,CAAC,oEAAyD;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC,OAAO,8IAA8I,WAAW,WAAW,WAAW,MAAM,KAAK,WAAW,MAAM,KAAK,WAAW,WAAW,MAAM,KAAK,WAAW,WAAW,WAAW,UAAU,gCAAgC,2BAA2B,yBAAyB,8BAA8B,KAAK,4BAA4B,qCAAqC,KAAK,8BAA8B,kCAAkC,mCAAmC,KAAK,kCAAkC,yBAAyB,6BAA6B,iCAAiC,uBAAuB,KAAK,mBAAmB;AACjvB;AACA;;;;;;;;;;;AC3BA;AACA,4CAA4C,mBAAO,CAAC,wEAA6D;AACjH,kCAAkC,mBAAO,CAAC,iEAAsD;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,oHAAoH,WAAW,WAAW,WAAW,WAAW,UAAU,KAAK,KAAK,UAAU,UAAU,WAAW,WAAW,UAAU,KAAK,KAAK,WAAW,UAAU,WAAW,WAAW,WAAW,WAAW,UAAU,WAAW,KAAK,UAAU,KAAK,WAAW,YAAY,YAAY,WAAW,KAAK,KAAK,WAAW,UAAU,UAAU,UAAU,KAAK,KAAK,UAAU,KAAK,KAAK,UAAU,WAAW,UAAU,UAAU,UAAU,UAAU,WAAW,WAAW,WAAW,WAAW,WAAW,UAAU,WAAW,KAAK,KAAK,UAAU,UAAU,UAAU,KAAK,KAAK,WAAW,UAAU,KAAK,KAAK,UAAU,WAAW,UAAU,UAAU,WAAW,UAAU,WAAW,UAAU,WAAW,KAAK,KAAK,UAAU,KAAK,KAAK,UAAU,UAAU,UAAU,WAAW,WAAW,KAAK,KAAK,UAAU,WAAW,KAAK,KAAK,WAAW,KAAK,KAAK,WAAW,UAAU,WAAW,KAAK,MAAM,UAAU,WAAW,KAAK,KAAK,WAAW,UAAU,KAAK,KAAK,WAAW,UAAU,KAAK,KAAK,WAAW,KAAK,KAAK,WAAW,WAAW,UAAU,KAAK,KAAK,UAAU,KAAK,KAAK,WAAW,KAAK,MAAM,UAAU,UAAU,KAAK,MAAM,WAAW,WAAW,WAAW,WAAW,KAAK,MAAM,UAAU,WAAW,UAAU,UAAU,MAAM,MAAM,WAAW,WAAW,WAAW,WAAW,MAAM,MAAM,WAAW,WAAW,WAAW,MAAM,OAAO,WAAW,MAAM,MAAM,WAAW,MAAM,YAAY,OAAO,WAAW,WAAW,WAAW,aAAa,MAAM,YAAY,OAAO,WAAW,UAAU,WAAW,UAAU,WAAW,UAA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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,6IAA6I,WAAW,WAAW,WAAW,KAAK,KAAK,WAAW,KAAK,KAAK,UAAU,KAAK,KAAK,WAAW,KAAK,KAAK,WAAW,WAAW,WAAW,WAAW,UAAU,WAAW,KAAK,KAAK,WAAW,UAAU,KAAK,KAAK,WAAW,UAAU,KAAK,KAAK,WAAW,UAAU,KAAK,KAAK,WAAW,UAAU,KAAK,KAAK,WAAW,UAAU,KAAK,KAAK,WAAW,UAAU,KAAK,MAAM,YAAY,UAAU,UAAU,KAAK,MAAM,YAAY,WAAW,KAAK,MAAM,YAAY,UAAU,KAAK,MAAM,YAAY,WAAW,WAAW,KAAK,MAAM,WAAW,KAAK,MAAM,WAAW,MAAM,MAAM,WAAW,WAAW,MAAM,MAAM,YAAY,MAAM,MAAM,WAAW,MAAM,MAAM,WAAW,MAAM,MAAM,WAAW,MAAM,MAAM,WAAW,MAAM,MAAM,WAAW,MAAM,MAAM,YAAY,MAAM,MAAM,WAAW,UAAU,WAAW,UAAU,MAAM,MAAM,WAAW,UAAU,MAAM,MAAM,WAAW,WAAW,MAAM,MAAM,WAAW,MAAM,MAAM,UAAU,WAAW,MAAM,MAAM,UAAU,WAAW,MAAM,MAAM,WAAW,UAAU,MAAM,MAAM,UAAU,WAAW,MAAM,MAAM,UAAU,WAAW,MAAM,MAAM,YAAY,MAAM,MAAM,WAAW,MAAM,MAAM,WAAW,WAAW,MAAM,MAAM,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,MAAM,UAAU,MAAM,MAAM,WAAW,MAAM,MAAM,WAAW,UAAU,WAAW,WAAW,UAAU,UAAU,UAAU,MAAM,MAAM,WAAW,UAAU,WAAW,WAAW,WAAW,OAAO,KAAK,MAAM,WAAW,MAAM,YAAY,OAAO,WAAW,aAAa,aAAa,aAAa,MAAM,MAAM,WAAW,WAAW,WAAW,MAAM,MAAM,WAAW,MAAM,MAAM,WAAW,MAAM,MAAM,WAAW,iCAAiC,yBAAyB,uBAAuB,4BAA4B,GAAG,yBAAyB,+BAA+B,GAAG,eAAe,mBAAmB,GAAG,2CAA2C,sHAAsH,yBAAyB,6BAA6B,8BAA8B,oCAAoC,2BAA2B,0BAA0B,+BAA+B,gCAAgC,wCAAwC,6BAA6B,WAAW,kCAAkC,wCAAwC,6BAA6B,WAAW,kCAAkC,wCAAwC,6BAA6B,WAAW,0BAA0B,wCAAwC,6BAA6B,WAAW,8BAA8B,wCAAwC,6BAA6B,WAAW,+BAA+B,wCAAwC,6BAA6B,WAAW,OAAO,eAAe,iCAAiC,sBAAsB,uBAAuB,OAAO,+CAA+C,gCAAgC,iCAAiC,iBAAiB,qCAAqC,0BAA0B,WAAW,kBAAkB,iCAAiC,qCAAqC,0CAA0C,OAAO,uBAAuB,wBAAwB,0BAA0B,WAAW,mCAAmC,2BAA2B,WAAW,OAAO,yBAAyB,sBAAsB,oCAAoC,mCAAmC,wCAAwC,WAAW,OAAO,2BAA2B,yBAAyB,mBAAmB,0BAA0B,WAAW,OAAO,0CAA0C,uBAAuB,mBAAmB,2BAA2B,WAAW,OAAO,wBAAwB,0BAA0B,gBAAgB,+BAA+B,WAAW,OAAO,2BAA2B,yBAAyB,wBAAwB,2BAA2B,0BAA0B,OAAO,uBAAuB,yBAAyB,uBAAuB,OAAO,+BAA+B,yBAAyB,2BAA2B,gCAAgC,4CAA4C,WAAW,2BAA2B,yBAAyB,iCAAiC,WAAW,0BAA0B,yBAAyB,iCAAiC,WAAW,OAAO,+BAA+B,yBAAyB,uBAAuB,2BAA2B,yBAAyB,iCAAiC,WAAW,0BAA0B,yBAAyB,iCAAiC,WAAW,OAAO,iDAAiD,oCAAoC,OAAO,gDAAgD,wBAAwB,OAAO,GAAG,eAAe,WAAW,4BAA4B,uBAAuB,GAAG,iBAAiB,8BAA8B,gCAAgC,wBAAwB,oCAAoC,4BAA4B,4BAA4B,iCAAiC,GAAG,2DAA2D,iCAAiC,gCAAgC,2EAA2E,2CAA2C,eAAe,uCAAuC,mCAAmC,iCAAiC,4CAA4C,yCAAyC,8BAA8B,8BAA8B,iCAAiC,sCAAsC,oCAAoC,qCAAqC,4CAA4C,oDAAoD,wCAAwC,mBAAmB,eAAe,WAAW,OAAO,GAAG,oBAAoB,mCAAmC,GAAG,yDAAyD,4BAA4B,8EAA8E,+CAA+C,eAAe,yBAAyB,iDAAiD,wBAAwB,GAAG,+BAA+B,kCAAkC,GAAG,+BAA+B,kCAAkC,GAAG,mEAAmE,6BAA6B,GAAG,mBAAmB;AACv1N;AACA;;;;;;;;;;;AC7MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.module.ts","./src/app/base-component.directive.ts","./src/app/constants/longStrings.constants.ts","./src/app/contactTraceCommonServices/color-mapping.service.ts","./src/app/contactTraceCommonServices/common-store.services.ts","./src/app/contactTraceCommonServices/common.service.ts","./src/app/contactTraceCommonServices/export.service.ts","./src/app/contactTraceCommonServices/worker-compute.service.ts","./src/app/filesComponent/files-plugin.component.ts","./src/app/golden-layout-component.service.ts","./src/app/golden-layout-host.component.ts","./src/app/helperClasses/auspiceHandler.ts","./src/app/helperClasses/customShapes.ts","./src/app/helperClasses/dialogSettings.ts","./src/app/helperClasses/inlineWorker.ts","./src/app/microbe-trace-next-plugin-visuals.ts","./src/app/microbe-trace-next-plugin.component.ts","./src/app/visualizationComponents/AggregateComponent/aggregate.component.ts","./src/app/visualizationComponents/AlignmentViewComponent/alignment-view-plugin-component.ts","./src/app/visualizationComponents/AlignmentViewComponent/generateAlignmentViewCanvas.ts","./src/app/visualizationComponents/BubbleComponent/bubble.component.ts","./src/app/visualizationComponents/CrosstabComponent/crosstab-plugin.component.ts","./src/app/visualizationComponents/GanttComponent/constants/color-schemes.ts","./src/app/visualizationComponents/GanttComponent/gantt-chart/gantt-chart.component.ts","./src/app/visualizationComponents/GanttComponent/gantt-chart/gantt-chart.service.ts","./src/app/visualizationComponents/GanttComponent/gantt-plugin.component.ts","./src/app/visualizationComponents/HeatmapComponent/heatmap.component.ts","./src/app/visualizationComponents/MapComponent/map-plugin.component.ts","./src/app/visualizationComponents/PhylogeneticComponent/phylogenetic-plugin.component.ts","./src/app/visualizationComponents/SankeyComponent/sankey.component.ts","./src/app/visualizationComponents/TableComponent/table-plugin-component.ts","./src/app/visualizationComponents/TimelineComponent/timeline-component.component.ts","./src/app/visualizationComponents/TwoDComponent/twoD-plugin.component.ts","./src/app/visualizationComponents/WaterfallComponent/waterfall.component.ts","./src/app/workers/workModule.ts","./src/assets/metronic/app/core/core.module.ts","./src/assets/metronic/app/core/directives/menu-aside-offcanvas.directive.ts","./src/assets/metronic/app/core/directives/menu-aside-toggle.directive.ts","./src/assets/metronic/app/core/directives/menu-aside.directive.ts","./src/assets/metronic/app/core/directives/menu-horizontal-offcanvas.directive.ts","./src/assets/metronic/app/core/directives/menu-horizontal.directive.ts","./src/assets/metronic/app/core/services/layout-config.service.ts","./src/assets/metronic/app/core/services/layout/layout-ref.service.ts","./src/assets/metronic/app/core/services/utils.service.ts","./src/environments/environment.prod.ts","./src/environments/version.prod.ts","./src/main.ts","./src/shared/app.constants.ts","./src/shared/common/app-component-base.ts","./src/shared/common/nav/app-url.service.ts","./src/shared/common/pipes/localize.pipe.ts","./src/shared/common/session/app-session.service.ts","./src/shared/common/ui/app-ui-customization.service.ts","./src/shared/dnd.directive.ts","./src/shared/helpers/PrimengTableHelper.ts","./src/shared/utils/event-emitter.service.ts","./src/shared/utils/local-storage.service.ts","./src/shared/utils/utils.module.ts","./src/app/visualizationComponents/PhylogeneticComponent/tidytree.js","webpack:///./src/app/golden-layout-host.component.ts?addb","./src/app/visualizationComponents/MapComponent/map-plugin.component.css","./src/app/app.component.scss","./src/app/visualizationComponents/AggregateComponent/aggregate.component.scss","./src/app/visualizationComponents/AlignmentViewComponent/alignment-view-plugin-component.scss","./src/app/visualizationComponents/BubbleComponent/bubble.component.scss","./src/app/visualizationComponents/CrosstabComponent/crosstab-plugin.component.scss","./src/app/visualizationComponents/GanttComponent/gantt-chart/gantt-chart.component.scss","./src/app/visualizationComponents/GanttComponent/gantt-plugin.component.scss","./src/app/visualizationComponents/HeatmapComponent/heatmap.component.scss","./src/app/visualizationComponents/PhylogeneticComponent/phylogenetic-plugin.component.scss","./src/app/visualizationComponents/SankeyComponent/sankey.component.scss","./src/app/visualizationComponents/TimelineComponent/timeline-component.component.scss","./src/app/visualizationComponents/TwoDComponent/twoD-plugin.component.scss","./src/app/visualizationComponents/WaterfallComponent/waterfall.component.scss","./src/app/filesComponent/files-plugin.component.less","./src/app/microbe-trace-next-plugin.component.less","./src/app/visualizationComponents/TableComponent/table-plugin-component.less","./node_modules/moment/locale/ sync ^\\.\\/.*$"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { MicrobeTraceNextHomeComponent } from './microbe-trace-next-plugin.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: MicrobeTraceNextHomeComponent }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes, {})],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component } from '@angular/core';\r\nimport {} from '@angular/common/http';\r\n\r\ndeclare var $: any;\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n  title = 'sample-app';\r\n}\r\n\r\n\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { NgModule, Component } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { RouterModule, ExtraOptions } from '@angular/router';\r\n\r\nimport  Lara  from '@primeng/themes/lara';\r\nimport { providePrimeNG } from 'primeng/config';\r\n\r\nimport { AppComponent } from './app.component';\r\nimport * as $ from 'jquery';\r\nimport { provideHttpClient, withInterceptorsFromDi, withJsonpSupport } from '@angular/common/http';\r\nimport { FormsModule } from '@angular/forms';\r\n// import { ServiceProxyModule } from '@shared/service-proxies/service-proxy.module';\r\nimport { UtilsModule } from '@shared/utils/utils.module';\r\n// import { AbpModule } from 'abp-ng2-module/dist/src/abp.module';\r\n// import { ModalModule, TooltipModule, TabsModule, BsDropdownModule, PopoverModule } from 'ngx-bootstrap';\r\n// import { TableModule } from 'primeng/components/table/table';\r\n// import { FileUploadModule, ListboxModule, RadioButtonModule, CalendarModule, PaginatorModule, ProgressBarModule, ConfirmDialogModule, DropdownModule, AccordionModule, SidebarModule, MultiSelect, MultiSelectModule, SliderModule } from 'primeng/primeng';\r\n\r\nimport { GoldenLayoutComponentService } from './golden-layout-component.service';\r\nimport { GoldenLayoutHostComponent } from './golden-layout-host.component';\r\nimport { ButtonModule } from 'primeng/button';\r\nimport { TableModule } from 'primeng/table';\r\nimport { FileUploadModule } from 'primeng/fileupload';\r\nimport { ListboxModule } from 'primeng/listbox';\r\nimport { RadioButtonModule } from 'primeng/radiobutton';\r\nimport { CalendarModule } from 'primeng/calendar';\r\nimport { PaginatorModule } from 'primeng/paginator';\r\nimport { ProgressBarModule } from 'primeng/progressbar';\r\nimport { ConfirmDialogModule } from 'primeng/confirmdialog';\r\nimport { DropdownModule } from 'primeng/dropdown';\r\nimport { AccordionModule } from 'primeng/accordion';\r\nimport { SidebarModule } from 'primeng/sidebar';\r\nimport { MultiSelectModule } from 'primeng/multiselect';\r\nimport { SliderModule } from 'primeng/slider';\r\nimport { TabViewModule } from 'primeng/tabview';\r\nimport { SelectButtonModule } from 'primeng/selectbutton';\r\nimport { TreeModule } from 'primeng/tree';\r\nimport { DialogModule } from 'primeng/dialog';\r\nimport { OrderListModule } from 'primeng/orderlist';\r\nimport { CheckboxModule } from 'primeng/checkbox';\r\nimport { MicrobeTraceNextHomeComponent } from './microbe-trace-next-plugin.component';\r\nimport { AppSessionService } from '@shared/common/session/app-session.service';\r\nimport { AppUiCustomizationService } from '@shared/common/ui/app-ui-customization.service';\r\nimport { AppUrlService } from '@shared/common/nav/app-url.service';\r\nimport { FilesComponent } from './filesComponent/files-plugin.component';\r\nimport { PhylogeneticComponent } from './visualizationComponents/PhylogeneticComponent/phylogenetic-plugin.component';\r\nimport { TimelineComponent } from './visualizationComponents/TimelineComponent/timeline-component.component';\r\nimport { TwoDComponent } from './visualizationComponents/TwoDComponent/twoD-plugin.component';\r\nimport { CoreModule } from '@metronic/app/core/core.module';\r\nimport { TableComponent } from './visualizationComponents/TableComponent/table-plugin-component';\r\nimport { MapComponent } from './visualizationComponents/MapComponent/map-plugin.component';\r\nimport { AlignmentViewComponent } from './visualizationComponents/AlignmentViewComponent/alignment-view-plugin-component';\r\nimport { LeafletModule } from '@asymmetrik/ngx-leaflet';\r\nimport { LeafletMarkerClusterModule } from '@asymmetrik/ngx-leaflet-markercluster';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatToolbarModule } from '@angular/material/toolbar';\r\nimport { MatSliderModule } from '@angular/material/slider';\r\nimport { DndDirective } from '@shared/dnd.directive';\r\n\r\nimport {MatSelectModule} from '@angular/material/select';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { CrosstabComponent } from './visualizationComponents/CrosstabComponent/crosstab-plugin.component';\r\nimport { AggregateComponent } from './visualizationComponents/AggregateComponent/aggregate.component';\r\nimport { BubbleComponent } from './visualizationComponents/BubbleComponent/bubble.component';\r\n\r\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\r\nimport { TabsModule } from 'ngx-bootstrap/tabs';\r\nimport { ModalModule } from 'ngx-bootstrap/modal';\r\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\r\nimport { PopoverModule } from 'ngx-bootstrap/popover';\r\n\r\nimport { GanttComponent } from './visualizationComponents/GanttComponent/gantt-plugin.component';\r\nimport { GanttChartComponent } from './visualizationComponents/GanttComponent/gantt-chart/gantt-chart.component';\r\nimport { GanttChartService } from './visualizationComponents/GanttComponent/gantt-chart/gantt-chart.service';\r\nimport { HeatmapComponent } from './visualizationComponents/HeatmapComponent/heatmap.component';\r\nimport { WaterfallComponent } from './visualizationComponents/WaterfallComponent/waterfall.component';\r\nimport { GoogleTagManagerModule } from 'angular-google-tag-manager';\r\nimport { SankeyComponent } from './visualizationComponents/SankeyComponent/sankey.component';\r\nimport * as PlotlyJS from 'plotly.js-dist-min';\r\nimport { PlotlyModule } from 'angular-plotly.js';\r\n\r\nPlotlyModule.plotlyjs = PlotlyJS;\r\n// It is required to have JQuery as global in the window object.\r\nwindow['$'] = $;\r\n\r\nconst routerOptions: ExtraOptions = {\r\n  // Your router configurations\r\n};\r\n// PlotlyModule.plotlyjs = PlotlyJS;\r\n\r\n@Component({\r\n  template: `<h1>Test2</h1>`,\r\n  selector: `app-tested`,\r\n})\r\nexport class TestedComponent {\r\n  constructor() { }\r\n\r\n}\r\n\r\n\r\n@NgModule({ declarations: [\r\n        AppComponent,\r\n        MicrobeTraceNextHomeComponent,\r\n        FilesComponent,\r\n        TwoDComponent,\r\n        TableComponent,\r\n        GoldenLayoutHostComponent,\r\n        MapComponent,\r\n        TestedComponent,\r\n        DndDirective,\r\n        PhylogeneticComponent,\r\n        TimelineComponent,\r\n        AlignmentViewComponent,\r\n        CrosstabComponent,\r\n        AggregateComponent,\r\n        GanttChartComponent,\r\n        GanttComponent,\r\n        HeatmapComponent,\r\n        BubbleComponent,\r\n        WaterfallComponent,\r\n        SankeyComponent,\r\n    ],\r\n    exports: [\r\n        SelectButtonModule\r\n    ],\r\n    bootstrap: [AppComponent], imports: [BrowserModule,\r\n        BrowserAnimationsModule,\r\n        FormsModule,\r\n        MatButtonModule,\r\n        ButtonModule,\r\n        MatInputModule,\r\n        MatMenuModule,\r\n        MatSliderModule,\r\n        MatToolbarModule,\r\n        MatSelectModule,\r\n        MatProgressSpinnerModule,\r\n        MatIconModule,\r\n        ModalModule.forRoot(),\r\n        TooltipModule.forRoot(),\r\n        TabsModule.forRoot(),\r\n        BsDropdownModule.forRoot(),\r\n        PopoverModule.forRoot(),\r\n        FileUploadModule,\r\n        AppRoutingModule,\r\n        UtilsModule,\r\n        TableModule,\r\n        ListboxModule,\r\n        RadioButtonModule,\r\n        CalendarModule,\r\n        PaginatorModule,\r\n        ProgressBarModule,\r\n        CoreModule,\r\n        ConfirmDialogModule,\r\n        DropdownModule,\r\n        TabViewModule,\r\n        SelectButtonModule,\r\n        TreeModule,\r\n        DialogModule,\r\n        AccordionModule,\r\n        SidebarModule,\r\n        MultiSelectModule,\r\n        SliderModule,\r\n        CheckboxModule,\r\n        LeafletModule,\r\n        LeafletMarkerClusterModule,\r\n        OrderListModule,\r\n        GoogleTagManagerModule.forRoot({ id: 'G-0MWHB1NG2M', }),\r\n        CommonModule], providers: [\r\n          providePrimeNG({\r\n            theme: {\r\n                preset: Lara,\r\n                options: {darkModeSelector: false || 'none'}\r\n            },\r\n        }),\r\n        AppSessionService,\r\n        AppUiCustomizationService,\r\n        AppUrlService,\r\n        GanttChartService,\r\n        GoldenLayoutComponentService,\r\n        PlotlyModule,\r\n        provideHttpClient(withInterceptorsFromDi(), withJsonpSupport()),\r\n    ] })\r\nexport class AppModule { }\r\n","import { Directive, InjectionToken } from '@angular/core';\r\nimport { ComponentContainer } from \"golden-layout\";\r\n  \r\n@Directive()\r\nexport abstract class BaseComponentDirective {\r\n    constructor(public rootHtmlElement: HTMLElement) {\r\n\r\n    }\r\n\r\n    setPositionAndSize(left: number, top: number, width: number, height: number) {\r\n        this.rootHtmlElement.style.left = this.numberToPixels(left);\r\n        this.rootHtmlElement.style.top = this.numberToPixels(top);\r\n        this.rootHtmlElement.style.width = this.numberToPixels(width);\r\n        this.rootHtmlElement.style.height = this.numberToPixels(height);\r\n    } \r\n\r\n    setVisibility(visible: boolean) {\r\n        if (visible) {\r\n            this.rootHtmlElement.style.display = '';\r\n        } else {\r\n            this.rootHtmlElement.style.display = 'none';\r\n        }\r\n    }\r\n\r\n    setZIndex(value: string) {\r\n        this.rootHtmlElement.style.zIndex = value;\r\n    }\r\n\r\n    /**\r\n     * Convert a number to a string and adds 'px' at end of the string\r\n     * @param value a number to be converted into string\r\n     * @returns the string\r\n     */\r\n    private numberToPixels(value: number): string {\r\n        return value.toString(10) + 'px';\r\n    }\r\n}\r\n\r\nexport namespace BaseComponentDirective {\r\n    const GoldenLayoutContainerTokenName = 'GoldenLayoutContainer'; \r\n    export const GoldenLayoutContainerInjectionToken = new InjectionToken<ComponentContainer>(GoldenLayoutContainerTokenName);\r\n}\r\n","const REFERENCE : string = 'CCTCAGGTCACTCTTTGGCAACGACCCCTCGTCACAATAAAGATAGGGGGGCAACTAAAGGAAGCTCTATTAGATACAGGAGCAGATGATACAGTATTAGAAGAAATGAGTTTGCCAGGAAGATGGAAACCAAAAATGATAGGGGGAATTGGAGGTTTTATCAAAGTAAGACAGTATGATCAGATACTCATAGAAATCTGTGGACATAAAGCTATAGGTACAGTATTAGTAGGACCTACACCTGTCAACATAATTGGAAGAAATCTGTTGACTCAGATTGGTTGCACTTTAAATTTTCCCATTAGCCCTATTGAGACTGTACCAGTAAAATTAAAGCCAGGAATGGATGGCCCAAAAGTTAAACAATGGCCATTGACAGAAGAAAAAATAAAAGCATTAGTAGAAATTTGTACAGAGATGGAAAAGGAAGGGAAAATTTCAAAAATTGGGCCTGAAAATCCATACAATACTCCAGTATTTGCCATAAAGAAAAAAGACAGTACTAAATGGAGAAAATTAGTAGATTTCAGAGAACTTAATAAGAGAACTCAAGACTTCTGGGAAGTTCAATTAGGAATACCACATCCCGCAGGGTTAAAAAAGAAAAAATCAGTAACAGTACTGGATGTGGGTGATGCATATTTTTCAGTTCCCTTAGATGAAGACTTCAGGAAGTATACTGCATTTACCATACCTAGTATAAACAATGAGACACCAGGGATTAGATATCAGTACAATGTGCTTCCACAGGGATGGAAAGGATCACCAGCAATATTCCAAAGTAGCATGACAAAAATCTTAGAGCCTTTTAGAAAACAAAATCCAGACATAGTTATCTATCAATACATGGATGATTTGTATGTAGGATCTGACTTAGAAATAGGGCAGCATAGAACAAAAATAGAGGAGCTGAGACAACATCTGTTGAGGTGGGGACTTACCACACCAGACAAAAAACATCAGAAAGAACCTCCATTCCTTTGGATGGGTTATGAACTCCATCCTGATAAATGGACAGTACAGCCTATAGTGCTGCCAGAAAAAGACAGCTGGACTGTCAATGACATACAGAAGTTAGTGGGGAAATTGAATTGGGCAAGTCAGATTTACCCAGGGATTAAAGTAAGGCAATTATGTAAACTCCTTAGAGGAACCAAAGCACTAACAGAAGTAATACCACTAACAGAAGAAGCAGAGCTAGAACTGGCAGAAAACAGAGAGATTCTAAAAGAACCAGTACATGGAGTGTATTATGACCCATCAAAAGACTTAATAGCAGAAATACAGAAGCAGGGGCAAGGCCAATGGACATATCAAATTTATCAAGAGCCATTTAAAAATCTGAAAACAGGAAAATATGCAAGAATGAGGGGTGCCCACACTAATGATGTAAAACAATTAACAGAGGCAGTGCAAAAAATAACCACAGAAAGCATAGTAATATGGGGAAAGACTCCTAAATTTAAACTGCCCATACAAAAGGAAACATGGGAAACATGGTGGACAGAGTATTGGCAAGCCACCTGGATTCCTGAGTGGGAGTTTGTTAATACCCCTCCCTTAGTGAAATTATGGTACCAGTTAGAGAAAGAACCCATAGTAGGAGCAGAAACCTTC';\r\nconst HBX2 : string = 'TGGAAGGGCTAATTCACTCCCAACGAAGACAAGATATCCTTGATCTGTGGATCTACCACACACAAGGCTACTTCCCTGATTAGCAGAACTACACACCAGGGCCAGGGATCAGATATCCACTGACCTTTGGATGGTGCTACAAGCTAGTACCAGTTGAGCCAGAGAAGTTAGAAGAAGCCAACAAAGGAGAGAACACCAGCTTGTTACACCCTGTGAGCCTGCATGGAATGGATGACCCGGAGAGAGAAGTGTTAGAGTGGAGGTTTGACAGCCGCCTAGCATTTCATCACATGGCCCGAGAGCTGCATCCGGAGTACTTCAAGAACTGCTGACATCGAGCTTGCTACAAGGGACTTTCCGCTGGGGACTTTCCAGGGAGGCGTGGCCTGGGCGGGACTGGGGAGTGGCGAGCCCTCAGATCCTGCATATAAGCAGCTGCTTTTTGCCTGTACTGGGTCTCTCTGGTTAGACCAGATCTGAGCCTGGGAGCTCTCTGGCTAACTAGGGAACCCACTGCTTAAGCCTCAATAAAGCTTGCCTTGAGTGCTTCAAGTAGTGTGTGCCCGTCTGTTGTGTGACTCTGGTAACTAGAGATCCCTCAGACCCTTTTAGTCAGTGTGGAAAATCTCTAGCAGTGGCGCCCGAACAGGGACCTGAAAGCGAAAGGGAAACCAGAGGAGCTCTCTCGACGCAGGACTCGGCTTGCTGAAGCGCGCACGGCAAGAGGCGAGGGGCGGCGACTGGTGAGTACGCCAAAAATTTTGACTAGCGGAGGCTAGAAGGAGAGAGATGGGTGCGAGAGCGTCAGTATTAAGCGGGGGAGAATTAGATCGATGGGAAAAAATTCGGTTAAGGCCAGGGGGAAAGAAAAAATATAAATTAAAACATATAGTATGGGCAAGCAGGGAGCTAGAACGATTCGCAGTTAATCCTGGCCTGTTAGAAACATCAGAAGGCTGTAGACAAATACTGGGACAGCTACAACCATCCCTTCAGACAGGATCAGAAGAACTTAGATCATTATATAATACAGTAGCAACCCTCTATTGTGTGCATCAAAGGATAGAGATAAAAGACACCAAGGAAGCTTTAGACAAGATAGAGGAAGAGCAAAACAAAAGTAAGAAAAAAGCACAGCAAGCAGCAGCTGACACAGGACACAGCAATCAGGTCAGCCAAAATTACCCTATAGTGCAGAACATCCAGGGGCAAATGGTACATCAGGCCATATCACCTAGAACTTTAAATGCATGGGTAAAAGTAGTAGAAGAGAAGGCTTTCAGCCCAGAAGTGATACCCATGTTTTCAGCATTATCAGAAGGAGCCACCCCACAAGATTTAAACACCATGCTAAACACAGTGGGGGGACATCAAGCAGCCATGCAAATGTTAAAAGAGACCATCAATGAGGAAGCTGCAGAATGGGATAGAGTGCATCCAGTGCATGCAGGGCCTATTGCACCAGGCCAGATGAGAGAACCAAGGGGAAGTGACATAGCAGGAACTACTAGTACCCTTCAGGAACAAATAGGATGGATGACAAATAATCCACCTATCCCAGTAGGAGAAATTTATAAAAGATGGATAATCCTGGGATTAAATAAAATAGTAAGAATGTATAGCCCTACCAGCATTCTGGACATAAGACAAGGACCAAAGGAACCCTTTAGAGACTATGTAGACCGGTTCTATAAAACTCTAAGAGCCGAGCAAGCTTCACAGGAGGTAAAAAATTGGATGACAGAAACCTTGTTGGTCCAAAATGCGAACCCAGATTGTAAGACTATTTTAAAAGCATTGGGACCAGCGGCTACACTAGAAGAAATGATGACAGCATGTCAGGGAGTAGGAGGACCCGGCCATAAGGCAAGAGTTTTGGCTGAAGCAATGAGCCAAGTAACAAATTCAGCTACCATAATGATGCAGAGAGGCAATTTTAGGAACCAAAGAAAGATTGTTAAGTGTTTCAATTGTGGCAAAGAAGGGCACACAGCCAGAAATTGCAGGGCCCCTAGGAAAAAGGGCTGTTGGAAATGTGGAAAGGAAGGACACCAAATGAAAGATTGTACTGAGAGACAGGCTAATTTTTTAGGGAAGATCTGGCCTTCCTACAAGGGAAGGCCAGGGAATTTTCTTCAGAGCAGACCAGAGCCAACAGCCCCACCAGAAGAGAGCTTCAGGTCTGGGGTAGAGACAACAACTCCCCCTCAGAAGCAGGAGCCGATAGACAAGGAACTGTATCCTTTAACTTCCCTCAGGTCACTCTTTGGCAACGACCCCTCGTCACAATAAAGATAGGGGGGCAACTAAAGGAAGCTCTATTAGATACAGGAGCAGATGATACAGTATTAGAAGAAATGAGTTTGCCAGGAAGATGGAAACCAAAAATGATAGGGGGAATTGGAGGTTTTATCAAAGTAAGACAGTATGATCAGATACTCATAGAAATCTGTGGACATAAAGCTATAGGTACAGTATTAGTAGGACCTACACCTGTCAACATAATTGGAAGAAATCTGTTGACTCAGATTGGTTGCACTTTAAATTTTCCCATTAGCCCTATTGAGACTGTACCAGTAAAATTAAAGCCAGGAATGGATGGCCCAAAAGTTAAACAATGGCCATTGACAGAAGAAAAAATAAAAGCATTAGTAGAAATTTGTACAGAGATGGAAAAGGAAGGGAAAATTTCAAAAATTGGGCCTGAAAATCCATACAATACTCCAGTATTTGCCATAAAGAAAAAAGACAGTACTAAATGGAGAAAATTAGTAGATTTCAGAGAACTTAATAAGAGAACTCAAGACTTCTGGGAAGTTCAATTAGGAATACCACATCCCGCAGGGTTAAAAAAGAAAAAATCAGTAACAGTACTGGATGTGGGTGATGCATATTTTTCAGTTCCCTTAGATGAAGACTTCAGGAAGTATACTGCATTTACCATACCTAGTATAAACAATGAGACACCAGGGATTAGATATCAGTACAATGTGCTTCCACAGGGATGGAAAGGATCACCAGCAATATTCCAAAGTAGCATGACAAAAATCTTAGAGCCTTTTAGAAAACAAAATCCAGACATAGTTATCTATCAATACATGGATGATTTGTATGTAGGATCTGACTTAGAAATAGGGCAGCATAGAACAAAAATAGAGGAGCTGAGACAACATCTGTTGAGGTGGGGACTTACCACACCAGACAAAAAACATCAGAAAGAACCTCCATTCCTTTGGATGGGTTATGAACTCCATCCTGATAAATGGACAGTACAGCCTATAGTGCTGCCAGAAAAAGACAGCTGGACTGTCAATGACATACAGAAGTTAGTGGGGAAATTGAATTGGGCAAGTCAGATTTACCCAGGGATTAAAGTAAGGCAATTATGTAAACTCCTTAGAGGAACCAAAGCACTAACAGAAGTAATACCACTAACAGAAGAAGCAGAGCTAGAACTGGCAGAAAACAGAGAGATTCTAAAAGAACCAGTACATGGAGTGTATTATGACCCATCAAAAGACTTAATAGCAGAAATACAGAAGCAGGGGCAAGGCCAATGGACATATCAAATTTATCAAGAGCCATTTAAAAATCTGAAAACAGGAAAATATGCAAGAATGAGGGGTGCCCACACTAATGATGTAAAACAATTAACAGAGGCAGTGCAAAAAATAACCACAGAAAGCATAGTAATATGGGGAAAGACTCCTAAATTTAAACTGCCCATACAAAAGGAAACATGGGAAACATGGTGGACAGAGTATTGGCAAGCCACCTGGATTCCTGAGTGGGAGTTTGTTAATACCCCTCCCTTAGTGAAATTATGGTACCAGTTAGAGAAAGAACCCATAGTAGGAGCAGAAACCTTCTATGTAGATGGGGCAGCTAACAGGGAGACTAAATTAGGAAAAGCAGGATATGTTACTAATAGAGGAAGACAAAAAGTTGTCACCCTAACTGACACAACAAATCAGAAGACTGAGTTACAAGCAATTTATCTAGCTTTGCAGGATTCGGGATTAGAAGTAAACATAGTAACAGACTCACAATATGCATTAGGAATCATTCAAGCACAACCAGATCAAAGTGAATCAGAGTTAGTCAATCAAATAATAGAGCAGTTAATAAAAAAGGAAAAGGTCTATCTGGCATGGGTACCAGCACACAAAGGAATTGGAGGAAATGAACAAGTAGATAAATTAGTCAGTGCTGGAATCAGGAAAGTACTATTTTTAGATGGAATAGATAAGGCCCAAGATGAACATGAGAAATATCACAGTAATTGGAGAGCAATGGCTAGTGATTTTAACCTGCCACCTGTAGTAGCAAAAGAAATAGTAGCCAGCTGTGATAAATGTCAGCTAAAAGGAGAAGCCATGCATGGACAAGTAGACTGTAGTCCAGGAATATGGCAACTAGATTGTACACATTTAGAAGGAAAAGTTATCCTGGTAGCAGTTCATGTAGCCAGTGGATATATAGAAGCAGAAGTTATTCCAGCAGAAACAGGGCAGGAAACAGCATATTTTCTTTTAAAATTAGCAGGAAGATGGCCAGTAAAAACAATACATACTGACAATGGCAGCAATTTCACCGGTGCTACGGTTAGGGCCGCCTGTTGGTGGGCGGGAATCAAGCAGGAATTTGGAATTCCCTACAATCCCCAAAGTCAAGGAGTAGTAGAATCTATGAATAAAGAATTAAAGAAAATTATAGGACAGGTAAGAGATCAGGCTGAACATCTTAAGACAGCAGTACAAATGGCAGTATTCATCCACAATTTTAAAAGAAAAGGGGGGATTGGGGGGTACAGTGCAGGGGAAAGAATAGTAGACATAATAGCAACAGACATACAAACTAAAGAATTACAAAAACAAATTACAAAAATTCAAAATTTTCGGGTTTATTACAGGGACAGCAGAAATCCACTTTGGAAAGGACCAGCAAAGCTCCTCTGGAAAGGTGAAGGGGCAGTAGTAATACAAGATAATAGTGACATAAAAGTAGTGCCAAGAAGAAAAGCAAAGATCATTAGGGATTATGGAAAACAGATGGCAGGTGATGATTGTGTGGCAAGTAGACAGGATGAGGATTAGAACATGGAAAAGTTTAGTAAAACACCATATGTATGTTTCAGGGAAAGCTAGGGGATGGTTTTATAGACATCACTATGAAAGCCCTCATCCAAGAATAAGTTCAGAAGTACACATCCCACTAGGGGATGCTAGATTGGTAATAACAACATATTGGGGTCTGCATACAGGAGAAAGAGACTGGCATTTGGGTCAGGGAGTCTCCATAGAATGGAGGAAAAAGAGATATAGCACACAAGTAGACCCTGAACTAGCAGACCAACTAATTCATCTGTATTACTTTGACTGTTTTTCAGACTCTGCTATAAGAAAGGCCTTATTAGGACACATAGTTAGCCCTAGGTGTGAATATCAAGCAGGACATAACAAGGTAGGATCTCTACAATACTTGGCACTAGCAGCATTAATAACACCAAAAAAGATAAAGCCACCTTTGCCTAGTGTTACGAAACTGACAGAGGATAGATGGAACAAGCCCCAGAAGACCAAGGGCCACAGAGGGAGCCACACAATGAATGGACACTAGAGCTTTTAGAGGAGCTTAAGAATGAAGCTGTTAGACATTTTCCTAGGATTTGGCTCCATGGCTTAGGGCAACATATCTATGAAACTTATGGGGATACTTGGGCAGGAGTGGAAGCCATAATAAGAATTCTGCAACAACTGCTGTTTATCCATTTTCAGAATTGGGTGTCGACATAGCAGAATAGGCGTTACTCGACAGAGGAGAGCAAGAAATGGAGCCAGTAGATCCTAGACTAGAGCCCTGGAAGCATCCAGGAAGTCAGCCTAAAACTGCTTGTACCAATTGCTATTGTAAAAAGTGTTGCTTTCATTGCCAAGTTTGTTTCATAACAAAAGCCTTAGGCATCTCCTATGGCAGGAAGAAGCGGAGACAGCGACGAAGAGCTCATCAGAACAGTCAGACTCATCAAGCTTCTCTATCAAAGCAGTAAGTAGTACATGTAACGCAACCTATACCAATAGTAGCAATAGTAGCATTAGTAGTAGCAATAATAATAGCAATAGTTGTGTGGTCCATAGTAATCATAGAATATAGGAAAATATTAAGACAAAGAAAAATAGACAGGTTAATTGATAGACTAATAGAAAGAGCAGAAGACAGTGGCAATGAGAGTGAAGGAGAAATATCAGCACTTGTGGAGATGGGGGTGGAGATGGGGCACCATGCTCCTTGGGATGTTGATGATCTGTAGTGCTACAGAAAAATTGTGGGTCACAGTCTATTATGGGGTACCTGTGTGGAAGGAAGCAACCACCACTCTATTTTGTGCATCAGATGCTAAAGCATATGATACAGAGGTACATAATGTTTGGGCCACACATGCCTGTGTACCCACAGACCCCAACCCACAAGAAGTAGTATTGGTAAATGTGACAGAAAATTTTAACATGTGGAAAAATGACATGGTAGAACAGATGCATGAGGATATAATCAGTTTATGGGATCAAAGCCTAAAGCCATGTGTAAAATTAACCCCACTCTGTGTTAGTTTAAAGTGCACTGATTTGAAGAATGATACTAATACCAATAGTAGTAGCGGGAGAATGATAATGGAGAAAGGAGAGATAAAAAACTGCTCTTTCAATATCAGCACAAGCATAAGAGGTAAGGTGCAGAAAGAATATGCATTTTTTTATAAACTTGATATAATACCAATAGATAATGATACTACCAGCTATAAGTTGACAAGTTGTAACACCTCAGTCATTACACAGGCCTGTCCAAAGGTATCCTTTGAGCCAATTCCCATACATTATTGTGCCCCGGCTGGTTTTGCGATTCTAAAATGTAATAATAAGACGTTCAATGGAACAGGACCATGTACAAATGTCAGCACAGTACAATGTACACATGGAATTAGGCCAGTAGTATCAACTCAACTGCTGTTAAATGGCAGTCTAGCAGAAGAAGAGGTAGTAATTAGATCTGTCAATTTCACGGACAATGCTAAAACCATAATAGTACAGCTGAACACATCTGTAGAAATTAATTGTACAAGACCCAACAACAATACAAGAAAAAGAATCCGTATCCAGAGAGGACCAGGGAGAGCATTTGTTACAATAGGAAAAATAGGAAATATGAGACAAGCACATTGTAACATTAGTAGAGCAAAATGGAATAACACTTTAAAACAGATAGCTAGCAAATTAAGAGAACAATTTGGAAATAATAAAACAATAATCTTTAAGCAATCCTCAGGAGGGGACCCAGAAATTGTAACGCACAGTTTTAATTGTGGAGGGGAATTTTTCTACTGTAATTCAACACAACTGTTTAATAGTACTTGGTTTAATAGTACTTGGAGTACTGAAGGGTCAAATAACACTGAAGGAAGTGACACAATCACCCTCCCATGCAGAATAAAACAAATTATAAACATGTGGCAGAAAGTAGGAAAAGCAATGTATGCCCCTCCCATCAGTGGACAAATTAGATGTTCATCAAATATTACAGGGCTGCTATTAACAAGAGATGGTGGTAATAGCAACAATGAGTCCGAGATCTTCAGACCTGGAGGAGGAGATATGAGGGACAATTGGAGAAGTGAATTATATAAATATAAAGTAGTAAAAATTGAACCATTAGGAGTAGCACCCACCAAGGCAAAGAGAAGAGTGGTGCAGAGAGAAAAAAGAGCAGTGGGAATAGGAGCTTTGTTCCTTGGGTTCTTGGGAGCAGCAGGAAGCACTATGGGCGCAGCCTCAATGACGCTGACGGTACAGGCCAGACAATTATTGTCTGGTATAGTGCAGCAGCAGAACAATTTGCTGAGGGCTATTGAGGCGCAACAGCATCTGTTGCAACTCACAGTCTGGGGCATCAAGCAGCTCCAGGCAAGAATCCTGGCTGTGGAAAGATACCTAAAGGATCAACAGCTCCTGGGGATTTGGGGTTGCTCTGGAAAACTCATTTGCACCACTGCTGTGCCTTGGAATGCTAGTTGGAGTAATAAATCTCTGGAACAGATTTGGAATCACACGACCTGGATGGAGTGGGACAGAGAAATTAACAATTACACAAGCTTAATACACTCCTTAATTGAAGAATCGCAAAACCAGCAAGAAAAGAATGAACAAGAATTATTGGAATTAGATAAATGGGCAAGTTTGTGGAATTGGTTTAACATAACAAATTGGCTGTGGTATATAAAATTATTCATAATGATAGTAGGAGGCTTGGTAGGTTTAAGAATAGTTTTTGCTGTACTTTCTATAGTGAATAGAGTTAGGCAGGGATATTCACCATTATCGTTTCAGACCCACCTCCCAACCCCGAGGGGACCCGACAGGCCCGAAGGAATAGAAGAAGAAGGTGGAGAGAGAGACAGAGACAGATCCATTCGATTAGTGAACGGATCCTTGGCACTTATCTGGGACGATCTGCGGAGCCTGTGCCTCTTCAGCTACCACCGCTTGAGAGACTTACTCTTGATTGTAACGAGGATTGTGGAACTTCTGGGACGCAGGGGGTGGGAAGCCCTCAAATATTGGTGGAATCTCCTACAGTATTGGAGTCAGGAACTAAAGAATAGTGCTGTTAGCTTGCTCAATGCCACAGCCATAGCAGTAGCTGAGGGGACAGATAGGGTTATAGAAGTAGTACAAGGAGCTTGTAGAGCTATTCGCCACATACCTAGAAGAATAAGACAGGGCTTGGAAAGGATTTTGCTATAAGATGGGTGGCAAGTGGTCAAAAAGTAGTGTGATTGGATGGCCTACTGTAAGGGAAAGAATGAGACGAGCTGAGCCAGCAGCAGATAGGGTGGGAGCAGCATCTCGAGACCTGGAAAAACATGGAGCAATCACAAGTAGCAATACAGCAGCTACCAATGCTGCTTGTGCCTGGCTAGAAGCACAAGAGGAGGAGGAGGTGGGTTTTCCAGTCACACCTCAGGTACCTTTAAGACCAATGACTTACAAGGCAGCTGTAGATCTTAGCCACTTTTTAAAAGAAAAGGGGGGACTGGAAGGGCTAATTCACTCCCAAAGAAGACAAGATATCCTTGATCTGTGGATCTACCACACACAAGGCTACTTCCCTGATTAGCAGAACTACACACCAGGGCCAGGGGTCAGATATCCACTGACCTTTGGATGGTGCTACAAGCTAGTACCAGTTGAGCCAGATAAGATAGAAGAGGCCAATAAAGGAGAGAACACCAGCTTGTTACACCCTGTGAGCCTGCATGGGATGGATGACCCGGAGAGAGAAGTGTTAGAGTGGAGGTTTGACAGCCGCCTAGCATTTCATCACGTGGCCCGAGAGCTGCATCCGGAGTACTTCAAGAACTGCTGACATCGAGCTTGCTACAAGGGACTTTCCGCTGGGGACTTTCCAGGGAGGCGTGGCCTGGGCGGGACTGGGGAGTGGCGAGCCCTCAGATCCTGCATATAAGCAGCTGCTTTTTGCCTGTACTGGGTCTCTCTGGTTAGACCAGATCTGAGCCTGGGAGCTCTCTGGCTAACTAGGGAACCCACTGCTTAAGCCTCAATAAAGCTTGCCTTGAGTGCTTCAAGTAGTGTGTGCCCGTCTGTTGTGTGACTCTGGTAACTAGAGATCCCTCAGACCCTTTTAGTCAGTGTGGAAAATCTCTAGCA';\r\nconst WATERMARK : any = 'data:image/png;base64,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';\r\nexport { REFERENCE, HBX2, WATERMARK };","import { Injectable } from '@angular/core';\r\nimport * as d3 from 'd3';\r\n\r\n/**\r\n * A dedicated service for node, link, polygon color mapping.\r\n * It is \"pure\" in that it does NOT own or mutate your session object.\r\n * Instead, it expects all required data (arrays, color config, etc.)\r\n * as method parameters and returns color scales or any updated arrays.\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ColorMappingService {\r\n\r\n  constructor() {}\r\n\r\n  /**\r\n   * Creates a node color-mapping scale based on a specified \"nodeColorVariable\"\r\n   * and a set of node items. Rather than referencing session or temp directly,\r\n   * we accept them as parameters.\r\n   *\r\n   * @param nodes An array of node objects\r\n   * @param nodeColorVariable The property name used to categorize node colors\r\n   * @param nodeColors The current palette of colors (e.g. d3.schemeCategory10)\r\n   * @param nodeAlphas The array of alpha (transparency) values\r\n   * @param nodeColorsTable existing table of (variable -> list of assigned colors)\r\n   * @param nodeColorsTableKeys existing table of (variable -> keys domain)\r\n   * @param nodeColorsTableHistory used to persist color assignments over time\r\n   * @param debugMode to enable/disable console logging\r\n   * @returns an object containing:\r\n   *    {\r\n   *      aggregates: Record<string, number>;\r\n   *      colorMap: d3.ScaleOrdinal<string, string>;\r\n   *      alphaMap: d3.ScaleOrdinal<string, number>;\r\n   *      updatedNodeColors: string[];   // possibly expanded to handle more categories\r\n   *      updatedNodeAlphas: number[];   // same as above\r\n   *      updatedColorsTable: any;       // the updated nodeColorsTable\r\n   *      updatedColorsTableKeys: any;   // the updated nodeColorsTableKeys\r\n   *      updatedColorsTableHistory: any;// updated nodeColorsTableHistory\r\n   *    }\r\n   */\r\n  public createNodeColorMap(\r\n    nodes: any[],\r\n    nodeColorVariable: string,\r\n    nodeColors: string[],\r\n    nodeAlphas: number[],\r\n    nodeColorsTable: any,\r\n    nodeColorsTableKeys: any,\r\n    nodeColorsTableHistory: any,\r\n    debugMode: boolean\r\n  ): {\r\n    aggregates: Record<string, number>;\r\n    colorMap: d3.ScaleOrdinal<string, string>;\r\n    alphaMap: d3.ScaleOrdinal<string, number>;\r\n    updatedNodeColors: string[];\r\n    updatedNodeAlphas: number[];\r\n    updatedColorsTable: any;\r\n    updatedColorsTableKeys: any;\r\n    updatedColorsTableHistory: any;\r\n  } {\r\n\r\n    // If user hasn't chosen a variable, just return a single uniform color mapping\r\n    if (nodeColorVariable === 'None') {\r\n      const uniformMap = () => nodeColors[0] || '#1f77b4';\r\n      return {\r\n        aggregates: {},\r\n        colorMap: d3.scaleOrdinal([uniformMap()]).domain([]),\r\n        alphaMap: d3.scaleOrdinal([1]).domain([]),\r\n        updatedNodeColors: nodeColors,\r\n        updatedNodeAlphas: nodeAlphas,\r\n        updatedColorsTable: nodeColorsTable,\r\n        updatedColorsTableKeys: nodeColorsTableKeys,\r\n        updatedColorsTableHistory: nodeColorsTableHistory\r\n      };\r\n    }\r\n\r\n    if (debugMode) {\r\n      console.log('[createNodeColorMap] Starting with variable =', nodeColorVariable);\r\n    }\r\n\r\n    // Make sure the color tables exist\r\n    const updatedColorsTable = nodeColorsTable || {};\r\n    const updatedColorsTableKeys = nodeColorsTableKeys || {};\r\n    let updatedNodeColors = [...nodeColors];  // we may expand this array\r\n    let updatedNodeAlphas = [...nodeAlphas];  // same reason\r\n    let updatedColorsTableHistory = nodeColorsTableHistory || { 'null': '#EAE553' };\r\n\r\n    // If we already have a stored array of colors for this particular variable\r\n    // (like \"nodeColorsTable[myVariable]\"), lets reuse them\r\n    if (!updatedColorsTable[nodeColorVariable]) {\r\n      updatedColorsTable[nodeColorVariable] = updatedNodeColors;\r\n    } else {\r\n      updatedNodeColors = [...updatedColorsTable[nodeColorVariable]];\r\n    }\r\n\r\n    // Compute aggregates by scanning all node values\r\n    const aggregates: Record<string, number> = {};\r\n    nodes.forEach(d => {\r\n      const val = d[nodeColorVariable];\r\n      if (!d.visible) {\r\n        // If node is not visible, you can decide to skip or do aggregates[val] = 0;\r\n        return;\r\n      }\r\n      aggregates[val] = (aggregates[val] || 0) + 1;\r\n    });\r\n\r\n    const distinctValues = Object.keys(aggregates);\r\n\r\n    // Expand color array if needed\r\n    if (distinctValues.length > updatedNodeColors.length) {\r\n      let expandedColors: string[] = [];\r\n      let neededTimes = Math.ceil(distinctValues.length / updatedNodeColors.length);\r\n      while (neededTimes-- > 0) {\r\n        expandedColors = expandedColors.concat(updatedNodeColors);\r\n      }\r\n      updatedNodeColors = expandedColors;\r\n    }\r\n\r\n    // Expand alpha array if needed\r\n    if (distinctValues.length > updatedNodeAlphas.length) {\r\n      updatedNodeAlphas = updatedNodeAlphas.concat(\r\n        new Array(distinctValues.length - updatedNodeAlphas.length).fill(1)\r\n      );\r\n    }\r\n\r\n    // Maintain color history to keep consistent color assignment\r\n    const historyKeys = Object.keys(updatedColorsTableHistory);\r\n\r\n    // For each distinct value, see if we have a color in the history\r\n    distinctValues.forEach((val, i) => {\r\n      const indexInHistory = historyKeys.indexOf(val);\r\n      if (indexInHistory !== -1) {\r\n        // We previously assigned a color to this value\r\n        updatedNodeColors[i] = updatedColorsTableHistory[val];\r\n      } else {\r\n        // Not in history -> record it\r\n        updatedColorsTableHistory[val] = updatedNodeColors[i];\r\n      }\r\n      if (val === 'null') {\r\n        updatedNodeColors[i] = '#EAE553';\r\n      }\r\n    });\r\n\r\n    // We store this updated array back into the table\r\n    updatedColorsTableKeys[nodeColorVariable] = distinctValues;\r\n    updatedColorsTable[nodeColorVariable] = updatedNodeColors;\r\n\r\n    // Create the scale functions\r\n    const colorMap = d3\r\n      .scaleOrdinal<string, string>(updatedNodeColors)\r\n      .domain(distinctValues);\r\n\r\n    const alphaMap = d3\r\n      .scaleOrdinal<string, number>(updatedNodeAlphas)\r\n      .domain(distinctValues);\r\n\r\n    if (debugMode) {\r\n      console.log('[createNodeColorMap] Done. Distinct values:', distinctValues);\r\n    }\r\n\r\n    return {\r\n      aggregates,\r\n      colorMap,\r\n      alphaMap,\r\n      updatedNodeColors,\r\n      updatedNodeAlphas,\r\n      updatedColorsTable,\r\n      updatedColorsTableKeys,\r\n      updatedColorsTableHistory\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Very similar approach for Link Color Mapping\r\n   */\r\n  public createLinkColorMap(\r\n    links: any[],\r\n    linkColorVariable: string,\r\n    linkColors: string[],\r\n    linkAlphas: number[],\r\n    linkColorsTable: any,\r\n    linkColorsTableKeys: any,\r\n    debugMode: boolean\r\n  ): {\r\n    aggregates: Record<string, number>;\r\n    colorMap: d3.ScaleOrdinal<string, string>;\r\n    alphaMap: d3.ScaleOrdinal<string, number>;\r\n    updatedLinkColors: string[];\r\n    updatedLinkAlphas: number[];\r\n    updatedLinkColorsTable: any;\r\n    updatedLinkColorsTableKeys: any;\r\n  } {\r\n    \r\n\r\n    // If user hasn't chosen a variable\r\n    if (linkColorVariable === 'None') {\r\n      const uniformLinkColor = linkColors[0] || '#a6cee3';\r\n      return {\r\n        aggregates: {},\r\n        colorMap: d3.scaleOrdinal([uniformLinkColor]).domain([]),\r\n        alphaMap: d3.scaleOrdinal([1]).domain([]),\r\n        updatedLinkColors: linkColors,\r\n        updatedLinkAlphas: linkAlphas,\r\n        updatedLinkColorsTable: linkColorsTable,\r\n        updatedLinkColorsTableKeys: linkColorsTableKeys\r\n      };\r\n    }\r\n    \r\n\r\n    if (debugMode) {\r\n      console.log('[createLinkColorMap] Starting, var =', linkColorVariable);\r\n    }\r\n\r\n    const updatedLinkColorsTable = linkColorsTable || {};\r\n    const updatedLinkColorsTableKeys = linkColorsTableKeys || {};\r\n    let updatedLinkColors = [...linkColors];\r\n    let updatedLinkAlphas = [...linkAlphas];\r\n\r\n    // If no existing color array for the chosen link variable\r\n    if (!updatedLinkColorsTable[linkColorVariable]) {\r\n      updatedLinkColorsTable[linkColorVariable] = updatedLinkColors;\r\n    } else {\r\n      updatedLinkColors = [...updatedLinkColorsTable[linkColorVariable]];\r\n    }\r\n\r\n    let multiLinkCount = 0; // Initialize Multi-Link count\r\n\r\n    // Collect aggregates\r\n    const aggregates: Record<string, number> = {};\r\n    links.forEach(l => {\r\n      if (!l.visible) return;\r\n      if (linkColorVariable.toLowerCase() === 'origin') {\r\n        // If origin is an array of strings\r\n        l.origin.forEach(o => {\r\n          aggregates[o] = (aggregates[o] || 0) + 1;\r\n        });\r\n\r\n        // Count Multi-Links separately\r\n        if (l.origin.length == 2) {  \r\n            multiLinkCount++;\r\n        }\r\n\r\n      } else {\r\n        const val = l[linkColorVariable];\r\n        aggregates[val] = (aggregates[val] || 0) + 1;\r\n      }\r\n    });\r\n\r\n    // Add Multi-Link to aggregates if it exists\r\n    if (multiLinkCount > 0) {\r\n        aggregates[\"Duo-Link\"] = multiLinkCount;\r\n    }\r\n\r\n    // Adjust counts for other links by subtracting Multi-Link count\r\n    Object.keys(aggregates).forEach(key => {\r\n        if (key !== \"Duo-Link\") {\r\n            aggregates[key] -= multiLinkCount; // Subtract Multi-Link count\r\n        }\r\n    });\r\n\r\n    const distinctValues = Object.keys(aggregates);\r\n\r\n\r\n\r\n    // Possibly handle multi-link or other specifics if needed\r\n    // For now, we skip that for clarity. If needed, you can replicate your duo-link logic.\r\n\r\n    // Expand link colors if needed\r\n    if (distinctValues.length > updatedLinkColors.length) {\r\n      let expandedColors: string[] = [];\r\n      let neededTimes = Math.ceil(distinctValues.length / updatedLinkColors.length);\r\n      while (neededTimes-- > 0) {\r\n        expandedColors = expandedColors.concat(updatedLinkColors);\r\n      }\r\n      updatedLinkColors = expandedColors;\r\n    }\r\n\r\n    // Expand link alphas if needed\r\n    if (distinctValues.length > updatedLinkAlphas.length) {\r\n      updatedLinkAlphas = updatedLinkAlphas.concat(\r\n        new Array(distinctValues.length - updatedLinkAlphas.length).fill(1)\r\n      );\r\n    }\r\n\r\n    updatedLinkColorsTableKeys[linkColorVariable] = distinctValues;\r\n    updatedLinkColorsTable[linkColorVariable] = updatedLinkColors;\r\n\r\n    const colorMap = d3\r\n      .scaleOrdinal<string, string>(updatedLinkColors)\r\n      .domain(distinctValues);\r\n\r\n    const alphaMap = d3\r\n      .scaleOrdinal<string, number>(updatedLinkAlphas)\r\n      .domain(distinctValues);\r\n\r\n    if (debugMode) {\r\n      console.log('[createLinkColorMap] Done. Distinct values:', distinctValues);\r\n    }\r\n\r\n    return {\r\n      aggregates,\r\n      colorMap,\r\n      alphaMap,\r\n      updatedLinkColors,\r\n      updatedLinkAlphas,\r\n      updatedLinkColorsTable,\r\n      updatedLinkColorsTableKeys\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Example: A polygon color map for grouping clusters or polygons, if relevant.\r\n   */\r\n  public createPolygonColorMap(\r\n    polygonGroups: { key: string, index?: number, values: any[] }[],\r\n    polygonColors: string[],\r\n    polygonAlphas: number[],\r\n    debugMode: boolean\r\n  ): {\r\n    colorMap: d3.ScaleOrdinal<string, string>;\r\n    alphaMap: d3.ScaleOrdinal<string, number>;\r\n    updatedPolygonColors: string[];\r\n    updatedPolygonAlphas: number[];\r\n  } {\r\n\r\n    // If no polygon groups, treat as uniform color\r\n    if (!polygonGroups || polygonGroups.length === 0) {\r\n      return {\r\n        colorMap: d3.scaleOrdinal([ polygonColors[0] || '#bbccee' ]).domain([]),\r\n        alphaMap: d3.scaleOrdinal([ 0.5 ]).domain([]),\r\n        updatedPolygonColors: polygonColors,\r\n        updatedPolygonAlphas: polygonAlphas\r\n      };\r\n    }\r\n\r\n    const distinctValues = polygonGroups.sort((a, b) => b.values.length - a.values.length).map(g => `${g.key}`);\r\n    polygonGroups.forEach((group, index) => group.index = index);\r\n\r\n    let updatedPolygonColors = [...polygonColors];\r\n    let updatedPolygonAlphas = [...polygonAlphas];\r\n\r\n    // Expand if necessary\r\n    if (distinctValues.length > updatedPolygonColors.length) {\r\n      let expanded: string[] = [];\r\n      let neededTimes = Math.ceil(distinctValues.length / updatedPolygonColors.length);\r\n      while (neededTimes-- > 0) {\r\n        expanded = expanded.concat(updatedPolygonColors);\r\n      }\r\n      updatedPolygonColors = expanded;\r\n    }\r\n    if (distinctValues.length > updatedPolygonAlphas.length) {\r\n      updatedPolygonAlphas = updatedPolygonAlphas.concat(\r\n        new Array(distinctValues.length - updatedPolygonAlphas.length).fill(0.5)\r\n      );\r\n    }\r\n\r\n    const colorMap = d3\r\n      .scaleOrdinal<string, string>(updatedPolygonColors)\r\n      .domain(distinctValues);\r\n    const alphaMap = d3\r\n      .scaleOrdinal<string, number>(updatedPolygonAlphas)\r\n      .domain(distinctValues);\r\n\r\n    if (debugMode) {\r\n      console.log('[createPolygonColorMap] done. Distinct values:', distinctValues);\r\n    }\r\n\r\n    return {\r\n      colorMap,\r\n      alphaMap,\r\n      updatedPolygonColors,\r\n      updatedPolygonAlphas\r\n    };\r\n  }\r\n\r\n  /**\r\n   * If you had a contrastColor function, just keep it simple:\r\n   */\r\n  public contrastColor(hexcolor: string): string {\r\n    const r = parseInt(hexcolor.substr(1, 2), 16);\r\n    const g = parseInt(hexcolor.substr(3, 2), 16);\r\n    const b = parseInt(hexcolor.substr(5, 2), 16);\r\n    const yiq = r * 299 + g * 587 + b * 114;\r\n    return yiq >= 128000 ? '#000000' : '#ffffff';\r\n  }\r\n\r\n}","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Subject } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CommonStoreService {\r\n\r\n  // ----------------------------\r\n  // State Subjects\r\n  // ----------------------------\r\n\r\n  private _linkThreshold$ = new BehaviorSubject<number>(0.015);\r\n  linkThreshold$ = this._linkThreshold$.asObservable();\r\n\r\n  private _networkRendered$ = new BehaviorSubject<boolean>(false);\r\n  networkRendered$ = this._networkRendered$.asObservable();\r\n\r\n  private _loadingMessageUpdated$ = new BehaviorSubject<string>('');\r\n  loadingMessageUpdated$ = this._loadingMessageUpdated$.asObservable();\r\n\r\n  private _networkUpdated$ = new BehaviorSubject<boolean>(false);\r\n  networkUpdated$ = this._networkUpdated$.asObservable();\r\n\r\n  private _settingsLoaded$ = new BehaviorSubject<boolean>(false);\r\n  settingsLoaded$ = this._settingsLoaded$.asObservable();\r\n\r\n  private _metricChanged$ = new BehaviorSubject<string>(null);\r\n  metricChanged$ = this._metricChanged$.asObservable();\r\n\r\n  private _sessionDestroyed$ = new BehaviorSubject<boolean>(false);\r\n  sessionDestroyed$ = this._sessionDestroyed$.asObservable();\r\n\r\n  private _newSession$ = new BehaviorSubject<boolean>(false);\r\n  newSession$ = this._newSession$.asObservable();\r\n\r\n  private _styleFileApplied$ = new Subject<void>();\r\n  styleFileApplied$ = this._styleFileApplied$.asObservable();\r\n\r\n  private _tableCleared$ = new BehaviorSubject<string>(null);\r\n  tableCleared$ = this._tableCleared$.asObservable();\r\n\r\n  private _statisticsChanged$ = new BehaviorSubject<string>(null);\r\n  statisticsChanged$ = this._statisticsChanged$.asObservable();\r\n\r\n  private _FP_removeFiles$ = new BehaviorSubject<boolean>(null);\r\n  FP_removeFiles$ = this._FP_removeFiles$.asObservable();\r\n\r\n  private currentThresholdStepSize: Number = 0.001;\r\n\r\n  private _clusterUpdate$ = new Subject<void>();\r\n  clusterUpdate$ = this._clusterUpdate$.asObservable();\r\n\r\n  constructor() {}\r\n\r\n  /**\r\n   * Generic update method that emits a new value only if it differs\r\n   * from the current value.\r\n   */\r\n  private updateValue<T>(subject: BehaviorSubject<T>, newValue: T): void {\r\n    if (subject.value !== newValue) {\r\n      subject.next(newValue);\r\n    }\r\n  }\r\n\r\n  triggerClusterUpdate() {\r\n    this._clusterUpdate$.next();\r\n  }\r\n\r\n  // ----------------------------\r\n  // Getters & Setters\r\n  // ----------------------------\r\n  get linkThresholdValue(): number {\r\n    return this._linkThreshold$.value;\r\n  }\r\n  setLinkThreshold(newThreshold: number): void {\r\n    this.updateValue(this._linkThreshold$, newThreshold);\r\n  }\r\n\r\n  get networkRenderedValue(): boolean {\r\n    return this._networkRendered$.value;\r\n  }\r\n  setNetworkRendered(isRendered: boolean): void {\r\n    this.updateValue(this._networkRendered$, isRendered);\r\n  }\r\n\r\n  get loadingMessageUpdatedValue(): string {\r\n    return this._loadingMessageUpdated$.value;\r\n  }\r\n  setLoadingMessageUpdated(message: string): void {\r\n    this.updateValue(this._loadingMessageUpdated$, message);\r\n  }\r\n\r\n  get networkUpdatedValue(): boolean {\r\n    return this._networkUpdated$.value;\r\n  }\r\n  setNetworkUpdated(isUpdated: boolean): void {\r\n    this.updateValue(this._networkUpdated$, isUpdated);\r\n  }\r\n\r\n  get settingsLoadedValue(): boolean {\r\n    return this._settingsLoaded$.value;\r\n  }\r\n  setSettingsLoaded(loaded: boolean): void {\r\n    this.updateValue(this._settingsLoaded$, loaded);\r\n  }\r\n\r\n  get metricChangedValue(): string {\r\n    return this._metricChanged$.value;\r\n  }\r\n  setMetricChanged(newMetric: string): void {\r\n    this.updateValue(this._metricChanged$, newMetric);\r\n  }\r\n\r\n  get sessionDestroyedValue(): boolean {\r\n    return this._sessionDestroyed$.value;\r\n  }\r\n  setSessionDestroyed(value: boolean): void {\r\n    this.updateValue(this._sessionDestroyed$, value);\r\n  }\r\n\r\n  get newSessionValue(): boolean {\r\n    return this._newSession$.value;\r\n  }\r\n  setNewSession(value: boolean): void {\r\n    this.updateValue(this._newSession$, value);\r\n  }\r\n\r\n  setStyleFileApplied(): void {\r\n    this._styleFileApplied$.next();\r\n  }\r\n\r\n  get tableClearedValue(): string {\r\n    return this._tableCleared$.value;\r\n  }\r\n  setTableCleared(value: string): void {\r\n    this.updateValue(this._tableCleared$, value);\r\n  }\r\n\r\n  get statisticsChangedValue(): string {\r\n    return this._statisticsChanged$.value;\r\n  }\r\n  setStatisticsChanged(value: string): void {\r\n    this.updateValue(this._statisticsChanged$, value);\r\n  }\r\n\r\n  get FP_removeFilesValue(): boolean {\r\n    return this._FP_removeFiles$.value;\r\n  }\r\n  setFP_removeFiles(value: boolean): void {\r\n    this.updateValue(this._FP_removeFiles$, value);\r\n  }\r\n\r\n  updatecurrentThresholdStepSize(distanceMetric: string) {\r\n    this.currentThresholdStepSize = distanceMetric === 'snps' ? 1 : 0.001\r\n}\r\n  get currentThresholdStepSizeValue(): Number {\r\n    return this.currentThresholdStepSize;\r\n  }\r\n\r\n}","import { Injectable, OnInit, Output, EventEmitter, Injector, Directive } from '@angular/core';\r\nimport { BehaviorSubject, Observable, firstValueFrom } from 'rxjs';\r\nimport * as d3 from 'd3';\r\nimport * as patristic from 'patristic';\r\nimport * as Papa from 'papaparse';\r\nimport * as _ from 'lodash';\r\nimport moment from 'moment';\r\nimport { WorkerModule } from '../workers/workModule';\r\nimport { LocalStorageService } from '@shared/utils/local-storage.service';\r\nimport AuspiceHandler from '@app/helperClasses/auspiceHandler';\r\nimport { AppComponentBase } from '@shared/common/app-component-base';\r\nimport { StashObjects, StashObject } from '../helperClasses/interfaces';\r\nimport { MicrobeTraceNextVisuals } from '../microbe-trace-next-plugin-visuals';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { GraphData } from '@app/visualizationComponents/TwoDComponent/data';\r\nimport { CommonStoreService } from './common-store.services';\r\nimport { REFERENCE, HBX2, WATERMARK } from '@app/constants/longStrings.constants';\r\nimport { ColorMappingService } from './color-mapping.service';\r\nimport { WorkerComputeService } from './worker-compute.service';\r\n\r\n@Directive()\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class CommonService extends AppComponentBase implements OnInit {\r\n\r\n    @Output() LoadViewEvent = new EventEmitter();\r\n\r\n    decoder: any = new TextDecoder('utf-8');\r\n    r01: any = Math.random;\r\n\r\n    thresholdHistogram: any;\r\n\r\n    computer: WorkerModule;\r\n\r\n    activeTab: string = 'Files';\r\n\r\n    thirtyColorPalette: string[] = [\r\n        \"#3998f5\", \"#f22020\", \"#b732cc\", \"#f47a22\", \"#0ec434\", \"#96341c\", \r\n        \"#8ad8e8\", \"#f07cab\", \"#235b54\", \"#ffcba5\", \"#772b9d\", \"#29bdab\", \r\n        \"#ffc413\", \"#d30b94\", \"#201923\", \"#7dfc00\", \"#3750db\", \"#946aa2\",\r\n        \"#edeff3\", \"#fcff5d\", \"#632819\", \"#228c68\",  \"#277da7\", \"#37294f\",\r\n        \"#991919\", \"#e68f66\", \"#c3a5b4\", \"#2f2aa0\", \"#c56133\", \"#5d4c86\"]\r\n    polygonPalette: string[] = ['#353cac', '#fdbe3d', '#41ba97', '#9e0f1e', '#303030', '#62a5e4', '#a13eda', '#f4e41c', '#75d054', '#f22020'] ;\r\n\r\n    // Set this to true to enable the debug mode/console logs to appear\r\n    public debugMode: boolean = false;\r\n\r\n    private linkElementSource = new BehaviorSubject<HTMLElement | null>(null);\r\n    private nodeElementSource = new BehaviorSubject<HTMLElement | null>(null);\r\n\r\n    currentLinkTableElement = this.linkElementSource.asObservable();\r\n\r\n    currentNodeTableElement = this.nodeElementSource.asObservable();\r\n\r\n\r\n    setLinkTableElement(element: HTMLElement | null) {\r\n        this.linkElementSource.next(element);\r\n    }\r\n\r\n    setNodeTableElement(element: HTMLElement | null) {\r\n        this.nodeElementSource.next(element);\r\n    }\r\n\r\n\r\n    // Using lodash's debounce, for example\r\n    public _debouncedUpdateNetworkVisuals = _.debounce(() => {\r\n        this.updateNetworkVisuals();\r\n    }, 300);\r\n\r\n    GlobalSettingsModel: any = {\r\n        SelectedColorNodesByVariable: 'None',\r\n        SelectedColorLinksByVariable: 'None',\r\n        SelectedNodeColorVariable: 'None',\r\n        SelectedLinkColorVariable: '#a6cee3',\r\n        SelectedPruneWithTypesVariable: 'None',\r\n        SelectedStatisticsTypesVariable: 'Hide',\r\n        SelectedClusterMinimumSizeVariable: 0,\r\n        SelectedLinkSortVariable: 'Distance',\r\n        SelectedLinkThresholdVariable: 0.015,\r\n        SelectedDistanceMetricVariable: 'tn93',\r\n        SelectedLinkColorTableTypesVariable: 'Hide',\r\n        SelectedNodeColorTableTypesVariable: 'Hide',\r\n\r\n        SelectedColorVariable: '#ff8300',\r\n        SelectedBackgroundColorVariable: '#ffffff',\r\n        SelectedApplyStyleVariable: '',\r\n        SelectedRevealTypesVariable: 'Everything'\r\n    };\r\n\r\n    // check for not interfering with networks outside of inital demo\r\n    demoNetworkRendered: boolean = false;\r\n\r\n    /**\r\n     * Returns an object that will eventually be filled with data. It is accessed throught commonService.session.data\r\n     * It will store a list of nodes, links, and clusters as well as fields that can be used for each\r\n     */\r\n    dataSkeleton = () => {\r\n        return {\r\n            nodes: [],\r\n            links: [],\r\n            unoNodes: [],\r\n            unoLinks: [],\r\n            clusters: [],\r\n            nodeFields: [\r\n                'index',\r\n                '_id',\r\n                'selected',\r\n                'cluster',\r\n                'visible',\r\n                'degree',\r\n                'origin'\r\n            ],\r\n            nodeExclusions: [],\r\n            linkFields: [\r\n                'index',\r\n                'source',\r\n                'target',\r\n                'distance',\r\n                'visible',\r\n                'cluster',\r\n                'origin',\r\n                'nn',\r\n                'directed'\r\n            ],\r\n            clusterFields: [\r\n                'id',\r\n                'nodes',\r\n                'links',\r\n                'sum_distances',\r\n                'links_per_node',\r\n                'mean_genetic_distance',\r\n                'visible'\r\n            ],\r\n            nodeFilter: {},\r\n            linkFilter: {},\r\n            clusterFilter: {},\r\n            nodeFilteredValues: [],\r\n            linkFilteredValues: [],\r\n            clusterFilteredValues: [],\r\n            nodeTableColumns: [],\r\n            linkTableColumns: [],\r\n            clusterTableColumns: [],\r\n            tree: {},\r\n            newickString: '',\r\n            reference: REFERENCE\r\n        };\r\n\r\n    };\r\n\r\n    watermark: any = WATERMARK;\r\n    HXB2: any = HBX2\r\n    /**\r\n     * @returns an object that stores the common widgets/settings used throughout MicrobeTrace\r\n     */\r\n    defaultWidgets = () => {\r\n        return {\r\n            '3DNet-link-tooltip-variable': 'None',\r\n            '3DNet-link-transparency': 0,\r\n            '3DNet-link-width': 1.6,\r\n            '3DNet-node-tooltip-variable': '_id',\r\n            '3DNet-node-radius': 4,\r\n            '3DNet-node-radius-variable': 'None',\r\n            'align-sw': false,\r\n            'align-none': true,\r\n            'alignView-charSetting': 'hide',\r\n            'alignView-colorSchemeName': 'n',\r\n            'alignView-customColorScheme': {\r\n                'A': '#ccff00',\r\n                'C': '#ffff00',\r\n                'G': '#ff9900',\r\n                'T': '#ff6600',\r\n                'ambig': '#ffffff',\r\n            },\r\n            'alignView-labelField': '_id',\r\n            'alignView-rulerMinorInterval': 50,\r\n            'alignView-selectedSize': 's',\r\n            'alignView-showMiniMap': true,\r\n            'alignView-sortField': 'index',\r\n            'alignView-spanWidth': 10,\r\n            'alignView-spanHeight': 16,\r\n            'alignView-topDisplay': 'barplot',\r\n            'ambiguity-resolution-strategy': 'AVERAGE',\r\n            'ambiguity-threshold': 0.015,\r\n            'background-color': '#ffffff',\r\n            'background-color-contrast': '#000000',\r\n            'bubble-x': 'cluster',\r\n            'bubble-y': 'None',\r\n            'bubble-charge': 0.05,\r\n            'bubble-size': 20,\r\n            'bubble-collapsed': false,\r\n            'choropleth-aggregate-as': 'states',\r\n            'choropleth-aggregate-on': 'None',\r\n            'choropleth-basemap-show': false,\r\n            'choropleth-color-high': '#800026',\r\n            'choropleth-color-low': '#ffffcc',\r\n            'choropleth-color-medium': '#fd8d3c',\r\n            'choropleth-satellite-show': false,\r\n            'choropleth-transparency': 0.3,\r\n            'cluster-minimum-size': 1,\r\n            'default-view': '2D Network', // 'Phylogenetic Tree' 'Alignment View'\r\n            'default-distance-metric': 'tn93',\r\n            'filtering-epsilon': -8,\r\n            'flow-showNodes': 'selected',\r\n            'gantt-date-list': '',\r\n            'globe-countries-show': false,\r\n            'globe-field-lat': 'None',\r\n            'globe-field-lon': 'None',\r\n            'globe-field-tract': 'None',\r\n            'globe-field-zipcode': 'None',\r\n            'globe-field-county': 'None',\r\n            'globe-field-state': 'None',\r\n            'globe-field-country': 'None',\r\n            'globe-link-show': true,\r\n            'globe-link-transparency': 0,\r\n            'globe-node-jitter': -2,\r\n            'globe-node-show': true,\r\n            'globe-node-transparency': 0,\r\n            'globe-stars-show': true,\r\n            'heatmap-invertX': false,\r\n            'heatmap-invertY': false,\r\n            'heatmap-color-high': '#a50026',\r\n            'heatmap-color-medium': '#ffffbf',\r\n            'heatmap-color-low': '#313695',\r\n            'heatmap-axislabels-show': false,\r\n            'histogram-axis-x': true,\r\n            'histogram-scale-log': false,\r\n            'histogram-variable': 'links-distance',\r\n            'infer-directionality-false': true,\r\n            'link-color': '#a6cee3',\r\n            'link-color-table-counts': true,\r\n            'link-color-table-frequencies': false,\r\n            'link-color-variable': 'None',\r\n            'link-directed': false,\r\n            'link-bidirectional': false,\r\n            'link-label-variable': 'None',\r\n            'link-label-decimal-length' : 3,\r\n            'link-length': 50,\r\n            'link-opacity': 0,\r\n            'link-show-nn': false,\r\n            'link-sort-variable': 'distance',\r\n            'link-threshold': 0.015,\r\n            'link-tooltip-variable': ['None'],\r\n            'link-width': 3,\r\n            \"link-width-max\":27,\r\n            \"link-width-min\":3,\r\n            'link-width-variable': 'None',\r\n            'link-width-reciprocal': false,\r\n            'link-origin-array-order': [],\r\n            'map-basemap-show': true,\r\n            'map-collapsing-on': true,\r\n            'map-counties-show': false,\r\n            'map-countries-show': false,\r\n            'map-field-lat': 'None',\r\n            'map-field-lon': 'None',\r\n            'map-field-tract': 'None',\r\n            'map-field-zipcode': 'None',\r\n            'map-field-county': 'None',\r\n            'map-field-state': 'None',\r\n            'map-field-country': 'None',\r\n            'map-link-show': true,\r\n            'map-link-tooltip-variable': 'None',\r\n            'map-link-transparency': 0,\r\n            'map-node-jitter': -2,\r\n            'map-node-show': true,\r\n            'map-node-tooltip-variable': '_id',\r\n            'map-node-transparency': 0,\r\n            'map-satellite-show': false,\r\n            'map-states-show': true,\r\n            \"mst-computed\": false,\r\n            'network-friction': 0.4,\r\n            'network-gravity': 0.05,\r\n            'network-link-strength': 0.124,\r\n            'node-charge': 200,\r\n            'node-border-width' : 2.0,\r\n            'node-color': '#1f77b4',\r\n            'node-color-table-counts': true,\r\n            'node-color-table-frequencies': false,\r\n            'node-color-variable': 'None',\r\n            'node-highlight': false,\r\n            'node-label-size': 16,\r\n            'node-label-variable': 'None',\r\n            'node-label-orientation': 'Right',\r\n            'node-opacity' : 0,\r\n            'node-radius': 20,\r\n            'node-radius-variable': 'None',\r\n            \"node-radius-min\": 15,\r\n            \"node-radius-max\": 85,\r\n            'node-symbol': 'ellipse',\r\n            'node-symbol-table-counts': true,\r\n            'node-symbol-table-frequencies': false,\r\n            'node-symbol-variable': 'None',\r\n            'node-symbol-table-visible': 'Hide',\r\n            'node-timeline-variable' : 'None',\r\n            'node-tooltip-variable': ['_id'],\r\n            'physics-tree-branch-type': 'Straight',\r\n            'physics-tree-charge': 30,\r\n            'physics-tree-friction': 0.05,\r\n            'physics-tree-gravity': 0.05,\r\n            'physics-tree-lateral-strength': 0.025,\r\n            'physics-tree-layout': 'Horizontal',\r\n            'physics-tree-node-label-variable': 'None',\r\n            'physics-tree-tooltip': 'id',\r\n            'physics-tree-type': 'tree',\r\n            'polygon-color': '#bbccee',\r\n            'polygon-color-table-name-sort': 'DESC',\r\n            'polygon-color-table-counts-sort': 'DESC',\r\n            'polygon-color-table-counts': true,\r\n            'polygon-color-table-frequencies': false,\r\n            'polygons-color-show': false,\r\n            'polygons-foci': 'cluster',\r\n            'polygons-gather-force': 0,\r\n            'polygons-label-show' : false,\r\n            'polygon-label-orientation' : 'top',\r\n            'polygons-label-size' : 16,\r\n            'polygons-show' : false,\r\n            'polygon-color-table-visible': false,\r\n            'reference-source-file': true,\r\n            'reference-source-first': false,\r\n            'reference-source-consensus': false,\r\n            'scatterplot-xVar': 'index',\r\n            'scatterplot-yVar': 'distance',\r\n            'scatterplot-logScale': false,\r\n            'scatterplot-showNodes': false,\r\n            'search-field': '_id',\r\n            'selected-color': '#ff8300',\r\n            'selected-color-contrast': '#000000',\r\n            'selected-node-stroke-color': '#ff8300',\r\n            'selected-node-stroke-width': '4px',\r\n            'timeline-date-field': 'None',\r\n            'timeline-noncumulative': true,\r\n            'tree-animation-on': true,\r\n            'tree-branch-distances-hide': true,\r\n            'tree-branch-distance-size': 12,\r\n            'tree-branch-nodes-show': false,\r\n            'tree-horizontal-stretch': 1,\r\n            'tree-layout-vertical': false,\r\n            'tree-layout-horizontal': true,\r\n            'tree-layout-circular': false,\r\n            'tree-labels-align': false,\r\n            'tree-labels-show': false,\r\n            'tree-leaf-label-show': false,\r\n            'tree-leaf-label-size': 12,\r\n            'tree-leaf-node-radius-variable': 'None',\r\n            'tree-leaf-node-show': true,\r\n            'tree-leaf-node-size': 5,\r\n            'tree-mode-square': true,\r\n            'tree-mode-smooth': false,\r\n            'tree-mode-straight': false,\r\n            'tree-round-true': false,\r\n            'tree-ruler-show': true,\r\n            'tree-tooltip-show': true,\r\n            'tree-type': 'weighted',\r\n            'tree-vertical-stretch': 1,\r\n            'triangulate-false': true,\r\n            'twoD-settings-visible': 'Hide'\r\n        };\r\n    }\r\n\r\n    /**\r\n     * @returns a session object. It has the data object, information on goldenLayout layout, widgets, as well as other settings\r\n     */   \r\n    sessionSkeleton = () => {\r\n        return {\r\n            data: this.dataSkeleton(),\r\n            files: [],\r\n            layout: {\r\n                content: [\r\n                    {\r\n                        type: 'files'\r\n                    }\r\n                ],\r\n                type: 'stack'\r\n            },\r\n            messages: [],\r\n            tabLoaded: false,\r\n            meta: {\r\n                loadTime: 0,\r\n                readyTime: Date.now(),\r\n                startTime: 0,\r\n                anySequences: false\r\n            },\r\n            network: {\r\n                allPinned: false,\r\n                timelinePinned : false,\r\n                nodes: [],\r\n                timelineNodes: [],\r\n                initialLoad: false,\r\n                launched : false,\r\n                isFullyLoaded: false,\r\n                rendered: false,\r\n                rendering: false,\r\n                settingsLoaded: false,\r\n            },\r\n            state: {\r\n                timeStart: 0,\r\n                timeEnd: new Date(),\r\n                timeTarget: null\r\n            },\r\n            style: {\r\n                linkAlphas: [1],\r\n                linkColors: d3.schemePaired,\r\n                linkValueNames: {},\r\n                nodeAlphas: [1],\r\n                nodeColors: this.thirtyColorPalette,\r\n                nodeColorsTable: {},\r\n                nodeColorsTableHistory: {\r\n                    'null' : '#EAE553'\r\n                },\r\n                nodeColorsTableKeys: {},\r\n                linkColorsTable: {},\r\n                linkColorsTableKeys: {},\r\n                nodeSymbols: [\r\n                    'ellipse',\r\n                    'triangle',\r\n                    'rectangle',\r\n                    'barrel',\r\n                    'rhomboid',\r\n                    'diamond',\r\n                    'pentagon',\r\n                    'hexagon',\r\n                    'heptagon',\r\n                    'octagon',\r\n                    'star',\r\n                    'tag',\r\n                    'vee'\r\n                ],\r\n                nodeSymbolsTable: {},\r\n                nodeSymbolsTableKeys: {},\r\n                nodeValueNames: {},\r\n                polygonAlphas: [0.5],\r\n                polygonColors: this.polygonPalette,\r\n                polygonValueNames: {},\r\n                overwrite: {},\r\n                widgets: this.defaultWidgets()\r\n            },\r\n            timeline: 0 as any,\r\n            warnings: []\r\n        };\r\n    }\r\n    /**\r\n     * \r\n     * @returns object found at commonService.temp  which include a matrix for links between nodes and color/alpha mapping functions\r\n     */\r\n    tempSkeleton = () => {\r\n        return {\r\n            componentCache: {},\r\n            mapData: {},\r\n            matrix: {},\r\n            messageTimeout: null,\r\n            /* functions in style object get replaced If user decides to color a node, link, or polygon variable.\r\n             * these functions are replaced with one from the d3 package usind d3.scaleOrdinal(...).domain(...)\r\n             */\r\n            style: {\r\n                linkAlphaMap: () => 1 - this.session.style.widgets['link-opacity'],\r\n                linkColorMap: () => this.session.style.widgets['link-color'],\r\n                nodeAlphaMap: () => 1,\r\n                nodeColorMap: () => this.session.style.widgets['node-color'],\r\n                nodeSymbolMap: () => this.session.style.widgets['node-symbol'],\r\n                polygonAlphaMap: () => 0.5,\r\n                polygonColorMap: () => this.session.style.widgets['polygon-color']\r\n            },\r\n            trees: {}\r\n        };\r\n    }\r\n    temp: any = this.tempSkeleton();\r\n    session = this.sessionSkeleton();\r\n\r\n\r\n    /**\r\n     * @param injector \r\n     * @param localStorageService \r\n     * @param visuals - this injection allows users to access all the views from commonService (ie. commonService.visuals.twoD)\r\n     * @param http \r\n     */\r\n    constructor(injector: Injector,\r\n        public localStorageService: LocalStorageService,\r\n        public visuals: MicrobeTraceNextVisuals,\r\n        private http: HttpClient,\r\n        private store: CommonStoreService,\r\n        private colorMappingService: ColorMappingService,\r\n        private workerComputeService: WorkerComputeService\r\n        // private srv: GoldenLayoutService\r\n    ) {\r\n\r\n        super(injector);\r\n\r\n        //debugger;\r\n\r\n         // (window as any).context = ((window as any).context == undefined ? {} : (window as any).context);\r\n         this.computer = new WorkerModule();\r\n         this.resetData();\r\n                console.log('Constructor: Temp initialized:', this.temp);\r\n\r\n        // this.initialize();\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.initialize();\r\n    }\r\n\r\n\r\n    /**\r\n     * Sets (window as any).context.commonSerive = this; and also calls reset() which sets commonService.temp and commonService.session back to default values (except \r\n     * temp.mapData, session.files, session.meta)\r\n     */\r\n    initialize() {\r\n       \r\n        this.reset();\r\n    }\r\n\r\n    /**\r\n     * Capitalizes the first letter of a string\r\n     * @param s - Expects a string\r\n     * @returns - the string with first letter capitalized. If typeof s != string returns empty string\r\n     */\r\n    capitalize(s) {\r\n        if (typeof s !== 'string') return ''\r\n        return s.charAt(0).toUpperCase() + s.slice(1)\r\n    }\r\n\r\n\r\n    /**\r\n     * Set commonService.session and commonService.temp back to default values\r\n     */\r\n    clearData() {\r\n        this.session = this.sessionSkeleton();\r\n\r\n        this.temp = this.tempSkeleton();\r\n    }\r\n\r\n    /**\r\n     * Update Legacy Node Symbols if loading new files\r\n     */\r\n    updateLegacyNodeSymbols() {\r\n        this.session.style.nodeSymbols = [\r\n            'ellipse',\r\n            'square',\r\n            'triangle',\r\n            'hexagon',\r\n            'diamond',\r\n            'barrel',\r\n            'pentagon',\r\n            'octagon',\r\n            'star',\r\n            'tag',\r\n            'vee'\r\n        ]\r\n    }\r\n\r\n\r\n    /**\r\n     * @returns a default node object\r\n     */\r\n    defaultNode(): any {\r\n\r\n        return {\r\n            index: this.session.data.nodes.length,\r\n            _id: '',\r\n            selected: false,\r\n            cluster: 1,\r\n            visible: true,\r\n            degree: 0,\r\n            data: {},\r\n            origin: [],\r\n            hasDistance: false\r\n        }\r\n    }\r\n\r\n    public cleanupData(): void {\r\n    \r\n        this.session.data = this.sessionSkeleton().data;\r\n        this.temp = this.tempSkeleton();\r\n    \r\n        // Clear node and link storage if they are no longer needed\r\n        this.session.data.nodes = [];\r\n        this.session.data.links = [];\r\n        this.temp.matrix = {}; \r\n    \r\n        // Reset visualization states\r\n        this.session.network.isFullyLoaded = false;\r\n    }\r\n\r\n    // public cleanupWorkers(): void {\r\n    //     console.log(\"Terminating Web Workers...\");\r\n    //     if (this.computer) {\r\n    //         if (this.computer.compute_linksWorker) this.computer.compute_linksWorker.terminate();\r\n    //         if (this.computer.compute_mstWorker) this.computer.compute_mstWorker.terminate();\r\n    //         if (this.computer.compute_nnWorker) this.computer.compute_nnWorker.terminate();\r\n    //         if (this.computer.compute_directionalityWorker) this.computer.compute_directionalityWorker.terminate();\r\n    //         if (this.computer.compute_treeWorker) this.computer.compute_treeWorker.terminate();\r\n    //         if (this.computer.compute_triangulationWorker) this.computer.compute_triangulationWorker.terminate();\r\n    //         if (this.computer.compute_parse_csv_matrixWorker) this.computer.compute_parse_csv_matrixWorker.terminate();\r\n    //         if (this.computer.compute_parse_fastaWorker) this.computer.compute_parse_fastaWorker.terminate();\r\n    //     }\r\n    // }\r\n    \r\n\r\n    onNewSession() {\r\n        this.store.setNewSession(true);\r\n        this.reset();\r\n    }\r\n\r\n    onSessionDestroyed() {\r\n        this.reset();\r\n        this.store.setSessionDestroyed(true);\r\n    }\r\n\r\n    onStyleFileApplied() {\r\n        this.store.setStyleFileApplied();\r\n        \r\n    }\r\n\r\n    onTableCleared(tableId: string) {\r\n        this.store.setTableCleared(tableId);\r\n    }\r\n\r\n    onStatisticsChanged(statisticsType?: string) {\r\n        this.store.setStatisticsChanged(statisticsType);\r\n    }\r\n\r\n\r\n    /** \r\n     * XXXXX Not currently used; not sure of future use XXXXX\r\n     * @returns boolean\r\n     */\r\n    onlyUnique(value, index, self) {\r\n        return self.indexOf(value) === index;\r\n    }\r\n\r\n    /**\r\n     * Checks if an array or string contains a specified value.\r\n     * @param container - Where to search such as a []\r\n     * @param {any} value - The value to search for.\r\n     * @returns {boolean} - `true` if the `container` parameter contains the `value` parameter, and `false` otherwise.\r\n     */\r\n    includes(container: any, value: any) {\r\n        let returnValue = false;\r\n        const pos = container.indexOf(value);\r\n        if (pos >= 0) {\r\n            returnValue = true;\r\n        }\r\n\r\n        return returnValue;\r\n    };\r\n\r\n    /**\r\n     * Sanitizes user input to prevent cross-site scripting (XSS) attacks.\r\n     * @param {string|number|boolean} t - The user input to be sanitized.\r\n     * @param {boolean} [e=0 | false] - An optional parameter that specifies whether to encode the sanitized output as HTML entities.\r\n     * @returns {string} - The sanitized output.\r\n     */\r\n    filterXSS(t, e: any = 0) {\r\n        const argType: any = typeof t;\r\n        if(argType==='object'){\r\n            return JSON.stringify(t);\r\n        }\r\n        else if (argType === 'number' || argType === 'boolean') {\r\n            const tempT = t.toString();\r\n            t = tempT;\r\n        }\r\n        else if (argType != 'string' && argType != 'number')\r\n            t = '';\r\n\r\n        const i = t.replace(/javascript/gi, 'j&#97;vascript').replace(/expression/gi, 'expr&#101;ssion').replace(/onload/gi, 'onlo&#97;d').replace(/script/gi, '&#115;cript').replace(/onerror/gi, 'on&#101;rror');\r\n        return e === !0 ? i : i.replace(/>/g, '&gt;').replace(/</g, '&lt;')\r\n    };\r\n\r\n    /**\r\n     * @param {any} a an input value\r\n     * @returns {boolean} whether a is a number\r\n     */\r\n    isNumber(a: any): boolean {\r\n        return typeof a == 'number';\r\n    };\r\n\r\n    public updateNodePosition(nodeId: string, newPosition: { x: number; y: number }): void {\r\n        const nodeToUpdate = this.session.data.nodes.find(n => n._id === nodeId);\r\n    \r\n        if (nodeToUpdate) {\r\n            console.log(`[Cypress Debug] Found node ${nodeId}. Current X: ${nodeToUpdate.x}`);\r\n            \r\n            // Use the passed-in position directly\r\n            nodeToUpdate.x = newPosition.x;\r\n            nodeToUpdate.y = newPosition.y;\r\n    \r\n            console.log(`[Cypress Debug] Updated node ${nodeId}. New X: ${nodeToUpdate.x}`);\r\n        } else {\r\n            console.warn(`[Cypress Debug] Could not find node ${nodeId} to update position.`);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Adds a new node to an array of nodes.\r\n     * @param {Node} newNode - The new node to be added to the array.\r\n     * @param {boolean | null} [check=null] - An optional parameter that specifies whether to check for duplicates before adding the new node.\r\n     * @returns {number} - `1` if a new node was added to the array, `0` otherwise.\r\n     */\r\n    addNode(newNode: any, check: any = null): number {\r\n\r\n        //  If _id, set id to _id \r\n        if(newNode._id) {\r\n            if (typeof newNode._id !== 'string') {\r\n                newNode._id = newNode._id.toString();  \r\n            }  \r\n            newNode._id = newNode._id.trim();\r\n            newNode.id = newNode._id;\r\n\r\n        } else if (newNode.id) {\r\n            if (typeof newNode.id !== 'string') {\r\n                newNode.id = newNode.id.toString();  \r\n            }  \r\n            newNode.id = newNode.id.trim();\r\n            newNode._id = newNode.id;\r\n        }\r\n\r\n\r\n        if (this.session.data.nodeExclusions.indexOf(newNode._id) > -1) {\r\n            return 0;\r\n        }\r\n\r\n        if (check) {\r\n            let nodes = this.session.data.nodes;\r\n\r\n            const n = nodes.length;\r\n            for (let i = 0; i < n; i++) {\r\n                const node = nodes[i];\r\n                if (node._id == newNode._id) {\r\n                    newNode.origin = this.uniq(newNode.origin.concat(node.origin));\r\n                    Object.assign(node, newNode);\r\n                    return 0;\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n\r\n        let newElement = Object.assign(this.defaultNode(), newNode);\r\n\r\n        if (Object.prototype.hasOwnProperty.call(newNode, 'data') && Object.prototype.hasOwnProperty.call(newNode.data, 'data')) {\r\n          newElement.data = newNode.data.data;\r\n        }\r\n        this.session.data.nodes.push(newElement);\r\n\r\n        return 1;\r\n    };\r\n\r\n    /**\r\n     * Adds a new link to an array of links.\r\n     * @param {Object} newLink- The new link to be added to the array.\r\n     * @param {boolean | null} [check=null] - An optional parameter that specifies whether to check for duplicates before adding the new link.\r\n     * @returns {number} - `1` if a new link was added to the array, `0` otherwise.\r\n     */\r\n    addLink(newLink: any, check: any = true): number {\r\n\r\n\r\n    \r\n        const serv = this;\r\n        const matrix = serv.temp.matrix;\r\n\r\n        if((newLink.source === \"MZ798055\" && newLink.target === \"MZ375596\") || (newLink.source === \"MZ7375596\" && newLink.target === \"MZ798055\")){\r\n            console.log('new link 111: ', JSON.stringify(newLink));\r\n        }\r\n    \r\n        // Trim ids to remove whitespace\r\n        if (typeof newLink.source == 'number') {\r\n            newLink.source = newLink.source.toString().trim();\r\n        } else {\r\n            newLink.source = newLink.source.trim();\r\n        }\r\n        if (typeof newLink.target == 'number') {\r\n            newLink.target = newLink.target.toString().trim();\r\n        } else {\r\n            newLink.target = newLink.target.trim();\r\n        }\r\n    \r\n        if (!matrix[newLink.source]) {\r\n            matrix[newLink.source] = {};\r\n        }\r\n        if (!matrix[newLink.target]) {\r\n            matrix[newLink.target] = {};\r\n        }\r\n\r\n        // If source and target are the same, don't add the link\r\n        if (newLink.source == newLink.target) return 0;\r\n\r\n        const ids = [newLink.source, newLink.target].sort();\r\n        const id = `${ids[0]}-${ids[1]}`;\r\n\r\n        let linkIsNew = 1;\r\n\r\n        const sdlinks = serv.session.data.links;\r\n\r\n        if (matrix[newLink.source][newLink.target]) {\r\n\r\n            const oldLink = matrix[newLink.source][newLink.target];\r\n\r\n             // Ensure id is consistent during merge ---\r\n             newLink.id = oldLink.id || id; // Prefer existing ID\r\n\r\n            let myorigin = this.uniq(newLink.origin.concat(oldLink.origin));\r\n            // console.log(JSON.stringify(myorigin));\r\n\r\n            // Ensure no empty origins\r\n            myorigin = myorigin.filter(origin => origin != '');\r\n\r\n             // --- Start: Logic to manage global origin order ---\r\n            if (myorigin.length > 1) {\r\n                let globalOrder = this.session.style.widgets['link-origin-array-order'];\r\n\r\n                // If the global order hasn't been established yet OR if the current combination has more origins\r\n                // than the currently stored global order (indicating a new origin was added to this combo),\r\n                // establish/update the global order based on this link's final merged origins.\r\n                // This assumes the first time a multi-origin link is fully formed defines the order.\r\n                if (globalOrder.length === 0 || myorigin.length > globalOrder.length) {\r\n                    // Simple update: just use the current merged order.\r\n                    // If more complex order logic is needed (e.g., specific file types first), implement here.\r\n                    this.session.style.widgets['link-origin-array-order'] = [...myorigin]; // Use spread to create a new array reference\r\n                    console.log('UPDATED Global link-origin-array-order:', this.session.style.widgets['link-origin-array-order']);\r\n                }\r\n                // Ensure this link's origin uses the established global order if it matches the length\r\n                // (setLinkVisibility will handle applying it finally)\r\n                else if (myorigin.length === globalOrder.length) {\r\n                    // If lengths match, we assume it's the same combination.\r\n                    // No action needed here, setLinkVisibility will apply the global order.\r\n                } else {\r\n                    // This case (myorigin.length < globalOrder.length) might indicate an issue\r\n                    // or a different combination. Log it for debugging if needed.\r\n                    console.warn(\"Mismatched origin lengths during merge, global order might be incorrect.\", myorigin, globalOrder);\r\n                }\r\n            }\r\n\r\n            // Ensure new link keeps distance if already defined previously\r\n            if (oldLink.hasDistance) {\r\n                newLink.hasDistance = true;\r\n                newLink['distance'] = oldLink['distance'];\r\n                newLink.distanceOrigin = oldLink.distanceOrigin;\r\n            }\r\n\r\n            oldLink[\"origin\"] = myorigin;\r\n            newLink[\"origin\"] = myorigin;\r\n            // console.log(\"old link isL \" + `${JSON.stringify(oldLink)} ${JSON.stringify(newLink)}`);\r\n\r\n            // Only override if new isn't directed and old may be, and ensure its in the right direction\r\n            if(oldLink.directed) {\r\n                newLink.directed = true;\r\n                newLink.source = oldLink.source;\r\n                newLink.target = oldLink.target;\r\n            }\r\n            \r\n\r\n            _.merge(oldLink, newLink);\r\n\r\n            oldLink.origin = myorigin;\r\n\r\n\r\n            if(newLink[\"bidirectional\"]){\r\n                oldLink[\"bidirectional\"] = true;\r\n            }\r\n\r\n            linkIsNew = 0;\r\n\r\n        } else if (serv.temp.matrix[newLink.target][newLink.source]) {\r\n            console.warn(\"This scope should be unreachable. If you're using this code, something's wrong.\");\r\n            const oldLink = matrix[newLink.target][newLink.source];\r\n             // Ensure id is consistent during merge ---\r\n             newLink.id = oldLink.id || id; // Prefer existing ID\r\n\r\n            const origin = this.uniq(newLink.origin.concat(oldLink.origin));\r\n            if(origin.length > 1) {\r\n                newLink.hasDistance = true;\r\n            }\r\n            Object.assign(oldLink, newLink, { origin: origin });\r\n            linkIsNew = 0;\r\n\r\n        } else {\r\n\r\n             // Assign stableId to the new link object ---\r\n             newLink.id =  id; \r\n\r\n             if (newLink.hasDistance || newLink.origin.length > 1) {\r\n                newLink = Object.assign({\r\n                index: sdlinks.length,\r\n                source: \"\",\r\n                target: \"\",\r\n                visible: false,\r\n                cluster: 1,\r\n                origin: [],\r\n                hasDistance: true\r\n                }, newLink);\r\n            } else {\r\n                newLink = Object.assign({\r\n                index: sdlinks.length,\r\n                source: \"\",\r\n                target: \"\",\r\n                visible: false,\r\n                cluster: 1,\r\n                origin: [],\r\n                hasDistance: false\r\n                }, newLink);\r\n    \r\n            }\r\n               // Always add the new link without merging\r\n               sdlinks.push(newLink);\r\n               matrix[newLink.source][newLink.target] = newLink;\r\n               matrix[newLink.target][newLink.source] = newLink;\r\n\r\n               linkIsNew = 1;\r\n\r\n        }\r\n\r\n\r\n        if(!this.session.style.widgets['link-origin-array-order']){\r\n            this.session.style.widgets['link-origin-array-order'] = [];\r\n        }\r\n        if (newLink.origin.length > 1 && this.session.style.widgets['link-origin-array-order'].length === 0) {\r\n            this.session.style.widgets['link-origin-array-order'] = newLink.origin;\r\n        }\r\n        \r\n        if((newLink.source === \"MZ798055\" && newLink.target === \"MZ375596\") || (newLink.source === \"MZ375596\" && newLink.target === \"MZ798055\")){\r\n            console.log('new link 222: ', JSON.stringify(newLink));\r\n        }\r\n    \r\n       \r\n        return linkIsNew;\r\n\r\n        // TODO Remove when not needed\r\n        // this.session.data.linkFilteredValues = [...this.session.data.links];\r\n        // return linkIsNew;\r\n    };\r\n\r\n    /**\r\n     * Removes duplicate elements from an array.\r\n     * @param {Array} a - The array to be processed.\r\n     * @returns {Array} - The array containing only the unique elements of the input array `a`.\r\n     */\r\n    uniq(a: any) {\r\n        const seen = {};\r\n        const out = [];\r\n        const len = a.length;\r\n        let j = 0;\r\n        for (let i = 0; i < len; i++) {\r\n            const item = a[i];\r\n            if (seen[item] !== 1) {\r\n                seen[item] = 1;\r\n                out[j++] = item;\r\n            }\r\n        }\r\n        return out;\r\n    }\r\n\r\n    public getSelectedNode(nodes: any[]): any {\r\n        return nodes.find(node => node.selected);\r\n    }\r\n    \r\n\r\n    getColorByIndex( index : number ) {\r\n\r\n        let variable = this.session.style.widgets['node-color-variable'];\r\n        let color = this.session.style.widgets['node-color'];\r\n\r\n\r\n        if (variable == 'None') {\r\n\r\n            return color;\r\n\r\n        } else {\r\n\r\n            return this.temp.style.nodeColorMap( this.session.data.nodes[index][variable]);\r\n\r\n        }\r\n    }\r\n\r\n    public convertToGraphDataArray(microbeData: any): GraphData {\r\n\r\n        console.log('--- TWOD convertToGraphDataArray called');\r\n        const nodes = microbeData.nodes.map((node) => ({\r\n          ...node, // Spread existing properties\r\n          id: node._id, // Ensure the id property is set correctly\r\n          group: node.cluster,\r\n          color: this.getColorByIndex(node.index), // Add or override the color property\r\n          label: (this.session.style.widgets['node-label-variable'] === 'None') ? '' : node.label, // Ensure label is defined\r\n            nodeSize: node.nodeSize ?? 20, // Default node size\r\n            borderWidth: node.borderWidth ?? this.session.style.widgets['node-border-width'] ?? 1 // Default border width\r\n        }));\r\n      \r\n        const links = microbeData.links.map((link, i) => ({\r\n          ...link, // Spread existing properties\r\n          id : link.id, //'edge-' + i, // If \r\n          source: link.source, // Ensure source is correctly set\r\n          target: link.target, // Ensure target is correctly set\r\n          group: link.cluster ?? null, // Ensure group is set, default to null if undefined\r\n          chapter: link.distance ? link.distance.toString() : null, // Convert distance to string for chapter\r\n          linkWidth: 1,\r\n          label: link.label ?? '', // Ensure label is defined\r\n          borderWidth: link.borderWidth ?? 1 // Default border width for links\r\n        }));\r\n\r\n        console.log('--- TWOD convertToGraphDataArray end, ',links);\r\n\r\n      \r\n        return {\r\n          nodes,\r\n          links\r\n        };\r\n      }\r\n      \r\n\r\n    /**\r\n     * I think this function allows users to import an svg image into MT. Not sure if it currently works.\r\n     * @param svg \r\n     */\r\n    processSVG(svg: any) {\r\n        const nodes = [];\r\n\r\n        const $xml: any = document.getElementById(svg);\r\n        if ($xml.find('#edges').length) {\r\n            $xml.find('#nodes circle').each((i, node) => {\r\n                const $node: any = document.getElementById(node);\r\n                const gephid = $node.attr('class');\r\n                nodes.push(gephid);\r\n                this.addNode(\r\n                    {\r\n                        id: gephid + '',\r\n                        color: $node.attr('fill'),\r\n                        size: parseFloat($node.attr('r')),\r\n                        origin: ['Scraped Gephi SVG']\r\n                    },\r\n                    false\r\n                );\r\n            });\r\n            this.session.data.nodeFields.push('color');\r\n            this.session.data.nodeFields.push('size');\r\n            $xml.find('#edges path').each((i, link) => {\r\n                const $link = $(link);\r\n                const coords = $link.attr('class').split(' ');\r\n                const base = {\r\n                    source: coords[0] + '',\r\n                    target: coords[1] + '',\r\n                    color: $link.attr('stroke'),\r\n                    origin: ['Scraped MicrobeTrace SVG']\r\n                };\r\n                base[this.session.style.widgets['default-distance-metric']] = 0;\r\n                this.addLink(base, true);\r\n            });\r\n            this.session.data.linkFields.push('color');\r\n        } else {\r\n            $xml.find('.nodes g').each((i, node) => {\r\n                nodes.push(\r\n                    $(node)\r\n                        .attr('transform')\r\n                        .slice(10, -1)\r\n                        .split(',')\r\n                        .map(parseFloat)\r\n                );\r\n                this.addNode(\r\n                    {\r\n                        id: i + '',\r\n                        origin: ['Scraped SVG']\r\n                    },\r\n                    false\r\n                );\r\n            });\r\n            $xml.find('line').each((i, link) => {\r\n                const $l: any = document.getElementById(link);\r\n                const source = nodes.findIndex(d => {\r\n                    return (\r\n                        Math.abs(d[0] - parseFloat($l.attr('x1'))) < 0.0001 &&\r\n                        Math.abs(d[1] - parseFloat($l.attr('y1'))) < 0.0001\r\n                    );\r\n                });\r\n                const target = nodes.findIndex(d => {\r\n                    return (\r\n                        Math.abs(d[0] - parseFloat($l.attr('x2'))) < 0.0001 &&\r\n                        Math.abs(d[1] - parseFloat($l.attr('y2'))) < 0.0001\r\n                    );\r\n                });\r\n                if (source < 0 || target < 0) return;\r\n                const base = {\r\n                    source: source + '',\r\n                    target: target + '',\r\n                    origin: ['Scraped SVG']\r\n                };\r\n                base[this.session.style.widgets['default-distance-metric']] = 0;\r\n                this.addLink(base, true);\r\n            });\r\n        }\r\n        this.runHamsters();\r\n    };\r\n\r\n    /**\r\n     * Loads JSON, MicrobeTrace, or HivTrace files into MicrobeTrace\r\n     * @param json \r\n     * @param {string} extension file extension such as json, hivtrace, or microbetrace\r\n     */\r\n    processJSON(json: any, extension: string) {\r\n        if(this.debugMode) {\r\n            console.log(\"Trying to process JSON file\");\r\n        }\r\n        let data;\r\n        try {\r\n            if(json.result) {\r\n                data = JSON.parse(json.result);\r\n            } else {\r\n                data = JSON.parse(json);\r\n            }\r\n        } catch (error) {\r\n\r\n            // abp.notify.error(\r\n            //     'File Not Recognized! Are you certain this is a MicrobeTrace Session or HIV-TRACE Output File?'\r\n            // );\r\n            console.error(error);\r\n            return;\r\n        }\r\n        if (extension == 'microbetrace') {\r\n            this.session = this.sessionSkeleton();\r\n\r\n            return this.applySession(data);\r\n        } else {\r\n            if (data.meta && data.tree) {\r\n              // this.applyAuspice(data);\r\n            } else {\r\n              if (data.version) {\r\n                  this.applyGHOST(data);\r\n              } else {\r\n                console.log(\"Trying to load HIVTrace file\");\r\n                  this.applyHIVTrace(data);\r\n              }\r\n           }\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Updates commonService.session with information from stashObject. Variables updated include data, files, state, style, and layout.\r\n     */\r\n    async applySession(stashObject: StashObjects) {\r\n        //If anything here seems eccentric, assume it's to maintain compatibility with\r\n        //session files from older versions of MicrobeTrace.\r\n        $(\"#launch\").prop(\"disabled\", true);\r\n\r\n         // Set to false to indicate that the network is not fully loaded  as new network is launching\r\n        this.session.network.isFullyLoaded = false;\r\n\r\n        // launching new network, so set network rendered to false to start loading modal\r\n        this.store.setNetworkRendered(false);\r\n        this.store.setSettingsLoaded(false);\r\n\r\n        console.log('applySession - temp:', this.temp);\r\n\r\n        // $(document).trigger(\"stop-force-simulation\"); // stop previous network ticks so previous polygon won't show up\r\n        // $(document).off('.2d');\r\n\r\n        if(this.debugMode) {\r\n            console.log('applying session:', stashObject);\r\n        }\r\n\r\n        if(stashObject.session) {\r\n\r\n        } else {\r\n            stashObject = {\r\n                tabs : [{\r\n                    label: 'Files',\r\n                    templateRef: null,\r\n                    tabTitle: 'Files',\r\n                    isActive: true,\r\n                    componentRef: null\r\n                }],\r\n                session: stashObject\r\n            }\r\n        }\r\n\r\n        const oldSession = stashObject.session;\r\n        console.log('this.temp: ', this.temp);\r\n        this.temp.matrix = [];\r\n        this.session.files = oldSession.files;\r\n        this.session.state = oldSession.state;\r\n        this.session.style = oldSession.style;\r\n\r\n        this.session.meta.startTime = Date.now();\r\n\r\n\r\n        if(oldSession.layout) {\r\n            this.session.layout = oldSession.layout;\r\n        }\r\n\r\n        console.log('applySession called 2');\r\n        // layout.root.removeChild(layout.root.contentItems[0]);\r\n\r\n        const nodes = oldSession.data.nodes,\r\n            links = oldSession.data.links,\r\n            n = nodes.length,\r\n            m = links.length;\r\n\r\n        for (let i = 0; i < n; i++) this.addNode(nodes[i]);\r\n        for (let j = 0; j < m; j++) {\r\n            // Add distance property for files saved prior to distance visibility fix\r\n            if ((links[j].origin).includes('Genetic Distance')) {\r\n                links[j].hasDistance = true;\r\n                links[j].distanceOrigin = 'Genetic Distance';\r\n            } else if (links[j].distance && links[j].distance > 0) {\r\n                links[j].hasDistance = true;\r\n            }\r\n            this.addLink(links[j]);\r\n        }\r\n        // for (let j = 0; j < m; j++) this.addLink(links[j]);\r\n        ['nodeFields', 'linkFields', 'clusterFields', 'nodeExclusions'].forEach(v => {\r\n            if (oldSession.data[v]) this.session.data[v] = this.uniq(this.session.data[v].concat(oldSession.data[v]));\r\n        });\r\n\r\n        // TODO: See about this process data functionality.  DO we need this?\r\n        this.processData();\r\n\r\n        if (oldSession.network) this.session.network = oldSession.network;\r\n\r\n        // Set to false to indicate that the network is not fully loaded  as new network is launching\r\n        this.session.network.isFullyLoaded = false;\r\n\r\n         if (oldSession.data.geoJSONLayerName !== \"\") {\r\n            this.session.data['geoJSON'] = oldSession.data.geoJSON;\r\n            this.session.data['geoJSONLayerName'] = oldSession.data.geoJSONLayerName;\r\n        }\r\n\r\n        // previous versions of MT had bug where nodeColorsTableHistory stored jQuery events instead of color string in session file, this section resolves that bug\r\n        Object.keys(this.session.style.nodeColorsTableHistory).forEach(key => {\r\n            // if the value is an object, convert it to string \"#000000\"\r\n            if (typeof this.session.style.nodeColorsTableHistory[key] == 'object') {\r\n                this.session.style.nodeColorsTableHistory[key] = \"#000000\";\r\n            }\r\n        })\r\n\r\n        this.applyStyle(this.session.style);\r\n\r\n        console.log('applySession end');\r\n\r\n        // TODO: Review if this is necessary\r\n        // if (!links[0]['distance']) {\r\n        //     if (links[0]['tn93']) {\r\n        //         this.session.style.widgets['link-sort-variable'] = 'tn93';\r\n        //     } else {\r\n        //         this.session.style.widgets['link-sort-variable'] = 'snps';\r\n        //     }\r\n        // }\r\n        this.finishUp();\r\n\r\n    };\r\n\r\n    /**\r\n     * XXXXX Review if function is necessary XXXXX\r\n     * Sets session.data.nodeFilteredValues = session.data.nodes\r\n     * TODO:: DO WE NEED NODE FILTERED VALUES?\r\n     */\r\n    processData() {\r\n        let nodes = this.session.data.nodes;\r\n        if(this.debugMode) {\r\n            console.log('processing data: ', nodes);\r\n        }\r\n\r\n        this.session.data.nodeFilteredValues = nodes;\r\n\r\n        // TODO:: DO WE NEED THIS\r\n        //Add links for nodes with no edges\r\n        // this.uniqueNodes.forEach(x => {\r\n        //     this.commonService.addLink(Object.assign({\r\n        //         source: '' + x,\r\n        //         target: '' + x,\r\n        //         origin: origin,\r\n        //         visible: true,\r\n        //         distance: 0,\r\n        //     }, 'generated'));\r\n        // })\r\n    }\r\n\r\n    /**\r\n     * Updates session.style with information from style object parameter, also updated Link Color Map, Node Color Map, and Polygon Color Map Functions\r\n     */\r\n    applyStyle(style) {\r\n        if(this.debugMode) {\r\n            console.log('---- applying style: ', style);\r\n        }\r\n        this.session.style = style;\r\n        this.session.style.widgets = Object.assign({},\r\n            this.defaultWidgets(),\r\n            style.widgets\r\n        );\r\n\r\n        // if(this.debugMode) {\r\n            console.log('creating link/node/polygon colorMap style: ', style);\r\n        // }\r\n        this.createLinkColorMap();\r\n        this.createNodeColorMap();\r\n        this.createPolygonColorMap();\r\n\r\n        // finds id s in template/html where id=widget name, updated the value to the new value in the style file\r\n        // let $id = null;\r\n        // for (let id in this.session.style.widgets) {\r\n        //     $id = $(\"#\" + id);\r\n        //     if ($id.length > 0) {\r\n        //         if (this.includes([\"radio\", \"checkbox\"], ($id[0].type))) {\r\n        //             if (this.session.style.widgets[id]) $id.trigger(\"click\");\r\n        //         } else {\r\n        //             if (id == 'default-distance-metric') {\r\n        //                 $id.val(this.session.style.widgets[id].toLowerCase());\r\n        //                 $(\"#\" + id+'2').val(this.session.style.widgets[id].toLowerCase());\r\n        //             } else {\r\n        //                 $id.val(this.session.style.widgets[id]);\r\n        //             }                    \r\n        //         }\r\n        //     }\r\n        // }\r\n        console.log('--- applyStyle called');\r\n\r\n        this.onStyleFileApplied();\r\n\r\n        if(this.debugMode) {\r\n            console.log('---- Apply Style File Done');\r\n        }\r\n\r\n        // TODO: See if this is needed\r\n        // this.visuals.microbeTrace.homepageTabs.forEach(tab => {\r\n        //     if (tab.componentRef && tab.componentRef.instance.updateVisualization) {\r\n        //         tab.componentRef.instance.applyStyleFileSettings();\r\n        //     }\r\n        // })\r\n        // Need session applied variable since this will break restoring full microbe trace file vs loading a style file\r\n        // if (!sessionApplied) {\r\n        // // Trigger global style updates\r\n        // $(\"#node-color-variable\").trigger(\"change\");\r\n        // $(\"#node-color-border\").trigger(\"change\");\r\n        // $(\"#link-color-variable\").trigger(\"change\");\r\n        // $(\"#selected-color\").trigger(\"change\");\r\n        // $(\"#background-color\").trigger(\"change\");\r\n\r\n        // // 2d Network Specific\r\n        // $('#node-radius-variable').trigger(\"change\");\r\n        // $('#node-symbol-variable').trigger(\"change\");\r\n        // $('#node-label-variable').trigger(\"change\");\r\n        // } else {\r\n        // sessionApplied = false;\r\n        // }\r\n    };\r\n\r\n    applyHIVTrace(hivtrace) {\r\n      console.log(\"Running applyHIVTrace\");\r\n        this.resetData();\r\n        this.session.meta.startTime = Date.now();\r\n        hivtrace[\"trace_results\"][\"Nodes\"].forEach(node => {\r\n          let newNode = {\r\n            _id: node.id,\r\n            origin: \"HIVTRACE Import\",\r\n          }\r\n          if (Object.prototype.hasOwnProperty.call(node, \"patient_attributes\")){ \r\n            console.log(\"had patient_attributes\");\r\n            newNode = JSON.parse(JSON.stringify(node.patient_attributes));\r\n            Object.keys(\r\n                hivtrace[\"trace_results\"][\"Nodes\"][0][\"patient_attributes\"]\r\n            ).forEach(key => {\r\n                if (!this.session.data.nodeFields.includes(key))\r\n                    this.session.data.nodeFields.push(key);\r\n            });\r\n          }\r\n          this.addNode(newNode, false);\r\n        });\r\n        this.processData();\r\n        let n = hivtrace[\"trace_results\"][\"Edges\"].length;\r\n        let metric = this.session.style.widgets['default-distance-metric'];\r\n        for (let i = 0; i < n; i++) {\r\n            const link = hivtrace[\"trace_results\"][\"Edges\"][i];\r\n            const newLink = {\r\n                source: \"\" + link.sequences[0],\r\n                target: \"\" + link.sequences[1],\r\n                origin: [\"HIVTRACE Import\"],\r\n                visible: true\r\n            };\r\n            newLink[metric] = parseFloat(link.length);\r\n            newLink[\"distance\"] = newLink[metric];\r\n            this.addLink(newLink, false);\r\n        }\r\n        this.session.data.linkFields.push(metric);\r\n        this.runHamsters();\r\n    };\r\n\r\n    applyGHOST(ghost) {\r\n        this.session = this.sessionSkeleton();\r\n        this.session.meta.startTime = Date.now();\r\n        ghost[\"samples\"].forEach(node => {\r\n            const newNode = JSON.parse(JSON.stringify(node));\r\n            newNode.origin = [\"GHOST Import\"];\r\n            newNode.genotypes = JSON.stringify(newNode.genotypes);\r\n            newNode._id = \"\" + newNode._id;\r\n            this.addNode(newNode, false);\r\n        });\r\n        [\"genotypes\", \"group\", \"_id\", \"name\"].forEach(key => {\r\n            if (!this.session.data.nodeFields.includes(key)) {\r\n                this.session.data.nodeFields.push(key);\r\n            }\r\n        });\r\n        const links = ghost[\"links\"];\r\n        const n = links.length;\r\n        for (let i = 0; i < n; i++) {\r\n            const link = links[i];\r\n            const newLink = Object.assign({}, link, {\r\n                source: \"\" + link.source,\r\n                target: \"\" + link.target,\r\n                distance: parseFloat(link.dist),\r\n                origin: [\"GHOST Import\"],\r\n                visible: true\r\n            });\r\n            this.addLink(newLink, false);\r\n        }\r\n        [\r\n            \"density\",\r\n            \"dist\",\r\n            \"shared\",\r\n            \"src_genotype\",\r\n            \"src_haps\",\r\n            \"tgt_genotype\",\r\n            \"tgt_haps\"\r\n        ].forEach(key => {\r\n            if (!this.session.data.linkFields.includes(key))\r\n                this.session.data.linkFields.push(key);\r\n        });\r\n        this.runHamsters();\r\n    };\r\n\r\n    getURL(): string {\r\n        const params = new URLSearchParams(window.location.search);\r\n        return params.get('url');\r\n    }\r\n\r\n    applyAuspice(auspice) {\r\n      return new Promise(resolve => {\r\n        const auspiceHandler = new AuspiceHandler(this);\r\n        const auspiceData = auspiceHandler.run(auspice);\r\n        resolve(auspiceData);\r\n      });\r\n    };\r\n\r\n    openAuspiceUrl(url) {\r\n      \r\n      return new Promise(resolve => {\r\n        let auspiceDataHolder = {};\r\n        this.http.get(url).subscribe((data: Object) => {\r\n          auspiceDataHolder = {\r\n            tree: data[\"tree\"],\r\n            meta: data[\"meta\"],\r\n            version: data[\"version\"],\r\n          };\r\n          // const auspiceHandler = new AuspiceHandler(this);\r\n          // const auspiceData = auspiceHandler.run(auspiceDataHolder);\r\n          resolve(auspiceDataHolder);\r\n        });\r\n      });\r\n      this._debouncedUpdateNetworkVisuals();\r\n      this.updateStatistics();\r\n    };\r\n\r\n    /**\r\n     * Decodes the given `x` using the utf-8 TextDecoder object.\r\n     * @param {ArrayBuffer} x - The data to be decoded.\r\n     * @returns {string} - The decoded string.\r\n     */\r\n    decode(x) {\r\n        return this.decoder.decode(x);\r\n    };\r\n\r\n   /**\r\n * Asynchronously parses fasta text on another thread to generate an array of nodes with id and seq\r\n * @param {string} text fasta string\r\n * @returns {Promise<Array>} A Promise that resolves to an array of nodes with id and seq.\r\n */\r\nparseFASTA(text): Promise<any> {\r\n    return new Promise(resolve => {\r\n      const fastaWorker = this.computer.getParseFastaWorker();\r\n      fastaWorker.postMessage({ data: text });\r\n      \r\n      const sub = fastaWorker.onmessage().subscribe((response) => {\r\n        let nodes = JSON.parse(this.decode(new Uint8Array(response.data.nodes)));\r\n        if (this.debugMode) {\r\n          console.log(\"FASTA Transit time: \", (Date.now() - response.data.start).toLocaleString(), \"ms\");\r\n        }\r\n        resolve(nodes);\r\n        fastaWorker.terminate();\r\n        sub.unsubscribe();\r\n      });\r\n    });\r\n  }\r\n  \r\n\r\n    private fromWorker(worker: Worker): Observable<MessageEvent<any>> {\r\n        return new Observable(observer => {\r\n          const messageHandler = (event: MessageEvent<any>) => observer.next(event);\r\n          const errorHandler = (error: ErrorEvent) => observer.error(error);\r\n      \r\n          worker.addEventListener('message', messageHandler);\r\n          worker.addEventListener('error', errorHandler);\r\n      \r\n          // Cleanup function\r\n          return () => {\r\n            worker.removeEventListener('message', messageHandler);\r\n            worker.removeEventListener('error', errorHandler);\r\n            worker.terminate();\r\n          };\r\n        });\r\n      }\r\n\r\n    /**\r\n     * Asynchronously parses csv matrix file content and adds nodes and links to session.data\r\n     * @param {string} file content from csv matrix file\r\n     * @returns {Promise} A Promise that resolves to an object with {numberOfNodesAdded, numberOfLinksAdded, totalNumberofNodes, totalNumberofLinks}\r\n    parseCSVMatrix(file) {\r\n        return new Promise((resolve, reject) => {\r\n            let check = this.session.files.length > 1;\r\n            const origin = [file.name];\r\n            let nn = 0, nl = 0;        \r\n    \r\n            //  Create a New Worker Before Use\r\n            let compute_parse_csv_matrixWorker = this.computer.getParseCsvMatrixWorker(); //new Worker(new URL('../workers/parse-csv-matrix.worker.js', import.meta.url));\r\n    \r\n            compute_parse_csv_matrixWorker.postMessage(file.contents);\r\n    \r\n            // Convert worker messages to Observable\r\n            const workerObservable = this.fromWorker(this.computer.compute_parse_csv_matrixWorker);\r\n    \r\n            const sub = workerObservable.subscribe({\r\n                next: (response: MessageEvent<any>) => {\r\n                    const data = JSON.parse(\r\n                        this.decode(new Uint8Array(response.data.data))\r\n                    );\r\n                    console.log(\r\n                        'CSV Matrix Transit time:',\r\n                        (Date.now() - response.data.start).toLocaleString(),\r\n                        'ms'\r\n                    );              \r\n    \r\n                    const start = Date.now();\r\n                    const nodes = data.nodes;\r\n                    const tn = nodes.length;\r\n                    for (let i = 0; i < tn; i++) {\r\n                        nn += this.addNode(\r\n                            {\r\n                                _id: this.filterXSS(nodes[i]),\r\n                                origin: origin,\r\n                            },\r\n                            check\r\n                        );\r\n                    }\r\n                    const links = data.links;\r\n                    const tl = links.length;\r\n                    for (let j = 0; j < tl; j++) {\r\n                        nl += this.addLink(\r\n                            Object.assign(links[j], {\r\n                                origin: origin,\r\n                                hasDistance: true,\r\n                                distanceOrigin: origin,\r\n                            }),\r\n                            check\r\n                        );\r\n                    }\r\n    \r\n                    console.log(\r\n                        'CSV Matrix Merge time:',\r\n                        (Date.now() - start).toLocaleString(),\r\n                        'ms'\r\n                    );             \r\n    \r\n                    resolve({ nn, nl, tn, tl });\r\n    \r\n                    //  Terminate Worker After Processing\r\n                    this.computer.compute_parse_csv_matrixWorker.terminate();\r\n    \r\n                    //  Reinitialize Worker for Next Dataset\r\n                    setTimeout(() => {\r\n                        compute_parse_csv_matrixWorker = this.computer.getParseCsvMatrixWorker();\r\n                        console.log(\"Worker reinitialized for next dataset.\");\r\n                    }, 100);\r\n    \r\n                    sub.unsubscribe();\r\n                },\r\n                error: (err: ErrorEvent) => {\r\n                    console.error('Worker error:', err);\r\n                    reject(err);\r\n    \r\n                    //  Ensure Worker Terminates on Error\r\n                    this.computer.compute_parse_csv_matrixWorker.terminate();\r\n                    sub.unsubscribe();\r\n    \r\n                    //  Reinitialize Worker on Error\r\n                    setTimeout(() => {\r\n                        compute_parse_csv_matrixWorker = this.computer.getParseCsvMatrixWorker();\r\n                        console.log(\"Worker reinitialized after error.\");\r\n                    }, 100);\r\n                }\r\n            });\r\n        });\r\n    };\r\n     */\r\n\r\n    /**\r\n     * XXXXX function not currently called XXXXX\r\n     * @param auspiceData \r\n     * @returns \r\n     */\r\n    auspiceCallBack(auspiceData) {\r\n        this.clearData();\r\n        this.session = this.sessionSkeleton();\r\n        this.session.meta.startTime = Date.now();\r\n        this.session.data.tree = auspiceData['tree'];\r\n        this.session.data.newickString = auspiceData['newick'];\r\n        let nodeCount = 0;\r\n        auspiceData['nodes'].forEach(node => {\r\n            if (!/NODE0*/.exec(node.id)) {\r\n            const nodeKeys = Object.keys(node);\r\n            nodeKeys.forEach( key => {\r\n                if (this.session.data.nodeFields.indexOf(key) === -1) {\r\n                this.session.data.nodeFields.push(key);\r\n                }\r\n                if (! Object.prototype.hasOwnProperty.call(node, 'origin') ) {\r\n                node.origin = [];\r\n                }\r\n                nodeCount += this.addNode(node, true);\r\n            });\r\n            }\r\n        });\r\n        let linkCount = 0;\r\n        auspiceData['links'].forEach(link => {\r\n            linkCount += this.addLink(link, true);\r\n        });\r\n        this.runHamsters();\r\n        // this.showMessage(` - Parsed ${nodeCount} New Nodes and ${linkCount} new Links from Auspice file.`);\r\n        this.processData();\r\n        return nodeCount;\r\n    };\r\n\r\n    /**\r\n     * Generates new sequences\r\n     * ported from https://github.com/CDCgov/SeqSpawnR/blob/91d5857dbda5998839a002fbecae0f494dca960a/R/SequenceSpawner.R\r\n     * @param {string} idPrefix - prefix to label generated sequences\r\n     * @param {number} count - number of sequences to generate\r\n     * @param {number} snps - number of snps to add to a new sequence is random value from 0 - snps\r\n     * @param {string} seed -reference sequence for generating new sequences \r\n     * @returns list of objects representings seq, each seq objects has {id: string, seq: string}\r\n     */\r\n    generateSeqs(idPrefix, count?, snps?, seed?) {\r\n        const start = Date.now();\r\n        if (!count) count = 1000;\r\n        if (!snps) snps = 100;\r\n        if (!seed) seed = this.session.data.reference;\r\n\r\n        const sampleCodons = [\r\n            \"GCA\",\r\n            \"GCC\",\r\n            \"GCG\",\r\n            \"GCT\",\r\n            \"AAC\",\r\n            \"AAT\",\r\n            \"GAC\",\r\n            \"GAT\",\r\n            \"TGC\",\r\n            \"TGT\",\r\n            \"GAC\",\r\n            \"GAT\",\r\n            \"GAA\",\r\n            \"GAG\",\r\n            \"TTC\",\r\n            \"TTT\",\r\n            \"GGA\",\r\n            \"GGC\",\r\n            \"GGG\",\r\n            \"GGT\",\r\n            \"CAC\",\r\n            \"CAT\",\r\n            \"ATA\",\r\n            \"ATC\",\r\n            \"ATT\",\r\n            \"AAA\",\r\n            \"AAG\",\r\n            \"CTA\",\r\n            \"CTC\",\r\n            \"CTG\",\r\n            \"CTT\",\r\n            \"TTA\",\r\n            \"TTG\",\r\n            \"ATG\",\r\n            \"AAC\",\r\n            \"AAT\",\r\n            \"CCA\",\r\n            \"CCC\",\r\n            \"CCG\",\r\n            \"CCT\",\r\n            \"CAA\",\r\n            \"CAG\",\r\n            \"AGA\",\r\n            \"AGG\",\r\n            \"CGA\",\r\n            \"CGC\",\r\n            \"CGG\",\r\n            \"CGT\",\r\n            \"AGC\",\r\n            \"AGT\",\r\n            \"TCA\",\r\n            \"TCC\",\r\n            \"TCG\",\r\n            \"TCT\",\r\n            \"ACA\",\r\n            \"ACC\",\r\n            \"ACG\",\r\n            \"ACT\",\r\n            \"GTA\",\r\n            \"GTC\",\r\n            \"GTG\",\r\n            \"GTT\",\r\n            \"TGG\",\r\n            \"TAC\",\r\n            \"TAT\",\r\n            \"CAA\",\r\n            \"CAG\",\r\n            \"GAA\",\r\n            \"GAG\"\r\n        ];\r\n        const sampleSNPs = [\"A\", \"C\", \"G\", \"T\"];\r\n\r\n        const sample = (vec, nCodons) => {\r\n            const samples = [];\r\n            for (let x = 0; x < nCodons; x++) {\r\n                let idx = Math.floor(this.r01() * vec.length);\r\n                samples.push(vec[idx]);\r\n            }\r\n            return samples;\r\n        }\r\n\r\n        const seqs = [];\r\n\r\n        seqs.push({ id: idPrefix + \"0\", seq: seed });\r\n\r\n        while (seqs.length < count) {\r\n            // number codons to vary\r\n            let nCodons = Math.floor(this.r01() * 10) + 1;\r\n\r\n            // randomly select this many to check for existence\r\n            const randomCodonSet = sample(sampleCodons, nCodons).join(\"\");\r\n\r\n            // try again if not present\r\n            if (seqs[seqs.length - 1].seq.indexOf(randomCodonSet) == -1) continue;\r\n\r\n            // sequence to mutate\r\n            let oldseed = seqs[Math.floor(this.r01() * seqs.length)].seq;\r\n\r\n            // select codons to replace randomCodonSet\r\n            const replacementCodonSet = sample(sampleCodons, nCodons).join(\"\");\r\n\r\n            // replace codon set\r\n            let newseed = oldseed.replace(randomCodonSet, replacementCodonSet);\r\n\r\n            // add snp substitutions randomly across entire sequence\r\n            // - randomly sample addedSNP\r\n            // - randomly pick SNPS to replace\r\n            let addedSNPs = Math.floor(this.r01() * snps);\r\n            for (let j = 0; j < addedSNPs; j++) {\r\n                let randomSNP = sample(sampleSNPs, 1)[0];\r\n                let locOfSNP = Math.floor(this.r01() * seed.length);\r\n                newseed =\r\n                    newseed.substr(0, locOfSNP) + randomSNP + newseed.substr(locOfSNP + 1);\r\n            }\r\n\r\n            seqs.push({ id: idPrefix + \"\" + seqs.length, seq: newseed });\r\n        }\r\n        if(this.debugMode) {\r\n            console.log(\"Sequence spawn time:\", (Date.now() - start).toLocaleString(), 'ms');\r\n        }\r\n        return seqs;\r\n    };\r\n\r\n    // Align function using a fresh align worker\r\nalign(params): Promise<any> {\r\n    return new Promise(resolve => {\r\n      if (params.aligner === \"none\") {\r\n        return resolve(params.nodes);\r\n      }\r\n      const n = params.nodes.length;\r\n      const referenceLength = params.reference.length;\r\n      \r\n      // Get a fresh align worker.\r\n      const alignWorker = this.computer.getAlignWorker();\r\n      alignWorker.postMessage(params);\r\n      \r\n      const sub = alignWorker.onmessage().subscribe((response) => {\r\n        let subset = JSON.parse(this.decode(new Uint8Array(response.data.nodes)));\r\n        console.log(\"Alignment transit time: \", (Date.now() - response.data.start).toLocaleString(), \"ms\");\r\n        const start = Date.now();\r\n        let minPadding = Infinity;\r\n        let d = null;\r\n        for (let i = 0; i < n; i++) {\r\n          d = subset[i];\r\n          if (!d._seq) d._seq = \"\";\r\n          if (minPadding > d._padding) minPadding = d._padding;\r\n        }\r\n        for (let j = 0; j < n; j++) {\r\n          d = subset[j];\r\n          d._seq = \"-\".repeat(d._padding - minPadding) + d._seq;\r\n          if (d._seq.length > referenceLength) {\r\n            d._seq = d._seq.substring(0, referenceLength);\r\n          } else {\r\n            d._seq = d._seq.padEnd(referenceLength, \"-\");\r\n          }\r\n        }\r\n        this.session.data.nodeFields.push('_score', '_padding', '_cigar');\r\n        console.log(\"Alignment Padding time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n        resolve(subset);\r\n        \r\n        // Terminate the worker and unsubscribe.\r\n        alignWorker.terminate();\r\n        sub.unsubscribe();\r\n      });\r\n    });\r\n  }\r\n  \r\n  \r\n  // Compute consensus using a fresh consensus worker\r\n  computeConsensus(nodes = null): Promise<any> {\r\n    if (!nodes) {\r\n      nodes = this.session.data.nodes.filter(d => d.seq);\r\n    }\r\n    return new Promise(resolve => {\r\n      const consensusWorker = this.computer.getConsensusWorker();\r\n      consensusWorker.postMessage({ data: nodes });\r\n      \r\n      const sub = consensusWorker.onmessage().subscribe((response) => {\r\n        if (this.debugMode) {\r\n          console.log(\"Consensus Transit time: \", (Date.now() - response.data.start).toLocaleString(), \"ms\");\r\n        }\r\n        resolve(this.decode(new Uint8Array(response.data.consensus)));\r\n        consensusWorker.terminate();\r\n        sub.unsubscribe();\r\n      });\r\n    });\r\n  }\r\n  \r\n  \r\n  // Compute ambiguity counts using a fresh ambiguity counts worker\r\n  computeAmbiguityCounts(): Promise<void> {\r\n    return new Promise(resolve => {\r\n      let nodes = this.session.data.nodes;\r\n      let subset = nodes.filter(d => d.seq);\r\n      const subsetLength = subset.length;\r\n      \r\n      const ambiguityWorker = this.computer.getAmbiguityCountsWorker();\r\n      ambiguityWorker.postMessage(subset);\r\n      \r\n      const sub = ambiguityWorker.onmessage().subscribe((response) => {\r\n        console.log(\"Ambiguity Count Transit time: \", (Date.now() - response.data.start).toLocaleString(), \"ms\");\r\n        const start = Date.now();\r\n        const dists = new Float32Array(response.data.counts);\r\n        for (let j = 0; j < subsetLength; j++) {\r\n          nodes[subset[j].index]._ambiguity = dists[j];\r\n        }\r\n        this.session.data.nodeFields.push('_ambiguity');\r\n        console.log(\"Ambiguity Count Merge time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n        resolve();\r\n        ambiguityWorker.terminate();\r\n        sub.unsubscribe();\r\n      });\r\n    });\r\n  }\r\n  \r\n  \r\n  // Compute consensus distances using a fresh consensus worker\r\n  computeConsensusDistances(): Promise<void> {\r\n    return new Promise(resolve => {\r\n      let start = Date.now();\r\n      let nodes = this.session.data.nodes;\r\n      let nodesLength = nodes.length;\r\n      let subset = [];\r\n      for (let i = 0; i < nodesLength; i++) {\r\n        const node = nodes[i];\r\n        if (node.seq) {\r\n          subset.push({ index: i, seq: node.seq });\r\n        } else {\r\n          subset.push({ index: i, seq: \"\" });\r\n        }\r\n      }\r\n      let subsetLength = subset.length;\r\n      const consensusWorker = this.computer.getConsensusWorker();\r\n      consensusWorker.postMessage({\r\n        data: {\r\n          consensus: this.session.data['consensus'],\r\n          subset: subset,\r\n          start: start\r\n        }\r\n      });\r\n      const sub = consensusWorker.onmessage().subscribe((response) => {\r\n        const dists = new Uint16Array(response.data.dists);\r\n        console.log(\"Consensus Difference Transit time: \", (Date.now() - response.data.start).toLocaleString(), \"ms\");\r\n        start = Date.now();\r\n        for (let j = 0; j < subsetLength; j++) {\r\n          nodes[subset[j].index]._diff = dists[j];\r\n        }\r\n        this.session.data.nodeFields.push('_diff');\r\n        console.log(\"Consensus Difference Merge time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n        resolve();\r\n        consensusWorker.terminate();\r\n        sub.unsubscribe();\r\n      });\r\n    });\r\n  }\r\n  \r\n  \r\n  // Compute links using a fresh links worker\r\n  computeLinks(subset): Promise<any> {\r\n    return new Promise(resolve => {\r\n      let k = 0;\r\n      const linksWorker = this.computer.getLinksWorker();\r\n      linksWorker.postMessage({\r\n        nodes: subset,\r\n        metric: this.session.style.widgets['default-distance-metric'],\r\n        strategy: this.session.style.widgets[\"ambiguity-resolution-strategy\"],\r\n        threshold: this.session.style.widgets[\"ambiguity-threshold\"]\r\n      });\r\n      \r\n      const sub = linksWorker.onmessage().subscribe((response) => {\r\n        let dists = this.session.style.widgets['default-distance-metric'].toLowerCase() === 'snps'\r\n          ? new Uint16Array(response.data.links)\r\n          : new Float32Array(response.data.links);\r\n        \r\n        if (this.debugMode) {\r\n          console.log(\"Links Transit time: \", (Date.now() - response.data.start).toLocaleString(), \"ms\");\r\n        }\r\n        let start = Date.now();\r\n        let check = this.session.files.length > 1;\r\n        let n = subset.length;\r\n        let l = 0;\r\n        console.log('link same compute---', n);\r\n        for (let i = 0; i < n; i++) {\r\n          const sourceID = subset[i]._id;\r\n          for (let j = 0; j < i; j++) {\r\n            let targetID = subset[j]._id;\r\n            k += this.addLink({\r\n              source: sourceID,\r\n              target: targetID,\r\n              distance: dists[l++],\r\n              origin: ['Genetic Distance'],\r\n              distanceOrigin: 'Genetic Distance',\r\n              hasDistance: true,\r\n              directed: false\r\n            }, check);\r\n          }\r\n        }\r\n        if (this.debugMode) {\r\n          console.log(\"Links Merge time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n        }\r\n        resolve(k);\r\n        linksWorker.terminate();\r\n        sub.unsubscribe();\r\n      });\r\n    });\r\n  }\r\n  \r\n\r\n\r\n    hasSeq = x => {\r\n        if (x.seq && (x.seq.includes(\"a\") || x.seq.includes(\"c\") || x.seq.includes(\"g\") || x.seq.includes(\"t\") || x.seq.includes(\"A\") || x.seq.includes(\"C\") || x.seq.includes(\"G\") || x.seq.includes(\"T\"))){\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getDM(): Promise<any> {\r\n        const start = Date.now();\r\n        return new Promise(resolve => {\r\n            let labels = [];\r\n            let dm : any = '';\r\n            if (this.session.data['newick']){\r\n                let treeObj = patristic.parseNewick(this.session.data['newick']);\r\n                dm = treeObj.toMatrix();\r\n            } else {\r\n                labels = this.session.data.nodes.filter(this.hasSeq).map(d => d.id);\r\n                if (labels.length === 0) labels = this.session.data.nodes.filter(this.hasSeq).map(d => d._id);\r\n                if (labels.length === 0) labels = this.session.data.nodes.map(d => d.id);\r\n                if (labels.length === 0) labels = this.session.data.nodes.map(d => d._id);\r\n                //console.log(\"Before sorting: \" + labels);\r\n                //labels = labels.sort();\r\n                //console.log(\"After sorting: \" + labels);\r\n                let metric = this.session.style.widgets['link-sort-variable'];\r\n                const n = labels.length;\r\n                dm = new Array(n);\r\n                const m = new Array(n);\r\n                for (let i = 0; i < n; i++) {\r\n                    dm[i] = new Array(n);\r\n                    dm[i][i] = 0;\r\n                    let source = labels[i];\r\n                    let row = this.temp.matrix[source];\r\n                    if (row) {\r\n                        for (let j = 0; j < i; j++) {\r\n                            const link = row[labels[j]];\r\n                            if (link) {\r\n                                dm[i][j] = dm[j][i] = link[metric];\r\n                            } else {\r\n                                dm[i][j] = dm[j][i] = null;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // console.log('matrixx: ',  JSON.stringify(this.temp.matrix));\r\n\r\n            if(this.debugMode) {\r\n                console.log(\"DM Compute time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n            }\r\n            resolve({dm, labels});\r\n        });\r\n    };\r\n\r\n    computeTree(): Promise<any> {\r\n        if (this.debugMode) {\r\n          console.log('computing tree');\r\n        }\r\n        console.log('------------------------------------------------------');\r\n        return new Promise(resolve => {\r\n          if (this.temp.treeObj) {\r\n            return resolve(this.temp.treeObj.toNewick());\r\n          } else if (this.session.data['newick']) {\r\n            return resolve(this.session.data['newick']);\r\n          } else {\r\n            this.getDM().then(({dm, labels}) => {\r\n              // Get a fresh tree worker from the factory.\r\n              const treeWorker = this.computer.getTreeWorker();\r\n              treeWorker.postMessage({\r\n                labels: labels.length > 0 ? labels : this.session.data.nodes.filter(this.hasSeq).map(a => a._id),\r\n                matrix: dm,\r\n                round: this.session.style.widgets[\"tree-round\"]\r\n              });\r\n              const sub = treeWorker.onmessage().subscribe((response) => {\r\n                // Decode the result from the worker.\r\n                const treeObj = this.decode(new Uint8Array(response.data.tree));\r\n                const treeString = patristic.parseJSON(treeObj).toNewick();\r\n                if (this.debugMode) {\r\n                  console.log('Tree Transit time: ', (Date.now() - response.data.start).toLocaleString(), 'ms');\r\n                }\r\n                // Clean up: terminate the worker and unsubscribe.\r\n                treeWorker.terminate();\r\n                sub.unsubscribe();\r\n                return resolve(treeString);\r\n              });\r\n            });\r\n          }\r\n        });\r\n      }\r\n      \r\n\r\n      computeDirectionality(): Promise<void> {\r\n        return new Promise(resolve => {\r\n          const directionalityWorker = this.computer.getDirectionalityWorker();\r\n          directionalityWorker.postMessage({\r\n            links: this.session.data.links,\r\n            tree: this.temp.tree\r\n          });\r\n          const sub = directionalityWorker.onmessage().subscribe((response) => {\r\n            const flips = new Uint8Array(response.data.output);\r\n            if (this.debugMode) {\r\n              console.log(\"Directionality Transit time: \", (Date.now() - response.data.start).toLocaleString(), \"ms\");\r\n            }\r\n            const start = Date.now();\r\n            const n = flips.length;\r\n            for (let i = 0; i < n; i++) {\r\n              if (flips[i]) {\r\n                let fliplink = this.session.data.links[i];\r\n                let fliptemp = fliplink.source;\r\n                fliplink.source = fliplink.target;\r\n                fliplink.target = fliptemp;\r\n                fliplink.directed = true;\r\n              }\r\n            }\r\n            if (this.debugMode) {\r\n              console.log(\"Directionality Integration time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n            }\r\n            resolve();\r\n            directionalityWorker.terminate();\r\n            sub.unsubscribe();\r\n          });\r\n        });\r\n      }\r\n      \r\n\r\n      computeMST(): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n            const links = this.session.data.links;\r\n        const found = links.find(l => \r\n        (l.source === \"MZ712879\" && l.target === \"MZ745515\") ||\r\n        (l.source === \"MZ745515\" && l.target === \"MZ712879\")\r\n        );\r\n        console.log(\" common service Found link in links array?\", found);\r\n          const mstWorker = this.computer.getMSTWorker();\r\n          mstWorker.postMessage({\r\n            links: this.session.data.links,\r\n            matrix: this.temp.matrix,\r\n            epsilon: this.session.style.widgets[\"filtering-epsilon\"],\r\n            metric: this.session.style.widgets['link-sort-variable']\r\n          });\r\n          const sub = mstWorker.onmessage().subscribe((response) => {\r\n            if (response.data === \"Error\") {\r\n              return reject(\"MST washed out\");\r\n            }\r\n            const output = new Uint8Array(response.data.links);\r\n            if (this.debugMode) {\r\n              console.log(\"MST Transit time: \", (Date.now() - response.data.start).toLocaleString(), \"ms\");\r\n            }\r\n            const start = Date.now();\r\n            let links = this.session.data.links;\r\n            const numLinks = links.length;\r\n            console.log('-----setting NN');\r\n            for (let i = 0; i < numLinks; i++) {\r\n              links[i].nn = output[i] ? true : false;\r\n              if(output[i] ? true : false){\r\n                console.log('-- NN true: ', _.cloneDeep(links[i]));\r\n              }\r\n            }\r\n            if (this.debugMode) {\r\n              console.log(\"MST Merge time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n            }\r\n            resolve();\r\n            mstWorker.terminate();\r\n            sub.unsubscribe();\r\n          });\r\n        });\r\n      }\r\n      \r\n\r\n\r\n      computeNN(): Promise<void> {\r\n        return this.workerComputeService.computeNN(this.session, this.temp);\r\n      }\r\n      \r\n\r\n     public computeTriangulation() {\r\n        this.workerComputeService.computeTriangulation(this.session, this.temp, this.addLink.bind(this))\r\n        .then(() => {\r\n          // continue processing after triangulation is complete\r\n        })\r\n        .catch(error => {\r\n          console.error('Error in triangulation:', error);\r\n        });\r\n    }\r\n\r\n    async runHamsters() {\r\n\r\n        console.log('running hamsters');\r\n        if (!this.session.style.widgets['triangulate-false']) this.computeTriangulation();\r\n        // this.computeNN();\r\n        console.log('run ham computeTree');\r\n        await this.computeTree();\r\n        console.log('compute tree end');\r\n        if (!this.session.style.widgets['infer-directionality-false']) this.computeDirectionality();\r\n        this.finishUp();\r\n    };\r\n\r\n    /**\r\n     * Sets node/link values to null when they aren't present. Check each field in nodeField and linkFields, and if the key includes 'date', sets any null or empty string\r\n     * value to the min date value found. Populates options for #search-field, #link-sort-variable, #node-color-variable, #link-color-variable, set value for #default-distance-metric.\r\n     * Next calls updateThresholdHistogram, tagClusters, setClusterVisibility, setLinkVisibilty, setNodeVisibility functions. Updates network statistic table.\r\n     * Launches default view.\r\n     */\r\n    async finishUp() {\r\n\r\n        clearTimeout(this.temp.messageTimeout);\r\n\r\n        console.log('----- finishUp called');\r\n\r\n\r\n        console.log('----- finishUp -- node/link fields');\r\n\r\n        // cycles through each node and link and if variable in nodeFields/linkFields not a key for the node/link, it is added with value of null\r\n        [\"node\", \"link\"].forEach(v => {\r\n            let n = this.session.data[v + \"s\"].length;\r\n            let fields = this.session.data[v + \"Fields\"];\r\n            for (let i = 0; i < n; i++) {\r\n                let d = this.session.data[v + \"s\"][i];\r\n                fields.forEach(field => {\r\n                    if (!(field in d)) d[field] = null;\r\n                });\r\n            }\r\n        });\r\n\r\n        console.log('----- finishUp -- patch missing date fields');\r\n\r\n         // patch missing date fields to earliest date in the the data\r\n        let fields = this.session.data[\"nodeFields\"];\r\n        let nodeSkeleton = this.dataSkeleton();\r\n        let fieldsToCheck = fields.filter(f => !nodeSkeleton.nodeFields.includes(f) && f != '_ambiguity' && f != '_diff'); \r\n        let n = this.session.data.nodes.length;\r\n        let k = fieldsToCheck.length;\r\n        // for each field in fieldsToCheck (fieldsToCheck are nodeFields that are not default from dataSkeleton() and also not '_ambiguity' and not '_diff' )\r\n        for (let j = 0; j < k; j++) {\r\n            const field = fieldsToCheck[j];\r\n            const times = [];\r\n            // for each node check if node[field] is valid time and if so push to times []\r\n            for (let i = 0; i < n; i++) {\r\n                let node = this.session.data.nodes[i];\r\n                if (node[field] != null) {\r\n                    const time = moment(node[field]); \r\n                    if (time.isValid() && isNaN(node[field])) //#315\r\n                        times.push(time.toDate());\r\n                }\r\n            }\r\n\r\n            // If column has the word date in it, date expected to be in column \r\n            if (field.toLowerCase().includes(\"date\")){\r\n        \r\n                const minTime = Math.min(...times);\r\n                const minTimeString = new Date(minTime).toString();\r\n                // for each node d, if d[field] == null or empty string (\"\", \" \", \"  \" ...) set d[field] to minTimeString\r\n                this.session.data.nodes.forEach(d => {\r\n                    if (d[field] == null || (d[field] && String(d[field]).trim() == \"\") || d[field] == 'null')  {\r\n                        d[field] = minTimeString;\r\n                    } \r\n                });\r\n            }\r\n        };\r\n\r\n        // TODO:: See if this is needed\r\n        // this.foldMultiSelect();\r\n\r\n        console.log('----- finishUp -- search fields, color variable sort varialbe, distance UI');\r\n\r\n        $(\"#search-field\")\r\n            .html(this.session.data.nodeFields.map(field => '<option value=\"' + field + '\">' + this.titleize(field) + \"</option>\").join(\"\\n\"))\r\n            .val(this.session.style.widgets[\"search-field\"]);\r\n        $(\"#search-form\").css(\"display\", \"flex\");\r\n        $(\"#link-sort-variable\")\r\n            .html(this.session.data.linkFields.map(field => '<option value=\"' + field + '\">' + this.titleize(field) + \"</option>\").join(\"\\n\"))\r\n            .val(this.session.style.widgets[\"link-sort-variable\"]);\r\n        $(\"#node-color-variable\")\r\n            .html(\r\n                \"<option selected>None</option>\" +\r\n                this.session.data.nodeFields.map(field => '<option value=\"' + field + '\">' + this.titleize(field) + \"</option>\").join(\"\\n\"))\r\n            .val(this.session.style.widgets[\"node-color-variable\"]);\r\n        $(\"#default-distance-metric\")\r\n            .val(this.session.style.widgets[\"default-distance-metric\"]);\r\n        $(\"#link-color-variable\")\r\n        .html(\r\n            \"<option>None</option>\" +\r\n            this.session.data.linkFields.map(field => '<option value=\"' + field + '\">' + this.titleize(field) + \"</option>\").join(\"\\n\"))\r\n        .val(this.session.style.widgets[\"link-color-variable\"]);\r\n        try {\r\n            // TODO:: Refactoring asses need for this\r\n            // this.updateThresholdHistogram();\r\n            console.log('updateThresholdHistogram called');\r\n        } catch (error) {\r\n            console.error(error);\r\n            $(\"#loading-information-modal\").hide();\r\n        }\r\n\r\n        console.log('----- finishUp -- setLinkVisibility before updating network');\r\n\r\n        this.setLinkVisibility(true);\r\n\r\n        // $(\"#SettingsTab\").attr(\"data-target\", \"#global-settings-modal\");\r\n\r\n        console.log('----- finishUp -- updateNetworkVisuals');\r\n       \r\n        this.updateNetworkVisuals(true);\r\n\r\n        // TODO is this needed?\r\n        // setTimeout(() => {\r\n            // if(this.debugMode) {\r\n            //     console.log('ilaunching view: ',this.session.style.widgets['default-view']);\r\n            // }\r\n            // console.log('----- finishUp called Launch Emit');\r\n\r\n            // this.launchView(this.session.style.widgets['default-view']);\r\n\r\n            // TODO:: Do we need this?\r\n            //this.launchView('Aggregate');\r\n            //setTimeout(() => { $('#overlay button').click()}, 100)\r\n            // currently loading all views isn't ready and is leading to bugs where default data is seeping in when new data is loaded\r\n            //delayFunction(10, loadOtherViews) \r\n            // function convertName(s: string) {\r\n            //     // can't do alignment view yet;\r\n            //     if (s == 'geo_map') {\r\n            //         return 'Map';\r\n            //     } else if (s == 'table') {\r\n            //         return 'Table'\r\n            //     } else if (s == 'timeline') {\r\n            //         return 'Epi Curve' \r\n            //     } else if (s == '2d_network') {\r\n            //         return '2D Network'\r\n            //     } else if (s == 'sequences') {\r\n            //         //return 'Alignment View';\r\n            //         return false;\r\n            //         // need to add crosstab as well and fix alignment view; they are not being added to cs.session.layout.content;\r\n            //         // on another note it doesn't close all previous view when new data is added from overlay\r\n            //     } else if (s == 'phylogenetic_tree') {\r\n            //         return 'Phylogenetic Tree'\r\n            //     } else {\r\n            //         console.log(`view ${s} is not currently defined`);\r\n            //         return false;\r\n            //     }\r\n            // }\r\n            // async function delayFunction(x, callback) {\r\n            //     await new Promise(resolve => setTimeout(resolve, x)).then(() => {\r\n            //         callback();\r\n            //     })\r\n            // }\r\n            // async function loadOtherViews() {\r\n            //     this.session.layout.content.forEach(async view => {\r\n            //         let viewName = convertName(view.type)\r\n            //         if (view.type == this.session.style.widgets['default-view']) {\r\n            //             return;\r\n            //         } else if (viewName){\r\n            //             this.visuals.microbeTrace.Viewclick(viewName);\r\n            //         }\r\n            //         if (viewName == 'Epi Curve') {\r\n            //             this.visuals.epiCurve.viewActive = false;\r\n            //         }\r\n            //     })\r\n            //     this.visuals.microbeTrace.Viewclick(convertName( this.session.style.widgets['default-view']))\r\n            // }\r\n\r\n        // }, 1000);\r\n        $(\".hideForHIVTrace\").css(\"display\", \"flex\");\r\n        this.store.updatecurrentThresholdStepSize(this.session.style.widgets[\"default-distance-metric\"]);\r\n    };\r\n\r\n\r\n    updateNetworkVisuals(silent: boolean = false) {\r\n        let prevNumberOfVisibleClusters = this.session.data.clusters.filter(cluster => cluster.visible).length;\r\n        let prevVisNodeCount = this.session.data.clusters.filter(cluster => cluster.visible).reduce((acc, cluster) => acc + cluster.nodes, 0)\r\n        this.tagClusters().then(() => {\r\n          this.setClusterVisibility(true);\r\n          this.setNodeVisibility(true);\r\n          this.setLinkVisibility(true);\r\n          this.updateStatistics();\r\n          if (!silent) this.store.setNetworkUpdated(true);\r\n          let updatedNumberOfVisibleClusters = this.session.data.clusters.filter(cluster => cluster.visible).length;\r\n          let updatedVisNodeCount = this.session.data.clusters.filter(cluster => cluster.visible).reduce((acc, cluster) => acc + cluster.nodes, 0)\r\n          if (!silent && (prevNumberOfVisibleClusters != updatedNumberOfVisibleClusters || prevVisNodeCount != updatedVisNodeCount)) {\r\n            console.log('Triggering cluster count update')\r\n            this.store.triggerClusterUpdate();\r\n          }\r\n\r\n          console.log('---- Update network visuals end');\r\n\r\n          console.log('---- Update network visuals end isFullyLoaded: ', this.session.network.isFullyLoaded);\r\n            // If network wasn't loaded already, launch default view\r\n            if (!this.session.network.isFullyLoaded) {\r\n                this.session.meta.loadTime = Date.now() - this.session.meta.startTime;\r\n                console.log(\"Total load time Update Network:\", this.session.meta.loadTime.toLocaleString(), \"ms\");\r\n                this.launchView(this.session.style.widgets['default-view']);\r\n                console.log('---- Update network visuals end Total ');\r\n            }\r\n        //   $(document).trigger(\"node-visibility\");\r\n        //   $(document).trigger(\"network-visuals-updated\");\r\n        });\r\n      }\r\n\r\n\r\n    /**\r\n     * Gets a list of all visible node objects\r\n     * @param {boolean} [copy=false] - optional boolean value to set if you want to deepcopy the nodes\r\n     * @returns a list of node objects\r\n     */    \r\n    getVisibleNodes(copy: any = false) {\r\n        let nodes = this.session.data.nodeFilteredValues;\r\n        let n = nodes.length;\r\n        let out = [];\r\n        for (let i = 0; i < n; i++) {\r\n            const node = nodes[i];\r\n            if (node.visible) {\r\n                if (copy) {\r\n                    out.push(JSON.parse(JSON.stringify(node)));\r\n                } else {\r\n                    out.push(node);\r\n                }\r\n            }\r\n        }\r\n        return out;\r\n    };\r\n\r\n    /**\r\n     * Gets a list of all visible links objects; Similar to twoD.getVlinks(), and twoD.getLLinks()\r\n     * \r\n     * A link that has multiple origin is stored as a single object\r\n     * \r\n     * Each link's source and target are strings of the node _id\r\n     * @param {boolean} [copy=false] - optional boolean value to set if you want to deepcopy the links\r\n     * @returns a array of link objects;\r\n     */    \r\n    getVisibleLinks(copy: any = false) {\r\n        let links = this.session.data.links;\r\n        let n = links.length;\r\n        let out = [],\r\n            link = null;\r\n        if (copy) {\r\n            for (let i = 0; i < n; i++) {\r\n                link = links[i];\r\n                if (link.visible) out.push(JSON.parse(JSON.stringify(link)));\r\n            }\r\n        } else {\r\n            for (let j = 0; j < n; j++) {\r\n                link = links[j];\r\n                if (link.visible) out.push(link);\r\n            }\r\n        }\r\n        if(this.debugMode) {\r\n            console.log('get visible links: ', _.cloneDeep(out));\r\n        }\r\n        return out;\r\n    };\r\n\r\n    /**\r\n     * Gets a list of all visible cluster objects\r\n     * @param {boolean} [copy=false] - optional boolean value to set if you want to deepcopy the cluster\r\n     * @returns a list of cluster objects\r\n     */\r\n    getVisibleClusters(copy: any = false) {\r\n        let clusters = this.session.data.clusters;\r\n        if(this.debugMode) {\r\n            console.log('get vis: ', clusters);\r\n        }\r\n        const n = clusters.length;\r\n        const out = [];\r\n        let cluster = null;\r\n        if (copy) {\r\n            for (let i = 0; i < n; i++) {\r\n                cluster = clusters[i];\r\n                if (cluster.visible) out.push(JSON.parse(JSON.stringify(cluster)));\r\n            }\r\n        } else {\r\n            for (let j = 0; j < n; j++) {\r\n                cluster = clusters[j];\r\n                if (cluster.visible) out.push(cluster);\r\n            }\r\n        }\r\n        return out;\r\n    };\r\n\r\n    /**\r\n     * updates the network statistics table with number of visible nodes, visible links, clusters, and selected links\r\n     * @returns undefined\r\n     */\r\n    updateStatistics() {\r\n\r\n        if ($(\"#network-statistics-hide\").is(\":checked\")) return;\r\n        let vnodes = this.getVisibleNodes();\r\n        let vlinks = this.getVisibleLinks();\r\n        console.log('vLinksStats', vlinks.length);\r\n        let linkCount = 0;\r\n        let clusterCount = 0;\r\n        if (this.session.style.widgets[\"timeline-date-field\"] == 'None') {\r\n            linkCount = vlinks.length;\r\n            // const minSize = this.session.style.widgets['cluster-minimum-size'];\r\n            clusterCount = this.session.data.clusters.filter(\r\n              cluster => cluster.visible && cluster.nodes > 1).length;\r\n        } else {\r\n            let n = vlinks.length;\r\n            for (let i = 0; i < n; i++) {\r\n                const src = vnodes.find(d => d._id == vlinks[i].source || d.id == vlinks[i].source);\r\n                const tgt = vnodes.find(d => d._id == vlinks[i].target || d.id == vlinks[i].target);\r\n                if (src && tgt) linkCount++;\r\n            }\r\n            \r\n            n = vnodes.length;\r\n            const clusters = {};\r\n            for (let i = 0; i < n; i++) {\r\n                const id = vnodes[i].cluster;\r\n                if (clusters[id]) clusters[id]++;\r\n                else clusters[id] = 1;\r\n            }\r\n            clusterCount = this.session.data.clusters.filter(cluster => clusters[cluster.id] && clusters[cluster.id]>0 && cluster.visible && cluster.nodes > 1).length;\r\n\r\n        }\r\n        const singletons = vnodes.filter(d => d.degree == 0).length;\r\n        $(\"#numberOfSelectedNodes\").text(vnodes.filter(d => d.selected).length.toLocaleString());\r\n        $(\"#numberOfNodes\").text(vnodes.length.toLocaleString());\r\n        $(\"#numberOfVisibleLinks\").text(linkCount.toLocaleString());\r\n        $(\"#numberOfSingletonNodes\").text(singletons.toLocaleString());\r\n        $(\"#numberOfDisjointComponents\").text(clusterCount);\r\n        $(\"#currentLinkThreshold\").text(this.session.style.widgets['link-threshold'].toLocaleString());\r\n    };\r\n\r\n   /**\r\n     * Delegates creation of the node color scales to ColorMappingService.\r\n     * The rest of the code that was here (big D3 logic, etc.) is removed.\r\n     */\r\n    public createNodeColorMap() {\r\n        // 1) Gather the parameters from session & temp\r\n        const nodeColorVariable = this.session.style.widgets['node-color-variable'];\r\n        const nodes = this.session.data.nodes;\r\n        \r\n        // The arrays and tables you use to store color config\r\n        //const nodeColors = this.session.style.nodeColors;                 // e.g. [ \"#1f77b4\", ... ]\r\n        const nodeColors = this.thirtyColorPalette;\r\n        //console.log(nodeColors);\r\n        const nodeAlphas = this.session.style.nodeAlphas;                 // e.g. [ 1, 1, ... ]\r\n        const nodeColorsTable = this.session.style.nodeColorsTable;       // e.g. { varName: [ ... ] }\r\n        const nodeColorsTableKeys = this.session.style.nodeColorsTableKeys;\r\n        const nodeColorsTableHistory = this.session.style.nodeColorsTableHistory;\r\n    \r\n        // 2) Call your new colorMappingService\r\n        const result = this.colorMappingService.createNodeColorMap(\r\n        nodes,\r\n        nodeColorVariable,\r\n        nodeColors,\r\n        nodeAlphas,\r\n        nodeColorsTable,\r\n        nodeColorsTableKeys,\r\n        nodeColorsTableHistory,\r\n        this.debugMode\r\n        );\r\n    \r\n        // 3) Store the results back into session & temp\r\n        this.temp.style.nodeColorMap = result.colorMap;\r\n        this.temp.style.nodeAlphaMap = result.alphaMap;\r\n        \r\n        // And also store the updated arrays/tables\r\n        this.session.style.nodeColors          = result.updatedNodeColors;\r\n        this.session.style.nodeAlphas          = result.updatedNodeAlphas;\r\n        this.session.style.nodeColorsTable     = result.updatedColorsTable;\r\n        this.session.style.nodeColorsTableKeys = result.updatedColorsTableKeys;\r\n        this.session.style.nodeColorsTableHistory = result.updatedColorsTableHistory;\r\n    \r\n        // 4) Return the aggregates (if needed by your caller)\r\n        return result.aggregates;\r\n    }\r\n\r\n    /**\r\n\t * updates the functions that set the color and transparency of the links [commonService.temp.style.linkColorMap() and commonService.temp.style.linkAlphaMap()]\r\n\t * @returns {Object} where keys are the values to group (ie. origin A, origin B) and values are counts of the number of links for each key\r\n\t */\r\n    public createLinkColorMap() {\r\n\r\n        // 1) Gather\r\n        const linkColorVariable = this.session.style.widgets['link-color-variable'];\r\n\r\n        console.log('create link color map: ', linkColorVariable);\r\n\r\n        if (linkColorVariable == \"None\") {\r\n            this.temp.style.linkColorMap = () => this.session.style.widgets[\"link-color\"];\r\n            this.temp.style.linkAlphaMap = () => 1 - this.session.style.widgets[\"link-opacity\"];\r\n            return [];\r\n        }\r\n\r\n        const links = this.getVisibleLinks();\r\n      \r\n        let linkColors;\r\n        if( this.session.style.linkColorsTable && this.session.style.linkColorsTable[linkColorVariable]) {\r\n            linkColors =  this.session.style.linkColorsTable[linkColorVariable];\r\n        } else if (linkColorVariable == 'source' || linkColorVariable == 'target') {\r\n            this.session.style.linkColorsTable = {};\r\n            this.session.style.linkColorsTableKeys = {};\r\n            linkColors =  this.session.style.linkColorsTable[linkColorVariable] = [d3.schemeCategory10[0]].concat(d3.schemeCategory10.slice(2));\r\n            this.session.style.linkColors = [d3.schemeCategory10[0]].concat(d3.schemeCategory10.slice(2));\r\n\r\n        } else if (this.session.style.linkColors) {\r\n            this.session.style.linkColorsTable = {};\r\n            this.session.style.linkColorsTableKeys = {};\r\n            linkColors = this.session.style.linkColors;\r\n        }else {\r\n            this.session.style.linkColorsTable = {};\r\n            this.session.style.linkColorsTableKeys = {};\r\n            linkColors =  this.session.style.linkColorsTable[linkColorVariable] = d3.schemePaired;\r\n            this.session.style.linkColors = d3.schemePaired;\r\n        }\r\n        const linkAlphas = this.session.style.linkAlphas;       // e.g. [1, 1, ...]\r\n        const linkColorsTable = this.session.style.linkColorsTable;\r\n        const linkColorsTableKeys = this.session.style.linkColorsTableKeys;\r\n        \r\n        // 2) Delegate to colorMappingService\r\n        const result = this.colorMappingService.createLinkColorMap(\r\n          links,\r\n          linkColorVariable,\r\n          linkColors,\r\n          linkAlphas,\r\n          linkColorsTable,\r\n          linkColorsTableKeys,\r\n          this.debugMode\r\n        );\r\n\r\n      \r\n        // 3) Store updated scales back into session & temp\r\n        this.temp.style.linkColorMap = result.colorMap;\r\n        this.temp.style.linkAlphaMap = result.alphaMap;\r\n        \r\n        // store the updated arrays\r\n        this.session.style.linkColors       = result.updatedLinkColors;\r\n        this.session.style.linkAlphas       = result.updatedLinkAlphas;\r\n        this.session.style.linkColorsTable  = result.updatedLinkColorsTable;\r\n        this.session.style.linkColorsTableKeys = result.updatedLinkColorsTableKeys;\r\n      \r\n        console.log('create link color map 1: ', this.session.style.linkColorsTable);\r\n        console.log('create link color map 2: ', this.session.style.linkColorsTableKeys);\r\n        console.log('create link color map 3: ', this.session.style.linkColors);\r\n        console.log('create link color map 4: ', this.session.style.linkAlphas);\r\n\r\n        return result.aggregates;\r\n      }\r\n    \r\n    /**\r\n\t * updates the functions that set the color and transparency of the polygons [commonService.temp.style.polygonColorMap() and commonService.temp.style.polygonAlphaMap()]\r\n\t * @returns {Object} where keys are the values to group (ie. subtype B,C,D...) and values are counts of the number of node for each key\r\n\t */\r\n    public createPolygonColorMap() {\r\n\r\n        \r\n        // If you store your polygonGroups in this.temp, do:\r\n        if (!this.temp.polygonGroups || !this.session.style.widgets['polygons-color-show']) {\r\n            this.temp.style.polygonColorMap = () => this.session.style.widgets['polygon-color'];\r\n            // return [];\r\n        }\r\n\r\n        // If this.session.style.widgets['polygons-color-show', we need \r\n        let polygonGroups: {key: string, values: []}[] = this.temp.polygonGroups || [];\r\n        let polygonColors = this.session.style.polygonColors;\r\n\r\n        if (!polygonColors || polygonColors.length === 0) {\r\n            polygonColors = this.polygonPalette;\r\n        }\r\n        const polygonAlphas = this.session.style.polygonAlphas;\r\n\r\n        // If polygonGroups length is 0 but polygons-color-show is true, we need to create the groups via going through the visible nodes, and grouping them by cluster id in the format { key: clusterId, values: [nodeId1, nodeId2, ...] }\r\n        if (polygonGroups.length === 0 && this.session.style.widgets['polygons-color-show']) {\r\n            // Create the groups by going through visible nodes, and creating the keys of the group by the unique values of node['polygon-foci']\r\n            const groupMap = new Map();\r\n            this.getVisibleNodes().forEach(node => {\r\n                const polygonFoci = node['polygon-foci'];\r\n                if (!groupMap.has(polygonFoci)) {\r\n                    groupMap.set(polygonFoci, []);\r\n                }\r\n                groupMap.get(polygonFoci).push(node);\r\n            });\r\n            polygonGroups = Array.from(groupMap.entries()).map(([key, values]) => ({\r\n                key,\r\n                values: values.map(node => node.id)\r\n            }));\r\n\r\n            this.temp.polygonGroups = polygonGroups;\r\n            this.session.style.widgets['polygon-color-table-visible'] = true;\r\n        }\r\n\r\n        const result = this.colorMappingService.createPolygonColorMap(\r\n          polygonGroups,\r\n          polygonColors,\r\n          polygonAlphas,\r\n          this.debugMode\r\n        );\r\n      \r\n        this.temp.style.polygonColorMap = result.colorMap;\r\n        this.temp.style.polygonAlphaMap = result.alphaMap;\r\n      \r\n        this.session.style.polygonColors = result.updatedPolygonColors;\r\n        this.session.style.polygonAlphas = result.updatedPolygonAlphas;\r\n          \r\n        return polygonGroups;\r\n      }\r\n\r\n    /**\r\n     * Set commonService.session and commonService.temp back to default values; However keeps previous values for commonService.temp.mapData, commonService.session.files,\r\n     * and commonService.session.meta\r\n     */\r\n    reset() {\r\n        //debugger;\r\n\r\n        // $(\"#network-statistics-hide\").parent().trigger(\"click\");\r\n        // $(\"#SettingsTab\").attr(\"data-target\", \"#sequence-controls-modal\");\r\n\r\n        const mapData = this.temp.mapData;\r\n        this.temp = this.tempSkeleton();\r\n        this.temp.mapData = mapData;\r\n\r\n        const files = this.session.files;\r\n        const meta = this.session.meta;\r\n\r\n        this.session = this.sessionSkeleton();\r\n\r\n\r\n        if(this.debugMode) {\r\n            console.log('reset called: ', this.session.style.linkColors);\r\n        }\r\n                \r\n        this.session.files = files;\r\n        this.session.meta = meta;\r\n        //this.layout.unbind(\"stateChanged\");\r\n\r\n        //this.layout.root.replaceChild(this.layout.root.contentItems[0], {\r\n        //    type: \"stack\",\r\n        //    content: []\r\n        //});\r\n        //this.session.layout.contentItems = [];\r\n        //this.launchView(\"files\");\r\n    };\r\n\r\n    /**\r\n     * Sets the following objects back to default values: commonService.temp.matrix, commonService.temp.tree, commonService.session.data, commonService.session.network,\r\n     * commonService.session.style.widgets. Filters 'Demo_outbreak_NodeList.csv' from files\r\n     */\r\n    resetData() {\r\n\r\n\r\n        const newTempSkeleton = this.tempSkeleton();\r\n\r\n        this.temp.matrix = newTempSkeleton.matrix;\r\n        this.temp.trees = newTempSkeleton.trees;\r\n\r\n        const files = this.session.files.slice();\r\n        const meta = this.session.meta;\r\n\r\n        if(this.debugMode) {\r\n            console.log('reset data called');\r\n            // console.log('session files1', JSON.stringify(this.visuals.microbeTrace.commonService.session.files));\r\n            console.log('session files2', JSON.stringify(this.session.files));\r\n\r\n            console.log('session data files: ', JSON.stringify(files));\r\n            console.log('session data matrix: ', JSON.stringify(this.temp.matrix));\r\n            console.log('session data nodes: ', JSON.stringify(this.session.data.nodes));\r\n            console.log('session data nodes common: ',  JSON.stringify(this.session.data.nodes));\r\n        }\r\n\r\n\r\n        const newSessionSkeleton = this.sessionSkeleton();\r\n        this.session.data = newSessionSkeleton.data;\r\n        this.session.network = newSessionSkeleton.network;\r\n\r\n        this.session.files = files;\r\n        this.session.meta = meta;\r\n        this.session.style.widgets = this.defaultWidgets();\r\n        \r\n\r\n        // default values are 'tn93' and 0.015, so not sure if this if statement is every true\r\n        if (this.session.style.widgets['default-distance-metric'] !== 'snps' &&\r\n          this.session.style.widgets['link-threshold'] >= 1) {\r\n          this.visuals.microbeTrace.SelectedLinkThresholdVariable = this.session.style.widgets['link-threshold'];\r\n          this.visuals.microbeTrace.onLinkThresholdChanged();\r\n        }\r\n    };\r\n\r\n    getJurisdictions(): Promise<JurisdictionItem[]>{\r\n        const path = `${this.appRootUrl()}assets/common/data/state_county_fips.csv`; // Refactor appRootUrl if necessary\r\n        return this.http.get(path, { responseType: 'text' }).toPromise()\r\n            .then(response => {\r\n                return Papa.parse<JurisdictionItem>(response, { header: true }).data;\r\n            })\r\n            .catch(error => {\r\n                console.error('Error fetching jurisdictions:', error);\r\n                throw error;\r\n            });\r\n\r\n        // let options : any = {\r\n        //     observe: \"response\",\r\n        //     responseType: \"blob\",\r\n        //     headers: new HttpHeaders({\r\n        //         \"Accept\": \"application/json\"\r\n        //     })\r\n        // };\r\n\r\n        // return this.http.request(\"get\", path/*, options_*/).pipe(map((fileContents:any)=>{\r\n        //     return Papa.parse(fileContents, {header: true}).data;\r\n        // }));\r\n        // $.get(path, response => {\r\n        //     this.temp.mapData[name] = Papa.parse(response, { header: true }).data;\r\n        //     resolve(this.temp.mapData[name]);\r\n        // });\r\n    }\r\n\r\n    async getMapData(type): Promise<any> {\r\n\r\n        //return new Promise(resolve => {\r\n\r\n            const parts = type.split(\".\");\r\n            const name = parts[0],\r\n                format = parts[1];\r\n            if (this.temp.mapData[name]) {\r\n                return this.temp.mapData[name];\r\n            }\r\n\r\n            let path: string;\r\n\r\n\r\n            switch (name) {\r\n                case \"zipcodes\":\r\n\r\n                    if (format == \"csv\") {\r\n                        path = 'assets/common/data/zipcodes.csv';\r\n                        const response = await firstValueFrom(this.http.get(path, { responseType: 'text' }));\r\n                        this.temp.mapData[name] = Papa.parse(response, { header: true }).data;\r\n                        return this.temp.mapData[name];\r\n                        // return this.http.get(path, { responseType: 'text' }).toPromise()\r\n                        //     .then(response => {\r\n                        //         this.temp.mapData[name] = Papa.parse(response, { header: true }).data;\r\n                        //         return this.temp.mapData[name];\r\n                        //     });\r\n                    }\r\n                    break;\r\n                case \"countries\":\r\n                    if (format == \"json\") {\r\n                        path = 'assets/common/data/countries.json';\r\n                        const response = await firstValueFrom(this.http.get(path));\r\n                        this.temp.mapData[name] = response;\r\n                        return this.temp.mapData[name];\r\n                        // return this.http.get(path).toPromise()\r\n                        //     .then(response => {\r\n                        //         this.temp.mapData[name] = response;\r\n                        //         return this.temp.mapData[name];\r\n                        //     });\r\n                    }\r\n                    break;\r\n                case \"counties\":\r\n                    if (format == \"json\") {\r\n                        path = 'assets/common/data/counties.json';\r\n                        const response = await firstValueFrom(this.http.get(path));\r\n                        this.temp.mapData[name] = response;\r\n                        return this.temp.mapData[name];\r\n                    }\r\n                    break;\r\n\r\n                case \"states\":\r\n                    if (format == \"json\") {\r\n                        // let path = /*this.appRootUrl() +*/ 'assets/common/data/states.json';\r\n\r\n                        path = 'assets/common/data/states.json';\r\n                        const response = await firstValueFrom(this.http.get(path));\r\n                        this.temp.mapData[name] = response;\r\n                        return this.temp.mapData[name];\r\n                        // return this.http.get(path).toPromise()\r\n                        //     .then(response => {\r\n                        //         this.temp.mapData[name] = response;\r\n                        //         return this.temp.mapData[name];\r\n                        //     });\r\n                    }\r\n                    break;\r\n\r\n                case \"land\":\r\n                    if (format == \"json\") {\r\n                        path = 'assets/common/data/land.json';\r\n                        const response = await firstValueFrom(this.http.get(path));\r\n                        this.temp.mapData[name] = response;\r\n                        return this.temp.mapData[name];\r\n\r\n                        // return this.http.get(path).toPromise()\r\n                        //     .then(response => {\r\n                        //         this.temp.mapData[name] = response;\r\n                        //         return this.temp.mapData[name];\r\n                        //     });\r\n\r\n                        // $.get(path, response => {\r\n                        //     resolve(this.temp.mapData[name]);\r\n                        // });\r\n                    }\r\n                    break;\r\n\r\n            }\r\n\r\n            //$.get(\"data/\" + type, response => {\r\n            //    debugger;\r\n            //    if (format == \"csv\") {\r\n            //        this.temp.mapData[name] = new Papa().parse(response, { header: true }).data;\r\n            //    }\r\n            //    if (format == \"json\") {\r\n            //        this.temp.mapData[name] = response;\r\n            //    }\r\n            //    resolve(this.temp.mapData[name]);\r\n            //});\r\n        //});\r\n    };\r\n\r\n    /** \r\n     * XXXXX Not currently used; not sure future use XXXXX\r\n     * Predicts whether white or black is most contrasting color\r\n     * @param {string} hexcolor - hexcode representation of a color (ie. '#1e9d00')\r\n     * @returns {string} - for hex representation of color (white or black)\r\n     */\r\n    contrastColor(hexcolor) {\r\n        const r = parseInt(hexcolor.substr(1, 2), 16);\r\n        const g = parseInt(hexcolor.substr(3, 2), 16);\r\n        const b = parseInt(hexcolor.substr(5, 2), 16);\r\n        const yiq = r * 299 + g * 587 + b * 114;\r\n        return yiq >= 128000 ? \"#000000\" : \"#ffffff\";\r\n    };\r\n\r\n    /**\r\n    *  XXXXX Not currently being executed. It's in the codebase but hidden behind comments XXXXX\r\n    *\tReturns the last element of an array\r\n    * @param ra - an array (potentially could take other datatypes as well)\r\n    * @returns {any} the last element in an array\r\n    */\r\n    peek(ra) {\r\n        return ra[ra.length - 1];\r\n    };\r\n\r\n\r\n    launchView(view, callback: any = null) {\r\n\r\n\r\n        this.LoadViewEvent.emit(view);\r\n\r\n\r\n    };\r\n\r\n    /**\r\n     * Gives the size of a variable in MB\r\n     * @param thing \r\n     * @returns {string} Size of thing in MB as a string ('4MB')\r\n     */\r\n    size(thing): string {\r\n        if (!thing) thing = this.session;\r\n        return (JSON.stringify(thing).length / 1024 / 1024).toLocaleString() + 'MB';\r\n    };\r\n\r\n    /**\r\n     * Converts commonly used titles to a standard output; for less common titles nothing is changed\r\n     * @param {string} title \r\n     */\r\n    titleize(title: string): string {\r\n        const small = title.toLowerCase().replace(/_/g, \" \");\r\n        if (small == \"null\") return \"(Empty)\";\r\n        if (small == \"id\" || small == \" id\") return \"ID\";\r\n        if (small == \"tn93\") return \"TN93\";\r\n        if (small == \"snps\") return \"SNPs\";\r\n        if (small == \"2d network\") return \"2D Network\";\r\n        if (small == \"3d network\") return \"3D Network\";\r\n        if (small == \"geo map\") return \"Map\";\r\n        if (small == \"nn\") return \"Nearest Neighbor\";\r\n        return title;\r\n        return small.replace(/(?:^|\\s|-)\\S/g, c => c.toUpperCase());\r\n    };\r\n\r\n    /** \r\n     * Set up the clusters; new clusters are created as needed; node.cluster is set to cluster id.\r\n     * When a node is found that isn't in tempnodes, a cluster is created and a depth-first search is preformed.\r\n     * During DFS, nodes are added to tempnodes, the node.cluster is assigned and information in cluster is updated\r\n     */\r\n    tagClusters(): Promise<void> {\r\n        return new Promise<void>(resolve => {\r\n            let start = Date.now();\r\n            let clusters = this.session.data.clusters = [];\r\n            let nodes = this.session.data.nodes,\r\n                links = this.session.data.links,\r\n                labels = nodes.map(d => d._id);\r\n            const numNodes = nodes.length,\r\n                numLinks = links.length;\r\n            let tempnodes = this.temp.nodes = [];\r\n            let lsv = this.session.style.widgets[\"link-sort-variable\"];\r\n\r\n            /**\r\n             * A function that performs a depth-first search.\r\n             * @param id - The ID of the node to start the search from.\r\n             * @param cluster - The cluster to search in.\r\n             * @returns {void}\r\n             */\r\n            const DFS = (id, cluster) => {\r\n                // if id is found in tempNode exit function\r\n                if (tempnodes.indexOf(id) >= 0) return;\r\n                // else add it, and continue DFS\r\n                tempnodes.push(id);\r\n                let node: any = {};\r\n                for (let i = 0; i < numNodes; i++) {\r\n                    const d = nodes[i];\r\n                    if (!d._id) {\r\n                        d._id = d.id;\r\n                    }\r\n                    if (d._id == id) {\r\n                        node = d;\r\n                        break;\r\n                    }\r\n                }\r\n                const clusterID = cluster.id;\r\n                node.cluster = clusterID;\r\n                cluster.nodes++;\r\n                let row = this.temp.matrix[id];\r\n                if (!row) return;\r\n                for (let j = 0; j < numNodes; j++) {\r\n                    const l = row[labels[j]];\r\n                    if (!l) continue;\r\n                    if (!l.visible) continue;\r\n                    l.cluster = clusterID;\r\n                    cluster.links++;\r\n                    cluster.sum_distances += l[lsv];\r\n                    if (tempnodes.length == numNodes) return;\r\n                    // recursively call DFS on both source and target\r\n                    DFS(l.source, cluster);\r\n                    DFS(l.target, cluster);\r\n                }\r\n            }; // DFS function close\r\n\r\n           nodes.forEach(d => {\r\n                d.degree = 0;\r\n                const id = d._id;\r\n\r\n                // if id isn't in temp nodes, add new cluster and do DFS\r\n                if (tempnodes.indexOf(id) == -1) {\r\n\r\n                    const cluster = {\r\n                        id: clusters.length > 0 ? clusters.length : 0,\r\n                        nodes: 0,\r\n                        links: 0,\r\n                        sum_distances: 0,\r\n                        links_per_node: 0,\r\n                        mean_genetic_distance: undefined,\r\n                        visible: true\r\n                    };\r\n\r\n\r\n                    clusters.push(cluster);\r\n                    DFS(id, cluster);\r\n                    if (tempnodes.length == numNodes) return;\r\n                }\r\n            })\r\n\r\n            if(this.debugMode) {\r\n                console.log(\"Cluster Tagging time:\", (Date.now() - start).toLocaleString(), \"ms\");\r\n            }\r\n\r\n            start = Date.now();\r\n            //This is O(N^3)\r\n            //TODO: Refactor using temp.matrix to get O(N^2)\r\n            for (let m = 0; m < numLinks; m++) {\r\n                const l = links[m];\r\n                if (!l.visible) continue;\r\n                let s = false,\r\n                    t = false;\r\n                for (let n = 0; n < numNodes; n++) {\r\n                    const node = nodes[n];\r\n                    if (l.source == node._id) {\r\n                        s = true;\r\n                        node.degree++;\r\n                    }\r\n                    if (l.target == node._id) {\r\n                        t = true;\r\n                        node.degree++;\r\n                    }\r\n                    if (s && t) break;\r\n                }\r\n            }\r\n            // console.log('clustersssss: ' , clusters);\r\n            clusters.forEach(c => {\r\n                c.links = c.links / 2;\r\n                c.links_per_node = c.links / c.nodes;\r\n                c.mean_genetic_distance = c.sum_distances / 2 / c.links;\r\n            });\r\n            if(this.debugMode) {\r\n                console.log(\"Degree Computation time:\", (Date.now() - start).toLocaleString(), \"ms\");\r\n            }\r\n            resolve();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Sets node visibility to true when it cluster is visible\r\n     * @param {boolean} silent - whether to trigger node-visibility event (True doesn't trigger, False does)\r\n     */\r\n    setNodeVisibility(silent) {\r\n        console.log('--- Set node viz called');\r\n        let start = Date.now();\r\n        let dateField = this.session.style.widgets[\"timeline-date-field\"];\r\n        let nodes = this.session.data.nodes,\r\n            clusters = this.session.data.clusters;\r\n        let n = nodes.length;\r\n        for (let i = 0; i < n; i++) {\r\n            const node = nodes[i];\r\n\r\n            node.visible = true;\r\n            const cluster = clusters[node.cluster];\r\n\r\n            if (cluster) {\r\n                // TODO: uncomment if something breaks since this was defaulted to visible\r\n                // cluster.visible = true;\r\n                // console.log('setting cluster vis: ', cluster);\r\n                // console.log('setting node vis: ', node.visible);\r\n                node.visible = node.visible && cluster.visible;\r\n            }\r\n            if (dateField != \"None\") {\r\n                node.visible = node.visible && (moment(this.session.state.timeEnd).toDate() >= moment(node[dateField]).toDate() || node[dateField] == null);\r\n            }\r\n\r\n            // if (node._id === \"NIMR_NG894803\") {\r\n            //     console.log('setting node vis 2: ', _.cloneDeep(node));\r\n            // }\r\n        }\r\n        if (!silent) {\r\n            console.log('--- Set node viz NOT SILENT trigger node-visibility');\r\n            $(document).trigger(\"node-visibility\");\r\n        } \r\n\r\n        if(this.debugMode) {\r\n            console.log('--- Set node viz nodes length: ', nodes.filter(n => n.visible).length);\r\n            console.log(\"Node Visibility Setting time:\", (Date.now() - start).toLocaleString(), \"ms\");        \r\n        }\r\n       \r\n    };\r\n\r\n    /**\r\n     * Sets link visibility based on distance, link-threshold, nearestNeighbor setting, etc...\r\n     * @param {boolean} silent - whether to trigger link-visibility event (True doesn't trigger, False does)\r\n     * @param {boolean} [checkCluster=true] - defaults to true; whether to include cluster.visibility when setting link.visibility\r\n     */\r\n    setLinkVisibility(silent: boolean, checkCluster = true) {\r\n        let start = Date.now();\r\n        let metric = this.session.style.widgets[\"link-sort-variable\"],\r\n            threshold = this.session.style.widgets[\"link-threshold\"],\r\n            showNN = this.session.style.widgets[\"link-show-nn\"];\r\n        let links = this.session.data.links;\r\n        let clusters = this.session.data.clusters;\r\n        let n = links.length;\r\n        const globalOriginOrder = this.session.style.widgets['link-origin-array-order']; // Get the global order once\r\n    \r\n    \r\n        if(this.debugMode) {\r\n            console.log(`Setting Link Visibility with ${metric} ${threshold} ${showNN}`);\r\n            console.log('Global Origin Order:', globalOriginOrder); // Log global order\r\n        }\r\n    \r\n          //log all links that are visible and their origin\r\n          //console.log('--- visible links1 (Start): ', _.cloneDeep(links.filter(l => l.visible)));\r\n    \r\n    \r\n        for (let i = 0; i < n; i++) {\r\n    \r\n            const link = links[i]; // Reference to the object in session.data.links\r\n    \r\n            // *** Step 1: Use a copy for checks ***\r\n            let finalOrigins = [...link.origin]; // Copy origins for visibility logic\r\n    \r\n            let visible = true;\r\n            let overrideNN = false;\r\n            let originWasFiltered = false; // *** Step 2: Add flag ***\r\n    \r\n            // Add back the distance origin to the *copy* if it was removed (Safeguard)\r\n            // Check against original link.origin, add to finalOrigins if needed\r\n            if ( link.distanceOrigin && !link.origin.includes(link.distanceOrigin)) {\r\n                 if (!finalOrigins.includes(link.distanceOrigin)) { // Avoid duplicates in copy\r\n                    finalOrigins.push(link.distanceOrigin);\r\n                 }\r\n            }\r\n            // Also ensure distanceOrigin exists in original if it should\r\n             if ( link.distanceOrigin && !link.origin.includes(link.distanceOrigin)) {\r\n                 link.origin.push(link.distanceOrigin); // Ensure original has it too if missing\r\n             }\r\n    \r\n    \r\n            // Visibility Logic based on metric/threshold/hasDistance\r\n            if (link[metric] == null) { // No distance value for the current metric\r\n                 // Check for non-distance origins using the *copy*\r\n                if (finalOrigins.filter(fileName => !link.distanceOrigin || !fileName.includes(link.distanceOrigin)).length > 0) {\r\n                    // Filter the *copy* for visibility check\r\n                    finalOrigins = finalOrigins.filter(fileName => !link.distanceOrigin || !fileName.includes(link.distanceOrigin));\r\n                    originWasFiltered = true; // *** Mark as filtered ***\r\n                    overrideNN = true;\r\n                    visible = true;\r\n                } else {\r\n                    visible = false;\r\n                }\r\n            } else { // Has a distance value for the current metric\r\n                if (link.hasDistance) {\r\n                    visible = link[metric] <= threshold;\r\n                    if (!visible) {\r\n                         // Distance is above threshold. Check for other origins using the *copy*.\r\n                        if (finalOrigins.filter(fileName => {\r\n                                 const hasAuspice = /[Aa]uspice/.test(fileName); // Preserved Auspice check\r\n                                 const includesDistanceOrigin = link.distanceOrigin && fileName.includes(link.distanceOrigin);\r\n                                 return fileName && !includesDistanceOrigin && !hasAuspice;\r\n                             }).length > 0\r\n                        ) {\r\n                            // Filter the *copy* for visibility check\r\n                             finalOrigins = finalOrigins.filter(fileName => {\r\n                                 const hasAuspice = /[Aa]uspice/.test(fileName);\r\n                                 const includesDistanceOrigin = link.distanceOrigin && fileName.includes(link.distanceOrigin);\r\n                                 return fileName && !includesDistanceOrigin && !hasAuspice;\r\n                             });\r\n                             originWasFiltered = true; // *** Mark as filtered ***\r\n                             overrideNN = true;\r\n                             visible = true;\r\n                         }\r\n                         // If only distance origin existed and it's above threshold, 'visible' remains false.\r\n                    }\r\n                } else {\r\n                    // Has a distance value but hasDistance is false? Treat as always visible.\r\n                    overrideNN = true;\r\n                    visible = true;\r\n                }\r\n            }\r\n    \r\n            // NN Pruning Logic\r\n            if (visible && showNN && !overrideNN) {\r\n                 const wasVisible = visible;\r\n                 visible = visible && link.nn;\r\n                 if (!visible && wasVisible) { // Check if NN made it invisible\r\n                      // Check *copy* for other origins\r\n                     if (finalOrigins.filter(fileName => !link.distanceOrigin || !fileName.includes(link.distanceOrigin)).length > 0) {\r\n                         // Filter the *copy*\r\n                         finalOrigins = finalOrigins.filter(fileName => !link.distanceOrigin || !fileName.includes(link.distanceOrigin));\r\n                         originWasFiltered = true; // *** Mark as filtered ***\r\n                         visible = true; // Keep visible due to non-distance origin\r\n                     }\r\n                 }\r\n            }\r\n    \r\n            // Cluster Visibility Check\r\n            const cluster = clusters[link.cluster];\r\n            if (cluster && checkCluster) {\r\n                visible = visible && cluster.visible;\r\n            }\r\n    \r\n            // --- Step 3: Apply Final Origin Array Conditionally ---\r\n            if (visible) {\r\n                 if (originWasFiltered) {\r\n                     // If filtering occurred *during visibility checks*, assign the filtered result\r\n                     link.origin = finalOrigins;\r\n                 } else if (link.origin.length > 1 && globalOriginOrder.length > 1) {\r\n                      // If NO filtering occurred, it's visible, has multiple origins,\r\n                      // and global order exists, apply the global order.\r\n                     // Check if the link's current origins fundamentally match the global order content\r\n                     // (ignoring order initially) to prevent applying the wrong order set.\r\n                     const linkOriginSet = new Set(link.origin);\r\n                     const globalOrderSet = new Set(globalOriginOrder);\r\n                     if (linkOriginSet.size === globalOrderSet.size && [...linkOriginSet].every(item => globalOrderSet.has(item))) {\r\n                        link.origin = globalOriginOrder;\r\n                     } else {\r\n                        // Log a warning if sets don't match - indicates potential issue in global order management\r\n                         console.warn(\"Link origin set doesn't match global order set. Not applying global order.\", link.id, link.origin, globalOriginOrder);\r\n                         // Keep link.origin as it was after addLink\r\n                     }\r\n                 }\r\n                 // If visible and single origin, or global order not set/relevant,\r\n                 // link.origin correctly retains its value from addLink.\r\n            }\r\n            // If not visible, link.origin is left as is.\r\n    \r\n            link.visible = visible; // Set final visibility\r\n    \r\n        } // End of loop\r\n    \r\n        //log all links that are visible and their origin\r\n        //console.log('--- visible links (End of setLinkVisibility): ', _.cloneDeep(links.filter(l => l.visible)));\r\n    \r\n        if (!silent) {\r\n            // $(document).trigger(\"link-visibility\");\r\n        }\r\n    \r\n    \r\n        if(this.debugMode) {\r\n            console.log(\"Link Visibility Setting time:\", (Date.now() - start).toLocaleString(), \"ms\");\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Set the visibility of each cluster based on if cluster size is greater than cluster-minimum-size\r\n     * @param {boolean} silent whether to trigger cluster-visibility event (True doesn't trigger, False does)\r\n     */\r\n    setClusterVisibility(silent: boolean) {\r\n        //let start = Date.now();\r\n        let min = this.session.style.widgets[\"cluster-minimum-size\"];\r\n        let clusters = this.session.data.clusters;\r\n        let n = clusters.length;\r\n        console.log('cluster nodes ', clusters);\r\n        for (let i = 0; i < n; i++) {\r\n            const cluster = clusters[i];\r\n           \r\n            cluster.visible = cluster.nodes >= min;\r\n        }\r\n        if (!silent) $(document).trigger(\"cluster-visibility\");//$window.trigger(\"cluster-visibility\");\r\n        // console.log(\"Cluster Visibility Setting time:\", (Date.now() - start).toLocaleString(), \"ms\");\r\n    };\r\n\r\n\r\n    // updatePinNodes(copy: boolean) {\r\n    //     let nodes =  this.session.network.nodes;\r\n    //     let n = nodes.length;\r\n    //     for (let i = 0; i < n; i++) {\r\n    //         const node = nodes[i]; \r\n    //         if (copy && node.fixed) node.preFixed = true;\r\n    //         if (!copy &&  this.session.network.timelineNodes[i].preFixed) {\r\n    //             node.fixed = true;\r\n    //             node.fx = node.x;\r\n    //             node.fy = node.y;\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n    /**\r\n     * @returns {any[]} Returns an array with a copy of each node object // TODO:: Do we need this?\r\n     */\r\n    getNetworkNodes = () => {\r\n        let nodes =  this.session.network.nodes;\r\n        let n = nodes.length;\r\n        let out = [];\r\n          for (let i = 0; i < n; i++) {\r\n            const node = nodes[i];\r\n            out.push(JSON.parse(JSON.stringify(node)));\r\n          }\r\n        return out;\r\n      };\r\n\r\n    /**\r\n     * Creates and updates the threshold histogram that is found in global settings.\r\n     * Clicking on the histogram will update the link threshold\r\n     * @param [histogram] - optional parameter\r\n     */\r\n    async updateThresholdHistogram(histogram?: any) {\r\n\r\n        let width = 260,\r\n        height = 48,\r\n        svg = null;\r\n\r\n        // Update histogram so that it can be altered outside of the main wrapper \r\n        if(histogram){\r\n            this.thresholdHistogram = histogram;\r\n        }\r\n        \r\n        svg = d3\r\n        .select(this.thresholdHistogram)\r\n        .html(null)\r\n        .attr(\"width\", width)\r\n        .attr(\"height\", height);\r\n\r\n        // add all link distances to data, find max and min distances\r\n        let lsv = this.session.style.widgets[\"link-sort-variable\"],\r\n            n = this.session.data.links.length,\r\n            max = Number.MIN_SAFE_INTEGER,\r\n            min = Number.MAX_SAFE_INTEGER,\r\n            data = Array(n),\r\n            dist = null;\r\n        for (let i = 0; i < n; i++) {\r\n            dist = this.session.data.links[i][lsv];\r\n            data[i] = dist;\r\n            if (dist < min) min = dist;\r\n            if (dist > max) max = dist;\r\n        }\r\n\r\n        // Add all link distances to data, find max and min distances\r\n        // const links = this.session.data.links;\r\n        // const lsv = this.session.style.widgets[\"link-sort-variable\"];\r\n        // const n = links.length;\r\n        // let max = -Infinity;\r\n        // let min = Infinity;\r\n        // const data: number[] = new Array(n);\r\n        // let dist: number;\r\n\r\n        // First pass: Compute min and max distances without storing them in a separate array\r\n        // for (let i = 0; i < n; i++) {\r\n        //     const dist = typeof links[i][lsv] === 'string' ? parseFloat(links[i][lsv]) : links[i][lsv];\r\n\r\n        //     // Update min and max\r\n        //     if (dist < min) {\r\n        //         min = dist;\r\n        //     }\r\n        //     if (dist > max) {\r\n        //         max = dist;\r\n        //     }\r\n        // }\r\n\r\n        \r\n        let range = max - min;\r\n        let ticks = 40;\r\n\r\n        const x = d3\r\n            .scaleLinear()\r\n            .domain([min, max])\r\n            .range([0, width]);\r\n\r\n        const bins = d3\r\n            .histogram()\r\n            .domain((x as any).domain())\r\n            .thresholds(x.ticks(ticks))(data);\r\n\r\n        const y = d3\r\n            .scaleLinear()\r\n            .domain([0, d3.max(bins, d => (d as any).length)])\r\n            .range([height, 0]);\r\n\r\n        const bar = svg\r\n            .selectAll(\".bar\")\r\n            .data(bins)\r\n            .enter()\r\n            .append(\"g\")\r\n            .attr(\"class\", \"bar\")\r\n            .attr(\"transform\", d => \"translate(\" + x(d.x0) + \",\" + y(d.length) + \")\");\r\n\r\n        bar\r\n            .append(\"rect\")\r\n            .attr(\"x\", 1)\r\n            .attr(\"width\", 6)\r\n            .attr(\"height\", d => height - y(d.length));\r\n\r\n        let that = this;\r\n\r\n        /**\r\n         * Uses the position on the histogram to set the link thresehold value\r\n         */\r\n        function updateThreshold() {\r\n            let xc = (d3 as any).mouse(svg.node())[0];\r\n            let decimalPlaces = (that.session.style.widgets['default-distance-metric'].toLowerCase() === \"tn93\") ? 3 : 0;\r\n\r\n            that.session.style.widgets[\"link-threshold\"] = (xc / width) * range * 1.05 + min;\r\n            $(\"#link-threshold\").val(parseFloat(that.session.style.widgets[\"link-threshold\"].toFixed(decimalPlaces)));\r\n        }\r\n\r\n        svg.on(\"click\", () => {\r\n            updateThreshold();\r\n            this._debouncedUpdateNetworkVisuals();\r\n        });\r\n\r\n        svg.on(\"mouseover\", () => {\r\n            let xc = (d3 as any).mouse(svg.node())[0];\r\n            $('#filtering-threshold').prop('title', \"Whats the maximum genetic distance you're willing to call a link? \" + ((this.session.style.widgets['default-distance-metric'].toLowerCase() === \"tn93\") ? ((xc / width) * range * 1.05 + min).toLocaleString() : Math.round(((xc / width) * range * 1.05 + min)).toLocaleString()));\r\n          });\r\n\r\n        svg.on(\"mousedown\", () => {\r\n            (d3 as any).event.preventDefault();\r\n            svg.on(\"mousemove\", updateThreshold);\r\n            svg.on(\"mouseup mouseleave\", () => {\r\n                this._debouncedUpdateNetworkVisuals();\r\n                svg\r\n                    .on(\"mousemove\", null)\r\n                    .on(\"mouseup\", null)\r\n                    .on(\"mouseleave\", null);\r\n            });\r\n        });\r\n\r\n        data = [];\r\n\r\n    };\r\n\r\n}\r\n\r\nexport interface JurisdictionItem{\r\n    jurisdiction_com_code: string | undefined;\r\n    jurisdiction_com_name: string | undefined;\r\n    subjurisdiction_code: string | undefined;\r\n    subjurisdiction_name: string | undefined;\r\n}","import { Injectable } from '@angular/core';\r\nimport { Subject, Observable } from 'rxjs';\r\n\r\nexport interface ExportOptions {\r\n  filename: string;\r\n  filetype: string;\r\n  scale: number;\r\n  quality: number;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ExportService {\r\n  private exportRequestedSource = new Subject<{\r\n    element: HTMLDivElement[],\r\n    exportNodeTable: boolean,\r\n    exportLinkTable: boolean\r\n  }>();\r\n  exportRequested$: Observable<{\r\n    element: HTMLDivElement[],\r\n    exportNodeTable: boolean,\r\n    exportLinkTable: boolean\r\n  }> = this.exportRequestedSource.asObservable();\r\n\r\n  private exportSVGSource = new Subject<{\r\n    element: HTMLTableElement[],\r\n    mainSVGString: string,\r\n    exportNodeTable: boolean,\r\n    exportLinkTable: boolean\r\n  }>();\r\n  exportSVG$: Observable<{\r\n    element: HTMLTableElement[],\r\n    mainSVGString: string,\r\n    exportNodeTable: boolean,\r\n    exportLinkTable: boolean\r\n  }> = this.exportSVGSource.asObservable();\r\n\r\n  private exportOptions: ExportOptions = {\r\n    filename: 'network_export',\r\n    filetype: 'png',\r\n    scale: 1,\r\n    quality: 0.92,\r\n  };\r\n\r\n  constructor() {}\r\n\r\n  /**\r\n   * Sets the export options.\r\n   * @param options ExportOptions object containing user-selected options.\r\n   */\r\n  setExportOptions(options: ExportOptions): void {\r\n    this.exportOptions = { ...options };\r\n  }\r\n\r\n  /**\r\n   * Retrieves the current export options.\r\n   * @returns ExportOptions object.\r\n   */\r\n  getExportOptions(): ExportOptions {\r\n    return this.exportOptions;\r\n  }\r\n\r\n  /**\r\n   * Notifies subscribers that an export has been requested.\r\n   * @param element The HTMLDivElement(s) to export.\r\n   * @param exportNodeTable Flag for exporting the node table.\r\n   * @param exportLinkTable Flag for exporting the link table.\r\n   */\r\n  requestExport(element: HTMLDivElement[], exportNodeTable: boolean, exportLinkTable: boolean): void {\r\n    this.exportRequestedSource.next({ element, exportNodeTable, exportLinkTable });\r\n  }\r\n\r\n  /**\r\n   * Notifies subscribers that an SVG export has been requested.\r\n   * @param element The HTMLTableElement(s) to export.\r\n   * @param mainSVGString The main SVG string.\r\n   * @param exportNodeTable Flag for exporting the node table.\r\n   * @param exportLinkTable Flag for exporting the link table.\r\n   */\r\n  requestSVGExport(element: HTMLTableElement[], mainSVGString: string, exportNodeTable: boolean, exportLinkTable: boolean): void {\r\n    this.exportSVGSource.next({ element, mainSVGString, exportNodeTable, exportLinkTable });\r\n  }\r\n\r\n  /**\r\n   * Converts an HTMLTableElement into an SVG representation.\r\n   * @param tableElement The HTMLTableElement (for example, a Node Color Table).\r\n   * @returns An object containing the SVG string (<g>...</g>), width, and height.\r\n   */\r\n  exportTableAsSVG(tableElement: HTMLTableElement, hasHeaderRow: boolean = false): { svg: string, width: number, height: number } {\r\n    const rows = tableElement.rows;\r\n    let tableData: string[][] = [];\r\n    let widthOffsets: number[] = [10];\r\n    let heightOffsets: number[] = [15];\r\n\r\n    for (let i = 0; i < rows.length; i++) {\r\n      const cells = rows[i].cells;\r\n      const rowData: string[] = [];\r\n      \r\n      for (let j = 0; j < cells.length; j++) {\r\n        if (i === 0) {\r\n          widthOffsets.push(widthOffsets[j] + cells[j].offsetWidth + 15);\r\n        }\r\n        if (j === 0) {\r\n          heightOffsets.push(heightOffsets[i] + cells[0].offsetHeight);\r\n        }\r\n\r\n        if (window.getComputedStyle(cells[j]).display === 'none') {\r\n          continue;\r\n        }\r\n        if (cells[j].querySelector('p-dropdown')) {\r\n          if (cells[j].querySelector('p-dropdown div a').className == 'rhombus'){\r\n            rowData.push('shapeRhombus')\r\n          } else if (cells[j].querySelector('p-dropdown div a').className == 'tag'){\r\n            rowData.push('shapeTag')\r\n          } else if (cells[j].querySelector('p-dropdown div a').className == 'barrel'){\r\n            rowData.push('shapeBarrel')\r\n          } else {\r\n            rowData.push(cells[j].querySelector('p-dropdown div').innerHTML.replace(/&nbsp;/g, ' '));\r\n          }\r\n        } else if (cells[j].querySelector('input[type=\"color\"]')) {\r\n          const input = (cells[j].querySelector('input[type=\"color\"]') as HTMLInputElement)\r\n          let color = input.value;\r\n          let opacity = input.style['opacity'] || '1';\r\n          rowData.push(`${color}:${opacity}`);\r\n        } else {\r\n          rowData.push(cells[j].innerText.replace('', ''));\r\n        }\r\n      }\r\n      tableData.push(rowData);\r\n    }\r\n\r\n    let out = `<g><rect x=\"0\" y=\"0\" width=\"${widthOffsets[widthOffsets.length - 1] - 20}\" height=\"${heightOffsets[heightOffsets.length - 1] - 10}\" fill=\"#ffffff\" stroke=\"black\" stroke-width=\"1\"></rect>`;\r\n    \r\n    tableData.forEach((row, rowIndex) => {\r\n      row.forEach((cell, colIndex) => {\r\n        if (cell.split(':')[0].length === 7 && cell[0] === '#') {\r\n          let data = cell.split(':');\r\n          out += `<rect x=\"${widthOffsets[colIndex]}\" y=\"${heightOffsets[rowIndex] - 12}\" width=\"20\" height=\"20\" fill=\"${data[0]}\" fill-opacity=\"${data[1]}\"></rect>`;\r\n        } else if (cell === 'shapeRhombus') { \r\n          out += `<g font-family=\"Roboto, 'Helvetica Neue', sans-serif\" font-size=\"16\" fill=\"black\">\r\n            <text x=\"${widthOffsets[colIndex]}\" y=\"${heightOffsets[rowIndex]-12}\" fill=\"black\" rotate=\"80\"></text>\r\n            <text x=\"${widthOffsets[colIndex]+15}\" y=\"${heightOffsets[rowIndex]}\">(Rhombus)</text>\r\n            </g>`;\r\n        } else if (cell === 'shapeTag') { \r\n          out += `<g font-family=\"Roboto, 'Helvetica Neue', sans-serif\" font-size=\"16\" fill=\"black\">\r\n            <text x=\"${widthOffsets[colIndex]}\" y=\"${heightOffsets[rowIndex]-12}\" fill=\"black\" rotate=\"90\"></text>\r\n            <text x=\"${widthOffsets[colIndex]+15}\" y=\"${heightOffsets[rowIndex]}\">(Tag)</text>\r\n            </g>`;\r\n        } else if (cell === 'shapeBarrel') { \r\n          out += `<g font-family=\"Roboto, 'Helvetica Neue', sans-serif\" font-size=\"16\" fill=\"black\">\r\n            <rect x=\"${widthOffsets[colIndex]}\" y=\"${heightOffsets[rowIndex]-12}\" fill=\"black\" width=\"12\" height=\"12\" rx=\"4\" ry=\"4\"/>\r\n            <text x=\"${widthOffsets[colIndex]+15}\" y=\"${heightOffsets[rowIndex]}\">(Barrel)</text>\r\n            </g>`;\r\n        } else if (hasHeaderRow && rowIndex === 0) { \r\n          out += `<text x=\"${widthOffsets[colIndex]}\" y=\"${heightOffsets[rowIndex]}\" font-family=\"Roboto, 'Helvetica Neue', sans-serif\" font-size=\"16\" fill=\"black\" font-weight=\"bold\">${cell}</text>`;\r\n        } else {\r\n          out += `<text x=\"${widthOffsets[colIndex]}\" y=\"${heightOffsets[rowIndex]}\" font-family=\"Roboto, 'Helvetica Neue', sans-serif\" font-size=\"16\" fill=\"black\">${cell}</text>`;\r\n        }\r\n      });\r\n    });\r\n\r\n    out += '</g>';\r\n    return { svg: out, width: widthOffsets[widthOffsets.length - 1] - 20, height: heightOffsets[heightOffsets.length - 1] - 10 };\r\n  }\r\n\r\n  /**\r\n   * Extracts the SVG from a DOM element with CSS included.\r\n   * @param svgNode The SVG HTMLElement (for example, obtained via document.getElementById('network')).\r\n   * @returns A string containing the complete SVG code with CSS.\r\n   */\r\n  unparseSVG(svgNode: HTMLElement): string {\r\n    svgNode.setAttribute(\"xlink\", \"http://www.w3.org/1999/xlink\");\r\n    const selectorTextArr: string[] = [];\r\n\r\n    // Add the parent element's ID and classes.\r\n    selectorTextArr.push(\"#\" + svgNode.id);\r\n    const nClasses = svgNode.classList.length;\r\n    for (let c = 0; c < nClasses; c++) {\r\n      const classSelector = \".\" + svgNode.classList[c];\r\n      if (!selectorTextArr.includes(classSelector)) {\r\n        selectorTextArr.push(classSelector);\r\n      }\r\n    }\r\n\r\n    // Add children element IDs and classes.\r\n    const nodes = svgNode.getElementsByTagName(\"*\");\r\n    const nNodes = nodes.length;\r\n    for (let i = 0; i < nNodes; i++) {\r\n      const child = nodes[i] as HTMLElement;\r\n      const childId = child.id;\r\n      if (childId && !selectorTextArr.includes(\"#\" + childId)) {\r\n        selectorTextArr.push(\"#\" + childId);\r\n      }\r\n      const classes = child.classList;\r\n      for (let d = 0; d < classes.length; d++) {\r\n        const classSelector = \".\" + classes[d];\r\n        if (!selectorTextArr.includes(classSelector)) {\r\n          selectorTextArr.push(classSelector);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Extract CSS rules for the selectors.\r\n    let extractedCSSText = \"\";\r\n    const nStylesheets = document.styleSheets.length;\r\n    for (let j = 0; j < nStylesheets; j++) {\r\n      const s = document.styleSheets[j] as CSSStyleSheet;\r\n      try {\r\n        if (!s.cssRules) continue;\r\n      } catch (e) {\r\n        if ((e as Error).name !== \"SecurityError\") throw e;\r\n        continue;\r\n      }\r\n      const cssRules = s.cssRules;\r\n      const nRules = cssRules.length;\r\n      for (let r = 0; r < nRules; r++) {\r\n        const rule = cssRules[r] as CSSStyleRule;\r\n        if (!rule.selectorText) continue;\r\n        if (selectorTextArr.some(selector => rule.selectorText.includes(selector))) {\r\n          extractedCSSText += rule.cssText;\r\n        }\r\n      }\r\n    }\r\n\r\n    const styleElement = document.createElement(\"style\");\r\n    styleElement.setAttribute(\"type\", \"text/css\");\r\n    styleElement.innerHTML = extractedCSSText;\r\n    const refNode = svgNode.hasChildNodes() ? svgNode.children[0] : null;\r\n    svgNode.insertBefore(styleElement, refNode);\r\n    const serializer = new XMLSerializer();\r\n    return serializer.serializeToString(svgNode);\r\n  }\r\n\r\n  /**\r\n     * XXXXX TODO:: currently not in use - do we need? XXXXX\r\n     * @returns \r\n     */\r\n//   exportHIVTRACE() {\r\n//     let links = this.session.data.links.filter(l => l.visible);\r\n//     let geneticLinks = links.filter(l => l.origin.includes(\"Genetic Distance\"));\r\n//     let sequences = new Set(\r\n//         geneticLinks.map(l => l.source).concat(\r\n//             geneticLinks.map(l => l.target))\r\n//     ).size;\r\n//     let pas = {};\r\n//     this.session.data.nodes.forEach(d => {\r\n//         Object.keys(d).forEach(key => {\r\n//             if (pas[key]) return;\r\n//             pas[key] = {\r\n//                 label: key,\r\n//                 type: this.titleize(typeof d[key])\r\n//             };\r\n//         });\r\n//     });\r\n//     return JSON.stringify(\r\n//         {\r\n//             trace_results: {\r\n//                 \"Cluster sizes\": this.session.data.clusters.map(c => c.size),\r\n//                 Degrees: {\r\n//                     Distribution: [],\r\n//                     Model: \"Waring\",\r\n//                     fitted: [],\r\n//                     rho: 0,\r\n//                     \"rho CI\": [-1, 1]\r\n//                 },\r\n//                 \"Directed Edges\": {\r\n//                     Count: 0,\r\n//                     \"Reasons for unresolved directions\": {\r\n//                         \"Missing dates\": links.length\r\n//                     }\r\n//                 },\r\n//                 \"Edge Stages\": {},\r\n//                 Edges: links.map(l => ({\r\n//                     attributes: [\"BULK\"],\r\n//                     directed: false,\r\n//                     length: l[this.session.style.widgets[\"link-sort-variable\"]],\r\n//                     removed: false,\r\n//                     sequences: [l.source, l.target],\r\n//                     source: this.session.data.nodes.findIndex(d => d._id == l.source),\r\n//                     support: 0,\r\n//                     target: this.session.data.nodes.findIndex(d => d._id == l.target)\r\n//                 })),\r\n//                 \"HIV Stages\": {\r\n//                     \"A-1\": 0,\r\n//                     \"A-2\": 0,\r\n//                     \"A-3\": 0,\r\n//                     Chronic: this.session.data.nodes.length,\r\n//                     \"E-1\": 0,\r\n//                     \"E-2\": 0,\r\n//                     \"E-3\": 0\r\n//                 },\r\n//                 \"Multiple sequences\": {\r\n//                     \"Followup, days\": null,\r\n//                     \"Subjects with\": 0\r\n//                 },\r\n//                 \"Network Summary\": {\r\n//                     Clusters: this.session.data.clusters.length,\r\n//                     Edges: links.length,\r\n//                     Nodes: this.session.data.nodes.length,\r\n//                     \"Sequences used to make links\": sequences\r\n//                 },\r\n//                 Nodes: this.session.data.nodes.map(d => ({\r\n//                     attributes: [],\r\n//                     baseline: null,\r\n//                     cluster: d.cluster,\r\n//                     edi: null,\r\n//                     id: d._id,\r\n//                     patient_attributes: d\r\n//                 })),\r\n//                 patient_attribute_schema: pas,\r\n//                 Settings: {\r\n//                     \"contaminant-ids\": [],\r\n//                     contaminants: \"remove\",\r\n//                     \"edge-filtering\": \"remove\",\r\n//                     threshold: this.session.style.widgets[\"link-threshold\"]\r\n//                 }\r\n//             }\r\n//         },\r\n//         null,\r\n//         2\r\n//     );\r\n// };\r\n\r\n}","import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport * as patristic from 'patristic';\r\nimport { WorkerModule } from '../workers/workModule';\r\n\r\n/**\r\n * This service delegates all Worker-based computations.\r\n * It expects a 'session' object with the same structure\r\n * that CommonService uses (so we can push nodeFields, etc.).\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WorkerComputeService {\r\n  \r\n  constructor(private computer: WorkerModule) {}\r\n\r\n  /**\r\n   * Helper that converts a Workers events into an RxJS Observable.\r\n   */\r\n  private fromWorker(worker: any): Observable<MessageEvent<any>> {\r\n    return new Observable(observer => {\r\n      // If the worker implements addEventListener, use it.\r\n      if (typeof worker.addEventListener === 'function') {\r\n        const messageHandler = (event: MessageEvent<any>) => observer.next(event);\r\n        const errorHandler = (error: ErrorEvent) => observer.error(error);\r\n        worker.addEventListener('message', messageHandler);\r\n        worker.addEventListener('error', errorHandler);\r\n  \r\n        return () => {\r\n          worker.removeEventListener('message', messageHandler);\r\n          worker.removeEventListener('error', errorHandler);\r\n          worker.terminate();\r\n        };\r\n      } else {\r\n        // Fallback for InlineWorker (or any non-standard worker)\r\n        // Use the onmessage and onerror properties.\r\n        worker.onmessage = (event: MessageEvent<any>) => observer.next(event);\r\n        worker.onerror = (error: ErrorEvent) => observer.error(error);\r\n        \r\n        return () => {\r\n          // If your InlineWorker provides a terminate() method, call it.\r\n          if (typeof worker.terminate === 'function') {\r\n            worker.terminate();\r\n          }\r\n        };\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Align sequences using a worker.\r\n   * We push the extra node fields (_score, _padding, _cigar)\r\n   * just like the old CommonService code did.\r\n   */\r\n  public align(session: any, params: any): Promise<any> {\r\n    return new Promise(resolve => {\r\n      if (params.aligner === 'none') {\r\n        return resolve(params.nodes);\r\n      }\r\n\r\n      const n = params.nodes.length;\r\n      const referenceLength = params.reference.length;\r\n\r\n      const alignWorker = this.computer.getAlignWorker() as unknown as Worker;\r\n      alignWorker.postMessage(params);\r\n\r\n      const sub = this.fromWorker(alignWorker).subscribe(response => {\r\n        const decoder = new TextDecoder('utf-8');\r\n        const subset = JSON.parse(decoder.decode(new Uint8Array(response.data.nodes)));\r\n\r\n        if (session.debugMode) {\r\n          console.log(\r\n            'Alignment transit time: ',\r\n            (Date.now() - response.data.start).toLocaleString(),\r\n            'ms'\r\n          );\r\n        }\r\n\r\n        const start = Date.now();\r\n        let minPadding = Infinity;\r\n        for (let i = 0; i < n; i++) {\r\n          const d = subset[i];\r\n          if (!d._seq) d._seq = '';\r\n          if (minPadding > d._padding) {\r\n            minPadding = d._padding;\r\n          }\r\n        }\r\n\r\n        // Pad all sequences\r\n        for (let j = 0; j < n; j++) {\r\n          const d = subset[j];\r\n          d._seq = '-'.repeat(d._padding - minPadding) + d._seq;\r\n          if (d._seq.length > referenceLength) {\r\n            d._seq = d._seq.substring(0, referenceLength);\r\n          } else {\r\n            d._seq = d._seq.padEnd(referenceLength, '-');\r\n          }\r\n        }\r\n\r\n        // Just like in old code, push the new nodeFields\r\n        session.data.nodeFields.push('_score', '_padding', '_cigar');\r\n\r\n        if (session.debugMode) {\r\n          console.log(\r\n            'Alignment Padding time: ',\r\n            (Date.now() - start).toLocaleString(),\r\n            'ms'\r\n          );\r\n        }\r\n\r\n        resolve(subset);\r\n\r\n        alignWorker.terminate();\r\n        sub.unsubscribe();\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Compute consensus from a set of nodes that have .seq.\r\n   */\r\n  public computeConsensus(session: any, nodes: any[]): Promise<any> {\r\n    return new Promise(resolve => {\r\n      const consensusWorker = this.computer.getConsensusWorker() as unknown as Worker;\r\n      consensusWorker.postMessage({ data: nodes });\r\n\r\n      const sub = this.fromWorker(consensusWorker).subscribe(response => {\r\n        if (session.debugMode) {\r\n          console.log(\r\n            'Consensus Transit time: ',\r\n            (Date.now() - response.data.start).toLocaleString(),\r\n            'ms'\r\n          );\r\n        }\r\n\r\n        const decoder = new TextDecoder('utf-8');\r\n        const consensus = decoder.decode(new Uint8Array(response.data.consensus));\r\n\r\n        resolve(consensus);\r\n        consensusWorker.terminate();\r\n        sub.unsubscribe();\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Compute ambiguity counts. Also push \"_ambiguity\" into nodeFields\r\n   * like the old code did.\r\n   */\r\n  public computeAmbiguityCounts(session: any): Promise<void> {\r\n    return new Promise<void>(resolve => {\r\n      const nodes = session.data.nodes;\r\n      const subset = nodes.filter((d: any) => d.seq);\r\n      const subsetLength = subset.length;\r\n\r\n      const ambiguityWorker = this.computer.getAmbiguityCountsWorker() as unknown as Worker;\r\n      ambiguityWorker.postMessage(subset);\r\n\r\n      const sub = this.fromWorker(ambiguityWorker).subscribe(response => {\r\n        if (session.debugMode) {\r\n          console.log(\r\n            'Ambiguity Count Transit time: ',\r\n            (Date.now() - response.data.start).toLocaleString(),\r\n            'ms'\r\n          );\r\n        }\r\n        const start = Date.now();\r\n        const dists = new Float32Array(response.data.counts);\r\n\r\n        // Assign each nodes ._ambiguity\r\n        for (let j = 0; j < subsetLength; j++) {\r\n          nodes[subset[j].index]._ambiguity = dists[j];\r\n        }\r\n        // In old code, we also do: session.data.nodeFields.push('_ambiguity');\r\n        session.data.nodeFields.push('_ambiguity');\r\n\r\n        if (session.debugMode) {\r\n          console.log(\r\n            'Ambiguity Count Merge time: ',\r\n            (Date.now() - start).toLocaleString(),\r\n            'ms'\r\n          );\r\n        }\r\n\r\n        resolve();\r\n        ambiguityWorker.terminate();\r\n        sub.unsubscribe();\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Compute consensus distances. Also push \"_diff\" field.\r\n   */\r\n  public computeConsensusDistances(session: any): Promise<void> {\r\n    return new Promise<void>(resolve => {\r\n      const start = Date.now();\r\n      const nodes = session.data.nodes;\r\n      const subset: any[] = [];\r\n\r\n      // Build subset array\r\n      for (let i = 0; i < nodes.length; i++) {\r\n        subset.push({ index: i, seq: nodes[i].seq || '' });\r\n      }\r\n\r\n      const consensusWorker = this.computer.getConsensusWorker() as unknown as Worker;\r\n      consensusWorker.postMessage({\r\n        data: {\r\n          consensus: session.data['consensus'] || null, // or pass actual consensus if you have it\r\n          subset: subset,\r\n          start: start\r\n        }\r\n      });\r\n\r\n      const sub = this.fromWorker(consensusWorker).subscribe(response => {\r\n        const dists = new Uint16Array(response.data.dists);\r\n        if (session.debugMode) {\r\n          console.log(\r\n            'Consensus Difference Transit time: ',\r\n            (Date.now() - response.data.start).toLocaleString(),\r\n            'ms'\r\n          );\r\n        }\r\n        const mergeStart = Date.now();\r\n        for (let j = 0; j < subset.length; j++) {\r\n          nodes[subset[j].index]._diff = dists[j];\r\n        }\r\n        // old code: session.data.nodeFields.push('_diff');\r\n        session.data.nodeFields.push('_diff');\r\n\r\n        if (session.debugMode) {\r\n          console.log(\r\n            'Consensus Difference Merge time: ',\r\n            (Date.now() - mergeStart).toLocaleString(),\r\n            'ms'\r\n          );\r\n        }\r\n        resolve();\r\n        consensusWorker.terminate();\r\n        sub.unsubscribe();\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Compute links using default-distance-metric. \r\n   * The old code used subset plus calls addLink on session.\r\n   * So we do the same: we loop through the pairs and call session.addLink(...) for each distance.\r\n   */\r\n /**\r\n   * Compute links using a worker.\r\n   * Note: We now pass an addLink callback so that we can call\r\n   * the original addLink logic from CommonService.\r\n   */\r\n public computeLinks(\r\n    session: any,\r\n    subset: any[],\r\n    addLink: (link: any, check: any) => number\r\n  ): Promise<any> {\r\n    return new Promise(resolve => {\r\n      let k = 0;\r\n      const metric = session.style.widgets['default-distance-metric'];\r\n      const linksWorker = this.computer.getLinksWorker() as unknown as Worker;\r\n      linksWorker.postMessage({\r\n        nodes: subset,\r\n        metric: metric,\r\n        strategy: session.style.widgets[\"ambiguity-resolution-strategy\"],\r\n        threshold: session.style.widgets[\"ambiguity-threshold\"]\r\n      });\r\n\r\n      const sub = this.fromWorker(linksWorker).subscribe((response: MessageEvent<any>) => {\r\n        // Choose the proper typed array based on metric\r\n        const dists = metric.toLowerCase() === 'snps'\r\n          ? new Uint16Array(response.data.links)\r\n          : new Float32Array(response.data.links);\r\n\r\n        if (session.debugMode) {\r\n          console.log(\r\n            'Links Transit time: ',\r\n            (Date.now() - response.data.start).toLocaleString(),\r\n            'ms'\r\n          );\r\n        }\r\n        const start = Date.now();\r\n        const checkFlag = session.files.length > 1;\r\n        let l = 0;\r\n        // For each pair (i,j) with i > j, add a link using the provided addLink callback.\r\n        for (let i = 0; i < subset.length; i++) {\r\n          const sourceID = subset[i]._id;\r\n          for (let j = 0; j < i; j++) {\r\n            k += addLink({\r\n              source: sourceID,\r\n              target: subset[j]._id,\r\n              distance: dists[l++],\r\n              origin: ['Genetic Distance'],\r\n              distanceOrigin: 'Genetic Distance',\r\n              hasDistance: true,\r\n              directed: false\r\n            }, checkFlag);\r\n          }\r\n        }\r\n        if (session.debugMode) {\r\n          console.log(\r\n            'Links Merge time: ',\r\n            (Date.now() - start).toLocaleString(),\r\n            'ms'\r\n          );\r\n        }\r\n        resolve(k);\r\n        linksWorker.terminate();\r\n        sub.unsubscribe();\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Rebuild old getDM logic. \r\n   * If session.data['newick'], parse. Otherwise build matrix from session.temp.matrix.\r\n   */\r\n  public getDM(session: any): Promise<any> {\r\n    return new Promise(resolve => {\r\n      const start = Date.now();\r\n      let dm: any;\r\n\r\n      if (session.data['newick']) {\r\n        const treeObj = patristic.parseNewick(session.data['newick']);\r\n        dm = treeObj.toMatrix();\r\n      } else {\r\n        let labels = session.data.nodes.map((d: any) => d._id).sort();\r\n        const metric = session.style.widgets['link-sort-variable'];\r\n        const n = labels.length;\r\n        dm = new Array(n);\r\n\r\n        for (let i = 0; i < n; i++) {\r\n          dm[i] = new Array(n);\r\n          dm[i][i] = 0;\r\n          const source = labels[i];\r\n          const row = session.temp.matrix[source];\r\n          if (!row) {\r\n            console.error(`Incompletely populated temp.matrix! Could not find: ${source}`);\r\n            continue;\r\n          }\r\n          for (let j = 0; j < i; j++) {\r\n            const link = row[labels[j]];\r\n            if (link) {\r\n              dm[i][j] = dm[j][i] = link[metric];\r\n            } else {\r\n              dm[i][j] = dm[j][i] = null;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if (session.debugMode) {\r\n        console.log(\r\n          'DM Compute time: ',\r\n          (Date.now() - start).toLocaleString(),\r\n          'ms'\r\n        );\r\n      }\r\n      resolve(dm);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Compute an NJ/UPGMA tree. \r\n   * We do the same patristic-based approach from the old code. \r\n   */\r\n  public computeTree(session: any): Promise<any> {\r\n    return new Promise(resolve => {\r\n      if (session.temp.treeObj) {\r\n        // If we already have a treeObj, just use it\r\n        return resolve(session.temp.treeObj.toNewick());\r\n      } else if (session.data['newick']) {\r\n        // If we already have a newick string\r\n        return resolve(session.data['newick']);\r\n      } else {\r\n        // Otherwise, build from DM\r\n        this.getDM(session).then(dm => {\r\n          const treeWorker = this.computer.getTreeWorker() as unknown as Worker;\r\n          treeWorker.postMessage({\r\n            labels: session.data.nodes.map((a: any) => a._id),\r\n            matrix: dm,\r\n            round: session.style.widgets[\"tree-round\"]\r\n          });\r\n\r\n          const sub = this.fromWorker(treeWorker).subscribe(response => {\r\n            const decoder = new TextDecoder('utf-8');\r\n            const treeObjJSON = decoder.decode(new Uint8Array(response.data.tree));\r\n            const treeString = patristic.parseJSON(treeObjJSON).toNewick();\r\n\r\n            if (session.debugMode) {\r\n              console.log(\r\n                'Tree Transit time: ',\r\n                (Date.now() - response.data.start).toLocaleString(),\r\n                'ms'\r\n              );\r\n            }\r\n\r\n            resolve(treeString);\r\n            treeWorker.terminate();\r\n            sub.unsubscribe();\r\n          });\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Compute directionality, flipping links if needed. \r\n   */\r\n  public computeDirectionality(session: any): Promise<void> {\r\n    return new Promise<void>(resolve => {\r\n      const directionalityWorker = this.computer.getDirectionalityWorker() as unknown as Worker;\r\n      directionalityWorker.postMessage({\r\n        links: session.data.links,\r\n        tree: session.temp.tree\r\n      });\r\n\r\n      const sub = this.fromWorker(directionalityWorker).subscribe(response => {\r\n        const flips = new Uint8Array(response.data.output);\r\n\r\n        if (session.debugMode) {\r\n          console.log(\r\n            'Directionality Transit time: ',\r\n            (Date.now() - response.data.start).toLocaleString(),\r\n            'ms'\r\n          );\r\n        }\r\n\r\n        const start = Date.now();\r\n        for (let i = 0; i < flips.length; i++) {\r\n          if (flips[i]) {\r\n            const fliplink = session.data.links[i];\r\n            const fliptemp = fliplink.source;\r\n            fliplink.source = fliplink.target;\r\n            fliplink.target = fliptemp;\r\n            fliplink.directed = true;\r\n          }\r\n        }\r\n\r\n        if (session.debugMode) {\r\n          console.log(\r\n            'Directionality Integration time: ',\r\n            (Date.now() - start).toLocaleString(),\r\n            'ms'\r\n          );\r\n        }\r\n        resolve();\r\n        directionalityWorker.terminate();\r\n        sub.unsubscribe();\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Compute MST, storing an nn:true property on any MST edges, like old code.\r\n   */\r\n  public computeMST(session: any, temp: any): Promise<void> {\r\n    return new Promise<void>((resolve, reject) => {\r\n      const mstWorker = this.computer.getMSTWorker() as unknown as Worker;\r\n      mstWorker.postMessage({\r\n        links: session.data.links,\r\n        matrix: temp.matrix,\r\n        epsilon: session.style.widgets[\"filtering-epsilon\"],\r\n        metric: session.style.widgets['link-sort-variable']\r\n      });\r\n\r\n      const sub = this.fromWorker(mstWorker).subscribe(response => {\r\n        if (response.data === \"Error\") {\r\n          return reject('MST washed out');\r\n        }\r\n        const output = new Uint8Array(response.data.links);\r\n        if (session.debugMode) {\r\n          console.log(\r\n            'MST Transit time: ',\r\n            (Date.now() - response.data.start).toLocaleString(),\r\n            'ms'\r\n          );\r\n        }\r\n        const start = Date.now();\r\n        for (let i = 0; i < session.data.links.length; i++) {\r\n          session.data.links[i].nn = output[i] ? true : false;\r\n        }\r\n        if (session.debugMode) {\r\n          console.log(\r\n            'MST Merge time: ',\r\n            (Date.now() - start).toLocaleString(),\r\n            'ms'\r\n          );\r\n        }\r\n        resolve();\r\n        mstWorker.terminate();\r\n        sub.unsubscribe();\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Compute NN, storing nn:true on the nearest neighbor edges.\r\n   */\r\n  public computeNN(session: any, temp: any): Promise<void> {\r\n    return new Promise<void>((resolve, reject) => {\r\n      const nnWorker = this.computer.getNNWorker() as unknown as Worker;\r\n      nnWorker.postMessage({\r\n        links: session.data.links,\r\n        matrix: temp.matrix,  // use temp.matrix (not session.temp)\r\n        epsilon: session.style.widgets[\"filtering-epsilon\"],\r\n        metric: session.style.widgets[\"link-sort-variable\"]\r\n      });\r\n  \r\n      const sub = this.fromWorker(nnWorker).subscribe((response: MessageEvent<any>) => {\r\n        if (response.data === 'Error') {\r\n          return reject('Nearest Neighbor washed out');\r\n        }\r\n        const output = new Uint8Array(response.data.links);\r\n  \r\n        if (session.debugMode) {\r\n          console.log(\r\n            'NN Transit time: ',\r\n            (Date.now() - response.data.start).toLocaleString(),\r\n            'ms'\r\n          );\r\n        }\r\n        const start = Date.now();\r\n        // Loop over all links in session.data.links and update the nn property.\r\n        for (let i = 0; i < session.data.links.length; i++) {\r\n          session.data.links[i].nn = output[i] ? true : false;\r\n        }\r\n        if (session.debugMode) {\r\n          console.log(\r\n            'NN Merge time: ',\r\n            (Date.now() - start).toLocaleString(),\r\n            'ms'\r\n          );\r\n        }\r\n        resolve();\r\n        nnWorker.terminate();\r\n        sub.unsubscribe();\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Compute Triangulation, adding invisible placeholders for missing edges, etc.\r\n   */\r\n  public computeTriangulation(\r\n    session: any,\r\n    temp: any,\r\n    addLink: (link: any, check: any) => number\r\n  ): Promise<void> {\r\n    return new Promise<void>((resolve, reject) => {\r\n      const metric = session.style.widgets['link-sort-variable'];\r\n      this.getDM(session).then(dm => {\r\n        const triangulationWorker = this.computer.getTriangulationWorker() as unknown as Worker;\r\n        triangulationWorker.postMessage({ matrix: dm });\r\n        \r\n        const sub = this.fromWorker(triangulationWorker).subscribe((response: MessageEvent<any>) => {\r\n          if (response.data === 'Error') {\r\n            return reject('Triangulation washed out');\r\n          }\r\n          if (session.debugMode) {\r\n            console.log(\r\n              'Triangulation Transit time: ',\r\n              (Date.now() - response.data.start).toLocaleString(),\r\n              'ms'\r\n            );\r\n          }\r\n          const mergeStart = Date.now();\r\n          const decoder = new TextDecoder('utf-8');\r\n          const matrixObj = JSON.parse(decoder.decode(new Uint8Array(response.data.matrix)));\r\n  \r\n          // Use the labels from the temp object (not session.temp)\r\n          const labels = Object.keys(temp.matrix);\r\n          const n = labels.length;\r\n          for (let i = 0; i < n; i++) {\r\n            const source = labels[i];\r\n            const row = temp.matrix[source];\r\n            for (let j = 0; j < i; j++) {\r\n              const target = labels[j];\r\n              // If the temporary matrix is missing an entry, call the addLink callback.\r\n              if (!row[target]) {\r\n                addLink(\r\n                  {\r\n                    source: source,\r\n                    target: target,\r\n                    origin: ['Triangulation'],\r\n                    visible: false\r\n                  },\r\n                  false // or whatever \"check\" flag you need\r\n                );\r\n              }\r\n              // Update the distance for this metric.\r\n              row[target][metric] = matrixObj[i][j];\r\n            }\r\n          }\r\n          if (session.debugMode) {\r\n            console.log(\r\n              'Triangulation Merge time: ',\r\n              (Date.now() - mergeStart).toLocaleString(),\r\n              'ms'\r\n            );\r\n          }\r\n          resolve();\r\n          triangulationWorker.terminate();\r\n          sub.unsubscribe();\r\n        });\r\n      });\r\n    });\r\n  }\r\n}","import { Component, Output, EventEmitter, OnInit, Inject, ElementRef, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\r\nimport { CommonService } from '../contactTraceCommonServices/common.service';\r\nimport * as XLSX from 'xlsx';\r\nimport * as Papa from 'papaparse';\r\nimport * as saveAs from 'file-saver';\r\nimport * as fileto from 'fileto';\r\nimport { generateCanvas } from '../visualizationComponents/AlignmentViewComponent/generateAlignmentViewCanvas';\r\nimport * as tn93 from 'tn93';\r\nimport * as patristic from 'patristic';\r\nimport * as _ from 'lodash';\r\nimport { MicrobeTraceNextVisuals } from '../microbe-trace-next-plugin-visuals';\r\nimport { EventEmitterService } from '@shared/utils/event-emitter.service';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport { cloneDeep } from 'lodash';\r\nimport { Subject, Subscription, takeUntil } from 'rxjs';\r\nimport { CommonStoreService } from '@app/contactTraceCommonServices/common-store.services';\r\nimport { relativeTimeThreshold } from 'moment';\r\n// import { ComponentContainer } from 'golden-layout';\r\n// import { ConsoleReporter } from 'jasmine';\r\n\r\n\r\n@Component({\r\n  selector: 'FilesComponent',\r\n  templateUrl: './files-plugin.component.html',\r\n  styleUrls: ['./files-plugin.component.less'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\n\r\nexport class FilesComponent extends BaseComponentDirective implements OnInit {\r\n\r\n  @Output() LoadDefaultVisualizationEvent = new EventEmitter();\r\n\r\n  auspiceUrlVal: any;\r\n\r\n  SelectedDefaultDistanceMetricVariable: string = \"tn93\";\r\n  SelectedAmbiguityResolutionStrategyVariable: string = \"AVERAGE\";\r\n  SelectedAmbiguityThresholdVariable: any = 0.015;\r\n  SelectedDefaultDistanceThresholdVariable: any = 0.015;\r\n  SelectedDefaultViewVariable: string = \"2D Network\";\r\n  SelectedGenerateNumberVariable: any = 100;\r\n\r\n  DirectionalityTypes: any = [\r\n    { label: 'Off', value: 'Off' },\r\n    { label: 'Inferred', value: 'Inferred' }\r\n  ];\r\n  SelectedDirectionalityTypeVariable: string = \"Off\";\r\n\r\n  TriangulationTypes: any = [\r\n    { label: 'Off', value: 'Off' },\r\n    { label: 'On', value: 'On' }\r\n  ];\r\n  SelectedTriangulationTypeVariable: string = \"Off\";\r\n\r\n  AutostashingTypes: any = [\r\n    { label: 'Off', value: 'Off' },\r\n    { label: 'On', value: 'On' }\r\n  ];\r\n  SelectedAutostashingTypeVariable: string = \"Off\";\r\n\r\n\r\n  AlignTypes: any = [\r\n    { label: 'None', value: 'None' },\r\n    { label: 'Smith-Waterman', value: 'Smith-Waterman' }\r\n  ];\r\n  SelectedAlignTypeVariable: string = \"None\";\r\n\r\n  isLoadingFiles: boolean = false;\r\n\r\n  ReferenceTypes: any = [\r\n    { label: 'LoadFrom FASTA', value: 'LoadFrom FASTA' },\r\n    { label: 'First Sequence', value: 'First Sequence' },\r\n    { label: 'Consensus', value: 'Consensus' }\r\n  ];\r\n  SelectedReferenceTypeVariable: string = \"LoadFrom FASTA\";\r\n\r\n  SelectedRefSeqFileLoadVariable: string = \"\";\r\n\r\n\r\n  RefSeqIDTypes: any = [\r\n\r\n  ];\r\n  SelectedRefSeqIDVariable: string = \"\";\r\n\r\n  SelectedAlignerMatchVariable: any = \"1\";\r\n  SelectedAlignerMismatchVariable: any = 1;\r\n  SelectedAlignerGapOVariable: any = 5;\r\n  SelectedAlignerGapEVariable: any = 2;\r\n\r\n  IsReferenceSourceSelected: boolean = false;\r\n  IsReferenceOptionsSelected: boolean = true;\r\n  SelectedAuditEmptyVariable: boolean = true;\r\n  SelectedAuditGapsVariable: boolean = true;\r\n  SelectedAuditRNAVariable: boolean = true;\r\n  SelectedAuditAminoAcidsVariable: boolean = true;\r\n  SelectedAuditCIGARVariable: boolean = true;\r\n  SelectedAuditMalformedVariable: boolean = true;\r\n\r\n  IsDataAvailable: boolean = false;\r\n  messages: any[];\r\n  displayFileSettings: boolean = false;\r\n  displaySequenceSettings: boolean = false;\r\n  displayloadingInformationModal: boolean = false;\r\n\r\n  nodeIds: { fileName: string; ids: string[] }[] = [];\r\n  edgeIds: { fileName: string; ids: { source: string; target: string }[] }[] = [];\r\n\r\n  uniqueNodes: string[] = [];\r\n  uniqueEdgeNodes: string[] = [];\r\n\r\n  public title: string;\r\n  public id: string;\r\n\r\n  private destroy$ = new Subject<void>();\r\n\r\n  \r\n\r\n  constructor(\r\n    @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer, elRef: ElementRef,\r\n    private eventEmitterService: EventEmitterService,\r\n    public commonService: CommonService,\r\n    private cdr: ChangeDetectorRef,\r\n    private store: CommonStoreService\r\n    ) {\r\n\r\n    super(elRef.nativeElement);\r\n\r\n    // this.title = this.container.title;\r\n    this.id = this.container.parent.id;\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    this.RefSeqIDTypes.push(\r\n      { label: 'Pol', value: this.commonService.HXB2.substr(2000, 2100) });\r\n\r\n    this.RefSeqIDTypes.push(\r\n      { label: 'Complete', value: this.commonService.HXB2 });\r\n\r\n\r\n    this.SelectedDefaultDistanceThresholdVariable = this.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable;\r\n    this.SelectedDefaultDistanceMetricVariable = this.commonService.GlobalSettingsModel.SelectedDistanceMetricVariable;\r\n    this.commonService.LoadViewEvent.subscribe((v) => { this.loadDefaultVisualization(v); });\r\n    this.commonService.session.data.reference = this.commonService.HXB2.substr(2000, 2100);\r\n\r\n    if (this.eventEmitterService.subsVar==undefined) {    \r\n      this.eventEmitterService.subsVar = this.eventEmitterService.    \r\n        invokeFirstComponentFunction.subscribe((name:string) => {    \r\n          this.processFile();    \r\n        });    \r\n    }  \r\n\r\n     // Subscribe to new session event\r\n     this.store.newSession$.subscribe(() => {\r\n      this.removeAllFiles();\r\n    });\r\n\r\n    // Subscribe to style file applied event\r\n    this.store.styleFileApplied$.subscribe(() => {\r\n      this.applyStyleFileSettings();\r\n    });\r\n\r\n    this.store.FP_removeFiles$.subscribe(() => {\r\n      this.commonService.session.files.forEach(file => {\r\n        this.removeFile(file.name, false);\r\n      })\r\n  });\r\n\r\n    // TODO: the rest of ngOnInit can be revised to take advantage of angular features\r\n    $('.alignConfigRow').hide();\r\n\r\n    $('#align-sw').parent().on('click', () => {\r\n\r\n      this.commonService.session.style.widgets['align-sw'] = true;\r\n      this.commonService.session.style.widgets['align-none'] = false;\r\n      $('.alignConfigRow, #reference-file-row').slideDown();\r\n      $('#alignment-preview').slideUp(function () {\r\n\r\n        //debugger;\r\n\r\n        $(this).empty().show();\r\n      });\r\n    });\r\n\r\n    $('#align-none').parent().on('click', () => {\r\n\r\n      this.commonService.session.style.widgets['align-sw'] = false;\r\n      this.commonService.session.style.widgets['align-none'] = true;\r\n      $('.alignConfigRow, #reference-file-row').slideUp();\r\n      $('#alignment-preview').slideUp(function () {\r\n\r\n        //debugger;\r\n\r\n        $(this).empty().show();\r\n      });\r\n    });\r\n\r\n    $('#reference-source-file').parent().on('click', () => {\r\n\r\n      //debugger;\r\n\r\n      this.commonService.session.style.widgets['reference-source-file'] = true;\r\n      this.commonService.session.style.widgets['reference-source-first'] = false;\r\n      this.commonService.session.style.widgets['reference-source-consensus'] = false;\r\n      this.commonService.session.data.reference = $('#refSeqID').val().toString();\r\n\r\n      //debugger;\r\n\r\n      if (!this.commonService.session.style.widgets['align-none']) $('#reference-file-row').slideDown();\r\n    });\r\n\r\n    $('#reference-source-first').parent().on('click', () => {\r\n      this.commonService.session.style.widgets['reference-source-file'] = false;\r\n      this.commonService.session.style.widgets['reference-source-first'] = true;\r\n      this.commonService.session.style.widgets['reference-source-consensus'] = false;\r\n      $('#reference-file-row').slideUp();\r\n    });\r\n\r\n    $('#reference-source-consensus').parent().on('click', () => {\r\n      this.commonService.session.style.widgets['reference-source-file'] = false;\r\n      this.commonService.session.style.widgets['reference-source-first'] = false;\r\n      this.commonService.session.style.widgets['reference-source-consensus'] = true;\r\n      $('#reference-file-row').slideUp();\r\n    });\r\n\r\n    $('#reference-file-row').hide();\r\n\r\n    $('#refSeqFileLoad').on('change', () => {\r\n\r\n      //debugger;\r\n\r\n      const file = this.commonService.session.files[0];   //this.files[0];\r\n      let reader = new FileReader();\r\n      reader.onloadend = (e: any) => {\r\n        if (e.target.readyState === FileReader.DONE) {\r\n          this.commonService.parseFASTA(e.target.result).then(nodes => {\r\n            $('#refSeqID')\r\n              .html(nodes.map((d, i) => `\r\n                                <option value=\"${this.commonService.filterXSS(d.seq)}\" ${i === 0 ? \"selected\" : \"\"}>${this.commonService.filterXSS(d.id)}</option>\r\n                              `))\r\n              .trigger('change');\r\n          });\r\n          $('label[for=\"refSeqFileLoad\"]').text(this.commonService.filterXSS(file.name));\r\n        }\r\n      };\r\n      reader.readAsText(file);\r\n    });\r\n\r\n    $('#refSeqID').html(`\r\n          <option value=\"${this.commonService.HXB2.substr(2000, 2100)}\" selected>Pol</option>\r\n          <option value=\"${this.commonService.HXB2}\">Complete</option>\r\n        `).on('change', (e) => {\r\n\r\n          //debugger;\r\n          this.commonService.session.data.reference = e.data;// this.value;\r\n\r\n        });\r\n\r\n    $('#alignment-preview').on('click', () => {\r\n      this.readFastas().then(data => {\r\n        if (this.commonService.session.style.widgets['reference-source-first']) {\r\n\r\n          //debugger;\r\n\r\n          this.commonService.session.data.reference = \"\"; //nodes[0].seq;\r\n        }\r\n        if (this.commonService.session.style.widgets['reference-source-consensus']) {\r\n          this.commonService.computeConsensus().then(consensus => this.commonService.session.data.reference = consensus);\r\n        }\r\n        this.updatePreview(data);\r\n      });\r\n    });\r\n\r\n    const auditBlock = $('#audited-sequences');\r\n\r\n    const logAudit = (parentContext, id, type) => {\r\n      const match = auditBlock.find(`[data-id=\"${id}\"]`);\r\n      const button = $(`<button class=\"btn btn-warning btn-sm audit-exclude\" data-id=\"${id}\">Exclude</button>`).on('click', function () {\r\n        const thi$ = $(this);\r\n        const id = thi$.data('id');\r\n        if (thi$.text() === 'Exclude') {\r\n          parentContext.commonService.session.data.nodeExclusions.push(id);\r\n          thi$.removeClass('btn-warning').addClass('btn-success').text('Include');\r\n        } else {\r\n          parentContext.commonService.session.data.nodeExclusions.splice(parentContext.commonService.session.data.nodeExclusions.indexOf(id), 1);\r\n          thi$.removeClass('btn-success').addClass('btn-warning').text('Exclude');\r\n        }\r\n      });\r\n      const row = $(`<div class=\"alert alert-warning w-100 d-flex justify-content-between\" role=\"alert\"><span>${id} appears to be ${type}.</span></div>`);\r\n      row.append(button);\r\n      auditBlock.append(row);\r\n    };\r\n\r\n    $('#audit-launcher').on('click', () => {\r\n      this.readFastas().then(data => {\r\n        const start = Date.now();\r\n        const isGaps = /^-+$/;\r\n        const isRNA = /^[ACGURYMKWSBDHVN-]+$/;\r\n        const isAA = /^[ARNDCQEGHILKMFPSTWYVBZN]+$/;\r\n        const isDNA = /^[ACGTRYMKWSBDHVN-]+$/;\r\n        const isCIGAR = /^[0-9MIDNSHP=X]+$/;\r\n        const isMalformed = /[^ACGTURYMKWSBDHVNQEILFPZX0-9-]+/;\r\n        const checkEmpty = $('#audit-empty').is(':checked');\r\n        const checkGaps = $('#audit-gaps').is(':checked');\r\n        const checkRNA = $('#audit-RNA').is(':checked');\r\n        const checkAA = $('#audit-amino-acids').is(':checked');\r\n        const checkCIGAR = $('#audit-CIGAR').is(':checked');\r\n        const checkMalformed = $('#audit-malformed').is(':checked');\r\n        // const any = false;\r\n        data.forEach(d => {\r\n          const seq = d.seq, id = d.id;\r\n          if (checkEmpty && seq === '') logAudit(this, id, 'empty');\r\n          if (checkGaps && isGaps.test(seq)) logAudit(this, id, 'all gaps')\r\n          if (checkRNA && isRNA.test(seq) && !isGaps.test(seq)) logAudit(this, id, 'RNA');\r\n          if (checkAA && isAA.test(seq) && !isDNA.test(seq)) logAudit(this, id, 'amino acids');\r\n          if (checkCIGAR && isCIGAR.test(seq)) logAudit(this, id, 'a CIGAR');\r\n          if (checkMalformed && isMalformed.test(seq)) logAudit(this, id, 'malformed');\r\n        });\r\n        console.log('Sequence Auditing time:', (Date.now() - start).toLocaleString(), 'ms');\r\n      });\r\n    });\r\n\r\n    $('#audit-toggle-all').on('click', () => {\r\n      $('.audit-exclude').trigger('click');\r\n    });\r\n\r\n    $('#default-distance-metric').change((e) => {\r\n\r\n      //debugger;\r\n\r\n      const lsv = e.data ? e.data : 'tn93';\r\n      this.commonService.localStorageService.setItem('default-distance-metric', lsv);\r\n      $('#default-distance-metric').val(lsv);\r\n      console.log(lsv);\r\n      if (lsv.toLowerCase() === 'snps') {\r\n        $('#ambiguities-row').slideUp();\r\n        $('#default-distance-threshold') //, #link-threshold')\r\n          .attr('step', 1)\r\n          .val(16);\r\n        this.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable = 16;\r\n        console.log('default-distance-metric change file-plugin.component.ts snps');\r\n        this.store.setLinkThreshold(16);\r\n      } else {\r\n        $('#ambiguities-row').slideDown();\r\n        $('#default-distance-threshold') //, #link-threshold')\r\n          .attr('step', 0.001)\r\n          .val(0.015);\r\n        this.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable = 0.015;\r\n        console.log('default-distance-metric change file-plugin.component.ts tn93');\r\n        this.store.setLinkThreshold(0.015);\r\n      }\r\n      this.commonService.session.style.widgets['default-distance-metric'] = lsv;\r\n      this.commonService.GlobalSettingsModel.SelectedDefaultDistanceMetricVariable = lsv;\r\n    });\r\n\r\n    let cachedLSV = \"\";\r\n    this.commonService.localStorageService.getItem('default-distance-metric', (result) => {\r\n      cachedLSV = result;\r\n\r\n      if (cachedLSV) {\r\n        $('#default-distance-metric').val(cachedLSV).trigger('change');\r\n      }\r\n    });\r\n\r\n\r\n\r\n    $('#ambiguity-resolution-strategy').on('change', (e) => {\r\n\r\n      //debugger;\r\n\r\n      const v = e.data; //this.value;\r\n      this.commonService.session.style.widgets['ambiguity-resolution-strategy'] = v;\r\n      if (v === 'HIVTRACE-G') {\r\n        $('#ambiguity-threshold-row').slideDown();\r\n      } else {\r\n        $('#ambiguity-threshold-row').slideUp();\r\n      }\r\n    }).change();\r\n\r\n    $('#ambiguity-threshold').on('change', (e) => {\r\n\r\n      //debugger;\r\n\r\n      const v = e.data; //this.value;\r\n      this.commonService.session.style.widgets['ambiguity-threshold'] = v;\r\n    });\r\n\r\n    let cachedView = \"\";\r\n    this.commonService.localStorageService.getItem('default-view', (result) => {\r\n      cachedView = result;\r\n    });\r\n\r\n    $('#default-view')\r\n      .on('change', (e) => {\r\n\r\n        //debugger;\r\n\r\n        const v = e.data;// this.value;\r\n        this.commonService.localStorageService.setItem('default-view', v);\r\n        this.commonService.session.style.widgets['default-view'] = v;\r\n        this.commonService.session.layout.content[0].type = v;\r\n      })\r\n      .val(cachedView ? cachedView : this.commonService.session.style.widgets['default-view'])\r\n      .trigger('change');\r\n\r\n    //$('#generate-sequences').on('click', () => {\r\n    //    $('#file-prompt').remove();\r\n    //    $('#launch').prop('disabled', false).focus();\r\n    //    this.processFile(new File([Papa.unparse(this.commonService.generateSeqs('gen-' + this.commonService.session.meta.readyTime + '-', parseFloat($('#generate-number').val().toString()), 20))], 'generatedNodes.csv'));\r\n    //});\r\n\r\n    $('#infer-directionality-false').parent().on('click', () => {\r\n\r\n      //debugger;\r\n\r\n      this.commonService.session.style.widgets['infer-directionality-false'] = true;\r\n    });\r\n\r\n    $('#infer-directionality').parent().on('click', () => {\r\n\r\n      //debugger;\r\n\r\n      this.commonService.session.style.widgets['infer-directionality-false'] = false;\r\n    });\r\n\r\n    $('#triangulate-false').parent().on('click', () => {\r\n\r\n      //debugger;\r\n\r\n      this.commonService.session.style.widgets['triangulate-false'] = true;\r\n    });\r\n\r\n    $('#triangulate').parent().on('click', () => {\r\n\r\n      //debugger;\r\n\r\n      this.commonService.session.style.widgets['triangulate-false'] = false;\r\n    });\r\n\r\n    $('#stash-auto-yes').parent().on('click', () => {\r\n\r\n      //debugger;\r\n\r\n      this.commonService.localStorageService.setItem('stash-auto', 'true');\r\n    });\r\n\r\n    if (localStorage.getItem('stash-auto') === 'true') {\r\n      $('#stash-auto-yes').parent().trigger('click');\r\n    }\r\n\r\n    $('#stash-auto-no').parent().on('click', () => {\r\n\r\n      //debugger;\r\n\r\n      if (this.commonService.temp.autostash) clearInterval(this.commonService.temp.autostash.interval);\r\n      this.commonService.localStorageService.setItem('stash-auto', 'false');\r\n    });\r\n\r\n    if(this.commonService.session.network.launched){\r\n      $('#launch').text('Update');\r\n    }\r\n\r\n    \r\n\r\n    // $.getJSON(\"../assets/outbreak.microbetrace\", (window as any).context.commonService.applySession);\r\n    // Use this when building production (.ie gh-pages branch)\r\n    if (!this.auspiceUrlVal) {\r\n      this.auspiceUrlVal = this.commonService.getURL();\r\n    }\r\n\r\n    if(!this.commonService.session.network.initialLoad && !this.auspiceUrlVal) {\r\n      console.log('launching outbreak');\r\n      $.getJSON(\"COVID_DummySession.microbetrace\", this.commonService.applySession.bind(this.commonService)).then(() => { this.populateTable()});   \r\n      this.commonService.session.network.launched = true; \r\n      this.commonService.session.network.initialLoad = true; \r\n\r\n    }\r\n\r\n  //   setTimeout(() => {\r\n  //     this.populateTable();\r\n  // }, 2000);\r\n\r\n    // console.log('session: ', this.commonService?.session?.files, this.commonService.session.files.length);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    console.log('---files-plugin.component.ts ngOnDestroy');\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n    //unsubscribe on destroy of files tab\r\n    // this.eventEmitterService.subsVar = this.eventEmitterService.    \r\n    // invokeFirstComponentFunction.subscribe((name:string) => {    \r\n    //   this.processFile();    \r\n    // });   \r\n    this.eventEmitterService.invokeFirstComponentFunction.unsubscribe();\r\n    this.store.setNewSession(false);\r\n    this.store.setStyleFileApplied();  \r\n    this.store.setFP_removeFiles(false);\r\n    this.commonService.LoadViewEvent.unsubscribe();\r\n\r\n  }\r\n\r\n  /**\r\n   * For each file in commonService.session.files, addToTable(file)\r\n   */\r\n  public populateTable() {  \r\n    const fileTableRows = $(\".file-table-row\");\r\n    fileTableRows.slideUp(() => fileTableRows.remove());\r\n\r\n    let files = cloneDeep(this.commonService.session.files);\r\n    console.log('---  Populate TABLE Row Files 2: ', files);\r\n\r\n    console.log('--- files table 2 : ', $(\".file-table-row\"));\r\n\r\n    if(files && files.length > 0) {\r\n      console.log('--- Populate for: ', files);\r\n      for(let i = 0; i < files.length; i++) {\r\n        this.addToTable(files[i]);\r\n      }\r\n\r\n      console.log('--- GetFile Content Populate TABLE End: ', $(\".file-table-row\"));\r\n\r\n    } \r\n\r\n  }\r\n  \r\n  /**\r\n   * Toggles the value of multiple variables associated with sequence setting audit including:\r\n   * SelectedAuditEmptyVariable, SelectedAuditGapsVariable, SelectedAuditRNAVariable, \r\n   * SelectedAuditAminoAcidsVariable, SelectedAuditCIGARVariable, SelectedAuditMalformedVariable\r\n   */\r\n  toglleAll() {\r\n\r\n    this.SelectedAuditEmptyVariable = !this.SelectedAuditEmptyVariable;\r\n    this.SelectedAuditGapsVariable = !this.SelectedAuditGapsVariable;\r\n    this.SelectedAuditRNAVariable = !this.SelectedAuditRNAVariable;\r\n    this.SelectedAuditAminoAcidsVariable = !this.SelectedAuditAminoAcidsVariable;\r\n    this.SelectedAuditCIGARVariable = !this.SelectedAuditCIGARVariable;\r\n    this.SelectedAuditMalformedVariable = !this.SelectedAuditMalformedVariable;\r\n  }\r\n\r\n  /**\r\n   * XXXXX\r\n   */\r\n  run() {\r\n\r\n  }\r\n\r\n  /**\r\n   * Updates isDataAvaible variable based on if any nodes under commonService.session.data\r\n   * \r\n   * XXXXX not used XXXXX\r\n   */\r\n  InitView() {\r\n    this.IsDataAvailable = (this.commonService.session.data.nodes.length === 0 ? false : true);\r\n  }\r\n\r\n  /**\r\n   * @returns {string} \"state is here\"\r\n   */\r\n  handleContainerStateRequestEvent(): string | undefined {\r\n    return \"state is here\";\r\n  }\r\n\r\n  /**\r\n   * Updated default-view widget and localStorageService\r\n   */\r\n  changeDefaultView(e) {\r\n    const v = e.target.selectedOptions[0].innerText;\r\n    this.commonService.localStorageService.setItem('default-view', v);\r\n    this.commonService.session.style.widgets['default-view'] = v;\r\n    this.commonService.session.layout.content[0].type = v;\r\n  }\r\n\r\n  /**\r\n   * Opens/Closes the settings window\r\n   */\r\n  openSettings() {\r\n    this.displayFileSettings = !this.displayFileSettings;\r\n  }\r\n\r\n\r\n  /**\r\n   * Opens/Closes Sequence Controls modal/dialog box\r\n   */\r\n  showSequenceSettings() {\r\n    this.displaySequenceSettings = !this.displaySequenceSettings;\r\n  }\r\n\r\n  /**\r\n   * Sets commonService.session.messages and this.messages to empty arrays []. Clears and closes loading-information modal.\r\n   * Emits a LoadDefaultVisualizationEvent.\r\n   * @param e \r\n   */\r\n  loadDefaultVisualization(e: string) {\r\n\r\n    console.log('---loadDefaultVisualization Called - stop loading modal');\r\n\r\n      $('#launch').prop('disabled', false).focus();\r\n\r\n      this.displayloadingInformationModal = false;\r\n\r\n    console.log('---loadDefaultVisualization End - Lodi');\r\n\r\n    this.LoadDefaultVisualizationEvent.emit(e);\r\n  }\r\n\r\n  /**\r\n   * Adds msg to this.messages and commonService.session.messages. \r\n   * Updates messages on loading-information modal based on commonService.session.message\r\n   * @param {string} msg message to add to messages arrays \r\n   */\r\n  showMessage(msg: string) {\r\n\r\n    this.store.setLoadingMessageUpdated(msg);\r\n  }\r\n  \r\n\r\n  /**\r\n   * Resets the value of session.data, temp.trees if previously launched (or more if not previously launched). Retains the values of following \r\n   * widgets: link-threshold, default-distance-metric, ambiguity-resolution-strategy, and default view.\r\n   * Calls creatLaunchSequences to process the data files loaded.\r\n   */\r\n  launchClick() {\r\n\r\n     // Set to false to indicate that the network is not fully loaded  as new network is launching\r\n     this.commonService.session.network.isFullyLoaded = false;\r\n     \r\n    // launching new network, so set network rendered to false to start loading modal\r\n    this.store.setNetworkRendered(false);\r\n    this.store.setNetworkUpdated(false);\r\n    this.store.setSettingsLoaded(false);\r\n\r\n    this.commonService.cleanupData();\r\n\r\n    this.commonService.updateLegacyNodeSymbols();\r\n    const thresholdOnLaunch = this.commonService.session.style.widgets[\"link-threshold\"];\r\n    const metricOnLaunch = this.commonService.session.style.widgets[\"default-distance-metric\"];\r\n    const ambiguityOnLaunch = this.commonService.session.style.widgets[\"ambiguity-resolution-strategy\"];\r\n    const viewOnLaunch = this.commonService.session.style.widgets[\"default-view\"];\r\n\r\n\r\n    console.log('launch click');\r\n    if( this.commonService.session.network.launched) {\r\n      console.log('launch click launched ', this.commonService.session.network.launched);\r\n\r\n      this.commonService.resetData();\r\n\r\n      $('#launch').text('Update');\r\n      // this.visuals.twoD.isLoading = true;\r\n      this.commonService.session.style.nodeColorsTable = {};\r\n      this.commonService.session.style.nodeColorsTableKeys = {};\r\n      this.commonService.session.style.nodeSymbolsTable = {};\r\n      this.commonService.session.style.nodeSymbolsTableKeys = {};\r\n    }\r\n    else if (!this.commonService.session.network.launched) {\r\n      console.log('launch click not launched ', this.commonService.session.network.launched);\r\n\r\n      this.commonService.resetData();\r\n      this.commonService.session.network.launched = true;\r\n    }\r\n\r\n    this.commonService.session.style.widgets[\"link-threshold\"] = thresholdOnLaunch;\r\n    this.commonService.session.style.widgets[\"default-distance-metric\"] = metricOnLaunch;\r\n    this.commonService.session.style.widgets[\"ambiguity-resolution-strategy\"] = ambiguityOnLaunch;\r\n    this.commonService.session.style.widgets[\"default-view\"] = viewOnLaunch;\r\n\r\n    this.commonService.session.messages = [];\r\n    this.messages = [];\r\n\r\n    console.log('session files', this.commonService.session.files);\r\n\r\n    // this.displayloadingInformationModal = true;\r\n\r\n    this.showMessage(\"Starting...\");\r\n\r\n    setTimeout(() => {\r\n      // Process the data files loaded.\r\n      this.creatLaunchSequences();\r\n    }, 1000);\r\n  }\r\n\r\n  /**\r\n   * Processes all files in following order (auspice, newick, matrix, link, node, fasta).\r\n   * Adds/Updates nodes and links. After processing all files, calls processData.\r\n   */\r\n  creatLaunchSequences() {\r\n    this.commonService.session.meta.startTime = Date.now();\r\n    $('#launch').prop('disabled', true);\r\n\r\n    // $('#loading-information').html('');\r\n    this.commonService.temp.messageTimeout = setTimeout(() => {\r\n      $('#loadCancelButton').slideDown();\r\n      // abp.notify.warn('If you stare long enough, you can reverse the DNA Molecule\\'s spin direction');\r\n    }, 20000);\r\n    const nFiles = this.commonService.session.files.length - 1;\r\n    const check = nFiles > 0;\r\n\r\n    // sorts files based on hierarchy\r\n    const hierarchy = ['auspice', 'newick', 'matrix', 'link', 'node', 'fasta'];\r\n    this.commonService.session.files.sort((a, b) => hierarchy.indexOf(a.format) - hierarchy.indexOf(b.format));\r\n\r\n\r\n    this.commonService.session.meta.anySequences = this.commonService.session.files.some(file => (file.format === \"fasta\") || (file.format === \"node\" && file.field2 !== \"None\"));\r\n\r\n    this.commonService.session.files.forEach((file, fileNum) => {\r\n      const start = Date.now();\r\n      const origin = [file.name];\r\n      if (file.format === 'auspice') {\r\n        this.showMessage(`Parsing ${file.name} as Auspice...`);\r\n        // this.commonService.localStorageService.setItem('default-view', 'phylogenetic-tree');\r\n        // this.commonService.localStorageService.setItem('default-distance-metric', 'SNPs');\r\n        this.commonService.applyAuspice(file.contents).then(auspiceData => {\r\n          this.commonService.clearData();\r\n          this.commonService.session = this.commonService.sessionSkeleton();\r\n\r\n          console.log(auspiceData[\"tree\"][\"children\"][0]);\r\n          // This is a bizarre line, but I need to check if the div values are more or less than one. The first one is always zero, so we need to go to the second one\r\n          if(auspiceData[\"tree\"][\"children\"][0][\"data\"][\"div\"] > 0 && auspiceData[\"tree\"][\"children\"][0][\"data\"][\"div\"] < 1){\r\n            this.commonService.session.style.widgets['default-distance-metric'] = 'tn93';\r\n            this.SelectedDefaultDistanceMetricVariable = 'tn93';\r\n            this.onDistanceMetricChange('tn93');\r\n            this.store.setMetricChanged('tn93');\r\n            this.commonService.GlobalSettingsModel.SelectedDistanceMetricVariable = 'tn93';\r\n            $('#default-distance-metric').val('tn93').trigger('change');\r\n            $('#default-distance-threshold').attr('step', 1).val(0.015).trigger('change');\r\n            this.commonService.session.style.widgets['link-threshold'] = 0.015;\r\n            this.SelectedDefaultDistanceThresholdVariable = '0.015';\r\n            this.onLinkThresholdChange('0.015');\r\n            this.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable = 0.015;\r\n          } else {\r\n            this.commonService.session.style.widgets['default-distance-metric'] = 'snps';\r\n            this.store.setMetricChanged('snps');\r\n            this.SelectedDefaultDistanceMetricVariable = 'snps';\r\n            this.onDistanceMetricChange('snps');\r\n            this.commonService.GlobalSettingsModel.SelectedDistanceMetricVariable = 'snps';\r\n            $('#default-distance-metric').val('SNPs').trigger('change');\r\n            $('#default-distance-threshold').attr('step', 1).val(16).trigger('change');\r\n            this.commonService.session.style.widgets['link-threshold'] = 16;\r\n            this.SelectedDefaultDistanceThresholdVariable = '16';\r\n            this.onLinkThresholdChange('16');\r\n            this.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable = 16;\r\n          }\r\n          this.commonService.session.meta.startTime = Date.now();\r\n          this.commonService.session.data.tree = auspiceData['tree'];\r\n          this.commonService.session.data.newickString = auspiceData['newick'];\r\n          let nodeCount = 0;\r\n          const nodeRegex = /^NODE_[0-9]{7}$/i;\r\n          auspiceData['nodes'].forEach(node => {\r\n            if (!nodeRegex.test(node.id) && node.id !== 'wrapper') {\r\n              const nodeKeys = Object.keys(node);\r\n              nodeKeys.forEach( key => {\r\n                if (this.commonService.session.data.nodeFields.indexOf(key) === -1) {\r\n                  this.commonService.session.data.nodeFields.push(key);\r\n                }\r\n                if (! Object.prototype.hasOwnProperty.call(node, 'origin') ) {\r\n                  node.origin = [];\r\n                }\r\n                nodeCount += this.commonService.addNode(node, true);\r\n              });\r\n            }\r\n          });\r\n          let linkCount = 0;\r\n          auspiceData['links'].forEach(link => {\r\n            linkCount += this.commonService.addLink(link, true);\r\n          });\r\n\r\n          this.commonService.runHamsters();\r\n          this.showMessage(` - Parsed ${nodeCount} New Nodes and ${linkCount} new Links from Auspice file.`);\r\n          if (fileNum === nFiles) this.processData();\r\n          return nodeCount;\r\n        });\r\n        this.commonService._debouncedUpdateNetworkVisuals();\r\n        this.commonService.updateStatistics();\r\n        if(this.commonService.debugMode) {\r\n          console.log(this.commonService.session);\r\n        }\r\n      } else if (file.format === 'fasta') {\r\n\r\n        this.showMessage(`Parsing ${file.name} as FASTA...`);\r\n        let newNodes = 0;\r\n        this.commonService.parseFASTA(file.contents).then(seqs => {\r\n          const n = seqs.length;\r\n          for (let i = 0; i < n; i++) {\r\n            const node = seqs[i];\r\n            if (!node) continue;\r\n            newNodes += this.commonService.addNode({\r\n              _id: this.commonService.filterXSS(node.id),\r\n              seq: this.commonService.filterXSS(node.seq),\r\n              origin: origin\r\n            }, check);\r\n          }\r\n\r\n          console.log('FASTA Merge time:', (Date.now() - start).toLocaleString(), 'ms');\r\n          this.showMessage(` - Parsed ${newNodes} New, ${seqs.length} Total Nodes from FASTA.`);\r\n          if (fileNum === nFiles) this.processData();\r\n        });\r\n\r\n      } else if (file.format === 'link') {\r\n\r\n        this.showMessage(`Parsing ${file.name} as Link List...`);\r\n        let l = 0;\r\n\r\n        const sources = [];\r\n        const targets = [];\r\n\r\n        /**\r\n         * Processes and then adds link. updates value of l\r\n         * @param {object} link \r\n         */\r\n        const forEachLink = link => {\r\n          const keys = Object.keys(link);\r\n          const n = keys.length;\r\n          const safeLink = {};\r\n          // for each key in link object\r\n          for (let i = 0; i < n; i++) {\r\n            let key = this.commonService.filterXSS(keys[i]);\r\n            // console.log('key is: ',key);\r\n\r\n            if(key === \"distance\") {\r\n              // console.log('key is distance');\r\n              link[key] = parseFloat(link[key]);\r\n            } else if (key === 'origin') {\r\n              // related to zenhub#810: link list csv was exported from table view and unable to be loaded correctly; this code create a new linkField when it runs into field called origin \r\n              link['originColumnFromFile'] = link['origin'].split('\\n')\r\n              safeLink['originColumnFromFile'] = link['originColumnFromFile'];\r\n              link['origin'] = origin;\r\n\r\n              if (!this.commonService.includes(this.commonService.session.data.linkFields, 'originColumnFromFile')) {\r\n                this.commonService.session.data.linkFields.push('originColumnFromFile');\r\n              }\r\n            }\r\n            \r\n            safeLink[key] = link[key];\r\n            // console.log('safelink key is: ',safeLink[key]);\r\n            // console.log('safelink is: x',safeLink);\r\n\r\n            if (!this.commonService.includes(this.commonService.session.data.linkFields, key)) {\r\n              this.commonService.session.data.linkFields.push(key);\r\n            }\r\n          }\r\n\r\n          const src = '' + safeLink[file.field1];\r\n          const tgt = '' + safeLink[file.field2];\r\n\r\n          sources.push(src);\r\n          targets.push(tgt);\r\n\r\n          const srcIndex = targets.findIndex(t => t == src);\r\n          const tgtIndex = sources.findIndex(s => s == tgt);\r\n\r\n          // console.log(\"safe link is: \",safeLink);\r\n\r\n          // Link is the same -> bidirectional\r\n          if(srcIndex != -1 && tgtIndex != -1) {\r\n              \r\n            // Set distance if distance set (field 3)\r\n            l += this.commonService.addLink(Object.assign({\r\n               source: '' + safeLink[file.field1],\r\n               target: '' + safeLink[file.field2],\r\n               origin: origin,\r\n               visible: true,\r\n               directed : file.field3 == 'None' ? true : false,\r\n               bidirectional: file.field3 == 'None' ? true : false,\r\n               distance: file.field3 == 'None' ? 0 : parseFloat(safeLink[file.field3]),\r\n               hasDistance : file.field3 == 'None' ? false : true,\r\n               distanceOrigin: file.field3 == 'None' ? '' : file.name\r\n             }, safeLink), check);\r\n\r\n         } else {\r\n\r\n          // console.log(\"distance is: \", file.field3 != 'distance' ? 0 : parseFloat(safeLink[file.field3]))\r\n          // TODO uncomment when testing adding new link\r\n          //  console.log('adding 2: ', _.cloneDeep(Object.assign({\r\n          //         source: '' + safeLink[file.field1],\r\n          //         target: '' + safeLink[file.field2],\r\n          //         origin: origin,\r\n          //         visible: true,\r\n          //         directed : file.field3 != 'distance' ? true : false,\r\n          //         bidirectional: file.field3 != 'distance' ? true : false,\r\n          //         distance: file.field3 != 'distance' ? 0 : parseFloat(safeLink[file.field3]),\r\n          //         hasDistance : file.field3 != 'distance' ? false : true,\r\n          //         distanceOrigin: file.field3 != 'distance' ? '' : file.name\r\n          //       }, safeLink)));\r\n\r\n           l += this.commonService.addLink(Object.assign({\r\n               source: '' + safeLink[file.field1],\r\n               target: '' + safeLink[file.field2],\r\n               origin: origin,\r\n               visible: true,\r\n               directed : file.field3 == 'None' ? true : false,\r\n               distance: file.field3 == 'None' ? 0 : parseFloat(safeLink[file.field3]),\r\n               hasDistance : file.field3 == 'None' ? false : true,\r\n               distanceOrigin: file.field3 == 'None' ? '' : file.name\r\n             }, safeLink), check);\r\n         }  \r\n\r\n        //  console.log('matrixx1: ',  JSON.stringify((window as any).context.commonService.temp.matrix));\r\n\r\n\r\n        };\r\n\r\n        if (file.extension === 'xls' || file.extension === 'xlsx') {\r\n\r\n          const workbook = XLSX.read(file.contents, { type: 'array' });\r\n          const data = XLSX.utils.sheet_to_json(workbook.Sheets[workbook.SheetNames[0]]);\r\n          data.map(forEachLink);\r\n          this.showMessage(` - Parsed ${l} New, ${data.length} Total Links from Link Excel Table.`);\r\n          let n = 0, t = 0;\r\n          const nodeIDs = [];\r\n          const k = data.length;\r\n          // for each line or excel file, check if node exist, if not add it\r\n          for (let i = 0; i < k; i++) {\r\n            const l = data[i];\r\n            const f1 = l[file.field1];\r\n            if (nodeIDs.indexOf(f1) === -1) {\r\n              t++;\r\n              nodeIDs.push(f1);\r\n              n += this.commonService.addNode({\r\n                _id: '' + f1,\r\n                origin: origin\r\n              }, true);\r\n            }\r\n            const f2 = l[file.field2];\r\n            if (nodeIDs.indexOf(f2) === -1) {\r\n              t++;\r\n              nodeIDs.push(f2);\r\n              n += this.commonService.addNode({\r\n                _id: '' + f2,\r\n                origin: origin\r\n              }, true);\r\n            }\r\n          }\r\n\r\n          console.log('Link Excel Parse time:', (Date.now() - start).toLocaleString(), 'ms');\r\n          this.showMessage(` - Parsed ${n} New, ${t} Total Nodes from Link Excel Table.`);\r\n          if (fileNum === nFiles) this.processData();\r\n\r\n        } else if (file.extension === 'json') {\r\n            const results = JSON.parse(file.contents);\r\n            if (!results || results.length === 0) return;\r\n\r\n            const data = results;\r\n            data.map(forEachLink);\r\n            this.showMessage(` - Parsed ${l} New, ${data.length} Total Links from Link JSON.`);\r\n            if (data.length > 0)\r\n              Object.keys(data[0]).forEach(key => {\r\n                const safeKey = this.commonService.filterXSS(key);\r\n\r\n                if (!this.commonService.includes(this.commonService.session.data.linkFields, safeKey)) {\r\n                  this.commonService.session.data.linkFields.push(safeKey);\r\n                }\r\n              });\r\n            let newNodes = 0, totalNodes = 0;\r\n            const n = data.length;\r\n            const nodeIDs = [];\r\n            // for each object in json, check if node exist, if not add it\r\n            for (let i = 0; i < n; i++) {\r\n\r\n              const l = data[i];\r\n              const f1 = l[file.field1];\r\n              if (nodeIDs.indexOf(f1) === -1) {\r\n                totalNodes++;\r\n                newNodes += this.commonService.addNode({\r\n                  _id: '' + f1,\r\n                  origin: origin\r\n                }, true);\r\n              }\r\n              const f2 = l[file.field2];\r\n              if (nodeIDs.indexOf(f2) === -1) {\r\n                totalNodes++;\r\n                newNodes += this.commonService.addNode({\r\n                  _id: '' + f2,\r\n                  origin: origin\r\n                }, true);\r\n              }\r\n            }\r\n\r\n            console.log('Link JSON Parse time:', (Date.now() - start).toLocaleString(), 'ms');\r\n            this.showMessage(` - Parsed ${newNodes} New, ${totalNodes} Total Nodes from Link JSON.`);\r\n            if (fileNum === nFiles) this.processData();\r\n          } else {\r\n\r\n            Papa.parse(file.contents, {\r\n              header: true,\r\n              dynamicTyping: true,\r\n              skipEmptyLines: true,\r\n              complete: results => {\r\n                const data = results.data;\r\n                data.map(forEachLink);\r\n                this.showMessage(` - Parsed ${l} New, ${data.length} Total Links from Link CSV.`);\r\n                results.meta.fields.forEach(key => {\r\n                  const safeKey = this.commonService.filterXSS(key);\r\n\r\n                  if (!this.commonService.includes(this.commonService.session.data.linkFields, safeKey)) {\r\n                    this.commonService.session.data.linkFields.push(safeKey);\r\n                  }\r\n                });\r\n                let newNodes = 0, totalNodes = 0;\r\n                const n = data.length;\r\n                const nodeIDs = [];\r\n                for (let i = 0; i < n; i++) {\r\n                  const l = data[i];\r\n                  const f1 = l[file.field1];\r\n                  if (nodeIDs.indexOf(f1) === -1) {\r\n                    totalNodes++;\r\n                    newNodes += this.commonService.addNode({\r\n                      _id: '' + f1,\r\n                      origin: origin\r\n                    }, true);\r\n                  }\r\n                  const f2 = l[file.field2];\r\n                  if (nodeIDs.indexOf(f2) === -1) {\r\n                    totalNodes++;\r\n                    newNodes += this.commonService.addNode({\r\n                      _id: '' + f2,\r\n                      origin: origin\r\n                    }, true);\r\n                  }\r\n                }\r\n\r\n                console.log('Link CSV Parse time:', (Date.now() - start).toLocaleString(), 'ms');\r\n                this.showMessage(` - Parsed ${newNodes} New, ${totalNodes} Total Nodes from Link CSV.`);\r\n                if (fileNum === nFiles) this.processData();\r\n              }\r\n            });\r\n          }\r\n      } else if (file.format === 'node') {\r\n\r\n        this.showMessage(`Parsing ${file.name} as Node List...`);\r\n        if(this.commonService.debugMode) {\r\n          console.log(file.field1);\r\n        }\r\n\r\n        let m = 0;\r\n        const n = 0;\r\n\r\n        if (file.extension === 'xls' || file.extension === 'xlsx') {\r\n\r\n          const workbook = XLSX.read(file.contents, { type: 'array' });\r\n          const data = XLSX.utils.sheet_to_json(workbook.Sheets[workbook.SheetNames[0]], { raw: false, dateNF: 'yyyy-mm-dd'});\r\n          data.forEach(node => {\r\n            let safeNode = {\r\n              _id: this.commonService.filterXSS('' + node[file.field1]),\r\n              seq: (file.field2 === 'None') ? '' : this.commonService.filterXSS(node[file.field2]),\r\n              origin: origin\r\n            };\r\n            Object.keys(node).forEach(key => {\r\n              let safeKey = this.commonService.filterXSS(key);\r\n              if (!this.commonService.includes(this.commonService.session.data.nodeFields, safeKey)) {\r\n                this.commonService.session.data.nodeFields.push(safeKey);\r\n              }\r\n              safeNode[safeKey] = this.commonService.filterXSS(node[key]);\r\n            });\r\n            m += this.commonService.addNode(safeNode, check);\r\n          });\r\n\r\n          console.log('Node Excel Parse time:', (Date.now() - start).toLocaleString(), 'ms');\r\n          this.showMessage(` - Parsed ${m} New, ${n} Total Nodes from Node Excel Table.`);\r\n          if (fileNum === nFiles) this.processData();\r\n\r\n        } else\r\n          if (file.extension === 'json') {\r\n            const results = JSON.parse(file.contents);\r\n            if (!results || results.length === 0) return;\r\n            results.forEach(data => {\r\n\r\n              const node = data;//data[0]             \r\n\r\n              if (node[file.field1] && node[file.field1].toString().trim()) {\r\n\r\n                let safeNode = {\r\n                  _id: this.commonService.filterXSS('' + node[file.field1]),\r\n                  seq: (file.field2 === 'None') ? '' : this.commonService.filterXSS(node[file.field2]),\r\n                  origin: origin\r\n                };\r\n\r\n                Object.keys(node).forEach(key => {\r\n                  let safeKey = this.commonService.filterXSS(key);\r\n                  if (!this.commonService.includes(this.commonService.session.data.nodeFields, safeKey)) {\r\n                    this.commonService.session.data.nodeFields.push(safeKey);\r\n                  }\r\n                  safeNode[safeKey] = this.commonService.filterXSS(node[key]);\r\n                });\r\n                m += this.commonService.addNode(safeNode, check);\r\n              }\r\n            })\r\n\r\n            console.log('Node JSON Parse time:', (Date.now() - start).toLocaleString(), 'ms');\r\n            this.showMessage(` - Parsed ${m} New, ${n} Total Nodes from Node JSON.`);\r\n\r\n            if (fileNum === nFiles) this.processData();\r\n\r\n          } else {\r\n\r\n            Papa.parse(file.contents, {\r\n              header: true,\r\n              dynamicTyping: true,\r\n              skipEmptyLines: true,\r\n              step: data => {\r\n\r\n                const node = data.data;\r\n\r\n                if (node[file.field1] && node[file.field1].toString().trim()) {\r\n\r\n                  let safeNode = {\r\n                    _id: this.commonService.filterXSS('' + node[file.field1]),\r\n                    seq: (file.field2 === 'None') ? '' : this.commonService.filterXSS(node[file.field2]),\r\n                    origin: origin\r\n                  };\r\n\r\n                  Object.keys(node).forEach(key => {\r\n                    let safeKey = this.commonService.filterXSS(key);\r\n                    if (!this.commonService.includes(this.commonService.session.data.nodeFields, safeKey)) {\r\n                      this.commonService.session.data.nodeFields.push(safeKey);\r\n                    }\r\n                    safeNode[safeKey] = this.commonService.filterXSS(node[key]);\r\n                  });\r\n                  m += this.commonService.addNode(safeNode, check);\r\n                }\r\n              },\r\n              complete: () => {\r\n\r\n                console.log('Node CSV Parse time:', (Date.now() - start).toLocaleString(), 'ms');\r\n                this.showMessage(` - Parsed ${m} New, ${n} Total Nodes from Node CSV.`);\r\n\r\n                if (fileNum === nFiles) this.processData();\r\n              }\r\n            });\r\n          }\r\n\r\n      } else if (file.format === 'matrix') {\r\n\r\n        this.showMessage(`Parsing ${file.name} as Distance Matrix...`);\r\n\r\n        if (file.extension === 'xls' || file.extension === 'xlsx') {\r\n\r\n          const workbook = XLSX.read(file.contents, { type: 'array' });\r\n          const data = XLSX.utils.sheet_to_json(workbook.Sheets[workbook.SheetNames[0]], { header: 1 });\r\n          let nodeIDs = [], nn = 0, nl = 0;\r\n          data.forEach((row: any, i) => {\r\n            if (i === 0) {\r\n              nodeIDs = row;\r\n              nodeIDs.forEach((cell, k) => {\r\n                if (k > 0) {\r\n                  nn += this.commonService.addNode({\r\n                    _id: this.commonService.filterXSS('' + cell),\r\n                    origin: origin\r\n                  }, check);\r\n                }\r\n              });\r\n            } else {\r\n              const source = this.commonService.filterXSS('' + row[0]);\r\n              row.forEach((cell, j) => {\r\n                if (j === 0) return;\r\n                const target = this.commonService.filterXSS('' + nodeIDs[j]);\r\n                if (source === target) return;\r\n                nl += this.commonService.addLink({\r\n                  source: source,\r\n                  target: target,\r\n                  origin: origin,\r\n                  distance: parseFloat(cell),\r\n                  directed: false,\r\n                  hasDistance: true,\r\n                  distanceOrigin: file.name\r\n                }, check);\r\n              });\r\n            }\r\n          });\r\n\r\n          console.log('Distance Matrix Excel Parse time:', (Date.now() - start).toLocaleString(), 'ms');\r\n          this.showMessage(` - Parsed ${nn} New, ${data.length - 1} Total Nodes from Excel Distance Matrix.`);\r\n          this.showMessage(` - Parsed ${nl} New, ${((data.length - 1) ** 2 - (data.length - 1)) / 2} Total Links from Excel Distance Matrix.`);\r\n          if (fileNum === nFiles) this.processData();\r\n\r\n        } else { // file.format === \"matrix\" && file.extension === \"csv\"\r\n \r\n          let start = Date.now();\r\n          let nodeIDs, n;\r\n          let links = [];\r\n          let output;\r\n          Papa.parse(file.contents, {\r\n            skipEmptyLines: \"greedy\",\r\n            chunk: result => {\r\n              const rowsInChunk = result.data.length;\r\n              for (let rowInChunk = 0; rowInChunk < rowsInChunk; rowInChunk++) {\r\n                const row = result.data[rowInChunk];\r\n                if (nodeIDs) {\r\n                  const source = \"\" + row[0];\r\n                  for (let j = 1; j < rowsInChunk+1; j++) {\r\n                    const target = \"\" + nodeIDs[j];\r\n                    if (source == target) continue;\r\n                    links.push({\r\n                      source: source,\r\n                      target: target,\r\n                      distance: parseFloat(row[j])\r\n                    });\r\n                  }\r\n                } else {\r\n                  nodeIDs = row;\r\n                  n = nodeIDs.length;\r\n                }\r\n              }\r\n            },\r\n            complete: function() {\r\n              console.log(\"CSV Matrix Parse time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n              start = Date.now();\r\n              output = {\r\n                  links: links,\r\n                  nodes: nodeIDs.slice(1)\r\n                }\r\n              console.log(output);\r\n              close();\r\n            }\r\n          });\r\n          let nn = 0, nl = 0;\r\n          const results = { data: output, start: start }\r\n          const f_nodes = output.nodes;\r\n          const tn = f_nodes.length;\r\n          for (let i = 0; i < tn; i++) {\r\n            console.log(f_nodes[i])\r\n            if (f_nodes[i]){\r\n              nn += this.commonService.addNode(\r\n                {\r\n                  _id: this.commonService.filterXSS(f_nodes[i]),\r\n                  origin: origin,\r\n                },\r\n                check\r\n              );\r\n            }\r\n          }\r\n          const f_links = output.links;\r\n          const tl = f_links.length;\r\n          let skip = 0;\r\n          console.log(tl +\" links\");\r\n          for (let j = 0; j < tl; j++) {\r\n              console.log(this.commonService.session.data.links.length)\r\n              console.log(f_links[j]);\r\n              const reversed = this.commonService.session.data.links.filter(x => x[\"source\"] === f_links[j][\"target\"] && x[\"target\"] === f_links[j][\"source\"]);\r\n              const existing = this.commonService.session.data.links.filter(x => x[\"source\"] === f_links[j][\"source\"] && x[\"target\"] === f_links[j][\"target\"]);\r\n            if (existing.length > 0 || reversed.length > 0){\r\n                skip++;\r\n                console.log(`${skip}th skip - ${f_links[j][\"source\"]} and ${f_links[j][\"target\"]}`);\r\n                continue;\r\n              } \r\n            if (f_links[j][\"source\"] == \"undefined\" || f_links[j][\"target\"] == \"undefined\"){\r\n              console.log(\"skipping undefined source or target\");\r\n              continue;\r\n            }\r\n              nl += this.commonService.addLink(\r\n                  {\r\n                    source: f_links[j][\"source\"],\r\n                    target: f_links[j][\"target\"],\r\n                    distance: f_links[j][\"distance\"],\r\n                    origin: origin,\r\n                     hasDistance: true,\r\n                    distanceOrigin: file.name,\r\n                  },\r\n                  check\r\n              );\r\n          }\r\n\r\n          console.log(\r\n              'CSV Matrix Merge time:',\r\n              (Date.now() - start).toLocaleString(),\r\n              'ms'\r\n          );             \r\n\r\n          this.showMessage(` - Parsed ${nn} New, ${tn} Total Nodes from Distance Matrix.`);\r\n          this.showMessage(` - Parsed ${nl} New, ${tl} Total Links from Distance Matrix.`);\r\n          if (fileNum === nFiles) this.processData();\r\n          //this.commonService.parseCSVMatrix(file).then((o: any) => {\r\n          //});\r\n        }\r\n\r\n      } else { // if(file.format === 'newick'){\r\n\r\n        this.commonService.resetData();\r\n        let links = 0;\r\n        let newLinks = 0;\r\n        let newNodes = 0;\r\n        this.commonService.session.data.newickString = file.contents;\r\n        const tree = patristic.parseNewick(file.contents);\r\n        let m = tree.toMatrix(), matrix = m.matrix, labels = m.ids.map(this.commonService.filterXSS), n = labels.length;\r\n        const maxRow = matrix.map(function(row){ return Math.max.apply(Math, row); });\r\n        const maxMax = Math.max.apply(null, maxRow);\r\n        if (maxMax > 1) {\r\n            this.commonService.session.style.widgets['default-distance-metric'] = 'snps';\r\n            this.store.setMetricChanged('snps');\r\n            this.SelectedDefaultDistanceMetricVariable = 'snps';\r\n            this.onDistanceMetricChange('snps');\r\n            this.commonService.GlobalSettingsModel.SelectedDistanceMetricVariable = 'snps';\r\n            $('#default-distance-metric').val('SNPs').trigger('change');\r\n            $('#default-distance-threshold').attr('step', 1).val(16).trigger('change');\r\n            this.commonService.session.style.widgets['link-threshold'] = 16;\r\n            this.SelectedDefaultDistanceThresholdVariable = '16';\r\n            this.onLinkThresholdChange('16');\r\n            this.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable = 16;\r\n          // set distance to snps\r\n        } \r\n        for (let i = 0; i < n; i++) {\r\n          const source = labels[i];\r\n          newNodes += this.commonService.addNode({\r\n            _id: source,\r\n            origin: origin\r\n          }, check);\r\n          for (let j = 0; j < i; j++) {\r\n            newLinks += this.commonService.addLink({\r\n              source: source,\r\n              target: labels[j],\r\n              origin: origin,\r\n              distance: parseFloat(matrix[i][j]),\r\n              distanceOrigin: file.name,\r\n              hasDistance: true\r\n            }, check);\r\n            links++;\r\n          }\r\n        }\r\n        console.log('Newick Tree Parse time:', (Date.now() - start).toLocaleString(), 'ms');\r\n        this.showMessage(` - Parsed ${newNodes} New, ${n} Total Nodes from Newick Tree.`);\r\n        this.showMessage(` - Parsed ${newLinks} New, ${links} Total Links from Newick Tree.`);\r\n        if (fileNum === nFiles) this.processData();\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * Adds links for nodes with no edge?\r\n   * Then calls processSequence\r\n   */\r\n  processData() {\r\n    let nodes = this.commonService.session.data.nodes;\r\n    if(this.commonService.debugMode) {\r\n      console.log(nodes);\r\n    }\r\n    this.commonService.session.data.nodeFilteredValues = nodes;\r\n    //Add links for nodes with no edges\r\n    // TODO: This was here before but not sure why we needed this\r\n    // this.uniqueNodes.forEach(x => {\r\n    //   console.log('link same 4: ', x);\r\n    //   this.commonService.addLink(Object.assign({\r\n    //     source: '' + x,\r\n    //     target: '' + x,\r\n    //     origin: origin,\r\n    //     visible: true,\r\n    //     distance: 0,\r\n    //   }, 'generated'));\r\n    // });\r\n\r\n    this.processSequence()\r\n  }\r\n\r\n  /**\r\n   * If sequences are present, processes them by aligning if needed, computing consensus, consensus distances, ambiguity counts, and then links\r\n   */\r\n  async processSequence() {\r\n\r\n    if (!this.commonService.session.meta.anySequences) return this.commonService.runHamsters();\r\n    this.commonService.session.data.nodeFields.push('seq');\r\n    let subset = [];\r\n    console.log('link same nodes22: ', this.commonService.session.data.nodes.length, this.commonService.session.data.nodes);\r\n    let nodes = this.commonService.session.data.nodes;\r\n    const n = nodes.length;\r\n    const gapString = '-'.repeat(this.commonService.session.data.reference.length);\r\n    for (let i = 0; i < n; i++) {\r\n      const d = nodes[i];\r\n      if (!d.seq || d.seq.toLowerCase() == 'null' || d.seq.toLowerCase() == 'none' || d.seq.toLowerCase().replace('/', '') == 'na') {\r\n        d.seq = gapString;\r\n      } else {\r\n        subset.push(d);\r\n      }\r\n    }\r\n\r\n    console.log('link same nodes33: ', subset);\r\n\r\n    if (this.commonService.session.style.widgets['align-sw']) {\r\n      this.showMessage('Aligning Sequences...');\r\n      let output = await (this.commonService.session as any).align({\r\n        reference: this.commonService.session.data.reference,\r\n        isLocal: $('#localAlign').is(':checked'),\r\n        match: [$('#alignerMatch').val(), $('#alignerMismatch').val()].map(parseFloat),\r\n        gap: [$('#alignerGapO').val(), $('#alignerGapE').val()].map(parseFloat),\r\n        nodes: subset\r\n      });\r\n      const start = Date.now();\r\n      const m = subset.length;\r\n      for (let j = 0; j < m; j++) {\r\n        Object.assign(subset[j], output[j]);\r\n      }\r\n      console.log(\"Alignment Merge time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n    }\r\n    const start = Date.now();\r\n    for (let k = 0; k < n; k++) {\r\n      const node = nodes[k];\r\n      node['_seqInt'] = tn93.toInts(node['seq']);\r\n    }\r\n    console.log(\"Integer Sequence Translation time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n\r\n    (this.commonService.session.data as any).consensus = await this.commonService.computeConsensus();\r\n    await this.commonService.computeConsensusDistances();\r\n    subset.sort((a, b) => a['_diff'] - b['_diff']);\r\n    if (this.commonService.session.style.widgets['ambiguity-resolution-strategy']) {\r\n      await this.commonService.computeAmbiguityCounts();\r\n    }\r\n    this.showMessage('Computing Links based on Genomic Proximity...');\r\n    const k = await this.commonService.computeLinks(subset);\r\n    this.showMessage(` - Found ${k} New Links from Genomic Proximity`);\r\n    this.commonService.runHamsters();\r\n\r\n\r\n    this.showMessage(\"Finishing...\");\r\n    // this.displayloadingInformationModal = false;\r\n    setTimeout(() => {\r\n      this.cdr.detectChanges(); \r\n    }, 1000);\r\n\r\n  };\r\n\r\n  /**\r\n   * XXXXX not currently used; if implemented in future switch open parameter to boolean XXXXX\r\n   * @param open 0 or 1\r\n   */\r\n  accordianToggle( open : number) {\r\n\r\n    if(open){\r\n      $(\".m-content\").css(\"overflow-y\", \"auto\");\r\n    } else {\r\n      $(\".m-content\").css(\"overflow-y\", \"hidden\");\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * When a new file/files are add, each one if processed by processFile\r\n   * @param files \r\n   */\r\n  processFiles(files?: FileList) {\r\n    this.isLoadingFiles = true;\r\n\r\n    if (Array.from(files).length > 0) {\r\n\r\n      Array.from(files).map(file => {\r\n        this.processFile(file);\r\n      });\r\n\r\n    }\r\n\r\n    this.isLoadingFiles = false;\r\n\r\n  };\r\n\r\n  /**\r\n   * Gets file extension and calls appropriate function to load info into MicrobeTrace.\r\n   * For example, for json files commonService.processJSON is used.\r\n   * Adds file to commonService.session.files and adds file to table with this.addToTable\r\n   * \r\n   * XXXXX Currrently unable to load zip files XXXXX\r\n   * @returns \r\n   */\r\n  processFile(rawfile?) {\r\n    if(!rawfile) {\r\n      rawfile = this.commonService.session.files[0];\r\n    }\r\n\r\n    if(this.commonService.debugMode) {\r\n      console.log('raw file: ', rawfile);\r\n    }\r\n\r\n\r\n    // Loading informaiton null\r\n    // $('#loading-information').html('');\r\n\r\n    const extension = rawfile.name.split('.').pop().toLowerCase();\r\n\r\n    console.log('process file end');\r\n    if (extension === 'zip') {\r\n      //debugger;\r\n      // let new_zip = new JSZip();\r\n      // new_zip\r\n      //     .loadAsync(rawfile)\r\n      //     .then(zip => {\r\n      //         zip.forEach((relativePath, zipEntry) => {\r\n      //             zipEntry.async(\"text\").then(c => {\r\n      //                 this.commonService.processJSON(c, zipEntry.name.split('.').pop())\r\n      //             });\r\n      //         });\r\n      //     });\r\n      return;\r\n    }\r\n\r\n    if (extension === 'microbetrace' || extension === 'hivtrace') {\r\n      //debugger;\r\n      let reader = new FileReader();\r\n      reader.onloadend = out => {this.commonService.processJSON(out.target, extension).then(() => this.populateTable())};\r\n      reader.readAsText(rawfile, 'UTF-8');\r\n      return;\r\n    }\r\n    if (extension === 'svg') {\r\n      //debugger;\r\n      let reader = new FileReader();\r\n      reader.onloadend = out => this.commonService.processSVG(out.target);\r\n      reader.readAsText(rawfile, 'UTF-8');\r\n      return;\r\n    }\r\n    if (extension === 'json') {\r\n      const fileName = this.commonService.filterXSS(rawfile.name);\r\n      let reader = new FileReader();\r\n      reader.onloadend = (out) => {\r\n        const output = JSON.parse(out.target['result'] as string);\r\n        console.log(output);\r\n        if (output.meta && output.tree) {\r\n          const auspiceFile = { contents: output, name: fileName, extension: extension};\r\n          this.commonService.session.files.push(auspiceFile);\r\n          this.addToTable(auspiceFile);\r\n          // this.commonService.temp.auspiceOutput = output;\r\n        } else {\r\n          this.commonService.processJSON(out.target, extension);\r\n        }\r\n      };\r\n      reader.readAsText(rawfile, 'UTF-8');\r\n      return;\r\n    }\r\n\r\n    fileto.promise(rawfile, (extension === 'xlsx' || extension === 'xls') ? 'ArrayBuffer' : 'Text').then(file => {\r\n      //debugger;\r\n      file.name = this.commonService.filterXSS(file.name);\r\n      file.extension = file.name.split('.').pop().toLowerCase();\r\n      this.commonService.session.files.push(file);\r\n      this.addToTable(file);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Removes all files from commonService.session.files, sets this.nodeIds and this.edgeIds to empty arrays [].\r\n   * Calls nodeEdgeCheck\r\n   */\r\n  removeAllFiles() {\r\n    const fileTableRows = $(\".file-table-row\");\r\n    fileTableRows.slideUp(() => fileTableRows.remove());\r\n\r\n    this.commonService.session.files = [];\r\n    this.nodeIds = [];\r\n    this.edgeIds = [];\r\n\r\n    this.nodeEdgeCheck();\r\n  }\r\n\r\n  /**\r\n   * Gets information from file about extension, file type, and header and uses that information to addTableTile for file-table\r\n   */\r\n  addToTable(file) {\r\n    if(this.commonService.debugMode) {\r\n      console.log('addToTable: ', file);\r\n    }\r\n\r\n    //debugger;\r\n    const extension = file.extension ? file.extension : this.commonService.filterXSS(file.name).split('.').pop().toLowerCase();\r\n    const isFasta = extension.indexOf('fas') > -1;\r\n    const isNewick = extension.indexOf('nwk') > -1 || extension.indexOf('newick') > -1;\r\n    const isXL = (extension === 'xlsx' || extension === 'xls');\r\n    const isJSON = (extension === 'json');\r\n    const isAuspice = (extension === 'json' && file.contents.meta && file.contents.tree);\r\n    const isNode = this.commonService.includes(file.name.toLowerCase(), 'node') || (file.format && file.format.toLowerCase() === 'node');\r\n    if (isXL) {\r\n      try {\r\n        const workbook = XLSX.read(file.contents, { type: 'array' });\r\n        const data = XLSX.utils.sheet_to_json(workbook.Sheets[workbook.SheetNames[0]]);\r\n        const headers = [];\r\n        data.forEach(row => {\r\n          Object.keys(row).forEach(key => {\r\n            const safeKey = this.commonService.filterXSS(key);\r\n            if (!this.commonService.includes(headers, safeKey)) headers.push(safeKey);\r\n          });\r\n        });\r\n        addTableTile(headers, this);\r\n      } catch {\r\n        console.log('Unable to read excel file: ', file.name);\r\n        addTableTile([file.field1, file.field2, file.field3], this);\r\n        return;\r\n      }\r\n    } else if (isJSON) {\r\n        let data = [];\r\n        console.log('This is a JSON file');\r\n        if ( (typeof file.contents) === 'string') {\r\n          data = JSON.parse(file.contents);\r\n        } else {\r\n          console.log(file);\r\n          data = [file.contents];\r\n        }\r\n\r\n        addTableTile(Object.keys(data[0]).map(this.commonService.filterXSS), this);\r\n\r\n        if (!isFasta && !isNewick && isNode) {\r\n          this.loadNodes(file.name, data, true);\r\n        }\r\n        if (!isFasta && !isNewick && !isNode) {\r\n          this.loadEdges(file.name, data, true);\r\n        }\r\n\r\n        this.nodeEdgeCheck();\r\n\r\n    } else if (isFasta) {\r\n      //let that = this;\r\n      this.commonService.parseFASTA(file.contents).then((output) => {\r\n        addTableTile([\"id\", \"seq\"], this);\r\n\r\n        this.nodeEdgeCheck();\r\n        })\r\n    } else {\r\n      Papa.parse(file.contents, {\r\n        header: true,\r\n        skipEmptyLines: true,\r\n        complete: output => {\r\n          addTableTile(output.meta.fields.map(this.commonService.filterXSS), this);\r\n\r\n          if (!isFasta && !isNewick && isNode) {\r\n            this.loadNodes(file.name, output, false);\r\n          }\r\n          if (!isFasta && !isNewick && !isNode) {\r\n            this.loadEdges(file.name, output, false);\r\n          }\r\n\r\n          this.nodeEdgeCheck();\r\n\r\n          if(this.commonService.debugMode) {\r\n            console.log('addToTable parse end: ', file);\r\n          }\r\n        }\r\n\r\n        \r\n      });\r\n\r\n      if(this.commonService.debugMode) {\r\n        console.log('addToTabl End: ', file);\r\n      }\r\n    }\r\n\r\n    //For the love of all that's good...\r\n    //TODO: Rewrite this as a [Web Component](https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements) or [something](https://reactjs.org/docs/react-component.html) or something.\r\n    /**\r\n     * Adds a file-table-row for the file.\r\n     */\r\n    function addTableTile(headers, context) {\r\n\r\n\r\n      console.log('addTableTile: ', headers);\r\n      const parentContext = context;\r\n      const root = $('<div class=\"file-table-row\" style=\"position: relative; z-index: 1;margin-bottom: 24px;\"></div>').data('filename', file.name);\r\n      const fnamerow = $('<div class=\"row w-100\"></div>');\r\n      $('<div class=\"file-name col\"></div>')\r\n        .append($('<a href=\"javascript:void(0);\" class=\"far flaticon-delete-1 align-middle p-1\" title=\"Remove this file\"></a>').on('click', () => {\r\n          parentContext.commonService.session.files.splice(parentContext.commonService.session.files.findIndex(f => f.name === file.name), 1);\r\n          parentContext.removeFile(file.name);\r\n          $('#launch').prop('disabled', false).focus();\r\n          $('#launch').text('Update');\r\n          root.slideUp(() => root.remove());\r\n        }))\r\n        .append($(`<a href=\"javascript:void(0);\" class=\"far flaticon-download-1 align-middle p-1\" ${parentContext.isFileContentsEmpty(file) ? 'style=\"color: gray\" title=\"Unable to resave this file\"': 'title=\"Resave this file\"' } ></a>`).on('click', () => {\r\n          if (parentContext.isFileContentsEmpty(file)) {\r\n            alert('Unable to resave this file.');\r\n          } else {\r\n            saveAs(new Blob([file.contents], { type: file.type || 'text' }), file.name);\r\n          }\r\n        }))\r\n        .append('<span class=\"p-1\">' + file.name + '</span>')\r\n        .append(`\r\n                    <div class=\"btn-group btn-group-toggle btn-group-sm float-right\" data-toggle=\"buttons\">\r\n                      <label class=\"btn btn-light${!isFasta && !isNewick && !isNode && !isAuspice ? ' active' : ''}\">\r\n                        <input type=\"radio\" name=\"options-${file.name}\" data-type=\"link\" autocomplete=\"off\"${!isFasta && !isNewick && !isNode ? ' checked' : ''}>Link\r\n                      </label>\r\n                      <label class=\"btn btn-light${!isFasta && !isNewick && isNode ? ' active' : ''}\">\r\n                        <input type=\"radio\" name=\"options-${file.name}\" data-type=\"node\" autocomplete=\"off\"${!isFasta && !isNewick && isNode ? ' checked' : ''}>Node\r\n                      </label>\r\n                      <label class=\"btn btn-light\">\r\n                        <input type=\"radio\" name=\"options-${file.name}\" data-type=\"matrix\" autocomplete=\"off\">Matrix\r\n                      </label>\r\n                      <label class=\"btn btn-light${isFasta ? ' active' : ''}\">\r\n                        <input type=\"radio\" name=\"options-${file.name}\" data-type=\"fasta\" autocomplete=\"off\"${isFasta ? ' checked' : ''}>FASTA\r\n                      </label>\r\n                      <label class=\"btn btn-light${isNewick ? ' active' : ''}\">\r\n                        <input type=\"radio\" name=\"options-${file.name}\" data-type=\"newick\" autocomplete=\"off\"${isNewick ? ' checked' : ''}>Newick\r\n                      </label>\r\n                      <label class=\"btn btn-light${isAuspice ? ' active' : ''}\">\r\n                        <input type=\"radio\" name=\"options-${file.name}\" data-type=\"auspice\" autocomplete=\"off\"${isAuspice ? ' checked' : ''}>Auspice\r\n                      </label>\r\n                    </div>`).appendTo(fnamerow);\r\n\r\n      fnamerow.appendTo(root);\r\n      const optionsrow = $('<div class=\"row w-100\"></div>');\r\n      const options = '<option>None</option>' + headers.map(h => `<option value=\"${h}\">${parentContext.commonService.titleize(h)}</option>`).join('\\n');\r\n      optionsrow.append(`\r\n                  <div class='col-4 '${isFasta || isNewick ? ' style=\"display: none;\"' : ''} data-file='${file.name}'>\r\n                    <label for=\"file-${file.name}-field-1\">${isNode ? 'ID' : 'Source'}</label>\r\n                    <select id=\"file-${file.name}-field-1\" class=\"form-control form-control-sm\">${options}</select>\r\n                  </div>\r\n                  <div class='col-4 '${isFasta || isNewick ? ' style=\"display: none;\"' : ''} data-file='${file.name}'>\r\n                    <label for=\"file-${file.name}-field-2\">${isNode ? 'Sequence' : 'Target'}</label>\r\n                    <select id=\"file-${file.name}-field-2\" class=\"form-control form-control-sm\">${options}</select>\r\n                  </div>\r\n                  <div class='col-4 '${isFasta || isNewick ? ' style=\"display: none;\"' : ''} data-file='${file.name}'>\r\n                    <label for=\"file-${file.name}-field-3\">Distance</label>\r\n                    <select id=\"file-${file.name}-field-3\" class=\"form-control form-control-sm\">${options}</select>\r\n                  </div>`);\r\n\r\n      optionsrow.appendTo(root);\r\n\r\n      function matchHeaders(type) {\r\n\r\n        const these = $(`[data-file='${file.name}'] select`);\r\n        const a = type === 'node' ? ['ID', 'Id', 'id'] : ['SOURCE', 'Source', 'source'],\r\n          b = type === 'node' ? ['SEQUENCE', 'SEQ', 'Sequence', 'sequence', 'seq'] : ['TARGET', 'Target', 'target'],\r\n          c = ['length', 'Length', 'distance', 'Distance', 'snps', 'SNPs', 'tn93', 'TN93'];\r\n        [a, b, c].forEach((list, i) => {\r\n          $(these.get(i)).val(\"None\");\r\n          list.forEach(title => {\r\n            if (parentContext.commonService.includes(headers, title)) $(these.get(i)).val(title);\r\n          });\r\n          if ($(these.get(i)).val() === 'None' &&\r\n            !(i === 1 && type === 'node') && //If Node Sequence...\r\n            !(i === 2 && type === 'link')) { //...or Link distance...\r\n            //...don't match to a variable in the dataset, leave them as \"None\".\r\n            $(these.get(i)).val(headers[i]);\r\n            //Everything else, just guess the next ordinal column.\r\n          }\r\n        });\r\n      }\r\n\r\n      root.appendTo('#file-table');\r\n      matchHeaders($(`[name=\"options-${file.name}\"]:checked`).data('type'));\r\n\r\n      function refit(e: any = null) {\r\n        const type = $(e ? e.target : `[name=\"options-${file.name}\"]:checked`).data('type'),\r\n          these = $(`[data-file='${file.name}']`),\r\n          first = $(these.get(0)),\r\n          second = $(these.get(1)),\r\n          third = $(these.get(2));\r\n        if (type === 'node') {\r\n          first.slideDown().find('label').text('ID');\r\n          second.slideDown().find('label').text('Sequence');\r\n          third.slideUp();\r\n          matchHeaders(type);\r\n        } else if (type === 'link') {\r\n          first.slideDown().find('label').text('Source');\r\n          second.slideDown().find('label').text('Target');\r\n          third.slideDown();\r\n          matchHeaders(type);\r\n        } else {\r\n          these.slideUp();\r\n        }\r\n        parentContext.updateMetadata(file);\r\n\r\n        $('#launch').prop('disabled', false).focus();\r\n      };\r\n\r\n      const fileTable = document.getElementById('file-table');\r\n      const selectElements = fileTable.querySelectorAll('select');\r\n\r\n      for (let i = 0; i < selectElements.length; i++) {\r\n        selectElements[i].addEventListener('change', (event) => {\r\n          // Handle change event here\r\n          parentContext.updateMetadata(file);\r\n        });\r\n      }\r\n\r\n      console.log('addTableTile end: ', headers);\r\n\r\n\r\n      $(`[name=\"options-${file.name}\"]`).on(\"change\", refit);\r\n      refit();\r\n    }\r\n  };\r\n\r\n  isFileContentsEmpty(file): boolean {\r\n    try { // large link list csv (230K rows) throws error, with try-catch, able to load file\r\n      if (file.contents === null || file.contents === undefined) {\r\n        return true;\r\n      } else if (file.contents instanceof ArrayBuffer && file.contents.byteLength > 0) {\r\n        return false;\r\n      } else if (Object.keys(file.contents).length === 0 || file.contents == '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } catch {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates commonService.session.files info, such as field1, field2 ...etc, based on value user selects\r\n   */\r\n  updateMetadata(file) {\r\n    $('#file-panel .file-table-row').each((i, el) => {\r\n      const $el = $(el);\r\n      const fname = $el.data('filename');\r\n      const selects = $el.find('select');\r\n      const f = this.commonService.session.files.find(file => file.name === fname);\r\n      console.log(f);\r\n      if (f) {\r\n        f.format = $el.find('input[type=\"radio\"]:checked').data('type');\r\n        f.field1 = selects.get(0).value;\r\n        f.field2 = selects.get(1).value;\r\n        f.field3 = selects.get(2).value;\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * Populates this.nodeIds\r\n   */\r\n  loadNodes(fileName: any, output: any, isJson: boolean) {\r\n    if (isJson) {\r\n      const data: any[] = output;\r\n      const firstField = Object.keys(data[0])[0];\r\n      if (this.nodeIds.find(x => x.fileName === fileName)) {\r\n        const currentNodeId = this.nodeIds.find(x => x.fileName === fileName)\r\n        currentNodeId.ids = output.map((x: any) => x[firstField])\r\n      } else {\r\n        this.nodeIds.push(\r\n          {\r\n            fileName: fileName, ids: output.map((x: any) => ('' + x[firstField]))\r\n          });\r\n      }\r\n\r\n    }\r\n    else {\r\n      if (this.nodeIds.find(x => x.fileName === fileName)) {\r\n        const currentNodeId = this.nodeIds.find(x => x.fileName === fileName)\r\n        currentNodeId.ids = output.data.map((x: any) => x[output.meta.fields[0]])\r\n      } else {\r\n        this.nodeIds.push(\r\n          {\r\n            fileName: fileName, ids: output.data.map((x: any) => ('' + x[output.meta.fields[0]]))\r\n          });\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Populated this.edgeIds\r\n   */\r\n  loadEdges(fileName: any, output: any, isJson: boolean) {\r\n    if (isJson) {\r\n      const data: any[] = output;\r\n      const fields = Object.keys(data[0]);\r\n      if (this.edgeIds.find(x => x.fileName === fileName)) {\r\n        const currentEdgeId = this.edgeIds.find(x => x.fileName === fileName)\r\n        currentEdgeId.ids = output.map((x: any) => ({\r\n          source: '' + x[fields[0]],\r\n          target: '' + x[fields[1]]\r\n        }))\r\n      } else {\r\n        console.log(`Adding edges ${output}`);\r\n        this.edgeIds.push({\r\n          fileName: fileName,\r\n          ids: output.map((x: any) => ({\r\n            source: '' + x[fields[0]],\r\n            target: '' + x[fields[1]]\r\n          }))\r\n        })\r\n\r\n      }\r\n\r\n    }\r\n    else {\r\n      if (this.edgeIds.find(x => x.fileName === fileName)) {\r\n        const currentEdgeId = this.edgeIds.find(x => x.fileName === fileName)\r\n        currentEdgeId.ids = output.data.map((x: any) => ({\r\n          source: '' + x[output.meta.fields[0]],\r\n          target: '' + x[output.meta.fields[1]]\r\n        }))\r\n      } else {\r\n        this.edgeIds.push({\r\n          fileName: fileName,\r\n          ids: output.data.map((x: any) => ({\r\n            source: '' + x[output.meta.fields[0]],\r\n            target: '' + x[output.meta.fields[1]]\r\n          }))\r\n        })\r\n\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * Updates this.uniqueEdgeNodes and this.uniqueNodes\r\n   */\r\n  nodeEdgeCheck() {\r\n    // populated with a string[] of unique node ids\r\n    let allNodesListNodes: string[] = [];\r\n    this.nodeIds.forEach(x => {\r\n      x.ids.forEach(y => allNodesListNodes.push(y));\r\n    });\r\n    allNodesListNodes = _.uniq(allNodesListNodes);\r\n\r\n    // populated with a string[] of unique node ids that have a link/edge\r\n    let allEdgeListNodes: string[] = [];\r\n    this.edgeIds.forEach(x => x.ids.forEach(y => {\r\n      allEdgeListNodes.push(y.source);\r\n      allEdgeListNodes.push(y.target);\r\n    }));\r\n    allEdgeListNodes = _.uniq(allEdgeListNodes);\r\n\r\n    this.uniqueEdgeNodes = allEdgeListNodes.filter(x => x && !allNodesListNodes.some(y=>y==x));\r\n    this.uniqueNodes = allNodesListNodes.filter(x => x && !this.uniqueEdgeNodes.some(y=>y==x));\r\n  }\r\n\r\n  /**\r\n   * Removes elements of this.nodeIds and this.edgeIds where the fileName == fileName and then calls nodeEdgeCheck to update uniqueEdgeNodes and uniqueNodes\r\n   * @param fileName \r\n   */\r\n  removeFile(fileName, runNodeEdgeCheck=true) {\r\n    this.nodeIds = this.nodeIds.filter(x => x.fileName != fileName);\r\n    this.edgeIds = this.edgeIds.filter(x => x.fileName != fileName);\r\n    if (runNodeEdgeCheck) this.nodeEdgeCheck();\r\n  }\r\n\r\n  /**\r\n   * Async function that reads sequencing data from fasta files or from csv/excel files with sequence data\r\n   * \r\n   * @returns An array of sequencing objects [{id, seq},]\r\n   */\r\n  async readFastas() {\r\n    const fastas = this.commonService.session.files.filter(f => this.commonService.includes(f.extension, 'fas'));\r\n    const nodeFilesWithSeqs = this.commonService.session.files.filter(f => f.format === \"node\" && f.field2 != \"None\" && f.field2 != \"\");\r\n    if (fastas.length === 0 && nodeFilesWithSeqs.length === 0) return [];\r\n    let data = [];\r\n    for (let i = 0; i < fastas.length; i++) {\r\n      let fasta = fastas[i];\r\n      let nodes = await this.commonService.parseFASTA(fasta.contents);\r\n      data = data.concat(nodes);\r\n    }\r\n    \r\n    for(let j = 0; j < nodeFilesWithSeqs.length; j++){\r\n      if (nodeFilesWithSeqs[j].extension == \"csv\") {\r\n        const csv = nodeFilesWithSeqs[j];\r\n        const seqLabel = csv['field2']\r\n          await Papa.parse(csv.contents, {\r\n            header: true,\r\n            skipEmptyLines: true,\r\n            complete: output => {\r\n              output.data.forEach((node) => {\r\n                if (node[seqLabel] != '' || node[seqLabel] != undefined || node[seqLabel] != null ) {\r\n                  data = data.concat({\r\n                    'id': node.id,\r\n                    'seq': node[seqLabel]\r\n                  })\r\n                }\r\n              })\r\n            }})\r\n      // TODO: Cannot presently preview sequences in Node XLSX tables.\r\n      } else {\r\n        const file = nodeFilesWithSeqs[j]\r\n        const seqLabel = file['field2']\r\n        const workbook = XLSX.read(file.contents, { type: 'array' });\r\n        const dataJSON = XLSX.utils.sheet_to_json(workbook.Sheets[workbook.SheetNames[0]]);\r\n        const headers = [];\r\n        dataJSON.forEach(row => {\r\n          Object.keys(row).forEach(key => {\r\n            const safeKey = this.commonService.filterXSS(key);\r\n            if (!this.commonService.includes(headers, safeKey)) headers.push(safeKey);\r\n          });\r\n          if ( row[seqLabel] != '' || row[seqLabel] != undefined || row[seqLabel] != null ) {\r\n            data = data.concat({\r\n              'id': row['id'],\r\n              'seq': row[seqLabel]\r\n            })  \r\n          }\r\n        });\r\n          //addTableTile(headers, this);\r\n      }\r\n    }\r\n    return data;\r\n  }\r\n\r\n  async updatePreview(data?) {\r\n    if (!data) {\r\n      data = await this.readFastas();\r\n    }\r\n    $('#alignment-preview').empty().append('<div class=\"spinner-border\" role=\"status\"><span class=\"sr-only\">Loading...</span></div>');\r\n    if ($('#align-sw').is(':checked')) {\r\n      data = await this.commonService.align({\r\n        nodes: data,\r\n        reference: this.commonService.session.data.reference,\r\n        match: [parseFloat($('#alignerMatch').val().toString()), -parseFloat($('#alignerMismatch').val().toString())],\r\n        gap: [-parseFloat($('#alignerGapO').val().toString()), -parseFloat($('#alignerGapE').val().toString())]\r\n      })\r\n    }\r\n    generateCanvas(data.map(obj => obj.seq.toUpperCase()), {}).then(function(canvas: HTMLCanvasElement) { \r\n      $('#alignment-preview').empty().append(canvas); })\r\n  }\r\n\r\n\r\n  /**\r\n   * Updates SelectedDefaultDistanceThresholdVariable, microbeTrace.SelectedLinkThresholdVariable, and link-threshold widget values.\r\n   * Then calls microbeTrace.onLinkThresholdChanged clusters, nodes, and links as well as visualizations and statistics\r\n   * @param {string} e string representation of link threshold such as '7'\r\n   */\r\n  onLinkThresholdChange = (e) => {\r\n    if(this.commonService.debugMode) {\r\n      console.log('changing link threshold');\r\n    }\r\n    const newValue = e.target?.value ?? e;\r\n    this.SelectedDefaultDistanceThresholdVariable = parseFloat(newValue);\r\n    this.store.setLinkThreshold(parseFloat(newValue));\r\n  }\r\n\r\n  /**\r\n   * Updates this.SelectedDefaultDistanceMetricVariable, microbeTrace.SelectedDistanceMetricVariable, and default-distance-metric widget.\r\n   * Updates link-threshold variable to default values and updates clusters, nodes, links as well as visualizations and statitistics\r\n   * @param {string} e such as 'snps' \r\n   */\r\n  onDistanceMetricChange = (metric: string) => {\r\n    if(this.commonService.debugMode) {\r\n      console.log('distance ch:', metric);\r\n    }\r\n    \r\n    // 1. Update the component's state property for the dropdown\r\n    this.SelectedDefaultDistanceMetricVariable = metric;\r\n\r\n    // 2. Update the session state and notify the store (maintains original functionality)\r\n    this.commonService.session.style.widgets['default-distance-metric'] = metric.toLowerCase();\r\n    this.store.setMetricChanged(metric);\r\n    this.store.updatecurrentThresholdStepSize(metric.toLowerCase());\r\n\r\n    if (metric.toLowerCase() === 'snps') {\r\n      // 3. Update the step attribute and UI visibility\r\n      $('#default-distance-threshold').attr('step', 1);\r\n      $(\"#ambiguities-row\").slideUp();\r\n      \r\n      // 4. Update the threshold value and notify the store\r\n      this.SelectedDefaultDistanceThresholdVariable = 16;\r\n      this.onLinkThresholdChange('16'); \r\n    } else { // tn93\r\n      $('#default-distance-threshold').attr('step', 0.001);\r\n      $(\"#ambiguities-row\").slideDown();\r\n\r\n      this.SelectedDefaultDistanceThresholdVariable = 0.015;\r\n      this.onLinkThresholdChange('0.015');\r\n    }\r\n  }\r\n\r\n  onAmbiguityStrategyChanged() {\r\n    this.commonService.session.style.widgets['ambiguity-resolution-strategy'] = this.SelectedAmbiguityResolutionStrategyVariable;\r\n  }\r\n\r\n  onAmbiguityThresholdChanged() {\r\n    this.commonService.session.style.widgets['ambiguity-threshold'] = this.SelectedAmbiguityThresholdVariable;\r\n  }\r\n\r\n  generateSequences() {\r\n    $('#file-prompt').remove();\r\n    $('#launch').prop('disabled', false).focus();\r\n    this.processFile(new File([Papa.unparse(this.commonService.generateSeqs('gen-' + this.commonService.session.meta.readyTime + '-', this.SelectedGenerateNumberVariable, 20))], 'generatedNodes.csv'));\r\n  }\r\n\r\n  applyStyleFileSettings() {\r\n    if (this.SelectedDefaultDistanceMetricVariable != this.commonService.session.style.widgets['default-distance-metric']){\r\n      this.SelectedDefaultDistanceMetricVariable = this.commonService.session.style.widgets['default-distance-metric'].toLowerCase();\r\n    }\r\n\r\n    if (this.SelectedAmbiguityResolutionStrategyVariable != this.commonService.session.style.widgets['ambiguity-resolution-strategy']){\r\n        this.SelectedAmbiguityResolutionStrategyVariable = this.commonService.session.style.widgets['ambiguity-resolution-strategy'];\r\n    }\r\n\r\n    if (this.SelectedAmbiguityThresholdVariable != this.commonService.session.style.widgets['ambiguity-threshold']) {\r\n      this.SelectedAmbiguityThresholdVariable = this.commonService.session.style.widgets['ambiguity-threshold'];\r\n    }\r\n\r\n    if (this.SelectedDefaultDistanceThresholdVariable != this.commonService.session.style.widgets['link-threshold']){\r\n        this.SelectedDefaultDistanceThresholdVariable = this.commonService.session.style.widgets['link-threshold'];\r\n    }\r\n\r\n    if (this.SelectedDefaultViewVariable != this.commonService.session.style.widgets['default-view']){\r\n      this.SelectedDefaultViewVariable = this.commonService.session.style.widgets['default-view'];\r\n    }\r\n  }\r\n}\r\n\r\nexport namespace FilesComponent {\r\n  export const componentTypeName = 'Files';\r\n}\r\n","import { ComponentFactoryResolver, Injectable, Injector, StaticProvider, Type } from '@angular/core';\r\nimport { ComponentContainer, JsonValue } from \"golden-layout\";\r\nimport { BaseComponentDirective } from './base-component.directive';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class GoldenLayoutComponentService {\r\n  private _componentTypeMap = new Map<string, Type<BaseComponentDirective>>()\r\n\r\n  constructor(private componentFactoryResolver: ComponentFactoryResolver) { }\r\n\r\n  /**\r\n   * Adds a new element with a specified key and value to the Map (_componentTypeMap). If an element with the same key already exists, the element will be updated.\r\n   * It doesn't make new view, just registers the view/component with goldenLayout map (_componentTypeMap).\r\n   */\r\n  registerComponentType(name: string, componentType: Type<BaseComponentDirective>) {\r\n    this._componentTypeMap.set(name, componentType);\r\n  }\r\n\r\n  /**\r\n   * XXXXX Never called in codebase XXXXX\r\n   * @returns an array of registered components\r\n   */\r\n  getRegisteredComponentTypeNames(): string[] {\r\n    const count = this._componentTypeMap.size;\r\n    const result = new Array<string>(count);\r\n    let idx = 0;\r\n    for (let [key, value] of this._componentTypeMap) {\r\n      result[idx++] = key;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  createComponent(componentTypeJsonValue: JsonValue, container: ComponentContainer) {\r\n    const componentType = this._componentTypeMap.get(componentTypeJsonValue as string);\r\n    if (componentType === undefined) {\r\n      throw new Error('Unknown component type')\r\n    } else {\r\n      const provider: StaticProvider = { provide: BaseComponentDirective.GoldenLayoutContainerInjectionToken, useValue: container };\r\n      const injector = Injector.create({\r\n        providers: [provider]\r\n      });\r\n      const componentFactoryRef = this.componentFactoryResolver.resolveComponentFactory<BaseComponentDirective>(componentType);\r\n      return componentFactoryRef.create(injector);\r\n    }\r\n  }\r\n}\r\n","import { ApplicationRef, Component, ComponentRef, ElementRef, EmbeddedViewRef, EventEmitter, OnDestroy, Output, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport {\r\n  ComponentContainer, GoldenLayout,\r\n  LogicalZIndex,\r\n  ResolvedComponentItemConfig\r\n} from \"golden-layout\";\r\nimport { BaseComponentDirective } from './base-component.directive';\r\nimport { GoldenLayoutComponentService } from './golden-layout-component.service';\r\nimport { FilesComponent } from './filesComponent/files-plugin.component';\r\nimport { MapComponent } from './visualizationComponents/MapComponent/map-plugin.component';\r\nimport { PhylogeneticComponent } from './visualizationComponents/PhylogeneticComponent/phylogenetic-plugin.component';\r\nimport { TimelineComponent } from './visualizationComponents/TimelineComponent/timeline-component.component';\r\nimport { TableComponent } from './visualizationComponents/TableComponent/table-plugin-component';\r\nimport { TwoDComponent } from './visualizationComponents/TwoDComponent/twoD-plugin.component';\r\nimport { AlignmentViewComponent } from './visualizationComponents/AlignmentViewComponent/alignment-view-plugin-component';\r\nimport { CrosstabComponent } from './visualizationComponents/CrosstabComponent/crosstab-plugin.component';\r\nimport { AggregateComponent } from './visualizationComponents/AggregateComponent/aggregate.component';\r\nimport { GanttComponent } from './visualizationComponents/GanttComponent/gantt-plugin.component';\r\nimport { HeatmapComponent } from './visualizationComponents/HeatmapComponent/heatmap.component';\r\nimport { BubbleComponent } from './visualizationComponents/BubbleComponent/bubble.component';\r\nimport { SankeyComponent } from './visualizationComponents/SankeyComponent/sankey.component';\r\nimport { WaterfallComponent } from './visualizationComponents/WaterfallComponent/waterfall.component';\r\n\r\n@Component({\r\n  selector: 'app-golden-layout-host',\r\n  template: '<ng-template #componentViewContainer></ng-template>',\r\n  styles: [`\r\n    :host {\r\n      height: 100%;\r\n      width: 100%;\r\n      padding: 0;\r\n      display: block;\r\n      position: relative;\r\n    }\r\n    `,\r\n  ],\r\n})\r\nexport class GoldenLayoutHostComponent implements OnDestroy {\r\n  private _goldenLayout: GoldenLayout;\r\n  private _goldenLayoutElement: HTMLElement;\r\n  private _virtualActive = true;\r\n  private _viewContainerRefActive = true;\r\n  private _componentRefMap = new Map<ComponentContainer, ComponentRef<BaseComponentDirective>>();\r\n  private _goldenLayoutBoundingClientRect: DOMRect = new DOMRect();\r\n\r\n  private _goldenLayoutBindComponentEventListener =\r\n    (container: ComponentContainer, itemConfig: ResolvedComponentItemConfig) => this.handleBindComponentEvent(container, itemConfig);\r\n  private _goldenLayoutUnbindComponentEventListener =\r\n    (container: ComponentContainer) => this.handleUnbindComponentEvent(container);\r\n\r\n  @ViewChild('componentViewContainer', { read: ViewContainerRef, static: true }) private _componentViewContainerRef: ViewContainerRef;\r\n  \r\n  @Output() TabRemovedEvent = new EventEmitter();\r\n\r\n  @Output() TabChangedEvent = new EventEmitter();\r\n\r\n  get goldenLayout() { return this._goldenLayout; }\r\n  get virtualActive() { return this._virtualActive; }\r\n  get viewContainerRefActive() { return this._viewContainerRefActive; }\r\n  get isGoldenLayoutSubWindow() { return this._goldenLayout.isSubWindow; }\r\n\r\n  constructor(private _appRef: ApplicationRef,\r\n    private _elRef: ElementRef<HTMLElement>,\r\n    private goldenLayoutComponentService: GoldenLayoutComponentService,\r\n  ) {\r\n    this._goldenLayoutElement = this._elRef.nativeElement;\r\n\r\n    this.goldenLayoutComponentService.registerComponentType(FilesComponent.componentTypeName, FilesComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(TwoDComponent.componentTypeName, TwoDComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(TableComponent.componentTypeName, TableComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(MapComponent.componentTypeName, MapComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(PhylogeneticComponent.componentTypeName, PhylogeneticComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(TimelineComponent.componentTypeName, TimelineComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(AlignmentViewComponent.componentTypeName, AlignmentViewComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(CrosstabComponent.componentTypeName, CrosstabComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(AggregateComponent.componentTypeName, AggregateComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(GanttComponent.componentTypeName, GanttComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(HeatmapComponent.componentTypeName, HeatmapComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(BubbleComponent.componentTypeName, BubbleComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(SankeyComponent.componentTypeName, SankeyComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(WaterfallComponent.componentTypeName, WaterfallComponent);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this._goldenLayout.destroy();\r\n  }\r\n\r\n  initialise() {\r\n\r\n    this._goldenLayout = new GoldenLayout(\r\n      this._goldenLayoutElement,\r\n      this._goldenLayoutBindComponentEventListener,\r\n      this._goldenLayoutUnbindComponentEventListener,\r\n    );\r\n    this._goldenLayout.resizeWithContainerAutomatically = true;\r\n    this._goldenLayout.beforeVirtualRectingEvent = (count) => this.handleBeforeVirtualRectingEvent(count);\r\n\r\n    if (this._goldenLayout.isSubWindow) {\r\n      this._goldenLayout.checkAddDefaultPopinButton();\r\n    }\r\n\r\n    // Add the activeContentItemChanged event listener\r\n    this._goldenLayout.on('activeContentItemChanged', contentItem => {\r\n      this.handleActiveTabChange(contentItem);\r\n    });\r\n\r\n    this.setViewContainerRefActive(true);\r\n\r\n  }\r\n\r\n  setVirtualActive(value: boolean) {\r\n    this._goldenLayout.clear();\r\n    this._virtualActive = value;\r\n    if (!this._virtualActive) {\r\n      this._viewContainerRefActive = false;\r\n    }\r\n  }\r\n\r\n  setViewContainerRefActive(value: boolean) {\r\n    this._goldenLayout.clear();\r\n    if (value && !this.virtualActive) {\r\n      throw new Error('ViewContainerRef active only possible if VirtualActive');\r\n    }\r\n    this._viewContainerRefActive = value;\r\n  }\r\n\r\n  setSize(width: number, height: number) {\r\n    this._goldenLayout.setSize(width, height)\r\n  }\r\n\r\n  getComponentRef(container: ComponentContainer) {\r\n    return this._componentRefMap.get(container);\r\n  }\r\n\r\n  public focusComponent(componentId: string) : ComponentContainer {\r\n\r\n    const container = Array.from(this._componentRefMap.keys()).find(\r\n      (container) => container.componentType?.toString() === componentId\r\n    ) as ComponentContainer;\r\n  \r\n    if (container) {\r\n      const componentItem = container.parent;\r\n      this._goldenLayout.focusComponent(componentItem);\r\n    }\r\n\r\n    return container;\r\n\r\n  }\r\n\r\n  private handleBindComponentEvent(container: ComponentContainer, itemConfig: ResolvedComponentItemConfig): ComponentContainer.BindableComponent {\r\n    const componentType = itemConfig.componentType;\r\n    const componentRef = this.goldenLayoutComponentService.createComponent(componentType, container);\r\n    const component = componentRef.instance;\r\n\r\n    this._componentRefMap.set(container, componentRef);\r\n\r\n    if (this._virtualActive) {\r\n      container.virtualRectingRequiredEvent = (container, width, height) => this.handleContainerVirtualRectingRequiredEvent(container, width, height);\r\n      container.virtualVisibilityChangeRequiredEvent = (container, visible) => this.handleContainerVisibilityChangeRequiredEvent(container, visible);\r\n      container.virtualZIndexChangeRequiredEvent = (container, logicalZIndex, defaultZIndex) => this.handleContainerVirtualZIndexChangeRequiredEvent(container, logicalZIndex, defaultZIndex);\r\n\r\n      if (this._viewContainerRefActive) {\r\n        this._componentViewContainerRef.insert(componentRef.hostView);\r\n      } else {\r\n        this._appRef.attachView(componentRef.hostView);\r\n        const componentRootElement = component.rootHtmlElement;\r\n        this._goldenLayoutElement.appendChild(componentRootElement);\r\n      }\r\n    } else {\r\n      this._appRef.attachView(componentRef.hostView);\r\n      const domElem = (componentRef.hostView as EmbeddedViewRef<unknown>).rootNodes[0] as HTMLElement;\r\n      container.element.appendChild(domElem);\r\n    }\r\n\r\n    return {\r\n      component,\r\n      virtual: this._virtualActive,\r\n    }\r\n  }\r\n\r\n  private handleUnbindComponentEvent(container: ComponentContainer) {\r\n    const componentRef = this._componentRefMap.get(container);\r\n    if (componentRef === undefined) {\r\n      throw new Error('Could not unbind component. Container not found');\r\n    }\r\n    this._componentRefMap.delete(container);\r\n\r\n    const hostView = componentRef.hostView;\r\n\r\n    if (container.virtual) {\r\n      if (this._viewContainerRefActive) {\r\n        const viewRefIndex = this._componentViewContainerRef.indexOf(hostView);\r\n        if (viewRefIndex < 0) {\r\n          throw new Error('Could not unbind component. ViewRef not found');\r\n        }\r\n        this._componentViewContainerRef.remove(viewRefIndex);\r\n      } else {\r\n        const component = componentRef.instance;\r\n        const componentRootElement = component.rootHtmlElement;\r\n        this._goldenLayoutElement.removeChild(componentRootElement);\r\n        this._appRef.detachView(hostView);\r\n      }\r\n    } else {\r\n      const component = componentRef.instance;\r\n      const componentRootElement = component.rootHtmlElement;\r\n      container.element.removeChild(componentRootElement);\r\n      this._appRef.detachView(hostView);\r\n    }\r\n\r\n    if (container.componentType !== undefined){\r\n      this.TabRemovedEvent.emit(container.componentType.toString());\r\n    }\r\n\r\n    componentRef.destroy();\r\n  }\r\n\r\n  private handleBeforeVirtualRectingEvent(count: number) {\r\n    this._goldenLayoutBoundingClientRect = this._goldenLayoutElement.getBoundingClientRect();\r\n  }\r\n\r\n  private handleContainerVirtualRectingRequiredEvent(container: ComponentContainer, width: number, height: number) {\r\n    const containerBoundingClientRect = container.element.getBoundingClientRect();\r\n    const left = containerBoundingClientRect.left - this._goldenLayoutBoundingClientRect.left;\r\n    const top = containerBoundingClientRect.top - this._goldenLayoutBoundingClientRect.top;\r\n\r\n    const componentRef = this._componentRefMap.get(container);\r\n    if (componentRef === undefined) {\r\n        throw new Error('handleContainerVirtualRectingRequiredEvent: ComponentRef not found');\r\n    }\r\n    const component = componentRef.instance;\r\n    component.setPositionAndSize(left, top, width, height);\r\n  }\r\n\r\n  public removeComponent(componentId: string) {\r\n    const container = Array.from(this._componentRefMap.keys()).find(\r\n      (container) => container.componentType?.toString() === componentId\r\n    ) as ComponentContainer;\r\n  \r\n    if (container) {\r\n      const componentItem = container.parent;\r\n      if (componentItem && componentItem.parent) {\r\n        componentItem.parent.removeChild(componentItem);\r\n      }\r\n    } else {\r\n      throw new Error('Component not found for the provided id');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets up listeners to monitor active view changes in Golden Layout.\r\n   */\r\n  // private setupActiveViewListener(): void {\r\n  //   // Listen to 'activeContentItemChanged' event\r\n  //   this.layout.on('activeContentItemChanged', (currentItem, previousItem) => {\r\n  //     if (currentItem && currentItem.config && currentItem.config.componentName) {\r\n  //       const activeView = currentItem.config.componentName;\r\n  //       this.viewStateService.setActiveView(activeView);\r\n  //       console.log(`Active view changed to: ${activeView}`);\r\n  //     } else {\r\n  //       this.viewStateService.clearActiveView();\r\n  //       console.log('No active view.');\r\n  //     }\r\n  //   });\r\n\r\n  //   // Optionally, set initial active view\r\n  //   const activeItem = this.layout.root.contentItems[0].contentItems[0];\r\n  //   if (activeItem && activeItem.config && activeItem.config.componentName) {\r\n  //     this.viewStateService.setActiveView(activeItem.config.componentName);\r\n  //   }\r\n  // }\r\n\r\n  private handleContainerVisibilityChangeRequiredEvent(container: ComponentContainer, visible: boolean) {\r\n    const componentRef = this._componentRefMap.get(container);\r\n    if (componentRef === undefined) {\r\n        throw new Error('handleContainerVisibilityChangeRequiredEvent: ComponentRef not found');\r\n    }\r\n    const component = componentRef.instance;\r\n    component.setVisibility(visible);\r\n  }\r\n\r\n  private handleContainerVirtualZIndexChangeRequiredEvent(container: ComponentContainer, logicalZIndex: LogicalZIndex, defaultZIndex: string) {\r\n    const componentRef = this._componentRefMap.get(container);\r\n    if (componentRef === undefined) {\r\n        throw new Error('handleContainerVirtualZIndexChangeRequiredEvent: ComponentRef not found');\r\n    }\r\n    const component = componentRef.instance;\r\n    component.setZIndex(defaultZIndex);\r\n  }\r\n\r\n  private handleActiveTabChange(contentItem: any) {\r\n    console.log('handleActiveTabChange: ', contentItem);\r\n    this.TabChangedEvent.emit(contentItem._title);\r\n  }\r\n}\r\n\r\n\r\n","import { CommonService } from '../contactTraceCommonServices/common.service';\r\nimport * as patristic from 'patristic';\r\n\r\nexport default class AuspiceHandler {\r\n\r\n  private strainSymbol = Symbol('strain');\r\n  private NODE_VISIBLE = 2;              // included on tree and map\r\n  private invalidStrings = ['unknown', '?', 'nan', 'na', 'n/a', '', 'unassigned'];\r\n  private nodeList = [];\r\n  private linkList = [];\r\n\r\n  constructor(public commonService: CommonService) {\r\n    this.commonService = commonService;\r\n  }\r\n\r\n  public recurseChildren = (tree) => {\r\n    if (!tree.children) {\r\n      const node = this.makeNode(tree);\r\n      this.nodeList.push(node);\r\n      const branch = new patristic.Branch(node);\r\n      return branch;\r\n    } else {\r\n      const rootNode = this.makeNode(tree);\r\n      this.nodeList.push(rootNode);\r\n      const newTree = new patristic.Branch(rootNode);\r\n      for (const child of tree.children) {\r\n        const node = this.recurseChildren(child);\r\n        newTree.addChild(node);\r\n      }\r\n      return newTree;\r\n    }\r\n  }\r\n\r\n  public makeNode = (tree) => {\r\n    const node: any = {};\r\n    node.id = tree.name;\r\n    node._id = tree.name;\r\n    if (tree.hasOwnProperty('branch_attrs') &&\r\n        tree.branch_attrs.hasOwnProperty('mutations') &&\r\n        tree.branch_attrs.mutations.hasOwnProperty('nuc'))  {\r\n      node.mutations = tree.branch_attrs.mutations.nuc;\r\n    }\r\n    for (const attribute of Object.keys(tree.node_attrs)) {\r\n      if (attribute !== 'div') {\r\n        node[attribute] = tree.node_attrs[attribute].value;\r\n      } else {\r\n        node[attribute] = tree.node_attrs[attribute];\r\n      }\r\n    }\r\n    return node;\r\n  }\r\n\r\n  public combineMutations = (tree) => {\r\n    const leaves = tree.getLeaves();\r\n    for (const leaf of leaves) {\r\n      let mutHolder = [];\r\n      for (const ancestor of leaf.getAncestors(true)) {\r\n        const nodeIndex = this.nodeList.findIndex( x => x.id === ancestor.id);\r\n        const nodeHolder = this.nodeList[nodeIndex];\r\n        if (nodeHolder.hasOwnProperty('mutations')) {\r\n          mutHolder = mutHolder.concat(nodeHolder.mutations);\r\n        }\r\n      }\r\n      leaf.data.mutations = mutHolder;\r\n    }\r\n    return tree;\r\n  }\r\n\r\n  public parseAuspice = (auspiceTree) => {\r\n    console.log(auspiceTree);\r\n    return this.recurseChildren(auspiceTree.tree);\r\n  }\r\n\r\n\r\n  public treeToNewick = (tree, temporal, internalNodeNames = false, nodeAnnotation = (node) => '') => {\r\n    const getXVal = temporal ? (n) => this.getTraitFromNode(n, 'num_date') : this.getDivFromNode;\r\n\r\n    function recurse(node, parentX) {\r\n      if (node.hasOwnProperty('children')) {\r\n        const childSubtrees = node.children.map((child) => {\r\n          const subtree = recurse(child, getXVal(node));\r\n          return subtree;\r\n        });\r\n        return `(${childSubtrees.filter((t) => !!t).join(',')})` +\r\n          `${internalNodeNames ? node.name : ''}${nodeAnnotation(node)}:${getXVal(node) - parentX}`;\r\n      }\r\n      /* terminal node */\r\n      const leaf = `${node.name}${nodeAnnotation(node)}:${getXVal(node) - parentX}`;\r\n      return leaf;\r\n    }\r\n\r\n    const rootNode = tree;\r\n    const rootXVal = getXVal(rootNode);\r\n    return recurse(rootNode, rootXVal) + ';';\r\n  }\r\n\r\n\r\n  public getTraitFromNode = (node, trait, {entropy = false, confidence = false}= {}) => {\r\n    if (!node.node_attrs) return undefined;\r\n\r\n    if (!entropy && !confidence) {\r\n      if (!node.node_attrs[trait]) {\r\n        if (trait === this.strainSymbol) return node.name;\r\n        return undefined;\r\n      }\r\n      const value = node.node_attrs[trait].value;\r\n      if (!this.isValueValid(value)) return undefined;\r\n      return value;\r\n    } else if (entropy) {\r\n      if (node.node_attrs[trait]) return node.node_attrs[trait].entropy;\r\n      return undefined;\r\n    } else if (confidence) {\r\n      if (node.node_attrs[trait]) return node.node_attrs[trait].confidence;\r\n      return undefined;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  public getDivFromNode = (node) => {\r\n    /* see comment at top of this file */\r\n    if (node.node_attrs && node.node_attrs.div !== undefined) {\r\n      return node.node_attrs.div;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  public isValueValid = (value) => {\r\n    if (!['number', 'boolean', 'string'].includes(typeof value)) {\r\n      return false;\r\n    }\r\n    if (typeof value === 'string' && this.invalidStrings.includes(value.toLowerCase())) {\r\n      return false; // checks against list of invalid strings\r\n    }\r\n    // booleans, valid strings & numbers are valid.\r\n    return true;\r\n  }\r\n\r\n  public makeLinksFromMatrix = (matrix) => {\r\n    const linkList = [];\r\n    for (let i = 0; i < matrix.ids.length - 1; i++) {\r\n      for (let j = i + 1; j < matrix.ids.length; j++) {\r\n        const link = {\r\n          source: matrix.ids[i],\r\n          target: matrix.ids[j],\r\n          distance: matrix.matrix[i][j],\r\n          hasDistance: true,\r\n          distanceOrigin: 'Auspice',\r\n        };\r\n        linkList.push(link);\r\n      }\r\n    }\r\n    this.linkList = linkList;\r\n  }\r\n\r\n  public addLatLong = (nodes, metadata) => {\r\n    const newNodes = [];\r\n    for (const node of nodes) {\r\n      if (metadata.hasOwnProperty('geo_resolutions')) {\r\n        for (let i=0; i<metadata.geo_resolutions.length; i++) {\r\n          const deme = node[metadata.geo_resolutions[i].key];\r\n          if (deme) {\r\n            node.latitude = metadata.geo_resolutions[i].demes[deme].latitude;\r\n            node.longtude = metadata.geo_resolutions[i].demes[deme].longitude;\r\n          }\r\n        }\r\n      }\r\n      newNodes.push(node);\r\n    }\r\n    return newNodes;\r\n  }\r\n\r\n\r\n  public run = (jsonObj) => {\r\n    const newickString =  this.treeToNewick(jsonObj.tree, false, true);\r\n    const fullTree = this.parseAuspice(jsonObj);\r\n    const distanceMatrix = patristic.parseNewick(newickString).toMatrix();\r\n    const updatedTree = this.combineMutations(fullTree);\r\n    this.makeLinksFromMatrix(distanceMatrix);\r\n    const bareNewickString =  this.treeToNewick(jsonObj.tree, false, false);\r\n    this.nodeList = this.addLatLong(this.nodeList, jsonObj.meta);\r\n    return { nodes: this.nodeList, links: this.linkList, tree: updatedTree, newick: bareNewickString};\r\n  }\r\n\r\n}\r\n","\r\nexport class CustomShapes {\r\n\r\n    public shapes : {};\r\n    \r\n    constructor() {\r\n\r\n       this.shapes  = {\r\n            \"symbolDiamondAlt\" : this.diamondAlt,\r\n            \"symbolDiamondSquare\" : this.diamondSquare,\r\n            \"symbolHexagon\" : this.hexagon,\r\n            \"symbolHexagonAlt\" : this.hexagonAlt,\r\n            \"symbolOctagon\" : this.octogon,\r\n            \"symbolOctagonAlt\" : this.octagonAlt,\r\n            \"symbolPentagon\" : this.pentagon,\r\n            \"symbolTriangleLeft\" : this.triangleLeft,\r\n            \"symbolTriangleRight\" : this.triangleRight,\r\n            \"symbolTriangleDown\" : this.triangleDown,\r\n            \"symbolX\" : this.x\r\n        }\r\n        \r\n    }\r\n\r\n    private diamondAlt = {\r\n        draw: function(context, size) {\r\n\r\n            var tan30 = Math.sqrt(1 / 3);\r\n            var tan30_2 = tan30 * 2;\r\n\r\n            var x = Math.sqrt(size / tan30_2);\r\n            var y = x * tan30;\r\n        \r\n            context.moveTo(0, -y);\r\n            context.lineTo(x, 0);\r\n            context.lineTo(0, y);\r\n            context.lineTo(-x, 0);\r\n        \r\n            context.closePath();\r\n        }\r\n    };\r\n\r\n    private  diamondSquare = {\r\n        draw: function(context, size) {\r\n\r\n          var w = Math.sqrt(size);\r\n          var d = w / 2 * Math.sqrt(2);\r\n      \r\n          context.moveTo(0, -d);\r\n          context.lineTo(d, 0);\r\n          context.lineTo(0, d);\r\n          context.lineTo(-d, 0);\r\n      \r\n          context.closePath();\r\n\r\n        }\r\n    };\r\n\r\n    private hexagon = {\r\n        draw: function(context, size) {\r\n\r\n            function sideLength(area) {\r\n\r\n                var num = 2 * area;\r\n                var denom = 3 * Math.sqrt(3);\r\n                return Math.sqrt(num / denom);\r\n        \r\n            }\r\n\r\n            function rotatePoint(x, y, theta) {\r\n        \r\n                return [\r\n                  Math.cos(theta) * x + -Math.sin(theta) * y, // x\r\n                  Math.sin(theta) * x + Math.cos(theta) * y,  // y\r\n                ];\r\n        \r\n            }\r\n\r\n            var tau = 2 * Math.PI;\r\n            var s = sideLength(size);\r\n            var R = s;\r\n\r\n            context.moveTo.apply(context, rotatePoint(R, 0, tau/12));\r\n\r\n            for (var i = 0; i < 6; ++i) {\r\n\r\n                var a = tau * i / 6;\r\n                var x = Math.cos(a) * R;\r\n                var y = Math.sin(a) * R;\r\n\r\n                context.lineTo.apply(context, rotatePoint(x, y, tau/12));\r\n            \r\n            }\r\n\r\n            context.closePath();\r\n\r\n        }\r\n    }\r\n\r\n    shape : {}\r\n\r\n    private hexagonAlt = {\r\n        draw: function(context, size) {\r\n\r\n            function sideLength(area) {\r\n\r\n                var num = 2 * area;\r\n                var denom = 3 * Math.sqrt(3);\r\n                return Math.sqrt(num / denom);\r\n        \r\n            }\r\n\r\n            function rotatePoint(x, y, theta) {\r\n        \r\n                return [\r\n                  Math.cos(theta) * x + -Math.sin(theta) * y, // x\r\n                  Math.sin(theta) * x + Math.cos(theta) * y,  // y\r\n                ];\r\n        \r\n            }\r\n\r\n            var tau = 2 * Math.PI;\r\n            var s = sideLength(size);\r\n            var R = s;\r\n\r\n            context.moveTo.apply(context, rotatePoint(R, 0, tau));\r\n\r\n            for (var i = 0; i < 6; ++i) {\r\n\r\n                var a = tau * i / 6;\r\n                var x = Math.cos(a) * R;\r\n                var y = Math.sin(a) * R;\r\n\r\n                context.lineTo.apply(context, rotatePoint(x, y, tau));\r\n            \r\n            }\r\n\r\n            context.closePath();\r\n\r\n        }\r\n    }\r\n\r\n    private octogon = {\r\n        draw(context, size) {\r\n\r\n            var circumradiusCoeff = 1/2 * Math.sqrt(4 + 2 * Math.sqrt(2)); // ~ 1.3065629648763766\r\n\r\n            function circumradius(side) { return side * circumradiusCoeff; }\r\n\r\n            function sideLength(area) {\r\n                var num = area * (1 - Math.sqrt(2));\r\n                var denom = 2;\r\n                return Math.sqrt(-1 * num / denom);\r\n            }\r\n\r\n            function rotatePoint(x, y, theta) {\r\n        \r\n                return [\r\n                  Math.cos(theta) * x + -Math.sin(theta) * y, // x\r\n                  Math.sin(theta) * x + Math.cos(theta) * y,  // y\r\n                ];\r\n        \r\n            }\r\n\r\n            var tau = 2 * Math.PI;\r\n            var s = sideLength(size);\r\n            var R = circumradius(s);\r\n        \r\n            context.moveTo.apply(context, rotatePoint(R, 0, 0));\r\n        \r\n            for (var i = 0; i < 8; ++i) {\r\n              var a = tau * i / 8;\r\n              var x = Math.cos(a) * R;\r\n              var y = Math.sin(a) * R;\r\n        \r\n              context.lineTo.apply(context, rotatePoint(x, y, 0));\r\n            }\r\n        \r\n            context.closePath();\r\n\r\n          }\r\n    }\r\n\r\n    private octagonAlt = {\r\n        draw(context, size) {\r\n\r\n            var circumradiusCoeff = 1/2 * Math.sqrt(4 + 2 * Math.sqrt(2)); // ~ 1.3065629648763766\r\n\r\n            function circumradius(side) { return side * circumradiusCoeff; }\r\n\r\n            function sideLength(area) {\r\n                var num = area * (1 - Math.sqrt(2));\r\n                var denom = 2;\r\n                return Math.sqrt(-1 * num / denom);\r\n            }\r\n\r\n            function rotatePoint(x, y, theta) {\r\n        \r\n                return [\r\n                  Math.cos(theta) * x + -Math.sin(theta) * y, // x\r\n                  Math.sin(theta) * x + Math.cos(theta) * y,  // y\r\n                ];\r\n        \r\n            }\r\n\r\n            var tau = 2 * Math.PI;\r\n            var s = sideLength(size);\r\n            var R = circumradius(s);\r\n        \r\n            context.moveTo.apply(context, rotatePoint(R, 0, tau/16));\r\n        \r\n            for (var i = 0; i < 8; ++i) {\r\n              var a = tau * i / 8;\r\n              var x = Math.cos(a) * R;\r\n              var y = Math.sin(a) * R;\r\n        \r\n              context.lineTo.apply(context, rotatePoint(x, y, tau/16));\r\n            }\r\n        \r\n            context.closePath();\r\n\r\n          }\r\n    }\r\n\r\n    private pentagon = {\r\n        draw: function(context, size) {\r\n\r\n            var circumradiusCoeff = 1/10 * Math.sqrt(50 + 10 * Math.sqrt(5)); // ~ 0.85065080835204\r\n\r\n            function circumradius(side) { return side * circumradiusCoeff; }\r\n\r\n            function sideLength(area) {\r\n                var num = 4 * area;\r\n                var denom = Math.sqrt(5 * (5 + 2 * Math.sqrt(5))); // ~ 6.881909602355868\r\n              \r\n                return Math.sqrt(num / denom);\r\n            }\r\n\r\n            function rotatePoint(x, y, theta) {\r\n        \r\n                return [\r\n                  Math.cos(theta) * x + -Math.sin(theta) * y, // x\r\n                  Math.sin(theta) * x + Math.cos(theta) * y,  // y\r\n                ];\r\n        \r\n            }\r\n              \r\n            var tau = 2 * Math.PI;\r\n            var s = sideLength(size);\r\n            var R = circumradius(s);\r\n            var theta = -tau / 4; // Rotate 1/4 turn back so the shape is oriented with a point upward.\r\n        \r\n            context.moveTo.apply(context, rotatePoint(R, 0, theta));\r\n        \r\n            for (var i = 0; i < 5; ++i) {\r\n                var a = tau * i / 5;\r\n                var x = Math.cos(a) * R;\r\n                var y = Math.sin(a) * R;\r\n        \r\n                context.lineTo.apply(context, rotatePoint(x, y, theta));\r\n            }\r\n        \r\n            context.closePath();\r\n\r\n            }\r\n    };\r\n\r\n    private triangleDown = {\r\n        draw: function(context, size) {\r\n\r\n            var y = -Math.sqrt(size / (Math.sqrt(3) * 3));\r\n            context.moveTo(0, -y * 2);\r\n            context.lineTo(-Math.sqrt(3) * y, y);\r\n            context.lineTo(Math.sqrt(3) * y, y);\r\n            context.closePath();\r\n\r\n        }\r\n    };\r\n\r\n    private triangleLeft = {\r\n        draw: function(context, size) {\r\n\r\n            var x = -Math.sqrt(size / (Math.sqrt(3) * 3));\r\n            context.moveTo(x * 2, 0);\r\n            context.lineTo(-x, -Math.sqrt(3) * x);\r\n            context.lineTo(-x, Math.sqrt(3) * x);\r\n            context.closePath();\r\n\r\n        }\r\n    };\r\n\r\n    private triangleRight = {\r\n        draw: function(context, size) {\r\n\r\n            var x = -Math.sqrt(size / (Math.sqrt(3) * 3));\r\n            context.moveTo(-x * 2, 0);\r\n            context.lineTo(x, -Math.sqrt(3) * x);\r\n            context.lineTo(x, Math.sqrt(3) * x);\r\n            context.closePath();\r\n\r\n        }\r\n    };\r\n\r\n    private x = {\r\n        draw: function(context, size) {\r\n\r\n            function rotatePoint(x, y, theta) {\r\n        \r\n                return [\r\n                  Math.cos(theta) * x + -Math.sin(theta) * y, // x\r\n                  Math.sin(theta) * x + Math.cos(theta) * y,  // y\r\n                ];\r\n        \r\n            }\r\n\r\n            var tau = 2 * Math.PI;\r\n            var r = Math.sqrt(size / 5) / 2;\r\n            var theta = tau / 8;\r\n        \r\n            // Use the same construction points as `symbolCross` and rotate 1/8 turn.\r\n            var points = [\r\n                rotatePoint(-3 * r, -r, theta),\r\n                rotatePoint(-r, -r, theta),\r\n                rotatePoint(-r, -3 * r, theta),\r\n                rotatePoint(r, -3 * r, theta),\r\n                rotatePoint(r, -r, theta),\r\n                rotatePoint(3 * r, -r, theta),\r\n                rotatePoint(3 * r, r, theta),\r\n                rotatePoint(r, r, theta),\r\n                rotatePoint(r, 3 * r, theta),\r\n                rotatePoint(-r, 3 * r, theta),\r\n                rotatePoint(-r, r, theta),\r\n                rotatePoint(-3 * r, r, theta)\r\n            ];\r\n        \r\n            context.moveTo.apply(context, points.pop());\r\n            \r\n            for (var i = 0; i < points.length; i++) {\r\n              context.lineTo.apply(context, points[i]);\r\n            }\r\n        \r\n            context.closePath();\r\n        }\r\n    }\r\n\r\n\r\n}","export class DialogSettings {\r\n    public isVisible: boolean = false;\r\n\r\n    public top: number = 200;\r\n    public left: number = 450;\r\n\r\n    // Link Color\r\n    public linkTop: number = 200;\r\n    public linkLeft: string = \"bottom-left\";\r\n\r\n    // Map settings\r\n    public mapRight: string = \"bottom-right\";\r\n\r\n    // Node Color\r\n    public nodeTop: number = 400;\r\n    public nodeLeft: string = \"left\";\r\n\r\n    // Node Shape\r\n    public shapeTop: number = 700;\r\n    public shapeRight: string = \"bottom-right\";\r\n\r\n    // Polygon Color\r\n    public polygonRight: string = \"right\";\r\n\r\n    public polygonTop: number = 200;\r\n    public polygonLeft: number = 950;\r\n\r\n    private dialogControlId: string;\r\n\r\n    private stateBeforeExport: {\r\n        isVisible: boolean,\r\n        top?: number,\r\n        left?: number\r\n    };\r\n\r\n    constructor(\r\n        dialogControlId: string,\r\n        isVisible: boolean\r\n    ) {\r\n        this.dialogControlId = dialogControlId;\r\n        this.isVisible = isVisible;\r\n    }\r\n\r\n    private getDialogControl(): Element {\r\n        return document.querySelector(this.dialogControlId);\r\n    }\r\n\r\n    private getDomRect(): DOMRect | ClientRect {\r\n        const dialogControl = this.getDialogControl();\r\n\r\n        return dialogControl.children[0].getBoundingClientRect();\r\n    }\r\n\r\n    public onShow() {\r\n        this.isVisible = true;\r\n    }\r\n\r\n    public onHide() {\r\n        this.isVisible = false;\r\n    }\r\n\r\n    setStateBeforeExport() {\r\n        this.stateBeforeExport = {\r\n            isVisible: this.isVisible,\r\n            top: undefined,\r\n            left: undefined\r\n        }\r\n\r\n        if (this.isVisible) {\r\n            // sometimes getDomRect throws an error, need to revisit when we decide to revisit saving the locations of tables on show/hide\r\n            try {\r\n                const domRect = this.getDomRect();\r\n\r\n                this.stateBeforeExport.top = domRect.top;\r\n                this.stateBeforeExport.left = domRect.left;\r\n            } catch {\r\n                this.stateBeforeExport.top = 100;\r\n                this.stateBeforeExport.left = 100;  \r\n            }\r\n        }\r\n\r\n        this.isVisible = false;\r\n    }\r\n\r\n    restoreStateAfterExport() {\r\n        this.isVisible = this.stateBeforeExport.isVisible;\r\n        this.top = this.stateBeforeExport.top;\r\n        this.left = this.stateBeforeExport.left;\r\n    }\r\n\r\n\r\n    setVisibility(isVisible: boolean) {\r\n        if(isVisible && this.top === 0 && this.left === 0){\r\n            this.top = window.innerHeight / 2 - 300;\r\n            this.left = window.innerWidth / 2;\r\n        }\r\n        else if(isVisible && this.stateBeforeExport){\r\n            this.restoreStateAfterExport();\r\n        }\r\n        else if(!isVisible){\r\n            this.setStateBeforeExport();\r\n        }\r\n\r\n        this.isVisible = isVisible;\r\n        \r\n        // this section causes the network settings dialog box (at least on 2D network) to minimize so that only top headings to be displayed. Removed (12/5/23) because it causes unwanted behavior\r\n        /*\r\n        if(isVisible){\r\n            const dialog = document.querySelector('#network-settings-pane');\r\n            const tabset = dialog.querySelector('.tab-container');\r\n    \r\n            if(tabset){\r\n                const tabs: Array<Element> = Array.from(tabset.querySelectorAll('.m-tabs__item'));\r\n                \r\n                for(let tab of tabs){\r\n                    tab.classList.remove('active');\r\n                }\r\n                \r\n            }\r\n        }\r\n        */\r\n    }\r\n}","import { Observable, Subject } from 'rxjs';\r\n\r\n\r\n\r\n\r\nexport class InlineWorker {\r\n\r\n    private readonly worker: Worker;\r\n    private onMessage = new Subject<MessageEvent>();\r\n    private onError = new Subject<ErrorEvent>();\r\n    \r\n\r\n\r\n    constructor(func) {\r\n        \r\n        const WORKER_ENABLED = !!(Worker);\r\n\r\n        if (WORKER_ENABLED) {\r\n            let urls = [\"https://raw.githubusercontent.com/CDCgov/patristic/master/dist/patristic.js\",\r\n            \"https://raw.githubusercontent.com/CDCgov/tn93.js/master/dist/tn93.js\",\r\n            \"https://raw.githubusercontent.com/CDCgov/bioseq-js/master/dist/bioseq.js\"];\r\n            let functionBody = \"\";\r\n            for (let i=0; i<urls.length; i++){\r\n                let request = new XMLHttpRequest();\r\n                request.open(\"GET\", urls[i], false);\r\n                request.send(null);\r\n                let returnValue = request.responseText;\r\n                if (i === 0){\r\n                    let start = returnValue.indexOf(\"const version = \\\"0.6.0\\\";\");\r\n                    let finish = returnValue.indexOf(\"exports.Branch = Branch;\");\r\n                    functionBody += returnValue.substring(start, finish);\r\n\r\n                }\r\n                else if (i === 1){\r\n                    let start = returnValue.indexOf(\"\\n\");\r\n                    let finish = returnValue.indexOf(\"if(typeof exports !== 'undefined'){\");\r\n                    functionBody += returnValue.substring(start + 1, finish);\r\n                }\r\n                else if (i === 2){\r\n                    let start = returnValue.indexOf(\"var bioseq\");\r\n                    let finish = returnValue.indexOf(\"return bioseq\");\r\n                    functionBody += returnValue.substring(start, finish);\r\n                }\r\n                else {\r\n                    functionBody += returnValue;\r\n                }\r\n                \r\n                // functionBody += returnValue;\r\n                functionBody += \"\\n\";\r\n            }\r\n\r\n            functionBody += func.toString().replace(/^[^{]*{\\s*/, '').replace(/\\s*}[^}]*$/, '');\r\n\r\n            this.worker = new Worker(URL.createObjectURL(\r\n                new Blob([functionBody], { type: 'text/javascript' })\r\n            ));\r\n\r\n            this.worker.onmessage = (data) => {\r\n                this.onMessage.next(data);\r\n            };\r\n\r\n            this.worker.onerror = (data) => {\r\n                this.onError.next(data);\r\n            };\r\n\r\n        } else {\r\n            throw new Error('WebWorker is not enabled');\r\n        }\r\n    }\r\n\r\n    postMessage(data) {       \r\n        this.worker.postMessage(data);\r\n    }\r\n\r\n    onmessage(): Observable<MessageEvent> {\r\n        \r\n        return this.onMessage.asObservable();\r\n    }\r\n\r\n    onerror(): Observable<ErrorEvent> {\r\n        \r\n        return this.onError.asObservable();\r\n    }\r\n\r\n    terminate() {\r\n       \r\n        if (this.worker) {\r\n            this.worker.terminate();\r\n        }\r\n    }\r\n\r\n}","import { Injectable } from \"@angular/core\";\r\n\r\nimport { MicrobeTraceNextHomeComponent } from \"./microbe-trace-next-plugin.component\";\r\nimport { FilesComponent } from \"./filesComponent/files-plugin.component\";\r\nimport { TwoDComponent } from \"./visualizationComponents/TwoDComponent/twoD-plugin.component\";\r\nimport { MapComponent } from \"./visualizationComponents/MapComponent/map-plugin.component\";\r\nimport { TableComponent } from \"./visualizationComponents/TableComponent/table-plugin-component\";\r\nimport { PhylogeneticComponent } from \"./visualizationComponents/PhylogeneticComponent/phylogenetic-plugin.component\";\r\nimport { TimelineComponent } from \"./visualizationComponents/TimelineComponent/timeline-component.component\";\r\nimport { AlignmentViewComponent } from \"./visualizationComponents/AlignmentViewComponent/alignment-view-plugin-component\";\r\nimport { CrosstabComponent } from \"./visualizationComponents/CrosstabComponent/crosstab-plugin.component\";\r\nimport { AggregateComponent } from \"./visualizationComponents/AggregateComponent/aggregate.component\";\r\nimport { GanttComponent } from \"./visualizationComponents/GanttComponent/gantt-plugin.component\";\r\nimport { HeatmapComponent } from \"./visualizationComponents/HeatmapComponent/heatmap.component\";\r\nimport { BubbleComponent } from \"./visualizationComponents/BubbleComponent/bubble.component\";\r\nimport { SankeyComponent } from \"./visualizationComponents/SankeyComponent/sankey.component\";\r\nimport { WaterfallComponent } from './visualizationComponents/WaterfallComponent/waterfall.component';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class MicrobeTraceNextVisuals {\r\n    public microbeTrace: MicrobeTraceNextHomeComponent;\r\n    public filesPlugin: FilesComponent;\r\n    public twoD: TwoDComponent;\r\n    public gisMap: MapComponent;\r\n    public tableComp: TableComponent;\r\n    public epiCurve: TimelineComponent;\r\n    public phylogenetic: PhylogeneticComponent;\r\n    public alignment: AlignmentViewComponent;\r\n    public crossTab: CrosstabComponent;\r\n    public aggregate: AggregateComponent;\r\n    public gantt: GanttComponent;\r\n    public heatmap: HeatmapComponent;\r\n    public bubble: BubbleComponent;\r\n    public sankey: SankeyComponent;\r\n    public waterfall: WaterfallComponent;\r\n}\r\n","import { ChangeDetectionStrategy, Component, OnInit, Injector, ViewChild, ViewChildren, AfterViewInit, ComponentRef, ViewContainerRef, QueryList, ElementRef, Output, EventEmitter, ChangeDetectorRef, OnDestroy, ViewEncapsulation, Renderer2 } from '@angular/core';\r\nimport { CommonService } from './contactTraceCommonServices/common.service';\r\nimport * as d3 from 'd3';\r\nimport { AppComponentBase } from '@shared/common/app-component-base';\r\nimport { SelectItem, TreeNode, ConfirmationService } from 'primeng/api';\r\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\r\nimport { AppSessionService } from '@shared/common/session/app-session.service';\r\nimport { DialogSettings } from './helperClasses/dialogSettings';\r\nimport * as saveAs from 'file-saver';\r\nimport { StashObjects, HomePageTabItem } from './helperClasses/interfaces';\r\nimport { debounceTime, distinctUntilChanged, Subject, takeUntil } from 'rxjs';\r\nimport moment from 'moment';\r\nimport { Tabulator } from 'tabulator-tables';\r\nimport { Subscription } from 'rxjs';\r\nimport { GoldenLayoutHostComponent } from './golden-layout-host.component';\r\nimport * as Papa from 'papaparse';\r\nimport JSZip from 'jszip';\r\nimport html2canvas from 'html2canvas';\r\nimport { CommonStoreService } from './contactTraceCommonServices/common-store.services';\r\nimport { ExportService, ExportOptions } from './contactTraceCommonServices/export.service';\r\nimport * as XLSX from 'xlsx';\r\nimport { buildDate, commitHash } from \"src/environments/version\";\r\n\r\n\r\n@Component({\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    selector: 'contact-trace',\r\n    encapsulation: ViewEncapsulation.None,\r\n    templateUrl: './microbe-trace-next-plugin.component.html',\r\n    styleUrls: ['./microbe-trace-next-plugin.component.less'],\r\n    providers: [ConfirmationService]\r\n})\r\n\r\nexport class MicrobeTraceNextHomeComponent extends AppComponentBase implements AfterViewInit, OnInit, OnDestroy {\r\n\r\n\r\n    // recommit original code\r\n    @ViewChild('stashes') stashes: ElementRef;\r\n\r\n    @ViewChild('goldenLayoutHost') _goldenLayoutHostComponent: GoldenLayoutHostComponent;\r\n\r\n    @ViewChild('linkThresholdSparkline') linkThresholdSparkline: ElementRef;\r\n\r\n    @ViewChild('visualwrapper', { static: false }) visualWrapperRef!: ElementRef<HTMLDivElement>;\r\n    @ViewChild('nodeColorTable') nodeColorTable!: ElementRef;\r\n    @ViewChild('linkColorTable') linkColorTable!: ElementRef;\r\n\r\n    public metric: string = \"tn93\";\r\n    public ambiguity: string = \"Average\";\r\n    public launchView: string = \"2D Network\";\r\n    public threshold: string = \"0.015\";\r\n\r\n    commitHash: string = commitHash;\r\n    widgets: object; \r\n    elem: any;\r\n    showSettings: boolean = false;\r\n    showExport: boolean = false;\r\n    showCenter: boolean = false;\r\n    showPinAllNodes: boolean = false;\r\n    showRefresh: boolean = false;\r\n    showButtonGroup: boolean = false;\r\n    showSorting: boolean = false;\r\n\r\n    display_eula_modal: boolean = false;\r\n    userConfirmedNN: boolean = false;\r\n\r\n    showExportDashboardMenu: boolean = false;\r\n    ExportDashboardFilename: string = '';\r\n    ExportDashboardScale: number = 1;\r\n    ExportDashboardResolution: { width: number, height:number, summary:string} = {width: 0, height: 0, summary: ''};\r\n\r\n    private thresholdDebouncer: Subject<number> = new Subject<number>();\r\n\r\n    showExportTablesMenu: boolean = false;\r\n    ExportTablesFilename: string = '';\r\n    ExportTablesFileType: string = 'png';\r\n    ExportTablesScale: number = 1;\r\n    exportTables = { 'node-color': false, 'link-color': false, 'node-symbol': false, 'polygon-color': false };\r\n    \r\n    dataSetView: SelectItem[];\r\n    dataSetViewSelected: string;\r\n    tabSet: any;\r\n    filedata: any;\r\n    fileExtension: string;\r\n    activeTabIndex: any;\r\n    displayHelp: boolean = false;\r\n    displayAbout: boolean = false;\r\n    displayStashDialog: boolean = false;\r\n    displayUrlDialog: boolean = false;\r\n    displayMTDialog: boolean = false;\r\n    displayRecallStashDialog: boolean = false;\r\n    displayLedgerLoaderDialog: boolean = false;\r\n    displayloadingInformationModal: boolean = false;\r\n\r\n    // messages to display in loading modal\r\n    messages: string[] = [];\r\n\r\n    version: string = '2.0';\r\n    auspiceUrlVal: string|null = '';\r\n\r\n    private thresholdSubscription: Subscription;\r\n\r\n\r\n    saveFileName: string = '';\r\n    saveByCluster: boolean = false;\r\n    saveFileTypeOptions = [\r\n        { label: 'session', value: 'session'},\r\n        { label: 'style', value: 'style'}\r\n    ];\r\n    selectedSaveFileType: string = 'session';\r\n\r\n    searchField: string = '';\r\n    searchText: string = '';\r\n\r\n    private subscription: Subscription;\r\n    private networkRenderedSubscription: Subscription;\r\n    private loadingMessageUpdatedSubscription: Subscription;\r\n    private destroy$ = new Subject<void>();\r\n\r\n\r\n    // posts: BlockchainProofHashDto[] = new Array<BlockchainProofHashDto>();\r\n    // Blockchaindata: BlockchainProofHashDto = new BlockchainProofHashDto();\r\n    date: Date;\r\n    // Inputdownloadblock: DownloadFilteredBlockDto = new DownloadFilteredBlockDto();\r\n    Filepath: SafeResourceUrl;\r\n\r\n    //BlockChainLedgerNodeList: any[] = [];\r\n    //BlockChainLedgerEdgeList: any[] = [];\r\n\r\n\r\n\r\n    FieldList: SelectItem[] = [];\r\n    ToolTipFieldList: SelectItem[] = [];\r\n\r\n    PruneWityTypes: any = [\r\n        { label: 'None', value: 'None' },\r\n        { label: 'Nearest Neighbor', value: 'Nearest Neighbor' }\r\n    ];\r\n    SelectedPruneWithTypesVariable: string = 'None';\r\n    SelectedEpsilonValue: string;\r\n\r\n\r\n    SelectedClusterMinimumSizeVariable: any = 0;\r\n    SelectedLinkSortVariable: string = 'Distance';\r\n    SelectedLinkThresholdVariable: any = parseFloat(this.threshold);\r\n    SelectedDistanceMetricVariable = this.metric;\r\n\r\n    RevealTypes: any = [\r\n        { label: 'Everything', value: 'Everything' }\r\n    ];\r\n    SelectedRevealTypesVariable: string = 'Everything';\r\n\r\n\r\n    StatisticsTypes: any = [\r\n        { label: 'Show', value: 'Show' }, \r\n      { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedStatisticsTypesVariable: string = 'Show';\r\n\r\n    SelectedColorNodesByVariable: string = 'None';\r\n    SelectedNodeColorVariable: string = '#1f77b4';\r\n    SelectedLinkColorVariable: string = '#1f77b4';\r\n    SelectedColorLinksByVariable: string = 'origin';\r\n\r\n    SelectedTimelineVariable: string = 'None';\r\n    timelineSpeed: number = 200;\r\n\r\n\r\n    LinkColorTableTypes: any = [\r\n        { label: 'Show', value: 'Show' },\r\n        { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedLinkColorTableTypesVariable: string = 'Hide';\r\n\r\n    NodeColorTableTypes: any = [\r\n        { label: 'Show', value: 'Show' },\r\n        { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedNodeColorTableTypesVariable: string = 'Hide';\r\n\r\n\r\n    SelectedColorVariable: string = '#ff8300';\r\n    SelectedBackgroundColorVariable: string = '#ffffff';\r\n    SelectedApplyStyleVariable: string = '';\r\n\r\n\r\n    activeTabNdx = null;\r\n    ShowGlobalSettingsLinkColorTable: boolean = false;\r\n    ShowGlobalSettingsNodeColorTable: boolean = false;\r\n    roles: Array<string> = new Array<string>();\r\n\r\n    ShowGlobalSettingsSettingsPane: boolean = false;\r\n    GlobalSettingsDialogSettings: DialogSettings;\r\n    GlobalSettingsLinkColorDialogSettings: DialogSettings;\r\n    GlobalSettingsNodeColorDialogSettings: DialogSettings;\r\n\r\n    cachedGlobalSettingsVisibility: boolean = false;\r\n    cachedGlobalSettingsLinkColorVisibility: boolean = false;\r\n    cachedGlobalSettingsNodeColorVisibility: boolean = false;\r\n\r\n    cmpRef: ComponentRef<any>;\r\n\r\n    public playBtnText: string = \"Play\";\r\n\r\n    public handle: any;\r\n    \r\n    public label: any;\r\n\r\n    public xAttribute: any;\r\n\r\n    public handleDateFormat: any;\r\n\r\n    public currentTimelineValue: any;\r\n\r\n    public currentTimelineTargetValue: any;\r\n\r\n    private previousTab: string = '';\r\n\r\n    private bpaaSPayloadWrappers: BpaaSPayloadWrapper[] = [];\r\n\r\n    private networkRendered: boolean = false;\r\n\r\n    @Output() DisplayGlobalSettingsDialogEvent = new EventEmitter();\r\n\r\n    // @ViewChild(TabView) tabView: TabView;\r\n    @ViewChild('dataSet') dataSet: Selection;\r\n    @ViewChildren('placeholder', { read: ViewContainerRef }) targets: QueryList<ViewContainerRef>\r\n    @ViewChild('ledgerloader') spinnerElement: ElementRef;\r\n    @ViewChild('ledgerloadDiv') spinnerDivElement: ElementRef;\r\n    @ViewChild('globalSettingsTab') globalSettingsTab: any;\r\n\r\n\r\n    // @ViewChild('pinbutton') pinBtn: ElementRef<HTMLElement>;\r\n    @ViewChild('pinbutton') pinBtn: ElementRef<HTMLElement>;\r\n\r\n    public HideThisForNow: boolean = false;\r\n\r\n    files: any[] = [];\r\n\r\n    homepageTabs: HomePageTabItem[] = [];\r\n    currentUrl: string;\r\n\r\n    constructor(\r\n        injector: Injector,\r\n        public commonService: CommonService,\r\n        private confirmationService: ConfirmationService,\r\n        public domSanitizer: DomSanitizer,\r\n        private cdref: ChangeDetectorRef,\r\n        private el: ElementRef, \r\n        private store: CommonStoreService,\r\n        private exportService: ExportService\r\n    ) {\r\n\r\n\r\n        super(injector);\r\n\r\n        this.widgets = this.commonService.session.style.widgets\r\n\r\n        this.appSession = injector.get(AppSessionService);\r\n\r\n        // Add this line to expose the service for Cypress tests\r\n        (window as any).commonService = this.commonService;\r\n\r\n        this.activeTabIndex = 0;\r\n\r\n        this.dataSetView = [];\r\n        this.dataSetView.push({ label: 'Nodes', value: 'Node' });\r\n        this.dataSetView.push({ label: 'Links', value: 'Link' });\r\n        this.dataSetView.push({ label: 'Clusters', value: 'Cluster' });\r\n\r\n        this.dataSetViewSelected = \"Node\";\r\n\r\n        this.currentUrl = window.location.href;\r\n        \r\n    }\r\n\r\n    getElementById(id: string): HTMLElement | null {\r\n        const element = this.el.nativeElement.querySelector(`#${id}`);\r\n        return element;\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n        // Check if user has accepted the license:\r\n        this.check_eula_acceptance();\r\n\r\n        this.auspiceUrlVal = this.commonService.getURL();\r\n        if(this.commonService.debugMode) {\r\n            console.log(this.auspiceUrlVal);\r\n        }\r\n        this.getGlobalSettingsData();\r\n\r\n        console.log('common serivceeeee: ', (window as any).commonService );\r\n         // Subscribe to export requests\r\n        this.exportService.exportRequested$.subscribe((info) => {\r\n            this.performExport(info.element, info.exportNodeTable, info.exportLinkTable);\r\n        });\r\n\r\n        this.exportService.exportSVG$.subscribe((info) => {\r\n            this.performExportSVG(info.element, info.mainSVGString, info.exportNodeTable, info.exportLinkTable);\r\n        });\r\n\r\n         // Add debounce subscription\r\n        this.thresholdDebouncer.pipe(\r\n            debounceTime(1000), // Wait 300ms after last change\r\n            distinctUntilChanged()\r\n        ).subscribe(threshold => {\r\n            this.executeThresholdChange(threshold);\r\n        });\r\n\r\n        this.store.networkUpdated$\r\n        .pipe(takeUntil(this.destroy$)) // Add takeUntil for proper cleanup\r\n        .subscribe((isUpdated) => {\r\n            console.log('--- networkUpdated$ subscription triggered:', isUpdated);\r\n            if (isUpdated) {\r\n                // Case 1: Initial UI settings load after first network update\r\n                if (!this.store.settingsLoadedValue) {\r\n                    console.log('--- Loading UI settings as settingsLoadedValue is false ---');\r\n                    this.loadUISettings();\r\n                    // After loading UI settings, check if table needs immediate regeneration\r\n                    if (this.GlobalSettingsLinkColorDialogSettings.isVisible && this.SelectedColorLinksByVariable !== 'None') {\r\n                        console.log('--- Regenerating Link Color Table after initial UI load ---');\r\n                        this.generateNodeLinkTable('#link-color-table');\r\n                    }\r\n                }\r\n                // Case 2: Subsequent network updates (e.g., from threshold change)\r\n                // Regenerate table only if UI settings are already loaded AND table should be visible/relevant\r\n                else if (this.store.settingsLoadedValue && this.GlobalSettingsLinkColorDialogSettings.isVisible && this.SelectedColorLinksByVariable !== 'None') {\r\n                    console.log('--- Regenerating Link Color Table due to network update (settings already loaded) ---');\r\n                    this.generateNodeLinkTable('#link-color-table');\r\n                }\r\n            }\r\n        });\r\n\r\n        this.store.clusterUpdate$.subscribe(() => {\r\n            if (this.SelectedColorNodesByVariable == \"cluster\") {\r\n                this.generateNodeColorTable(\"#node-color-table\")\r\n            }\r\n        })\r\n\r\n         // Subscribe to network rendered\r\n         this.networkRenderedSubscription = this.store.networkRendered$\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe(rendered => {\r\n        console.log('DEBUG: networkRenderedSubscription fired. rendered =', rendered);\r\n        console.log('DEBUG: session.network.isFullyLoaded?', this.commonService.session.network.isFullyLoaded);\r\n\r\n        if (rendered) {\r\n          this.displayloadingInformationModal = false;\r\n          this.messages = [];\r\n          console.log('DEBUG: Calling onLinkColorTableChanged from networkRenderedSubscription...');\r\n          console.log('DEBUG: #link-color-table rowcount BEFORE = ', $('#link-color-table').find('tr').length);\r\n\r\n          // Optionally call or not call your method:\r\n          // this.onLinkColorTableChanged();\r\n\r\n          this.networkRendered = true;\r\n          // Also see if forcing a detect changes right here changes the outcome:\r\n          console.log('DEBUG: inrender sub => about to detect changes manually...');\r\n\r\n          this.cdref.detectChanges();\r\n\r\n          console.log('DEBUG: #link-color-table rowcount AFTER  = ', $('#link-color-table').find('tr').length);\r\n\r\n        } else if (!rendered && this.commonService.demoNetworkRendered &&\r\n                   this.commonService.session.network.isFullyLoaded) {\r\n          this.displayloadingInformationModal = true;\r\n          this.showMessage('Rendering Network...');\r\n          this.networkRendered = false;\r\n        }\r\n      });\r\n\r\n        // Subscribe to network rendered\r\n        this.loadingMessageUpdatedSubscription = this.store.loadingMessageUpdated$\r\n        .pipe(takeUntil(this.destroy$))\r\n        .subscribe(message => {\r\n            console.log('--- message updated: ', message);\r\n            if(message) {\r\n                this.displayloadingInformationModal = true;\r\n                this.showMessage(message);\r\n            } \r\n        });\r\n\r\n        // Subscribe to threshold changes from the service\r\n        this.thresholdSubscription = this.store.linkThreshold$.subscribe(\r\n            (newThreshold: number) => {\r\n                // Only update local state if changed\r\n                if (this.SelectedLinkThresholdVariable !== newThreshold) {\r\n                    this.onLinkThresholdChanged(newThreshold);\r\n                }\r\n            }\r\n        );\r\n\r\n        this.elem = document.documentElement;\r\n\r\n        if (!this.GlobalSettingsDialogSettings) {\r\n            this.GlobalSettingsDialogSettings = new DialogSettings('#global-settings-modal', false);\r\n        }\r\n        if (!this.GlobalSettingsLinkColorDialogSettings) {\r\n            this.GlobalSettingsLinkColorDialogSettings = new DialogSettings('#global-settings-link-color-table', false);\r\n        }\r\n        if (!this.GlobalSettingsNodeColorDialogSettings) {\r\n            this.GlobalSettingsNodeColorDialogSettings = new DialogSettings('#global-settings-node-color-table', false);\r\n        }\r\n\r\n        // Subscribe to metric changes\r\n        this.store.metricChanged$.subscribe((metric: string) => {\r\n            this.metric = metric;\r\n            this.SelectedDistanceMetricVariable = metric;\r\n            this.onDistanceMetricChanged();\r\n        });\r\n\r\n        // Subscribe to table cleared event\r\n        this.store.tableCleared$.subscribe((tableId: string) => {\r\n            this.clearTable(tableId); // Existing method to handle updates\r\n        });\r\n\r\n        // Subscribe to statistics changed event\r\n        this.store.statisticsChanged$.subscribe((statisticsType?: string) => {\r\n            this.SelectedStatisticsTypesVariable = statisticsType;\r\n            this.onShowStatisticsChanged();\r\n        });\r\n\r\n        this.SelectedPruneWithTypesVariable = this.commonService.GlobalSettingsModel.SelectedPruneWithTypesVariable;\r\n\r\n        //debugger;\r\n        this.SelectedClusterMinimumSizeVariable = this.commonService.GlobalSettingsModel.SelectedClusterMinimumSizeVariable;\r\n        this.SelectedLinkSortVariable = this.commonService.GlobalSettingsModel.SelectedLinkSortVariable;\r\n        this.SelectedLinkThresholdVariable = this.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable;\r\n        this.threshold = this.SelectedLinkThresholdVariable;\r\n        this.commonService.session.style.widgets['link-threshold'] = this.SelectedLinkThresholdVariable;\r\n        this.SelectedRevealTypesVariable = this.commonService.GlobalSettingsModel.SelectedRevealTypesVariable;\r\n        this.SelectedStatisticsTypesVariable = this.commonService.GlobalSettingsModel.SelectedStatisticsTypesVariable;\r\n\r\n        this.SelectedColorNodesByVariable = this.commonService.GlobalSettingsModel.SelectedColorNodesByVariable;\r\n        this.SelectedNodeColorVariable = this.commonService.session.style.widgets['node-color'];\r\n        this.SelectedColorLinksByVariable = this.commonService.GlobalSettingsModel.SelectedColorLinksByVariable;\r\n\r\n        this.SelectedTimelineVariable = this.commonService.session.style.widgets['node-timeline-variable'];\r\n        this.SelectedColorVariable = this.commonService.session.style.widgets['selected-color'];\r\n\r\n        this.SelectedLinkColorTableTypesVariable = this.commonService.GlobalSettingsModel.SelectedLinkColorTableTypesVariable;\r\n        this.SelectedApplyStyleVariable = this.commonService.GlobalSettingsModel.SelectedApplyStyleVariable;\r\n\r\n        //this.commonService.updateThresholdHistogram();\r\n\r\n        if(this.commonService.debugMode) {\r\n            console.log(\"global settings: \", this.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable);\r\n            console.log(\"SelectedLinkThresholdVariable: \", this.SelectedLinkThresholdVariable);\r\n        }\r\n        \r\n\r\n         // Update distance metric in cashe\r\n         let cachedView = \"\";\r\n\r\n\r\n        this.commonService.localStorageService.getItem('default-view', (err, result) => {\r\n            cachedView = result;\r\n        });\r\n\r\n        setTimeout(() => {\r\n            $('#top-toolbar').fadeTo(\"slow\", 1);\r\n            // TODO:: uncommentback when done Subscribe for files subscription\r\n            // this.homepageTabs[0].componentRef = this.goldenLayout.componentInstances[0];\r\n        }, 1000);\r\n        setTimeout(() => {\r\n            $(\"#welcome-title\").animate({\r\n                marginTop: '-30px',\r\n                opacity: '1'\r\n            }, 1000);\r\n        }, 2000);\r\n        setTimeout(() => {\r\n            $(\"#welcome-description\").animate({\r\n                marginTop: '0px',\r\n                opacity: '1'\r\n            }, 1000);\r\n\r\n            console.log('thresholldddddd', this.commonService.session.style.widgets['link-threshold']);\r\n\r\n        }, 3000);\r\n        setTimeout(() => {\r\n            $('#visualwrapper').fadeTo(\"slow\", 1);\r\n            $('#add-data-container').fadeTo(\"slow\", 1);\r\n            $('#onload-container').fadeTo(\"slow\", 1);\r\n            $('#tool-btn-container').fadeTo(\"slow\", 1);\r\n\r\n        }, 5000);\r\n           \r\n    }\r\n\r\n     /**\r\n   * Check local storage for EULA acceptance.\r\n   * If no acceptance found, display the license modal.\r\n   */\r\n  private check_eula_acceptance(): void {\r\n    // Example of using the localStorageService if needed:\r\n    this.commonService.localStorageService.getItem('microbetrace_eula_accepted', (err, result) => {\r\n      if (!result) {\r\n        this.display_eula_modal = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * User accepted the EULA, store acceptance and close the modal.\r\n   */\r\n  public on_eula_accept(): void {\r\n    this.commonService.localStorageService.setItem('microbetrace_eula_accepted', 'true');\r\n\r\n    this.display_eula_modal = false;\r\n  }\r\n\r\n  /**\r\n   * User rejected the EULA, immediately route to https://www.cdc.gov/\r\n   */\r\n  public on_eula_reject(): void {\r\n    window.location.href = 'https://www.cdc.gov/';\r\n  }\r\n\r\n    showMessage(msg: string) {\r\n\r\n        this.messages = [...this.messages, msg];        \r\n        setTimeout(() => {\r\n            console.log('DEBUG: inshowmessage => about to detect changes manually...');\r\n\r\n            this.cdref.detectChanges();\r\n          }, 0);\r\n      }\r\n\r\n    \r\n    // New method to handle the actual threshold change logic\r\n    private executeThresholdChange(newThreshold: number): void {\r\n        if(this.commonService.debugMode) {\r\n            console.log('loading settingss1: ', this.commonService.session.style.widgets[\"link-threshold\"]);\r\n        }\r\n        \r\n        // Execute the actual threshold change\r\n        this.onLinkThresholdChanged(newThreshold);\r\n    }\r\n\r\n    addComponent( component: string ) {\r\n\r\n        console.log('--- addComponent called');\r\n\r\n        this.commonService.session.tabLoaded = false;\r\n\r\n        // const componentType = this._selectedRegisteredComponentTypeName;\r\n        const goldenLayoutComponent = this._goldenLayoutHostComponent.goldenLayout.newComponent(component);\r\n\r\n        const componentRef = this._goldenLayoutHostComponent.getComponentRef(goldenLayoutComponent.container);\r\n        \r\n        this.addTab(component, component + this.activeTabIndex, this.activeTabIndex, componentRef);\r\n        \r\n        console.log('--- addComponent Tab added');\r\n\r\n        // TODO:: GOLDEN LAYOUT USES ASYNCHONOUS Loading of Components, settimout waits for it\r\n        setTimeout(() => {\r\n            console.log('--- GOLDEN LAYOUT COMPONENT LOADED');\r\n            this.commonService.session.tabLoaded = true;\r\n            this.commonService.session.network.isFullyLoaded = true;\r\n            this.setActiveTabProperties();\r\n\r\n            // logpolygon color sh\r\n            if(!this.store.settingsLoadedValue) {\r\n                console.log('--- GOLDEN LAYOUT COMPONENT filter settings');\r\n\r\n                this.loadFilterSettings();\r\n\r\n                console.log('--- polygon color show33: ', this.commonService.session.style.widgets['polygons-color-show']);\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    /**\r\n     * Performs the export of the visualization, including tables.\r\n     */\r\n    private async performExport(elementsForExport: HTMLDivElement[] | HTMLTableElement[] = [this.visualWrapperRef.nativeElement], exportNodeTable: boolean = false, exportLinkTable: boolean = false): Promise<void> {\r\n        if (!elementsForExport[0] && !exportNodeTable && !exportLinkTable) {\r\n            console.error('Visual wrapper container not found');\r\n            return;\r\n        }\r\n    \r\n        try {\r\n            // Retrieve export options from the service\r\n            const options: ExportOptions = this.exportService.getExportOptions();\r\n            let canvas: HTMLCanvasElement;\r\n            let settings = {\r\n                scale: options.scale || 1,\r\n                useCORS: true, // Enable CORS if images are loaded from external sources,\r\n                allowTaint: true,\r\n                onclone: (clonedDoc) => {\r\n                    // Remove all transparency symbols\r\n                    const clonedTransparencySymbols = clonedDoc.querySelectorAll('a.transparency-symbol');\r\n                    clonedTransparencySymbols.forEach(symbol => {\r\n                        symbol.parentNode?.removeChild(symbol);\r\n                    })\r\n                    // Replace color input elements with colored spans\r\n                    const clonedInputs = clonedDoc.querySelectorAll('input[type=\"color\"]');\r\n                    clonedInputs.forEach(input => {\r\n                        const color = input.getAttribute('value') || '#ffffff';\r\n                        const opacity = input.style.opacity || '1'\r\n                        const span = clonedDoc.createElement('span');\r\n                        span.style.display = 'inline-block';\r\n                        span.style.width = '42px';\r\n                        span.style.height = '17px';\r\n                        span.style.opacity = opacity;\r\n                        span.style.backgroundColor = color;\r\n                        span.style.margin = '4px';\r\n                        span.style.border = '1px solid #777777'; // Optional: Add border for visibility\r\n                        input.parentNode?.replaceChild(span, input);\r\n                    });\r\n    \r\n                    // Optionally, handle other elements that display hex codes\r\n                    // For example, if you have spans or divs showing hex values:\r\n                    /*\r\n                    const colorTextElements = clonedDoc.querySelectorAll('.color-text');\r\n                    colorTextElements.forEach(elem => {\r\n                        const color = elem.textContent;\r\n                        elem.style.backgroundColor = color;\r\n                        elem.textContent = '';\r\n                    });\r\n                    */\r\n                }\r\n            }\r\n            // if pos == 0, exporting just tables and not a view\r\n            let pos = elementsForExport[0] instanceof HTMLDivElement ? 1 : 0;\r\n            if (exportLinkTable && this.commonService.session.style.widgets['link-color-variable'] !== 'None' && this.SelectedLinkColorTableTypesVariable == 'Show') {  \r\n                elementsForExport.splice(pos, 0, this.linkColorTable.nativeElement);\r\n            }\r\n            if (exportNodeTable && this.commonService.session.style.widgets['node-color-variable'] !== 'None' && this.SelectedNodeColorTableTypesVariable == 'Show') {\r\n                elementsForExport.splice(pos, 0,this.nodeColorTable.nativeElement);\r\n            }\r\n\r\n            Promise.all(\r\n                elementsForExport.map((input) => { \r\n                    // As of July 2025, a change in Chrome (and other browsers) slowed down this export dramatically (2+ mins for single image), a temp change is to\r\n                    // update html2canvas.js (line 5626) file in node_modules as described here: https://github.com/niklasvh/html2canvas/pull/3252/commits/37b75f50d2550acf7d90630acdc29d346282d0a4;\r\n                    // this is a temp fix, if unresolved (by html2canvas) consider switching to snapdom\r\n                    return html2canvas(input, settings);\r\n                })\r\n            ).then((canvasArray) => {\r\n                canvas = document.createElement('canvas');\r\n                const context = canvas.getContext('2d');\r\n\r\n                // Set the width and height of the combined canvas\r\n                let width = canvasArray[0].width;\r\n                let height = canvasArray[0].height;\r\n                let offsets = pos == 0 ? [[5,5]] : [[0,0]];\r\n                let previousColWidth, currentColWidth = 0;\r\n                for (let i = 1; i < canvasArray.length; i++) {\r\n                    if (i == 1) {\r\n                        width += canvasArray[i].width+5;\r\n                        height = Math.max(height, canvasArray[i].height+5);\r\n                        offsets.push([canvasArray[0].width+offsets[0][0], 5]);\r\n                        previousColWidth = canvasArray[0].width+offsets[0][0];\r\n                        currentColWidth = canvasArray[1].width;\r\n                    } else {\r\n                        //if need to add a new column\r\n                        if (canvasArray[i].height+5 > height) {\r\n                            width += canvasArray[i].width+5;\r\n                            height = canvasArray[i].height +5;\r\n                            offsets.push([offsets[i-1][0] + currentColWidth, 5]);\r\n                            \r\n                            previousColWidth = currentColWidth;\r\n                            currentColWidth = canvasArray[i].width+5;\r\n                        }\r\n                        // need to add a new column\r\n                        else if (offsets[i-1][1]+canvasArray[i-1].height + canvasArray[i].height + 5 > height) {\r\n                            width += canvasArray[i].width+5;\r\n                            offsets.push([offsets[i-1][0] + canvasArray[i-1].width, 5]);\r\n                            \r\n                            previousColWidth = currentColWidth;\r\n                            currentColWidth = canvasArray[i].width+5;\r\n                        } else { // don't need to add a new column\r\n                            offsets.push([offsets[i-1][0], offsets[i-1][1]+canvasArray[i-1].height+5]);\r\n                            if (canvasArray[i].width+5 > currentColWidth) {\r\n                                width += (canvasArray[i].width - currentColWidth +5);\r\n                                currentColWidth = canvasArray[i].width+5;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                canvas.width = width+10;\r\n                canvas.height = height+10;\r\n\r\n                context.fillStyle = '#ffffff';\r\n                context.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n                context.strokeStyle = '#000000'\r\n\r\n                // Draw the canvases onto the combined canvas\r\n                for (let i = 0; i < canvasArray.length; i++) {\r\n                    context.drawImage(canvasArray[i], offsets[i][0], offsets[i][1]);\r\n                    if (i > 0 || pos==0) {\r\n                        // draw a rect around each additional drawImage element\r\n                        context.strokeRect(offsets[i][0], offsets[i][1], canvasArray[i].width, canvasArray[i].height);\r\n                    }\r\n                }\r\n    \r\n            // Convert canvas to desired image format\r\n            let imgData: string;\r\n            const filetype = options.filetype.toLowerCase();\r\n            const filename = options.filename || 'network_export';\r\n    \r\n            if (filetype === 'png') {\r\n                imgData = canvas.toDataURL('image/png');\r\n            } else if (filetype === 'jpeg' || filetype === 'jpg') {\r\n                imgData = canvas.toDataURL('image/jpeg', options.quality || 0.92);\r\n            } else if (filetype === 'webp') {\r\n                imgData = canvas.toDataURL('image/webp', options.quality || 0.92);\r\n            } else {\r\n                console.error('Unsupported file type:', filetype);\r\n                return;\r\n            }\r\n    \r\n            // Trigger the download\r\n            const link = document.createElement('a');\r\n            link.href = imgData;\r\n            link.download = `${filename}.${filetype}`;\r\n            document.body.appendChild(link); // Append to body to make it clickable in Firefox\r\n            link.click();\r\n            document.body.removeChild(link); // Remove from body after clicking\r\n    \r\n            console.log('Export completed successfully.');\r\n        })\r\n        } catch (error) {\r\n            console.error('Error during export:', error);\r\n        }\r\n    }\r\n\r\n    private async performExportSVG(elementsForExport: HTMLTableElement[], mainSVGString: string, exportNodeTable: boolean = false, exportLinkTable: boolean = false): Promise<void> {\r\n        console.log('Exporting SVG');\r\n        if (mainSVGString == '') {\r\n            mainSVGString = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"></svg>'\r\n        }\r\n\r\n        if (exportLinkTable && this.SelectedLinkColorTableTypesVariable == 'Show') {\r\n            elementsForExport.unshift(this.linkColorTable.nativeElement);\r\n        }\r\n        if (exportNodeTable && this.SelectedNodeColorTableTypesVariable == 'Show') {\r\n            elementsForExport.unshift(this.nodeColorTable.nativeElement);\r\n        }\r\n\r\n        const options: ExportOptions = this.exportService.getExportOptions();\r\n        \r\n        const parser = new DOMParser();\r\n        const doc = parser.parseFromString(mainSVGString, 'image/svg+xml');\r\n        const svg1 = doc.documentElement;\r\n        \r\n        // i'll need some way to check when to add new col to export; but for now do this;            \r\n        let width = parseFloat(svg1.getAttribute('width'))+5 || 5;\r\n        let height = parseFloat(svg1.getAttribute('height'))+5 || 5; \r\n        let tableSVGStrings = '';\r\n        let currentOffsetX = width;\r\n        let currentOffsetY = 5;\r\n        let currentColWidth = 0;\r\n\r\n        elementsForExport.forEach((element, index) => {\r\n            let output = this.exportService.exportTableAsSVG(element, true);\r\n            \r\n            // exact logic from exporting a png\r\n            if (index == 0) {\r\n                width += output.width;\r\n                height = Math.max(height, output.height);\r\n                currentColWidth = output.width;\r\n            } else {\r\n                // if need to add a new column\r\n                if (output.height > height) {\r\n                    width += output.width+5;\r\n                    height = output.height +5;\r\n                    currentOffsetX += currentColWidth;\r\n                    currentOffsetY = 5;\r\n                    currentColWidth = output.width;\r\n                } else if (currentOffsetY+output.height + 5 > height) { // need to add a new column\r\n                    width += output.width+5;\r\n                    currentOffsetX += currentColWidth;\r\n                    currentOffsetY = 5;\r\n                    currentColWidth = output.width;\r\n                } else { // don't need to add a new column\r\n                    if (output.width+5 > currentColWidth) {\r\n                        width += (output.width - currentColWidth +5);\r\n                        currentColWidth = output.width+5;\r\n                    }\r\n                }\r\n            }\r\n            let updatedSVGString = output.svg.replace('<g>', `<g transform=\"translate(${currentOffsetX}, ${currentOffsetY})\" fill=\"none\">`);\r\n            tableSVGStrings += updatedSVGString;\r\n\r\n            currentOffsetY += output.height+5;\r\n        });\r\n\r\n        svg1.style.width = `${width + 5}px`\r\n        svg1.style.height = `${height + 5 }px`\r\n        svg1.setAttribute('width', `${width+5}`);\r\n        svg1.setAttribute('height', `${height+5}`);\r\n\r\n        const rect = doc.createElementNS('http://www.w3.org/2000/svg', 'rect')\r\n        rect.setAttribute('x', '0')\r\n        rect.setAttribute('y', '0')\r\n        rect.setAttribute('width', `${width+5}`);\r\n        rect.setAttribute('height', `${height+5}`);\r\n        rect.setAttribute('fill', 'white');\r\n        svg1.insertBefore(rect, svg1.firstChild);\r\n\r\n        let mainSVG = String(svg1.outerHTML);\r\n        let combinedSvgString: string;\r\n        if (mainSVG.endsWith('/>')) {\r\n            combinedSvgString = mainSVG.replace('/>', '>' + tableSVGStrings + '</svg>')\r\n        } else {\r\n            combinedSvgString = mainSVG.replace('</svg>', tableSVGStrings + '</svg>')\r\n        }\r\n\r\n        let blob = new Blob([combinedSvgString], { type: 'image/svg+xml;charset=utf-8' });\r\n        \r\n        saveAs(blob, `${options.filename}.svg`);\r\n    }\r\n\r\n    /**\r\n     * Removes a component from this.homepageTabs\r\n     * @param component name of the component to be removed\r\n     */\r\n    public removeComponent( component: string ) {\r\n        this.homepageTabs = this.homepageTabs.filter((tab) => {\r\n            return tab.label !== component;\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * Delete file from files list\r\n     * @param index (File index)\r\n     */\r\n    deleteFile(index: number) {\r\n        this.files.splice(index, 1);\r\n    }\r\n\r\n    /**\r\n     * Uses search-field, search-whole-word, search-case-sensitive widgets, and searchText variable to search each node and select all nodes that meet current criteria.\r\n     * Also populates search-results list, and sets function that selects the node for when an option in the list is selected.\r\n     */\r\n    public onSearch() {\r\n        const nodes = this.commonService.session.data.nodes;\r\n        const n = nodes.length;\r\n\r\n        let v = this.searchText;\r\n        const val = v;\r\n\r\n        if (v == \"\") {\r\n          $('#search-results').html(\"\").hide();\r\n          for(let i = 0; i < n; i++){\r\n            nodes[i].selected = false;\r\n          }\r\n        } else {\r\n          $('#search-results').html(\"\").hide();\r\n          const field = this.commonService.session.style.widgets[\"search-field\"];\r\n          \r\n          const dataSet = new Set();\r\n          for(let i = 0; i < n; i++){\r\n            const node = nodes[i];\r\n            if (node[field]) {\r\n  \r\n                const fieldData = node[field].toString(); // Convert the data to string\r\n                // matches anything that is not a digit, letter, whitespace or one of following char < > & and replaces with corresponding HTML entity number\r\n                const encodedField = fieldData.replace(/[\\u00A0-\\u9999<>&]/g, function(i) {\r\n                  return '&#'+i.charCodeAt(0)+';';\r\n                });\r\n                dataSet.add(`${encodedField}`);\r\n            }\r\n          }\r\n          const dataArray = Array.from(dataSet).sort() as string[];\r\n          //#298\r\n          if (this.commonService.session.style.widgets[\"search-whole-word\"])  v = '\\\\b' + v + '\\\\b';\r\n          let vre: RegExp;\r\n          if (this.commonService.session.style.widgets[\"search-case-sensitive\"])  vre = new RegExp(v);\r\n          else  vre = new RegExp(v, 'i');\r\n  \r\n          dataArray.forEach(element => {\r\n            if ((element as any).match(vre)) {\r\n                const $li = $('<li/>')\r\n                    .html(element as string)\r\n                    .attr('data-value', element as string);\r\n                $('#search-results').append($li).show();\r\n              }\r\n          });\r\n\r\n        const that = this;\r\n          \r\n        // on click of an option from the search list, the node is selected\r\n          $('.autocomplete-wrapper li').on('click', function() {\r\n            let ac_v = $(this).attr('data-value');\r\n            const ac_val = ac_v;\r\n            let ac_vre: RegExp;\r\n            $('#search').val(ac_v);\r\n            $('#search-results').html(\"\").hide();\r\n          \r\n            if (that.commonService.session.style.widgets[\"search-whole-word\"])  ac_v = '\\\\b' + ac_v + '\\\\b';\r\n            if (that.commonService.session.style.widgets[\"search-case-sensitive\"])  ac_vre = new RegExp(ac_v);\r\n            else ac_vre = new RegExp(ac_v, 'i');\r\n  \r\n            for(let i = 0; i < n; i++){\r\n\r\n              const node = nodes[i];\r\n\r\n              if (!node[field]) {\r\n                node.selected = false;\r\n              }\r\n              if (typeof node[field] == \"string\") {\r\n                node.selected = ac_vre.test(node[field]);\r\n              }\r\n              if (typeof node[field] == \"number\") {\r\n                node.selected = (node[field] + \"\" == ac_val);\r\n              }\r\n\r\n            }\r\n\r\n            $(document).trigger(\"node-selected\");\r\n\r\n          });\r\n  \r\n          let firstSelected = false;\r\n\r\n          // selects that meets current search criteria\r\n          for(let i = 0; i < n; i++){\r\n  \r\n            if(!firstSelected){\r\n                const node = nodes[i];\r\n\r\n                if (!node[field]) {\r\n                  node.selected = false;\r\n                }\r\n                if (typeof node[field] == \"string\") {\r\n                  node.selected = vre.test(node[field]);\r\n                  firstSelected = node.selected;\r\n                }\r\n                if (typeof node[field] == \"number\") {\r\n                  node.selected = (node[field] + \"\" == val);\r\n                  firstSelected = node.selected;\r\n                }\r\n\r\n            } else {\r\n                break;\r\n            }\r\n            \r\n          }\r\n  \r\n          if (!nodes.some(node => node.selected)) console.log('no matches');\r\n        }\r\n\r\n        $(document).trigger(\"node-selected\");\r\n    }\r\n\r\n    /**\r\n     * Updates search-field widget (with variable to search in) can updates search\r\n     */\r\n    public onSearchFieldChange(ev) {\r\n        this.commonService.session.style.widgets[\"search-field\"] = ev;\r\n        this.onSearch();\r\n    }\r\n\r\n    /**\r\n     * Updates search-whole-word widget can updates search\r\n     */\r\n    public onWholeWordChange() {\r\n        this.commonService.session.style.widgets[\"search-whole-word\"] = !this.commonService.session.style.widgets[\"search-whole-word\"];\r\n        this.onSearch();\r\n    }\r\n\r\n    /**\r\n     * Updates search-case-sensitive widget can updates search\r\n     */\r\n    public onCaseSensitiveChange() {\r\n        this.commonService.session.style.widgets[\"search-case-sensitive\"] = !this.commonService.session.style.widgets[\"search-case-sensitive\"];\r\n        this.onSearch();\r\n    }\r\n\r\n\r\n    /**\r\n     * Convert Files list to normal array list\r\n     * @param files (Files List)\r\n     */\r\n    prepareFilesLists($event) {\r\n\r\n        if(this.commonService.debugMode) {\r\n            console.log(\"Trying to prepare files\");\r\n        }\r\n        // this.commonService.resetData();\r\n\r\n        this.store.setFP_removeFiles(true);\r\n        this.commonService.session.files = [];\r\n        if (!this.commonService.session.style.widgets) {\r\n            this.commonService.session.style.widgets = this.commonService.defaultWidgets();\r\n        }\r\n\r\n        if(this.commonService.debugMode) {\r\n          console.log('threshold: ', this.commonService.session.style.widgets['link-threshold']);\r\n        }\r\n        // this.loadSettings();\r\n \r\n        // this.homepageTabs[1].isActive = false;\r\n        this.homepageTabs[0].isActive = true;\r\n        $('#overlay').fadeOut();\r\n        $('.ui-tabview-nav').fadeTo(\"slow\", 1);\r\n        $('.m-portlet').fadeTo(\"slow\", 1);\r\n        this.showExport = false;\r\n        this.showCenter = false;\r\n        this.showPinAllNodes = false;\r\n        this.showRefresh = false;\r\n        this.showButtonGroup = false;\r\n        this.showSorting = false;\r\n\r\n        // Remove the default tab\r\n        this._removeGlView('2D Network');\r\n\r\n        if(this.commonService.debugMode) {\r\n            console.log('homepage tabs1: ', this.homepageTabs);\r\n        }\r\n\r\n        this.getfileContent($event);\r\n    }\r\n\r\n    /**\r\n     * Updates metric based on selection\r\n     * @param value - metric selected\r\n     */\r\n     public updateMetric( value: string ) : void {\r\n        this.metric = value;\r\n        if(this.commonService.debugMode) {\r\n            console.log('updating metric: ', this.metric);\r\n        }\r\n\r\n        if (this.metric.toLowerCase() === \"snps\") {\r\n            //Hide Ambiguities\r\n            $('#ambiguities-menu').hide();\r\n            this.threshold = \"7\";\r\n            this.commonService.session.style.widgets[\"link-threshold\"] = 7;\r\n        } else {\r\n\r\n            $('#ambiguities-menu').show();\r\n            this.threshold = \"0.015\";\r\n            this.commonService.session.style.widgets[\"link-threshold\"] = 0.015;\r\n        }\r\n\r\n        // Update distance metric in style\r\n        this.commonService.session.style.widgets['default-distance-metric'] = this.metric.toLocaleLowerCase();\r\n        this.commonService.localStorageService.setItem('default-distance-metric', this.metric.toLocaleLowerCase());\r\n\r\n    }\r\n\r\n    private _lastLinkThreshold: number = this.commonService.session.style.widgets[\"link-threshold\"];\r\n\r\n\r\n    /**\r\n     * Updates ambiguity based on selection and store in style widgets\r\n     * @param value - ambiguity selected\r\n     */\r\n     public updateAmbiguity( value: string ) : void {\r\n        this.ambiguity = value;\r\n        this.commonService.session.style.widgets['ambiguity-resolution-strategy'] = this.ambiguity.toLocaleUpperCase();\r\n\r\n    }\r\n\r\n    /**\r\n     * Updates launch view based on selection\r\n     * @param value - view selected\r\n     */\r\n     public updateLaunchView( value: string ) : void {\r\n        this.launchView = value;\r\n\r\n        this.commonService.localStorageService.setItem('default-view', this.launchView);\r\n        this.commonService.session.style.widgets['default-view'] = this.launchView;\r\n        this.commonService.session.layout.content[0].type = this.launchView;\r\n\r\n    }\r\n\r\n    /**\r\n     * Updates threshold based on selection and stores in style widget\r\n     */\r\n     public updateThreshold(ev: any): void {\r\n        const newThreshold = ev.target?.value ?? ev;\r\n        this.threshold = newThreshold;\r\n        \r\n        if(this.commonService.debugMode) {\r\n            console.log('threshold: ', this.threshold);\r\n        }\r\n        \r\n        // Update UI immediately\r\n        this.SelectedLinkThresholdVariable = newThreshold;\r\n        this.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable = this.SelectedLinkThresholdVariable;\r\n        \r\n        // Emit the new threshold value to the debouncer for actual threshold change\r\n        this.thresholdDebouncer.next(Number(newThreshold));\r\n    }\r\n\r\n\r\n    /**\r\n     * Handler for recall btn\r\n     * Opens recall window\r\n     * @param {void}\r\n     */\r\n     public recallClicked() : void {\r\n    }\r\n\r\n    /**\r\n     * Handler for continue btn\r\n     * Opens recall window\r\n     * @param {void}\r\n     */\r\n     public continueClicked() : void {\r\n        // this._removeGlView('Files');\r\n        $('#overlay').fadeOut(\"slow\");\r\n        $('.ui-tabview-nav').fadeTo(\"slow\", 1);\r\n        $('.m-portlet').fadeTo(\"slow\", 1);\r\n    }\r\n\r\n    /**\r\n     * Updates background-color widget and then updates background color on twoD network (or any element with #network)\r\n     */\r\n    onBackgroundChanged() {\r\n        this.commonService.session.style.widgets['background-color'] = this.SelectedBackgroundColorVariable;\r\n\r\n        if ($('#cy') != undefined) {\r\n            $('#cy').css('background-color', this.SelectedBackgroundColorVariable);\r\n        }\r\n    }\r\n\r\n\r\n    private _lastClusterMinimum: number = this.commonService.session.style.widgets[\"cluster-minimum-size\"];\r\n\r\n\r\n    /**\r\n     * Updates GlobalSetingModel variable and cluster-minimum-size widget. Removes and adds clusters when needed\r\n     */\r\n    onMinimumClusterSizeChanged(silent: boolean = false) {\r\n\r\n        console.log('--- onMinimumClusterSizeChanged called: silent: ', silent);\r\n        this.commonService.GlobalSettingsModel.SelectedClusterMinimumSizeVariable = this.SelectedClusterMinimumSizeVariable;\r\n\r\n        let val = parseInt(this.SelectedClusterMinimumSizeVariable);\r\n        this.commonService.session.style.widgets[\"cluster-minimum-size\"] = val;\r\n\r\n        if(this.commonService.session.data.nodes.length === 0) {\r\n            return;\r\n        }\r\n\r\n         // Check if the cluster minimum value really changed\r\n        if (val === this._lastClusterMinimum && this.store.settingsLoadedValue) {\r\n            console.log(\"Cluster minimum unchanged; no update needed.\");\r\n            return;\r\n        }\r\n\r\n        if(!silent) {\r\n            let previousNumberOfVisibleClusters = this.commonService.session.data.clusters.filter(cluster => cluster.visible).length;\r\n            this.commonService.setClusterVisibility(true);\r\n            // if number of visible clusters changed, then update network\r\n            if (previousNumberOfVisibleClusters != this.commonService.session.data.clusters.filter(cluster => cluster.visible).length) {\r\n                this.commonService.setNodeVisibility(true);\r\n                this.commonService.setLinkVisibility(true);\r\n                this.commonService.updateStatistics();\r\n                this.store.setNetworkUpdated(true);\r\n            }\r\n        }\r\n\r\n        this._lastClusterMinimum = val;\r\n    }\r\n\r\n    private _lastLinkSortValue: string = this.commonService.session.style.widgets[\"link-sort-variable\"];\r\n\r\n\r\n    /**\r\n     * Updates GlobalSettingsModel variable and link-sort-variable widget. Updates link threshold histogram and then updates network\r\n     */\r\n    onLinkSortChanged(silent: boolean = false) {\r\n\r\n        if(this.commonService.session.data.nodes.length === 0) {\r\n            return;\r\n        }\r\n\r\n        // Only update if the sort variable is different\r\n        if (this.SelectedLinkSortVariable === this._lastLinkSortValue && this.store.settingsLoadedValue) {\r\n            console.log(\"Link sort variable unchanged; skipping update.\");\r\n            return;\r\n        }\r\n\r\n        \r\n        // Otherwise, update the stored value and proceed\r\n        this._lastLinkSortValue = this.SelectedLinkSortVariable;\r\n\r\n\r\n        console.log('onLinkSortChanged called');\r\n        this.commonService.GlobalSettingsModel.SelectedLinkSortVariable = this.SelectedLinkSortVariable;\r\n\r\n        this.commonService.session.style.widgets[\"link-sort-variable\"] = this.SelectedLinkSortVariable;\r\n        // this.commonService.updateThresholdHistogram();\r\n\r\n       // 1) Parse the threshold value to a number\r\n       const linkThresholdValue = parseFloat(String(this.commonService.session.style.widgets[\"link-threshold\"]));\r\n\r\n    // 2) Now you can safely call toFixed on a numeric value\r\n    const decimals = (this.commonService.session.style.widgets['default-distance-metric'].toLowerCase() === \"tn93\") ? 3 : 0;\r\n    const fixedThresholdValue = linkThresholdValue.toFixed(decimals);\r\n\r\n    // 3) If you want to store it back as a number (not a string), parseFloat again:\r\n    this.SelectedLinkThresholdVariable = parseFloat(fixedThresholdValue);\r\n\r\n        // If not loading all settings at once, update link threshold\r\n        if(!silent) {\r\n            this.onLinkThresholdChanged();\r\n        }\r\n        // this.commonService._debouncedUpdateNetworkVisuals();\r\n    \r\n    }\r\n\r\n    /**\r\n     * Reads the file and applies the style to MicrobeTrace session.style\r\n     * \r\n     */\r\n    public onApplyStyle( file: any ){\r\n        $('.custom-file-label').text(this.SelectedApplyStyleVariable.substring(12))\r\n        const reader = new FileReader();\r\n        reader.onload = e => {\r\n            this.commonService.applyStyle(JSON.parse((e as any).target.result)); \r\n            this.applyStyleFileSettings();\r\n        }\r\n        reader.readAsText(file.target.files[0]);\r\n\r\n    }\r\n\r\n    applyStyleFileSettings() {\r\n        this.widgets = this.commonService.session.style.widgets;\r\n\r\n        if (this.SelectedClusterMinimumSizeVariable != this.widgets['cluster-minimum-size']){\r\n            this.SelectedClusterMinimumSizeVariable = this.widgets['cluster-minimum-size'];\r\n            this.onMinimumClusterSizeChanged();\r\n            // not triggering render clus-vis correctly, may be relate to bug with onMinimumClusterSizeChanged()\r\n        }\r\n\r\n        if (this.SelectedColorNodesByVariable != this.widgets['node-color-variable']){\r\n            this.SelectedColorNodesByVariable = this.widgets['node-color-variable'];\r\n            this.getGlobalSettingsData();\r\n            this.onColorNodesByChanged();\r\n        }\r\n        \r\n        if (this.SelectedColorLinksByVariable != this.widgets['link-color-variable']){\r\n            this.SelectedColorLinksByVariable = this.widgets['link-color-variable'];\r\n            console.log('link colorTable - applystylefile: ', $('#link-color-table'));\r\n\r\n            this.onColorLinksByChanged();\r\n        }\r\n\r\n        if (this.SelectedBackgroundColorVariable != this.widgets['background-color']){\r\n            this.SelectedBackgroundColorVariable = this.widgets['background-color'];\r\n            this.onBackgroundChanged();\r\n        }\r\n\r\n        if (this.widgets['node-color-variable'] && this.widgets['node-color-variable'] !== 'None') {\r\n            // Show table dialog\r\n            this.SelectedNodeColorTableTypesVariable = 'Show';\r\n            this.GlobalSettingsNodeColorDialogSettings.setVisibility(true);\r\n        }\r\n        // Show Link Color Table if link-color-variable != 'None'\r\n        if (this.widgets['link-color-variable'] && this.widgets['link-color-variable'] !== 'None') {\r\n            this.SelectedLinkColorTableTypesVariable = 'Show';\r\n            this.GlobalSettingsLinkColorDialogSettings.setVisibility(true);\r\n        }\r\n    }\r\n\r\n    onEpsilonValueChange() {\r\n        this.commonService.session.style.widgets[\"mst-computed\"] =false;\r\n        this.onPruneWithTypesChanged(this.SelectedPruneWithTypesVariable); \r\n    }\r\n\r\n    openNNConfirmation() {\r\n        this.confirmationService.confirm({\r\n            message: `It appears that you have links from two different sources. The Nearest Neighbor algorithm is only recommended when working with genetic links.\r\n             Are you sure that you want to proceed?`,\r\n            closable: false,\r\n            closeOnEscape: false,\r\n            icon: 'pi pi-exclamation-triangle',\r\n            rejectButtonProps: {\r\n                label: 'Cancel',\r\n                severity: 'secondary',\r\n                outlined: true,\r\n            },\r\n            acceptButtonProps: {\r\n                label: 'Confirm',\r\n            },\r\n            accept: () => {\r\n                this.userConfirmedNN = true;\r\n                this.onPruneWithTypesChanged(this.SelectedPruneWithTypesVariable);\r\n            },\r\n            reject: () => {\r\n                this.SelectedPruneWithTypesVariable = 'None';\r\n            },\r\n        }, );\r\n    }\r\n\r\n    onPruneWithTypesChanged(newValue: string) {\r\n        if (this.userConfirmedNN == false && this.SelectedPruneWithTypesVariable == \"Nearest Neighbor\") {\r\n            if (this.commonService.session.data.links.filter(l => l.origin.length > 1 && Array.isArray(l.origin)).length>0) {\r\n                this.openNNConfirmation();\r\n                return;\r\n            }\r\n        }\r\n\r\n        console.log('onPruneWithTypesChanged: ', newValue);\r\n\r\n        this.SelectedPruneWithTypesVariable = newValue;\r\n        this.commonService.GlobalSettingsModel.SelectedPruneWithTypesVariable = this.SelectedPruneWithTypesVariable;\r\n\r\n        if (this.SelectedPruneWithTypesVariable == \"None\") {\r\n            $('#filtering-epsilon-row').slideUp();\r\n            this.commonService.session.style.widgets[\"link-show-nn\"] = false;\r\n            this.commonService.setLinkVisibility(true);\r\n            this.commonService.updateNetworkVisuals(true);\r\n            this.store.setLinkThreshold(this.SelectedLinkThresholdVariable-0.000001);\r\n            this.commonService.onStatisticsChanged(\"Show\");\r\n        }\r\n        else {\r\n            this.SelectedEpsilonValue = Math.pow(10, this.widgets['filtering-epsilon']).toPrecision(3);\r\n            this.commonService.session.style.widgets[\"filtering-epsilon\"] = this.widgets['filtering-epsilon'];\r\n            this.commonService.session.style.widgets[\"link-show-nn\"] = true;\r\n            $('#filtering-epsilon-row').slideDown();\r\n            \r\n            \r\n\r\n            this.commonService.computeMST().then(() => {\r\n                console.log('computeMST for nearest neighbor');\r\n\r\n                console.log('Link (MZ745515-MZ712879) after MST:', \r\n                this.commonService.session.data.links.filter(link => \r\n                    (link.source === \"MZ745515\" && link.target === \"MZ712879\") ||\r\n                    (link.source === \"MZ712879\" && link.target === \"MZ745515\")\r\n                ));\r\n                //console log link that source is MZ798055 and target is MZ375596\r\n                console.log('link after computeMST: ', this.commonService.session.data.links.filter(link => link.source === \"MZ798055\" && link.target === \"MZ375596\"));\r\n                this.commonService.setLinkVisibility(true);\r\n                this.commonService.updateNetworkVisuals(true);\r\n                this.store.setLinkThreshold(this.SelectedLinkThresholdVariable + 0.000001);\r\n\r\n                console.log('onlink compute mst')\r\n                this.onLinkColorTableChanged();\r\n                    // TODO:: David is this needed?\r\n                if ('tableComp' in this.commonService.visuals) {\r\n                    if (this.commonService.visuals.tableComp.dataSetViewSelected == 'Link') {\r\n                        this.commonService.visuals.tableComp.openSelectDataSetScreen({value: 'Link'});\r\n                    }\r\n                }\r\n\r\n                this.commonService.onStatisticsChanged(\"Show\");\r\n            });\r\n                  \r\n                    return;\r\n            // TODO:: David Removed to fix NN issue\r\n            // if(!this.commonService.session.style.widgets[\"mst-computed\"]) {\r\n            //     this.commonService.computeMST().then(() => {\r\n            //         this.commonService.updateNetwork();\r\n            //         this.updatedVisualization();\r\n\r\n            //         if ('tableComp' in this.commonService.visuals) {\r\n            //             if (this.commonService.visuals.tableComp.dataSetViewSelected == 'Link') {\r\n            //                 this.commonService.visuals.tableComp.openSelectDataSetScreen({value: 'Link'});\r\n            //             }\r\n            //         }\r\n            //     });\r\n            //      this.commonService.session.style.widgets[\"mst-computed\"] = true;\r\n            //      console.log('updated compute:' , this.commonService.session.style.widgets[\"mst-computed\"]);\r\n            //      return;\r\n            //    } else {\r\n\r\n        }\r\n    }\r\n\r\n      // This is the method that actually toggles the link-color dialog & table\r\n  onLinkColorTableChanged(silent: boolean = false) {\r\n    console.log('DEBUG: onLinkColorTableChanged fired. value=', this.SelectedLinkColorTableTypesVariable, 'silent=', silent);\r\n\r\n    // Keep your GlobalSettingsModel in sync\r\n    this.commonService.GlobalSettingsModel.SelectedLinkColorTableTypesVariable = this.SelectedLinkColorTableTypesVariable;\r\n\r\n    if (this.SelectedLinkColorTableTypesVariable === 'Hide') {\r\n      console.log('DEBUG: Hiding link color dialog and clearing table');\r\n      this.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n      $('#link-color-table').empty();\r\n    } else {\r\n      console.log('DEBUG: Showing link color dialog & building table');\r\n      this.GlobalSettingsLinkColorDialogSettings.setVisibility(true);\r\n\r\n      if (this.SelectedColorLinksByVariable === 'None') {\r\n        console.log('DEBUG: Link color variable=NONE => empty table');\r\n        $('#link-color-table').empty();\r\n      } else {\r\n        console.log('DEBUG: Generating link table. Table element =', this.linkColorTable?.nativeElement);\r\n        this.generateNodeLinkTable('#link-color-table');\r\n      }\r\n      $('#link-color-table-row').slideDown();\r\n    }\r\n\r\n    // If OnPush, sometimes you might also need:\r\n    if (!silent) {\r\n      console.log('DEBUG: onLinkColorTableChanged => Marking for check');\r\n      this.cdref.markForCheck();\r\n      // or .detectChanges() if you want an immediate synchronous check\r\n      // this.cdref.detectChanges();\r\n    }\r\n  }\r\n\r\n    /**\r\n     * Updates this.commonService.GlobalSettingsModel.SelectedNodeColorTableTypesVariable and \r\n     * then hides the node color table or calls onColorNodesByChanged\r\n     */\r\n    onNodeColorTableChanged(silent: boolean = false) {\r\n\r\n        if(this.commonService.debugMode) {\r\n            console.log('node color changed: ', this.SelectedNodeColorTableTypesVariable);\r\n        }\r\n        this.commonService.GlobalSettingsModel.SelectedNodeColorTableTypesVariable = this.SelectedNodeColorTableTypesVariable;\r\n\r\n        if (this.SelectedNodeColorTableTypesVariable == \"Hide\") {\r\n            this.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n        }\r\n        else {\r\n\r\n            this.onColorNodesByChanged(silent);         \r\n        }\r\n    }\r\n\r\n    onShowStatisticsChanged() {\r\n\r\n\r\n        if (this.SelectedStatisticsTypesVariable === \"Show\"){\r\n            this.commonService.updateStatistics();\r\n            $(\"#network-statistics-wrapper\").fadeIn();\r\n        } else {\r\n            this.commonService.updateStatistics();\r\n            $(\"#network-statistics-wrapper\").fadeOut();\r\n        }\r\n  \r\n\r\n        this.commonService.GlobalSettingsModel.SelectedStatisticsTypesVariable = this.SelectedStatisticsTypesVariable;\r\n\r\n\r\n        // if (this.homepageTabs[this.activeTabNdx].label == \"2D Network\") {\r\n        //     this.homepageTabs[this.activeTabNdx].componentRef.enableSettings();\r\n        // }\r\n\r\n    }\r\n\r\n    /**\r\n     * Updates node-color widget and published node color to each view to update them. Only relevant when color nodes by = None\r\n     */\r\n    onNodeColorChanged(silent: boolean = false) {\r\n        const variable = this.SelectedNodeColorVariable;\r\n        this.commonService.session.style.widgets[\"node-color\"] = variable;\r\n\r\n        if(!silent) this.publishUpdateNodeColors();\r\n        \r\n    }\r\n\r\n    /**\r\n     * calls updateNodeColors() for each view\r\n     */\r\n    publishUpdateNodeColors() {\r\n        this.homepageTabs.forEach(tab => {\r\n            if (tab.componentRef &&\r\n                tab.componentRef.instance.updateNodeColors) {\r\n                console.log('publishUpdateNodeColors - updateNodeColors called');\r\n                tab.componentRef.instance.updateNodeColors();\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Updates visualization for each view that is available\r\n     */\r\n    publishUpdateVisualization() {\r\n        this.homepageTabs.forEach(tab => {\r\n            if (tab.componentRef &&\r\n                tab.componentRef.instance.updateVisualization) {\r\n                tab.componentRef.instance.updateVisualization();\r\n            }\r\n        })\r\n    }\r\n\r\n    publishUpdateLinkColor() {\r\n        this.homepageTabs.forEach(tab => {\r\n            if (tab.componentRef &&\r\n                tab.componentRef.instance.updateLinkColor) {\r\n                tab.componentRef.instance.updateLinkColor();\r\n            }\r\n        })\r\n    }\r\n\r\n    public onLinkColorChanged(silent: boolean = false) : void {\r\n        if (this.SelectedLinkColorVariable != 'None') {\r\n            this.ShowGlobalSettingsLinkColorTable = true;\r\n        } else {\r\n            this.ShowGlobalSettingsLinkColorTable = false;\r\n        }\r\n\r\n        this.commonService.session.style.widgets[\"link-color\"] = this.SelectedLinkColorVariable;\r\n\r\n        if(!silent) this.publishUpdateLinkColor();\r\n\r\n    }\r\n\r\n\r\n    onColorLinksByChanged(silent: boolean = false) {\r\n        console.log('DEBUG: onColorLinksByChanged fired. variable =', this.SelectedColorLinksByVariable, 'silent=', silent);\r\n        this.commonService.GlobalSettingsModel.SelectedColorLinksByVariable = this.SelectedColorLinksByVariable;\r\n        this.commonService.session.style.widgets['link-color-variable'] = this.SelectedColorLinksByVariable;\r\n    \r\n        if (this.SelectedColorLinksByVariable !== 'None') {\r\n          console.log('DEBUG: onColorLinksByChanged => user picked something, setting table to Show');\r\n          this.SelectedLinkColorTableTypesVariable = 'Show';\r\n        } else {\r\n          console.log('DEBUG: onColorLinksByChanged => user picked None, setting table to Hide');\r\n          this.SelectedLinkColorTableTypesVariable = 'Hide';\r\n        }\r\n    \r\n        this.onLinkColorTableChanged(silent);\r\n        if (!silent) {\r\n          console.log('DEBUG: onColorLinksByChanged => publishing link-color updates to views');\r\n          this.publishUpdateLinkColor();\r\n        }\r\n    \r\n      }\r\n\r\n\r\n    // The actual function that builds your color table\r\n  generateNodeLinkTable(tableId: string, isEditable: boolean = true) {\r\n    console.log('DEBUG: generateNodeLinkTable called. tableId=', tableId);\r\n    console.log('DEBUG: table before .empty(): child rowcount=', $(tableId).find('tr').length);\r\n\r\n    const linkColorTable = $(tableId).empty().append(\r\n      '<tr>' +\r\n      \"<th class='p-1 table-header-row'><div class='header-content'><span contenteditable>Link \" + \r\n        this.commonService.titleize(this.SelectedColorLinksByVariable) + \r\n      \"</span><a class='sort-button' style='cursor: pointer'></a></div></th>\" +\r\n      `<th class='table-header-row tableCount' ${this.widgets['link-color-table-counts'] ? '' : 'style=\"display: none\"'}><div class='header-content'><span contenteditable>Count</span><a class='sort-button' style='cursor: pointer'></a></div></th>` +\r\n      `<th class='table-header-row tableFrequency' ${this.widgets['link-color-table-frequencies'] ? '' : 'style=\"display: none\"'}><div class='header-content'><span contenteditable>Frequency</span><a class='sort-button' style='cursor: pointer'></a></div></th>` +\r\n      '<th>Color</th>' +\r\n      '</tr>'\r\n    );\r\n\r\n    // Debug checks\r\n    console.log('DEBUG: after appending header, table rowcount=', $(tableId).find('tr').length);\r\n\r\n    // If you suspect linkColorMap may be empty or never updated, log it:\r\n    const aggregates = this.commonService.createLinkColorMap();\r\n    console.log('DEBUG: createLinkColorMap =>', aggregates);\r\n\r\n    const vlinks = this.commonService.getVisibleLinks();\r\n    console.log('DEBUG: getVisibleLinks =>', vlinks?.length);\r\n\r\n    const aggregateValues = Object.keys(aggregates);\r\n    console.log('DEBUG: aggregateValues =>', aggregateValues);\r\n        const disabled: string = isEditable ? '' : 'disabled';\r\n\r\n        let duoColors = [];\r\n        aggregateValues.forEach((value, i) => {\r\n            let duoLinkRow = value == 'Duo-Link' && this.SelectedColorLinksByVariable == 'origin' ? true : false;\r\n            if (aggregates[value] == 0) {\r\n                return;\r\n            }\r\n                // console.log('link color aggregates value: ', aggregates[value]);\r\n                // console.log('link color value: ', value);\r\n                // console.log('link color map: ', this.commonService.temp.style.linkColorMap);\r\n                // console.log('link color map value: ', this.commonService.temp.style.linkColorMap(value));\r\n            \r\n\r\n            // Grab color of link from session\r\n            const color = this.commonService.temp.style.linkColorMap(value);\r\n            if (this.SelectedColorLinksByVariable == 'origin') duoColors.push(color);\r\n\r\n            // Create color input element with color value and assign id to retrieve new value on change\r\n            const colorinput = duoLinkRow ? $(``) : $(`<input type=\"color\" value=\"${color}\" style=\"opacity:${this.commonService.temp.style.linkAlphaMap(value)}; border:none\" ${disabled}>`)\r\n                .on(\"change\", e => {\r\n                    // need to update the value in the dom which is used when exportings\r\n                    e.currentTarget.attributes[1].value = e.target['value'];\r\n                    e.currentTarget.style['opacity'] = this.commonService.temp.style.linkAlphaMap(value);\r\n\r\n                    // Need to get value from id since \"this\" keyword is used by angular\r\n                    // Update that value at the index in the color table\r\n                    (this.commonService.session.style.linkColors as any).splice(i, 1,e.target['value']);\r\n\r\n                    // Generate new color map with updated table\r\n                    this.commonService.temp.style.linkColorMap = d3\r\n                        .scaleOrdinal(this.commonService.session.style.linkColors)\r\n                        .domain(aggregateValues);\r\n\r\n\r\n                    // Call the updateLinkColor method in all tabs\r\n                    this.publishUpdateLinkColor()\r\n\r\n                    if (this.SelectedColorLinksByVariable == 'origin') {\r\n                        this.updateDuoLinkCell(i, e.target['value'], e.currentTarget.style['opacity'])\r\n                    }\r\n\r\n                });\r\n\r\n            const alphainput = duoLinkRow ? $(``) : $(`<a class=\"transparency-symbol\"></a>`)\r\n                .on(\"click\", e => {\r\n\r\n                    $(\"#color-transparency-wrapper\").css({\r\n                        top: e.clientY + 129,\r\n                        left: e.clientX,\r\n                        display: \"block\"\r\n                    });\r\n\r\n                    $(\"#color-transparency\")\r\n                        .off(\"change\")\r\n                        .val(this.commonService.session.style.linkAlphas[i])\r\n                        .one(\"change\", (f) => {\r\n\r\n                            // Update table with new alpha value\r\n                            // Need to get value from id since \"this\" keyword is used by angular\r\n                            this.commonService.session.style.linkAlphas.splice(i, 1, parseFloat((f.target['value'] as string)));\r\n                            this.commonService.temp.style.linkAlphaMap = d3\r\n                                .scaleOrdinal(this.commonService.session.style.linkAlphas)\r\n                                .domain(aggregateValues);\r\n                            $(\"#color-transparency-wrapper\").fadeOut();\r\n\r\n                            colorinput.trigger('change', this.commonService.temp.style.linkColorMap(value))\r\n                            // this.goldenLayout.componentInstances[1].updateLinkColor();\r\n\r\n                            if (this.SelectedColorLinksByVariable == 'origin') {\r\n                                this.updateDuoLinkCell(i, this.commonService.temp.style.linkColorMap(value), f.target['value'] as string)\r\n                            }\r\n                        });\r\n                });\r\n\r\n            const row = $(\r\n                \"<tr>\" +\r\n                \"<td data-value='\" + value + \"'>\" +\r\n                (this.commonService.session.style.linkValueNames[value] ? this.commonService.session.style.linkValueNames[value] : this.commonService.titleize(\"\" + value)) +\r\n                \"</td>\" +\r\n                `<td class='tableCount' ${ this.widgets['link-color-table-counts'] ? \"\" : \"style='display: none'\"}>` + aggregates[value] + \"</td>\" +\r\n                `<td class='tableFrequency' ${ this.widgets['link-color-table-frequencies'] ? \"\" : \"style='display: none'\"}>` + (aggregates[value] / vlinks.length).toLocaleString() + \"</td>\" +\r\n                \"</tr>\"\r\n            );\r\n\r\n\r\n            let duoCell;\r\n            if (duoLinkRow) {\r\n                duoCell = $(\"<td></td>\").append(\r\n                $(\"<div></div>\")\r\n                    .css({  height: \"25px\", width: \"50px\", display: \"flex\", background: \"#F0F0F0\", padding: \"4px\"})\r\n                    .append($(\"<div></div>\").css({ border: \"1px solid #777777\", height: \"17px\", width: \"42px\", display: \"inline-block\" })\r\n                        .append($(\"<span id='duoColor0'></span>\").css({ height: \"100%\", width: \"50%\", background: duoColors[0], 'vertical-align': \"top\", display: \"inline-block\" }))\r\n                        .append($(\"<span id='duoColor1'></span>\").css({ height: \"100%\", width: \"50%\", background: duoColors[1], 'vertical-align': \"top\", display: \"inline-block\" })))\r\n                );\r\n            }\r\n            const nonEditCell = `<td style=\"background-color:${color}\"></td>`;\r\n\r\n            if (duoLinkRow) {\r\n                row.append(duoCell)\r\n            } else if (isEditable) {\r\n                row.append($(\"<td></td>\").append(colorinput).append(alphainput));\r\n            } else {\r\n                row.append(nonEditCell);\r\n            }\r\n\r\n            console.log('---- link colorTable: ', i, linkColorTable);\r\n            linkColorTable.append(row);\r\n\r\n        });\r\n\r\n        console.log('DEBUG: after building rows, rowcount=', $(tableId).find('tr').length);\r\n    // At the end, we do a final check of the DOM:\r\n    const finalCount = $(tableId).find('tr').length;\r\n    console.log('DEBUG: final rowcount in table:', finalCount);\r\n\r\n        if (isEditable) {\r\n            linkColorTable\r\n                .find(\"td\")\r\n                .on(\"dblclick\", function () {\r\n                    $(this).attr(\"contenteditable\", \"true\").focus();\r\n                })\r\n                .on(\"focusout\", () => {\r\n                    const $this = $(this);\r\n                    $this.attr(\"contenteditable\", \"false\");\r\n\r\n                    this.commonService.session.style.linkValueNames[$this.data(\"value\")] = $this.text();\r\n\r\n                });\r\n        }\r\n\r\n        let isAscending = true;  // add this line before the click event handler\r\n        this.updateCountFreqTable('link-color')\r\n        $('#linkColorTableSettings').on('mouseleave', () => $('#linkColorTableSettings').delay(500).css('display', 'none'));\r\n\r\n        // console lof the rows in the table\r\n        $(tableId).on('click', '.sort-button', function() {\r\n            const table = $(this).parents('table').eq(0);\r\n            let rows = table.find('tr:gt(0)').toArray().sort(comparer($(this).parent().parent().index()));\r\n            isAscending = !isAscending;  // replace 'this.asc' with 'isAscending'\r\n            if (!isAscending){rows = rows.reverse();}\r\n            for (let i = 0; i < rows.length; i++){\r\n                table.append(rows[i]);\r\n            }\r\n        });\r\n        \r\n        \r\n        function comparer(index) {\r\n            return function(a, b) {\r\n                const valA = getCellValue(a, index), valB = getCellValue(b, index);\r\n                return !isNaN(Number(valA)) && !isNaN(Number(valB)) ? Number(valA) - Number(valB) : valA.toString().localeCompare(valB);\r\n            }\r\n        }\r\n        \r\n        function getCellValue(row, index){ \r\n            const value = $(row).children('td').eq(index).text();\r\n            return value;\r\n        }        \r\n     }\r\n\r\n    updateDuoLinkCell(index:number, color:string, opacity: string) {\r\n        if (index != 0 && index != 1) return;\r\n        $(`#duoColor${index}`).css({background: color, opacity: opacity})\r\n    }\r\n\r\n    public onTimelineChanged(e) : void {\r\n        this.SelectedTimelineVariable = e;\r\n        if(this.commonService.debugMode) {\r\n            console.log('timeline changed: ', e);\r\n        }\r\n        d3.select('#global-timeline svg').remove();\r\n        clearInterval(this.commonService.session.timeline);\r\n        let variable = e;  \r\n        let loadingJsonFile = this.commonService.session.style.widgets[\"node-timeline-variable\"] == variable;\r\n        if (this.commonService.session.style.widgets[\"node-timeline-variable\"] != 'None' && !loadingJsonFile) {\r\n            // change timeline variable when end time not reaching target time - redraw netwrok to start fresh\r\n            if (moment(this.commonService.session.state.timeEnd).toDate() < moment(this.commonService.session.state.timeTarget).toDate()) {\r\n                this.commonService.session.state.timeEnd = this.commonService.session.state.timeTarget;\r\n            this.commonService.setNodeVisibility(false);\r\n            this.commonService.setLinkVisibility(false);\r\n            this.commonService.updateStatistics();\r\n            }\r\n        }\r\n        this.commonService.session.style.widgets[\"node-timeline-variable\"] = variable;\r\n        if (variable == \"None\") {\r\n            $(\"#global-timeline-field\").empty();\r\n            this.commonService.session.style.widgets[\"timeline-date-field\"] = 'None'  \r\n            $(\"#global-timeline-wrapper\").fadeOut();\r\n            // $('#pinbutton').prop(\"disabled\", false);\r\n            // if(!this.commonService.session.network.timelinePinned) {\r\n            // $('#pinbutton').trigger('click');\r\n            // this.commonService.updatePinNodes(false);\r\n            // }\r\n            this.commonService.session.network.timelineNodes = [];\r\n            this.commonService.setNodeVisibility(false);\r\n            this.commonService.setLinkVisibility(false);\r\n            this.commonService.updateStatistics();\r\n            return;\r\n        }\r\n\r\n        // need to check and ensure bubble nodes are sorted by this variable, then rerender/recalculate bubbles position\r\n        if ('bubble' in this.commonService.visuals) {\r\n             this.commonService.visuals.bubble.sortData(variable);\r\n        }\r\n\r\n        console.log('timeline variable: ', variable);\r\n        if(!this.commonService.temp.style.nodeColor) $(\"#node-color-variable\").trigger(\"change\");\r\n\r\n        // let el: HTMLElement = this.pinBtn.nativeElement;\r\n        // console.log('pin : ', el);\r\n        // if (!$('#pinbutton').prop('disabled')){\r\n        //     if (!loadingJsonFile) {\r\n        //         this.commonService.session.network.timelinePinned = this.commonService.session.network.allPinned;\r\n        //     if(!this.commonService.session.network.allPinned) {\r\n        //         this.commonService.updatePinNodes(true);\r\n        //         this.openPinAllNodes(1);\r\n        //     }\r\n        //     this.commonService.session.network.timelineNodes = this.commonService.getNetworkNodes();\r\n        //     }\r\n        //     $('#pinbutton').prop(\"disabled\", true);\r\n        // }\r\n\r\n        if (!loadingJsonFile) {\r\n            this.commonService.session.network.timelinePinned = this.commonService.session.network.allPinned;\r\n        // if(!this.commonService.session.network.allPinned) {\r\n        //     this.commonService.updatePinNodes(true);\r\n        // }\r\n\r\n        }\r\n        let globalTimelineField =  (this.commonService.session.style.overwrite && variable == this.commonService.session.style.overwrite['globalTimelineFieldVariable'] ? this.commonService.session.style.overwrite['globalTimelineField'] : this.commonService.titleize(variable));\r\n        const encodedGlobalTimelineField = globalTimelineField.replace(/[\\u00A0-\\u9999<>\\&]/g, function(i) {\r\n            return '&#'+i.charCodeAt(0)+';';\r\n        });\r\n        $(\"#global-timeline-field\").html(encodedGlobalTimelineField);   \r\n        const formatDateIntoYear = d3.timeFormat(\"%Y\");\r\n        const formatDateIntoMonthYear = d3.timeFormat(\"%b %y\");\r\n        const formatDateIntoMonth = d3.timeFormat(\"%b\");\r\n        const formatDateMonthYear = d3.timeFormat(\"%b %Y\");\r\n        const formatDateDateMonth = d3.timeFormat(\"%b %_d\");\r\n\r\n        // let timeDomainStart, timeDomainEnd;\r\n        let field = variable;\r\n        let times = [],\r\n        vnodes = JSON.parse(JSON.stringify(this.commonService.session.data.nodes));\r\n        vnodes.forEach(d => {\r\n            let time = moment(d[field]); \r\n            if (time.isValid()) {\r\n                console.log('time moment value: ', d[field]);\r\n                d[field] = time.toDate();\r\n                times.push(d[field]);\r\n            } else {\r\n                console.log('time moment not value: ', d[field]);\r\n\r\n                d[field] = null;\r\n            }\r\n        });\r\n        if (times.length < 2) {\r\n            times = [new Date(2000, 1, 1), new Date()];\r\n        }\r\n        const timeDomainStart = Math.min(...times);\r\n        const timeDomainEnd = Math.max(...times);\r\n\r\n        const days = moment(timeDomainEnd).diff(moment(timeDomainStart), 'days');\r\n        const tickDateFormat = d => {\r\n            if (days<184) return formatDateDateMonth(d);\r\n            else if (days<367) return formatDateIntoMonth(d);\r\n            else if (days<367*5) return formatDateIntoMonthYear(d);\r\n            else return formatDateIntoYear(d);\t\t\r\n        }\r\n        this.handleDateFormat = d => {\r\n            if (days<367) return formatDateDateMonth(d);\r\n            else return formatDateMonthYear(d);\t\t\r\n        }\r\n        const startDate = timeDomainStart;\r\n        const endDate = timeDomainEnd;\r\n        const margin = {top:50, right:50, bottom:0, left:50},\r\n            width = ($('#visualwrapper').width() * 4 / 5) - margin.left - margin.right,\r\n            height = 200 - margin.top - margin.bottom;\r\n\r\n        var svgTimeline = d3.select(\"#global-timeline\")\r\n            .append(\"svg\")\r\n            .attr(\"width\", width + margin.left + margin.right)\r\n            .attr(\"height\", 120);  \r\n\r\n            ////////// slider //////////\r\n        this.currentTimelineValue = 0;\r\n        this.currentTimelineTargetValue = width;\r\n        this.commonService.session.state.timeStart = startDate;\r\n\r\n        const that = this;\r\n        const playButton = d3.select(\"#timeline-play-button\");\r\n        if (playButton.text() == \"Pause\") playButton.text(\"Play\");\r\n        this.xAttribute = d3.scaleTime()\r\n            .domain([startDate, endDate])\r\n            .range([0, this.currentTimelineTargetValue])\r\n            .clamp(true)\r\n            .nice();\r\n        const slider = svgTimeline.append(\"g\")\r\n            .attr(\"class\", \"slider\")\r\n            .attr(\"transform\", \"translate(30,\" + height/2 + \")\");\r\n\r\n        slider.append(\"line\")\r\n            .attr(\"class\", \"track\")\r\n            .attr(\"x1\", this.xAttribute.range()[0])\r\n            .attr(\"x2\", this.xAttribute.range()[1])\r\n            .attr(\"stroke\", \"#ddd\")  // Ensure this is a visible color\r\n            .attr(\"stroke-width\", \"10px\")  // Ensure this is a sufficient width\r\n            // Pre D3\r\n            // .select(function() { return this.parentNode.appendChild(this.cloneNode(true)); })\r\n            //.each(function() { this.parentNode.appendChild(this.cloneNode(true)); })\r\n        slider.append('line')\r\n            .attr(\"class\", \"track-inset\")\r\n            .attr(\"x1\", this.xAttribute.range()[0])\r\n            .attr(\"x2\", this.xAttribute.range()[1])\r\n            .attr(\"stroke\", \"#ddd\")  // Ensure this is a visible color\r\n            .attr(\"stroke-width\", \"10px\")  // Ensure this is a sufficient width\r\n            //.each(function() { this.parentNode.appendChild(this.cloneNode(true)); })\r\n        slider.append('line')\r\n            // Pre D3\r\n            // .select(function() { return this.parentNode.appendChild(this.cloneNode(true)); })\r\n            .attr(\"class\", \"track-overlay\")\r\n            .attr(\"x1\", this.xAttribute.range()[0])\r\n            .attr(\"x2\", this.xAttribute.range()[1])\r\n            .attr(\"stroke\", \"#ddd\")  // Ensure this is a visible color\r\n            .attr(\"stroke-width\", \"10px\")  // Ensure this is a sufficient width\r\n            .call(d3.drag()\r\n                .on(\"start.interrupt\", function() { slider.interrupt(); })\r\n                .on(\"start drag\", function() {\r\n                    that.currentTimelineValue = (d3 as any).event.x;\r\n                    that.update(that.xAttribute.invert(that.currentTimelineValue));\r\n                    if (that.playBtnText == \"Pause\") {\r\n                        that.playBtnText = \"Play\";\r\n                    clearInterval(that.commonService.session.timeline);\r\n                    }\r\n                })\r\n            );\r\n        slider.insert(\"g\", \".track-overlay\")\r\n            .attr(\"class\", \"ticks\")\r\n            .attr(\"transform\", \"translate(0,\" + 18 + \")\")\r\n            .selectAll(\"text\")\r\n            .data(this.xAttribute.ticks(12))\r\n            .enter()\r\n            .append(\"text\")\r\n            .attr(\"x\", this.xAttribute)\r\n            .attr(\"y\", 10)\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .text(function(d) { return tickDateFormat(d); });\r\n\r\n\r\n        this.label = slider.append(\"text\")  \r\n            .attr(\"class\", \"label\")\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .text(this.handleDateFormat(startDate))\r\n            .attr(\"transform\", \"translate(25,\" + (-20) + \")\")\r\n\r\n            this.handle = slider.insert(\"circle\", \".track-overlay\")\r\n            .attr(\"class\", \"handle\")\r\n            .attr(\"r\", 9);\r\n\r\n        this.commonService.session.style.widgets[\"timeline-date-field\"] = field;\r\n        this.commonService.session.state.timeStart = startDate;\r\n        this.commonService.session.state.timeTarget = this.xAttribute.invert(this.currentTimelineTargetValue);\r\n        if (loadingJsonFile && moment(this.commonService.session.state.timeEnd).toDate() < moment(this.commonService.session.state.timeTarget).toDate()) {\r\n            let t = moment(this.commonService.session.state.timeEnd).toDate();\r\n            this.currentTimelineTargetValue = this.xAttribute(t);\r\n            this.handle.attr(\"cx\", this.xAttribute(t));\r\n            this.label\r\n            .attr(\"x\", this.xAttribute(t))\r\n            .text(this.handleDateFormat(t));\r\n        }\r\n        $(\"#global-timeline-wrapper\").fadeIn();\r\n       \r\n    }\r\n\r\n    public playTimeline() : void {\r\n\r\n            if (this.playBtnText == \"Pause\") {\r\n                this.playBtnText = \"Play\";\r\n                clearInterval(this.commonService.session.timeline);\r\n            } else {\r\n                this.playBtnText = \"Pause\";\r\n                this.commonService.session.timeline = setInterval(this.step, this.timelineSpeed, this);\r\n            }\r\n\r\n    }\r\n\r\n    update(h) {\r\n\r\n        this.handle.attr(\"cx\", this.xAttribute(h));\r\n        this.label\r\n        .attr(\"x\", this.xAttribute(h))\r\n        .text(this.handleDateFormat(h));\r\n        this.commonService.session.state.timeEnd = h;\r\n        this.commonService.setNodeVisibility(false);\r\n        this.commonService.setLinkVisibility(false);\r\n        this.commonService.updateStatistics();\r\n  }\r\n\r\n    step(that : any) { \r\n        that.update(that.xAttribute.invert(that.currentTimelineValue));\r\n        if (that.currentTimelineValue > that.currentTimelineTargetValue) { \r\n            that.currentTimelineValue = 0;\r\n        clearInterval(that.commonService.session.timeline);\r\n        that.playBtnText = \"Play\";\r\n        return;\r\n        }\r\n        that.currentTimelineValue = that.currentTimelineValue + (that.currentTimelineTargetValue/151);\r\n\r\n    }\r\n\r\n    showNodeColorTable() {\r\n        if (this.SelectedNodeColorTableTypesVariable !=' Show') {\r\n            this.SelectedNodeColorTableTypesVariable='Show';\r\n            this.onNodeColorTableChanged();\r\n        };\r\n    }\r\n\r\n    hideNodeColorTable() {\r\n        if (this.SelectedNodeColorTableTypesVariable != 'Hide') {\r\n           this.SelectedNodeColorTableTypesVariable='Hide';\r\n           this.onNodeColorTableChanged()\r\n        }\r\n    }\r\n\r\n    showLinkColorTable() {\r\n        console.log('onLinkColorTableChanged - show');\r\n\r\n        if (this.SelectedLinkColorTableTypesVariable !=' Show') {\r\n            this.SelectedLinkColorTableTypesVariable='Show';\r\n            this.onLinkColorTableChanged();\r\n        }\r\n    }\r\n\r\n    hideLinkColorTable() {\r\n\r\n        if (this.ShowGlobalSettingsLinkColorTable) {\r\n            // This was just the initial load (or a code-based hide).\r\n            return;\r\n          }\r\n\r\n        if (this.SelectedLinkColorTableTypesVariable != 'Hide') {\r\n           this.SelectedLinkColorTableTypesVariable='Hide';\r\n           this.onLinkColorTableChanged()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Called when SelectedColorNodesByVariable (keeps track of what variable to use to color nodes by) is changed.\r\n     */\r\n    onColorNodesByChanged(silent: boolean = false) {\r\n\r\n        console.log('on color nodes by changed - visible: ', this.GlobalSettingsNodeColorDialogSettings.isVisible);\r\n\r\n        this.commonService.GlobalSettingsModel.SelectedColorNodesByVariable = this.SelectedColorNodesByVariable;\r\n\r\n\r\n        if (!this.GlobalSettingsNodeColorDialogSettings.isVisible) {\r\n\r\n            console.log('on color nodes by changed - visible: ', this.SelectedColorNodesByVariable);\r\n            // TODO::David you added  \"&& this.checkActiveView('node')\" below which makes it not dispaly in twoD network\r\n            if (this.SelectedColorNodesByVariable != \"None\") {\r\n\r\n                this.SelectedNodeColorTableTypesVariable = 'Show';\r\n                this.GlobalSettingsNodeColorDialogSettings.setVisibility(true);\r\n                this.cachedGlobalSettingsNodeColorVisibility = this.GlobalSettingsNodeColorDialogSettings.isVisible;\r\n                const prevColorNodesByVariable = this.SelectedColorNodesByVariable;\r\n                // this reset to false to trigger showing the node color table\r\n                this.ShowGlobalSettingsNodeColorTable = false;\r\n                // this detect changes leads to SelectedColorNodesByVariable being set to default value when loading MT files that have both 2D and map view\r\n                this.cdref.detectChanges();\r\n                if (prevColorNodesByVariable != this.SelectedColorNodesByVariable) this.SelectedColorNodesByVariable = prevColorNodesByVariable;\r\n            }\r\n        }\r\n\r\n        this.commonService.session.style.widgets[\"node-color-variable\"] = this.SelectedColorNodesByVariable;\r\n\r\n        console.log('on color nodes by changed5 - visible: ', this.SelectedColorNodesByVariable);\r\n\r\n        if(this.commonService.session.data.nodes.length === 0) {\r\n            return;\r\n        }\r\n\r\n        console.log('on color nodes by changed6 - visible: ', this.ShowGlobalSettingsNodeColorTable);\r\n\r\n        if (this.SelectedColorNodesByVariable !== \"None\") {\r\n\r\n            this.ShowGlobalSettingsNodeColorTable = true;\r\n            this.generateNodeColorTable(\"#node-color-table\");\r\n            \r\n            $('#node-color-value-row').slideUp();\r\n\r\n            //If hidden by default, unhide to perform slide up and down\r\n            if(!this.ShowGlobalSettingsNodeColorTable){\r\n\r\n                const element = this.el.nativeElement.querySelector('#node-color-table');\r\n                this.commonService.setNodeTableElement(element);\r\n                this.ShowGlobalSettingsNodeColorTable = true;\r\n            } else {\r\n                $('#node-color-table-row').slideDown();\r\n            }\r\n\r\n            console.log('--- onColorNodesByChanged called');\r\n            // if not loading all settings at once, update node colors\r\n            if(!silent) {\r\n                this.publishUpdateNodeColors();\r\n            }\r\n\r\n        // if color nodes by equals None, then hide node color table\r\n        } else {\r\n\r\n            $('#node-color-table').empty();\r\n            $('#node-color-value-row').slideDown();\r\n            $('#node-color-table-row').slideUp();\r\n            this.SelectedNodeColorTableTypesVariable='Hide';\r\n            this.onNodeColorTableChanged(silent);\r\n\r\n            if(!silent) {\r\n                this.publishUpdateNodeColors();\r\n            }\r\n            this.exportTables['node-color'] = false;\r\n        }\r\n    }\r\n\r\n    generateNodeColorTable(tableId: string, isEditable: boolean = true) {\r\n        const nodeColorTable = $(tableId)\r\n        .empty()\r\n        .append(\r\n            \"<tr>\" +\r\n            \"<th class='p-1 table-header-row'><div class='header-content'><span contenteditable>Node \" + this.commonService.titleize(this.SelectedColorNodesByVariable) + \"</span><a class='sort-button' style='cursor: pointer'></a></div></th>\" +\r\n            `<th class='table-header-row tableCount' ${ this.widgets['node-color-table-counts'] ? \"\" : \"style='display: none'\"}><div class='header-content'><span contenteditable>Count</span><a class='sort-button' style='cursor: pointer'></a></div></th>` +\r\n            `<th class='table-header-row tableFrequency' ${ this.widgets['node-color-table-frequencies'] ? \"\": \"style='display: none'\"}><div class='header-content'><span contenteditable>Frequency</span><a class='sort-button' style='cursor: pointer'></a></div></th>` +\r\n            \"<th>Color</th>\" +\r\n            \"</tr>\"\r\n        );\r\n\r\n\r\n        if (!this.commonService.session.style.nodeValueNames)\r\n            this.commonService.session.style.nodeValueNames = {};\r\n\r\n\r\n        const aggregates = this.commonService.createNodeColorMap();\r\n\r\n        const vnodes = this.commonService.getVisibleNodes();\r\n\r\n        const aggregateValues = Object.keys(aggregates);\r\n\r\n        const disabled = isEditable ? '' : 'disabled';\r\n\r\n        aggregateValues.forEach((value, i) => {\r\n            if (aggregates[value] < 1) return;\r\n\r\n            const color = this.commonService.temp.style.nodeColorMap(value);\r\n\r\n            const colorinput = $(`<input type=\"color\" value=\"${color}\" style=\"opacity:${this.commonService.temp.style.nodeAlphaMap(value)}; border:none\" ${disabled}>`)\r\n                .on(\"change\", e => {\r\n                    // need to update the value in the dom which is used when exportings\r\n                    e.currentTarget.attributes[1].value = e.target['value'];\r\n                    e.currentTarget.style['opacity'] = this.commonService.temp.style.nodeAlphaMap(value);\r\n\r\n                    if(this.commonService.debugMode) {\r\n                        console.log('color: ', this.SelectedColorNodesByVariable);\r\n                        console.log('color2: ',  this.commonService.session.style.nodeColorsTableKeys);                    \r\n                    }\r\n \r\n                    let key = this.commonService.session.style.nodeColorsTableKeys[this.SelectedColorNodesByVariable].findIndex( k => k === value);\r\n                    this.commonService.session.style.nodeColorsTable[this.SelectedColorNodesByVariable].splice(key, 1, e);\r\n\r\n                    // Update history with new color\r\n                    this.commonService.session.style.nodeColorsTableHistory[this.commonService.session.style.nodeColorsTableKeys[this.SelectedColorNodesByVariable][key]] = e.target['value'];\r\n\r\n                  \r\n\r\n                    //if (this.commonService.session.style.widgets[\"node-timeline-variable\"] == 'None') {\r\n                          // Update table with new alpha value\r\n                        // Need to get value from id since \"this\" keyword is used by angular\r\n                        this.commonService.session.style.nodeColors.splice(i, 1, e.target['value']);\r\n                        this.commonService.temp.style.nodeColorMap = d3\r\n                            .scaleOrdinal(this.commonService.session.style.nodeColors)\r\n                            .domain(aggregateValues);\r\n                        // temp.style.nodeColorMap = d3\r\n                            // .scaleOrdinal(session.style.nodeColorsTable[variable])\r\n                            // .domain(session.style.nodeColorsTableKeys[variable]);\r\n                        // } else {\r\n                        //     let temKey = this.commonService.temp.style.nodeColorKeys.findIndex( k => k === value);\r\n                        //     this.commonService.temp.style.nodeColor.splice(temKey, 1, e);\r\n                        //     this.commonService.temp.style.nodeColorMap = d3\r\n                        //         .scaleOrdinal(this.commonService.temp.style.nodeColor)\r\n                        //         .domain(this.commonService.temp.style.nodeColorKeys);\r\n                        // }\r\n\r\n                    this.publishUpdateNodeColors();\r\n\r\n                });\r\n\r\n            const alphainput = $(`<a class=\"transparency-symbol\"></a>`).on(\"click\", e => {\r\n\r\n                $(\"#color-transparency-wrapper\").css({\r\n                    top: e.clientY + 129,\r\n                    left: e.clientX,\r\n                    display: \"block\"\r\n                });\r\n\r\n                $(\"#color-transparency\")\r\n                    .off(\"change\")\r\n                    .val(this.commonService.session.style.nodeAlphas[i])\r\n                    .one(\"change\", f => {\r\n\r\n                        // Update table with new alpha value\r\n                        // Need to get value from id since \"this\" keyword is used by angular\r\n                        this.commonService.session.style.nodeAlphas.splice(i, 1, parseFloat(f.target['value'] as string));\r\n\r\n                        this.commonService.temp.style.nodeAlphaMap = d3\r\n                            .scaleOrdinal(this.commonService.session.style.nodeAlphas)\r\n                            .domain(aggregateValues);\r\n\r\n                        colorinput.trigger('change', this.commonService.temp.style.nodeColorMap(value))\r\n                        $(\"#color-transparency-wrapper\").fadeOut();\r\n\r\n                    });\r\n            });\r\n\r\n            const nonEditCell = `<td style=\"background-color:${color}\"></td>`;\r\n\r\n            const cell = $(\"<td></td>\")\r\n                .append(colorinput)\r\n                .append(alphainput);\r\n\r\n            const row = $(\r\n                \"<tr>\" +\r\n                \"<td data-value='\" + value + \"'>\" +\r\n                (this.commonService.session.style.nodeValueNames[value] ? this.commonService.session.style.nodeValueNames[value] : this.commonService.titleize(\"\" + value)) +\r\n                \"</td>\" +\r\n                `<td class='tableCount' ${ this.widgets['node-color-table-counts'] ? \"\" : \"style='display: none'\"}>` + aggregates[value] + \"</td>\" +\r\n                `<td class='tableFrequency' ${ this.widgets['node-color-table-frequencies'] ? \"\": \"style='display: none'\"}>` + (aggregates[value] / vnodes.length).toLocaleString() + \"</td>\" +\r\n                \"</tr>\"\r\n            ).append(isEditable ? cell : nonEditCell);\r\n\r\n            nodeColorTable.append(row);\r\n        });\r\n\r\n        if (isEditable) {\r\n            nodeColorTable\r\n                .find(\"td\")\r\n                .on(\"dblclick\", function () {\r\n                    $(this).attr(\"contenteditable\", \"true\").focus();\r\n                })\r\n                .on(\"focusout\", () => {\r\n\r\n                    const $this = $(this);\r\n                    $this.attr(\"contenteditable\", \"false\");\r\n\r\n                    //this.commonService.session.style.nodeValueNames[$this.data(\"value\")] = $this.find(\"input\").value;\r\n\r\n                });\r\n        }\r\n\r\n        this.updateCountFreqTable('node-color');\r\n        $('#nodeColorTableSettings').on('mouseleave', () => $('#nodeColorTableSettings').delay(500).css('display', 'none'));\r\n        \r\n        $(tableId).on('click', '.sort-button', function() {\r\n            const table = $(this).parents('table').eq(0);\r\n            let rows = table.find('tr:gt(0)').toArray().sort(comparer($(this).parent().parent().index()));\r\n            this.asc = !this.asc; // using property 'asc' on DOM object instead of jQuery data function\r\n            if (!this.asc){rows = rows.reverse();}\r\n            for (let i = 0; i < rows.length; i++){table.append(rows[i]);}\r\n        });\r\n        \r\n        function comparer(index) {\r\n            return function(a, b) {\r\n                const valA = getCellValue(a, index), valB = getCellValue(b, index);\r\n                return !isNaN(Number(valA)) && !isNaN(Number(valB)) ? Number(valA) - Number(valB) : valA.toString().localeCompare(valB);\r\n            }\r\n        }\r\n        \r\n        function getCellValue(row, index){ return $(row).children('td').eq(index).text() }\r\n\r\n    }\r\n\r\n    /**\r\n     * Toggles the setting menu for node-color or link-color table. This menu allow users to show/hide counts and/or frequencies\r\n     * @param tableName 'node-color' or 'link-color'\r\n     */\r\n    toggleColorTableSettings(tableName: string) {\r\n        let settingsPane;\r\n        if (tableName == 'node-color') {\r\n            settingsPane = $('#nodeColorTableSettings')\r\n        } else if (tableName == 'link-color') {\r\n            settingsPane = $('#linkColorTableSettings')\r\n        } else {\r\n            return;\r\n        }\r\n        \r\n        if (settingsPane.css('display') == 'none') {\r\n            settingsPane.css('display', 'block')\r\n        } else {\r\n            settingsPane.css('display', 'none')\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates the appropriate widget value and then updates the node-color or link-color table\r\n     * @param table 'node-color' or 'link-color'\r\n     * @param column 'tableCouts' or 'tableFreq' \r\n     */\r\n    toggleColorTableColumns(table: string, column: string) {\r\n        if (table == 'node-color' && column == 'tableCounts') {\r\n            this.widgets['node-color-table-counts'] = !this.widgets['node-color-table-counts'];\r\n        } else if (table == 'node-color' && column == 'tableFreq') {\r\n            this.widgets['node-color-table-frequencies'] = !this.widgets['node-color-table-frequencies'];\r\n        } else if (table == 'link-color' && column == 'tableCounts') {\r\n            this.widgets['link-color-table-counts'] = !this.widgets['link-color-table-counts']\r\n        } else if (table == 'link-color' && column == 'tableFreq') {\r\n            this.widgets['link-color-table-frequencies'] = !this.widgets['link-color-table-frequencies']\r\n        } else {\r\n            return;\r\n        }\r\n\r\n        this.updateCountFreqTable(table);\r\n    }\r\n\r\n    /**\r\n     * Updates the node-color-table or link-color-table based on value of widgets; it doesn't recalculate anything; just shows/hide columns\r\n     * @param tableName 'node-color' or 'link-color'\r\n     */\r\n    updateCountFreqTable(tableName) {\r\n        let tableReferenceName, showCount, showFreq;\r\n        if (tableName == 'node-color') {\r\n            tableReferenceName = '#global-settings-node-color-table';\r\n            showCount = this.widgets['node-color-table-counts'];\r\n            showFreq = this.widgets['node-color-table-frequencies'];\r\n        } else if (tableName == 'link-color') {\r\n            tableReferenceName = '#global-settings-link-color-table';\r\n            showCount = this.widgets['link-color-table-counts'];\r\n            showFreq = this.widgets['link-color-table-frequencies'];\r\n        }\r\n        const countColumn = $(tableReferenceName + ' .tableCount');\r\n        const freqColumn = $(tableReferenceName + ' .tableFrequency');\r\n        (showCount) ? countColumn.slideDown() : countColumn.slideUp();\r\n        (showFreq) ? freqColumn.slideDown() : freqColumn.slideUp();\r\n    }\r\n\r\n    /**\r\n     * Updated link-threshold widget and this.threshold variable. Sets mst-computed widget to false.\r\n     * Updates clusters and cluster visibility, link visibility, and node visibility. Finallys updates\r\n     * visualizations and stastistics\r\n     */\r\n    onLinkThresholdChanged( newThreshold?: number, silent: boolean = false) {\r\n\r\n        if(this.commonService.session.data.nodes.length === 0) {\r\n            return;\r\n        }\r\n\r\n        if(newThreshold !== undefined) {\r\n            // Update the style widget\r\n            this.commonService.session.style.widgets[\"link-threshold\"] = newThreshold;\r\n        }\r\n\r\n        // Determine the new threshold\r\n        const parsedThreshold = newThreshold !== undefined \r\n        ? parseFloat(newThreshold.toString()) \r\n        : parseFloat(this.SelectedLinkThresholdVariable);\r\n\r\n        // Only update if the threshold is different\r\n        // if (parsedThreshold === this._lastLinkThreshold && this.commonService.session.network.isFullyLoaded) {\r\n        // console.log(\"Threshold unchanged; skipping full network update.\");\r\n        // return;\r\n        // }\r\n        //debugger;\r\n\r\n        // If a new threshold is provided, update the SelectedLinkThresholdVariable\r\n        if (newThreshold) {\r\n            this.SelectedLinkThresholdVariable = newThreshold;\r\n        }\r\n\r\n        this._lastLinkThreshold = this.SelectedLinkThresholdVariable;\r\n        this.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable = this.SelectedLinkThresholdVariable;\r\n        this.commonService.session.style.widgets[\"link-threshold\"] = parseFloat(this.SelectedLinkThresholdVariable);\r\n        this.threshold = this.SelectedLinkThresholdVariable;\r\n\r\n        // const minClust = $(\"#cluster-minimum-size\").val();\r\n        \r\n\r\n        // Unset MST construction since links might have been changed\r\n        this.commonService.session.style.widgets[\"mst-computed\"] = false;\r\n\r\n        console.log('min clust is: ', this.commonService.session.style.widgets[\"cluster-minimum-size\"]);\r\n        if (this.commonService.session.style.widgets[\"cluster-minimum-size\"] !== 1 ){\r\n            if(this.commonService.debugMode) {\r\n                console.log('reseting min clust'); \r\n            }\r\n            $(\"#cluster-minimum-size\").val(\"1\");\r\n            $(\"#cluster-minimum-size\").trigger(\"change\");\r\n            $(\"#cluster-minimum-size\").val(this.commonService.session.style.widgets[\"cluster-minimum-size\"]);\r\n            $(\"#cluster-minimum-size\").trigger(\"change\");\r\n        } \r\n\r\n        console.log('onLinkThresholdChanged called 2');\r\n\r\n        if(!silent) {\r\n            // Immediately hide links\r\n            this.commonService.setLinkVisibility(false, false);\r\n\r\n            console.log('tagClusters called link threshold change');\r\n\r\n            // Now schedule the heavy update (tag clusters, update visibilities, stats) using debouncing\r\n            this.commonService.updateNetworkVisuals();\r\n        }\r\n\r\n    }\r\n        \r\n\r\n    revealClicked() : void {\r\n\r\n        $(\"#cluster-minimum-size\").val(1);\r\n        this.commonService.session.style.widgets[\"cluster-minimum-size\"] = 1;\r\n        $(\"#filtering-wrapper\").slideDown();\r\n        this.commonService.setClusterVisibility(true);\r\n       \r\n        this.commonService.setNodeVisibility(true);\r\n         //To catch links that should be filtered out based on cluster size:\r\n         this.commonService.setLinkVisibility(true);\r\n        //Because the network isn't robust to the order in which these operations\r\n        //take place, we just do them all silently and then react as though we did\r\n        //them each after all of them are already done.\r\n\r\n        this.GlobalSettingsLinkColorDialogSettings.isVisible = true;\r\n        this.GlobalSettingsNodeColorDialogSettings.isVisible = true;\r\n\r\n        this.store.setNetworkUpdated(true);\r\n        // this.updatedVisualization();\r\n\r\n        this.commonService.updateStatistics();\r\n\r\n    };\r\n\r\n\r\n    updateGlobalSettingsModel() {\r\n\r\n        this.commonService.GlobalSettingsModel.SelectedRevealTypesVariable = this.SelectedRevealTypesVariable;\r\n\r\n        // TODO: See if we need to flip these now since the service should override these local settings\r\n        this.SelectedDistanceMetricVariable = this.commonService.session.style.widgets['default-distance-metric'];\r\n        this.SelectedLinkThresholdVariable = this.commonService.session.style.widgets['link-threshold'];\r\n        this.commonService.GlobalSettingsModel.SelectedNodeColorVariable = this.SelectedNodeColorVariable;\r\n        this.commonService.session.style.widgets['node-color'] = this.SelectedNodeColorVariable;\r\n        this.commonService.session.style.widgets['link-color'] = this.SelectedLinkColorVariable;\r\n\r\n        this.commonService.session.style.widgets['node-color-variable'] = this.SelectedColorNodesByVariable;\r\n        this.commonService.session.style.widgets['link-threshold-variable'] = this.SelectedDistanceMetricVariable;\r\n        //this.commonService.session.style.widgets['node-color-variable'] = this.SelectedNodeColorVariable;\r\n\r\n        // TODO: Removed, see if this is still necessary\r\n        // this.commonService.session.style.widgets['link-tooltip-variable'] = this.SelectedColorLinksByVariable;\r\n\r\n\r\n        this.commonService.GlobalSettingsModel.SelectedColorVariable = this.SelectedColorVariable;\r\n        this.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable = this.SelectedLinkThresholdVariable;\r\n        this.commonService.GlobalSettingsModel.SelectedDistanceMetricVariable = this.SelectedDistanceMetricVariable;\r\n        this.commonService.session.style.widgets['selected-color'] = this.SelectedColorVariable;\r\n        this.commonService.session.style.widgets['selected-node-stroke-color'] = this.SelectedColorVariable;\r\n        // TODO: \r\n        // if (this.commonService.visuals.phylogenetic) {\r\n        //   this.commonService.visuals.phylogenetic.updateNodeColors();\r\n        // }\r\n\r\n\r\n        this.commonService.GlobalSettingsModel.SelectedBackgroundColorVariable = this.SelectedBackgroundColorVariable;\r\n        this.commonService.session.style.widgets['background-color'] = this.SelectedBackgroundColorVariable;\r\n\r\n\r\n        this.commonService.GlobalSettingsModel.SelectedApplyStyleVariable = this.SelectedApplyStyleVariable;\r\n\r\n\r\n        //this.ShowGlobalSettingsLinkColorTable = this.GlobalSettingsLinkColorDialogSettings.isVisible;\r\n        //console.log('3 this.ShowGlobalSettingsLinkColorTable: ', this.ShowGlobalSettingsLinkColorTable); \r\n        console.log('4 this.ShowGlobalSettingsLinkColorTable: ', this.GlobalSettingsLinkColorDialogSettings.isVisible); \r\n        // print out #global-settings-link-color-table element\r\n        console.log('xy link color table 3: ', $('#link-color-table'));\r\n\r\n    }\r\n\r\n    /**\r\n     * this.publishUpdateVisualization()\r\n     * \r\n     * XXXXX may need to be updated or trimmed (switch statement has no functionality) XXXXX\r\n     */\r\n    updatedVisualization() {\r\n\r\n        console.log('updatedVisualization called');\r\n\r\n        this.publishUpdateVisualization();\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    getGlobalSettingsData() {\r\n        console.log('--- getGlobalSettingsData called');\r\n        this.FieldList = [];\r\n\r\n        this.FieldList.push({ label: \"None\", value: \"None\" });\r\n        this.commonService.session.data['nodeFields'].map((d, i) => {\r\n            \r\n            this.FieldList.push(\r\n                {\r\n                    label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n                    value: d\r\n                });\r\n\r\n        });\r\n\r\n\r\n        this.ToolTipFieldList = [];\r\n\r\n        this.ToolTipFieldList.push({ label: \"None\", value: \"None\" });\r\n        this.commonService.session.data['linkFields'].map((d, i) => {\r\n\r\n            this.ToolTipFieldList.push(\r\n                {\r\n                    label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n                    value: d\r\n                });\r\n\r\n        });\r\n\r\n\r\n        this.SelectedLinkSortVariable = this.commonService.GlobalSettingsModel.SelectedLinkSortVariable;\r\n        //this.commonService.updateThresholdHistogram();\r\n\r\n        console.log('--- getGlobalSettingsData end - last of loadDefaultVisualization in MT');\r\n\r\n    }\r\n\r\n    /**\r\n     * XXXXX move XXXXX\r\n     */\r\n    ngAfterViewInit() {\r\n\r\n        // let factory = this.cfr.resolveComponentFactory(FilesComponent);\r\n        // this.cmpRef = this.targets.first.createComponent(factory);\r\n        // setTimeout(() => {\r\n            this._goldenLayoutHostComponent.initialise();\r\n            \r\n            // headerHeight (tab) is updated so that goldenLayout knows what the css is set to. \r\n            this._goldenLayoutHostComponent['_goldenLayout.layoutConfig.dimensions.headerHeight'] = 36;\r\n            this.addComponent('Files');\r\n\r\n          if (this.auspiceUrlVal) {\r\n            if(this.commonService.debugMode) {\r\n                console.log(\"Trying to open URL\");\r\n            }\r\n            this.DisplayUrlDialog(\"Open\");\r\n            this.continueClicked();\r\n            this.displayUrlDialog = false;\r\n            //this.displayMTDialog = true;\r\n            // this.DisplayMTDialog(\"Open\");\r\n            /**\r\n            this.commonService.openAuspiceUrl(this.auspiceUrlVal)\r\n            .then( (out) => {\r\n            if (out['meta'] && out['tree']) {\r\n              const auspiceFile = { contents: out, name: this.getAuspiceName(this.auspiceUrlVal), extension: 'json'};\r\n              this.commonService.session.files.push(auspiceFile);\r\n              this.prepareFilesLists(auspiceFile);\r\n              console.log(out);\r\n            //   console.log(this.homepageTabs[0].componentRef);\r\n                // this.goldenLayout.componentInstances[0].addToTable(auspiceFile);\r\n              this.homepageTabs[0].componentRef.addToTable(auspiceFile);\r\n              this.homepageTabs[0].isActive = true;\r\n            } else {\r\n              console.log(\"This isn't a valid Auspice JSON file\");\r\n            }\r\n            });\r\n            */\r\n          }\r\n\r\n        // Subscribe to the files view to see when its time to load the visualization\r\n        this.subscription = this.homepageTabs[0].componentRef.instance.LoadDefaultVisualizationEvent.subscribe((v) => {\r\n            // if(this.commonService.debugMode) {\r\n            //     console.log('--- INIT Homepage [0] LoadDefaultloading default: ', this.homepageTabs[0].componentRef.instance, v);\r\n            // }\r\n\r\n            if(this.commonService.debugMode) {\r\n                console.log('init Files Load Default subscription-: ', this.homepageTabs[0].componentRef.instance);\r\n            }\r\n\r\n            this.loadDefaultVisualization(v);\r\n            this.publishLoadNewData();\r\n            this.getGlobalSettingsData();\r\n        });\r\n\r\n        this._goldenLayoutHostComponent.TabRemovedEvent.subscribe((v) => {\r\n            // this.loadSettings();\r\n            this.removeComponent(v);\r\n        });\r\n\r\n        this._goldenLayoutHostComponent.TabChangedEvent.subscribe((v) => {\r\n\r\n            this.commonService.activeTab = v;\r\n\r\n            console.log('tab changed settigns viz: ', v);\r\n\r\n            // If network is not even renered yet, no need ot update these values\r\n            if (!this.networkRendered) {\r\n                return;\r\n            }\r\n            \r\n            if (v === \"Files\" || v === \"Epi Curve\" || v === \"Alignment View\" || v === \"Table\" || v === \"Crosstab\" || v === \"Aggregate\" || v === \"Heatmap\" || v === \"Gantt Chart\" || v === \"Waterfall\" || v == \"Sankey\") {\r\n                this.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n                this.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n            } else {\r\n                if (this.SelectedColorNodesByVariable == 'None') {\r\n                    this.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n                } else {\r\n                    this.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n                    this.GlobalSettingsNodeColorDialogSettings.setVisibility(true);  \r\n                }\r\n                if (this.SelectedColorLinksByVariable == 'None' || v === \"Phylogenetic Tree\" || v == 'Bubble') {\r\n                    this.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n                } else {\r\n                    this.GlobalSettingsLinkColorDialogSettings.setVisibility(true);\r\n                }\r\n            }\r\n            if (this.GlobalSettingsNodeColorDialogSettings.isVisible && this.SelectedNodeColorTableTypesVariable == 'Hide') {\r\n                this.SelectedNodeColorTableTypesVariable = 'Show';\r\n            } else if (!this.GlobalSettingsNodeColorDialogSettings.isVisible && this.SelectedNodeColorTableTypesVariable == 'Show') {\r\n                this.SelectedNodeColorTableTypesVariable = 'Hide';\r\n            }\r\n            if (this.GlobalSettingsLinkColorDialogSettings.isVisible && this.SelectedLinkColorTableTypesVariable == 'Hide') {\r\n                this.SelectedLinkColorTableTypesVariable = 'Show';\r\n            } else if (!this.GlobalSettingsLinkColorDialogSettings.isVisible && this.SelectedLinkColorTableTypesVariable == 'Show') {\r\n                this.SelectedLinkColorTableTypesVariable = 'Hide';\r\n            }\r\n            console.log('linktable vis - false tab changed: ', this.GlobalSettingsLinkColorDialogSettings.isVisible);\r\n\r\n        });\r\n        \r\n        this.store.updatecurrentThresholdStepSize(this.SelectedDistanceMetricVariable);\r\n        console.log('tab changed end: ');\r\n    }\r\n\r\n\r\n    private _removeGlView(view : string) {\r\n        console.log(`Removing ${view}`);\r\n        this._goldenLayoutHostComponent.removeComponent(view);\r\n        this.removeComponent(view);\r\n    }\r\n\r\n\r\n    convertToCSV(objArray) {\r\n\r\n        const tmpArray = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;\r\n        let str = '';\r\n        let headerLoaded = false;\r\n        let line = '';\r\n\r\n\r\n        for (let i = 0; i < tmpArray.length; i++) {\r\n            line = '';\r\n\r\n            if (headerLoaded == false) {\r\n                for (const index1 in tmpArray[i]) {\r\n                    if (line != '') line = line.toString() + ','\r\n\r\n                    line = line.toString() + index1.toString().replace(/\\r/g, '').replace(/\\n/g, '').trim();\r\n                }\r\n\r\n                str = str.toString() + line.toString() + '\\r\\n';\r\n\r\n                headerLoaded = true;\r\n            }\r\n            line = '';\r\n\r\n            for (const index2 in tmpArray[i]) {\r\n                if (line != '') line = line.toString() + ','\r\n\r\n                line = line.toString() + tmpArray[i][index2].toString();\r\n            }\r\n\r\n            if (line != \"\") {\r\n                str = str.toString() + line.toString().replace(/\\r/g, '').replace(/\\r/g, '').trim() + (i == tmpArray.length - 1 ? '' : '\\r\\n');\r\n            }\r\n        }\r\n\r\n        return str;\r\n    }\r\n\r\n\r\n    officialInstance () {\r\n        const prodVal = RegExp(/https:\\/\\/microbetrace.cdc.gov\\/MicrobeTrace/);\r\n        const devVal = RegExp(/https:\\/\\/cdcgov.github.io\\/MicrobeTrace/);\r\n        const localVal = RegExp(/localhost/);\r\n        if (prodVal.test(this.currentUrl) || devVal.test(this.currentUrl) || localVal.test(this.currentUrl)) {\r\n            return true;\r\n        } \r\n    }\r\n\r\n    getHeight() {\r\n        const timelineHeight = this.commonService.session.style.widgets[\"timeline-date-field\"] == 'None' ? 0 : 150\r\n        if (this.officialInstance()) {\r\n            return window.innerHeight - 80 - timelineHeight;\r\n        } else {\r\n            const warningHeight = $('#url-warning-div').height()\r\n            return window.innerHeight - 80 - warningHeight - timelineHeight;\r\n        }\r\n    }\r\n\r\n    showSpinner() {\r\n        this.spinnerDivElement.nativeElement.style.display = \"block\";\r\n        this.spinnerElement.nativeElement.style.display = \"block\";\r\n    }\r\n\r\n    hideSpinner() {\r\n        this.spinnerDivElement.nativeElement.style.display = \"none\";\r\n        this.spinnerElement.nativeElement.style.display = \"none\";\r\n    }\r\n\r\n\r\n    public loadDefaultVisualization(e: string) {\r\n\r\n        console.log('--- Load Default Visualization called - reset layout ', e);\r\n\r\n        e = e.replace(\"_\", \" \");\r\n\r\n        if (e === \"2d network\"){\r\n            e = \"2D Network\";\r\n        }\r\n\r\n        this.resetLayout();\r\n\r\n        // TODO:: see if timeout needed\r\n        // setTimeout(() => {\r\n        if (this.homepageTabs.findIndex(x => x.label == e) === -1) {\r\n            console.log('--- Load Default Visualization end - view click');\r\n            this.Viewclick(e);\r\n        }\r\n        // }, 500);\r\n        \r\n    }\r\n\r\n    public resetLayout() {\r\n    \r\n        this.homepageTabs.forEach( tab => {\r\n            if (tab.label !== \"Files\") {\r\n                console.group('removing: ', tab.label);\r\n                this._removeGlView(tab.label);\r\n            }\r\n        });\r\n\r\n        this.activeTabIndex = 0;\r\n    }\r\n\r\n    public getfileContent(fileList: FileList) {\r\n\r\n        // Loading new data so setting network rendered to false\r\n        this.networkRendered = false;\r\n\r\n        this.GlobalSettingsDialogSettings.setVisibility(false);\r\n        this.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n        console.log('link table vis - false get file content');\r\n\r\n        this.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n\r\n        if(this.commonService.debugMode) {\r\n            console.log('GetFile Ontent Called');\r\n        }\r\n        // TODO: unccomment back when updated\r\n        // this.srv.removeTab(0,1);\r\n        //remove last homepage tab\r\n        // this.homepageTabs.splice(this.homepageTabs.length - 1, 1);\r\n        // console.log('homepagetabs: ', this.homepageTabs);\r\n        // this.goldenLayout.componentInstances[0].processFiles(fileList)\r\n\r\n        this.homepageTabs.map(x => {\r\n            if (x.label === \"Files\") {\r\n                if (x.componentRef != null) {\r\n                    // Unsubscribe from previous files view subscription in get file contents\r\n                    this.subscription.unsubscribe();\r\n                    this.subscription = this.homepageTabs[0].componentRef.instance.LoadDefaultVisualizationEvent.subscribe((v) => {\r\n                        console.log('--- Files loading default from subscription: ');\r\n\r\n                        // this.loadSettings();\r\n                        this.loadDefaultVisualization(v);\r\n                        this.publishLoadNewData();\r\n                    });\r\n\r\n                    // Process files in the files view\r\n                    x.componentRef.instance.processFiles(fileList);\r\n\r\n                    // Populate table\r\n                    x.componentRef.instance.populateTable();\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public getSinglefileContent(file: File) {\r\n\r\n        // this.goldenLayout.componentInstances[0].processFile(file);\r\n\r\n        this.homepageTabs.map(x => {\r\n            if (x.label === \"Files\") {\r\n                if (x.componentRef != null) {\r\n                    x.componentRef.processFile(file);\r\n                    //TODO does this need instance?\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    DisplayHelp() {\r\n        window.open(\"https://github.com/CDCgov/MicrobeTrace/wiki\");\r\n    }\r\n\r\n    DisplayAbout() {\r\n        this.displayAbout = !this.displayAbout;\r\n    }\r\n\r\n    OpenExportDashboard() {\r\n        this.showExportDashboardMenu = true;\r\n        this.updateExportResolution();\r\n    }\r\n\r\n    OpenExportTables() {\r\n        this.showExportTablesMenu = true;\r\n    }\r\n\r\n    ExportDashboard() {\r\n        // Prepare export options\r\n        const exportOptions: ExportOptions = {\r\n            filename: this.ExportDashboardFilename,\r\n            filetype: 'png',\r\n            scale: this.ExportDashboardScale,\r\n            quality: 1,\r\n        };\r\n    \r\n        // Set export options in the service\r\n        this.exportService.setExportOptions(exportOptions);\r\n    \r\n        // Request export\r\n        this.performExport();\r\n\r\n        this.showExportDashboardMenu = false;\r\n        \r\n    }\r\n\r\n    ExportTables() {\r\n        const exportOptions: ExportOptions = {\r\n            filename: this.ExportTablesFilename,\r\n            filetype: this.ExportTablesFileType,\r\n            scale: this.ExportTablesScale,\r\n            quality: 1,\r\n        };\r\n        this.exportService.setExportOptions(exportOptions);\r\n\r\n        let elementsToExport: HTMLTableElement[] = [];\r\n\r\n        if (this.exportTables['node-symbol']) {\r\n            let nodeSymbolTable = $('#nodeSymbolTable')[0]\r\n            elementsToExport.push(nodeSymbolTable as HTMLTableElement) \r\n            console.log(nodeSymbolTable, elementsToExport)\r\n        }\r\n        if (this.exportTables['polygon-color']) {\r\n            let polygonTable = $('#polygon-color-table')[0]\r\n            elementsToExport.push(polygonTable as HTMLTableElement)\r\n        }\r\n        if (elementsToExport.length == 0 && this.exportTables['node-color'] == false && this.exportTables['link-color'] == false) {\r\n            console.log('nothing to export');\r\n             return; \r\n        }\r\n\r\n        if (this.ExportTablesFileType == 'svg') {\r\n            this.performExportSVG(elementsToExport, '', this.exportTables['node-color'], this.exportTables['link-color']);\r\n        } else {\r\n            this.performExport(elementsToExport, this.exportTables['node-color'], this.exportTables['link-color']);\r\n        }\r\n    }\r\n\r\n    updateExportResolution() {\r\n        const visualWrapper = this.visualWrapperRef.nativeElement;\r\n        console.log(visualWrapper)\r\n        let height = visualWrapper.offsetHeight;\r\n        let width = visualWrapper.offsetWidth;\r\n\r\n        this.ExportDashboardResolution.width = Math.floor(width * this.ExportDashboardScale);\r\n        this.ExportDashboardResolution.height = Math.floor(height * this.ExportDashboardScale);\r\n        this.ExportDashboardResolution.summary = `${this.ExportDashboardResolution.width} x ${this.ExportDashboardResolution.height}`;\r\n\r\n    }\r\n\r\n\r\n    clusterSaveClick() {\r\n\r\n    }\r\n\r\n    DisplayStashDialog(saveStash: string) {\r\n        switch (saveStash) {\r\n            case \"Save\": {\r\n\r\n                if (this.selectedSaveFileType == 'style') {\r\n                    const data = JSON.stringify(this.commonService.session.style);\r\n                    const blob = new Blob([data], { type: \"application/json;charset=utf-8\" });\r\n                    saveAs(blob, this.saveFileName+'.style')\r\n                    return;\r\n                }\r\n\r\n                const zip = new JSZip();\r\n\r\n                const lightTabs: HomePageTabItem[] = this.homepageTabs.map(x => {\r\n                    return {\r\n                        label: x.label,\r\n                        tabTitle: x.tabTitle,\r\n                        isActive: x.isActive,\r\n                        componentRef: undefined,\r\n                        templateRef: undefined\r\n                    }\r\n                });\r\n\r\n                if(this.saveByCluster){\r\n                    const clusterNodeList = [];\r\n                    const clusterLinkList = [];\r\n                    const singletonNodeList = [];\r\n                    const dyadNodeList = [];\r\n                    const dyadEdgeList = [];\r\n                    const nodes = this.commonService.session.data.nodes;\r\n                    const links = this.commonService.session.data.links;\r\n\r\n                    this.commonService.session.data.clusters.forEach(cluster => {\r\n\r\n                    const clusterNodes = nodes.filter(node => node.cluster === cluster.id);\r\n\r\n                    const clusterLinks = links.filter(link => link.cluster === cluster.id);\r\n\r\n                    // We have a singleton - all singletons go into one file\r\n                    if(clusterNodes.length == 1){\r\n                        singletonNodeList.push(clusterNodes[0]);\r\n                    // We have a dyad - all dyads go into one file\r\n                    } else if (clusterNodes.length == 2) {\r\n                        // Add both nodes\r\n                        dyadNodeList.push(clusterNodes[0]);\r\n                        dyadNodeList.push(clusterNodes[1]);\r\n                        // Add the single link\r\n                        dyadEdgeList.push(clusterLinks[0]);\r\n                    // We have a cluster\r\n                    } else {\r\n                        // Add array object of nodes with matching cluster\r\n                        clusterNodeList.push(clusterNodes);\r\n\r\n                        // Add array object of links with matching cluster\r\n                        clusterLinkList.push(clusterLinks);\r\n                    }\r\n\r\n                    });\r\n\r\n                    let singletonFolder = null;\r\n                    let dyadFolder = null;\r\n\r\n                    for (let i = 0; i < this.commonService.session.data.clusters.length; i++) {\r\n\r\n                    const currentCluster = this.commonService.session.data.clusters[i];\r\n\r\n                    const cluster = clusterNodeList.filter(nodeList => nodeList[0].cluster == currentCluster.id);\r\n\r\n                    // Check if cluster is in clusterNodesList\r\n                    if(cluster.length > 0){\r\n\r\n                        // Create cluster folder\r\n                        const clusterFolder = zip.folder(\"cluster-\" + cluster[0][0].cluster);\r\n                    \r\n                        // If node and edge lists exists, add them to the current folder\r\n                        const clusterNode = clusterNodeList.filter(NodeList => NodeList[0].cluster == currentCluster.id);\r\n\r\n                        if(clusterNode) {\r\n\r\n                        const blob = new Blob([Papa.unparse(cluster[0])], {type: 'text/csv;charset=utf-8'});\r\n                        clusterFolder.file( \"nodeList_cluster_\" + cluster[0][0].cluster + \".csv\", blob);\r\n\r\n                        // Now get link list of cluster\r\n                        const clusterLink = clusterLinkList.filter(LinkList => LinkList[0].cluster == currentCluster.id);\r\n\r\n                        if(clusterLink) {\r\n                            const blob = new Blob([Papa.unparse(clusterLink[0])], {type: 'text/csv;charset=utf-8'});\r\n                            clusterFolder.file(\"edgeList_cluster_\" + cluster[0][0].cluster + \".csv\", blob);\r\n                        }\r\n                        }\r\n                    }\r\n                    }\r\n\r\n                    if(dyadNodeList.length > 0){\r\n                        dyadFolder = zip.folder(\"dyads\");\r\n                        // Add all dyads in one shot\r\n                        const nodesBlob = new Blob([Papa.unparse(dyadNodeList)], {type: 'text/csv;charset=utf-8'});\r\n                        dyadFolder.file(\"nodeList_cluster.csv\", nodesBlob);\r\n                        const edgesBlob = new Blob([Papa.unparse(dyadEdgeList)], {type: 'text/csv;charset=utf-8'});\r\n                        dyadFolder.file(\"edgeList_cluster.csv\", edgesBlob);\r\n                      }\r\n                \r\n                      if (singletonNodeList.length > 0) {\r\n                        singletonFolder = zip.folder(\"singletons\");\r\n                        // Add all singletons in one shot\r\n                        const blob = new Blob([Papa.unparse(singletonNodeList)], {type: 'text/csv;charset=utf-8'});\r\n                        singletonFolder.file(\"nodeList_cluster.csv\", blob);\r\n                      }\r\n                        \r\n                      const that = this;\r\n                      // generate zip repsetnation in memory\r\n                      zip.generateAsync({type:\"blob\"}).then(function(content) {\r\n                          // see FileSaver.js\r\n                          saveAs(content, `${that.saveFileName}.zip`);\r\n                      });\r\n                } else {\r\n                    this.commonService.session.files.forEach(file => {\r\n                        if (file.extension == 'xlsx' || file.extension == 'xls') {\r\n                            this.convertFileToCSV(file);\r\n                        }\r\n                    });\r\n\r\n                    const stash: StashObjects = {\r\n                        session: this.commonService.session,\r\n                        tabs: lightTabs\r\n                    };\r\n\r\n                    const that = this;\r\n\r\n                    if ($(\"#save-file-compress\").is(\":checked\")) {\r\n                        const zip = new JSZip();\r\n                        zip.file(`${that.saveFileName}.microbetrace`, new Blob([JSON.stringify(stash)], { type: \"application/json;charset=utf-8\" }));\r\n                        zip.generateAsync({\r\n                            type: \"blob\",\r\n                            compression: \"DEFLATE\",\r\n                            compressionOptions: {\r\n                                level: 9\r\n                            }\r\n                        })\r\n                        .then(content => saveAs(content, `${that.saveFileName}.zip`));\r\n                    } else {\r\n                        const blob = new Blob([JSON.stringify(stash)], { type: \"application/json;charset=utf-8\" });\r\n                        saveAs(blob, `${this.saveFileName}.microbetrace`);\r\n                    }\r\n    \r\n                   \r\n                }\r\n\r\n\r\n                \r\n                break;\r\n            }\r\n            case \"Cancel\": {\r\n\r\n                break;\r\n            }\r\n        }\r\n        this.displayStashDialog = !this.displayStashDialog;\r\n    }\r\n\r\n    /**\r\n     * Converts an excel file array buffer to a CSV string use when exporting\r\n     * @param file excel file in commonService.session.files\r\n     */\r\n    convertFileToCSV(file) { \r\n        if (file.extension == 'xlsx' || file.extension == 'xls') {\r\n\r\n            let x = new Uint8Array(file.contents)\r\n            let workbook = XLSX.read(x, { type: 'array' });\r\n            let csvString = XLSX.utils.sheet_to_csv(workbook.Sheets[workbook.SheetNames[0]]);\r\n\r\n            file.extension = 'csv';\r\n            file.name = file.name.replace('.xlsx', '.csv').replace('.xls', '.csv');\r\n            file.contents = csvString;\r\n            file.type = \"text/csv\";\r\n        }\r\n    }\r\n\r\n    getAuspiceName(url: string) {\r\n      const split = url.split('=');\r\n      console.log(split);\r\n      const nameParts = split.length>1 ? split[1].split('/') : split[0].split('/');\r\n      return nameParts.join('_');\r\n      return 'auspice_import_via_url';\r\n    }\r\n\r\n    DisplayUrlDialog(saveUrl: string) {\r\n      switch (saveUrl) {\r\n        case 'Open': {\r\n          const auspiceUrl = this.auspiceUrlVal;\r\n          this.commonService.openAuspiceUrl(auspiceUrl)\r\n          .then( (out) => {\r\n            if (out['meta'] && out['tree']) {\r\n              console.log(this);\r\n              this.homepageTabs[0].componentRef.instance.removeAllFiles();\r\n              this.commonService.clearData();\r\n              const auspiceFile = { contents: out, name: this.getAuspiceName(auspiceUrl), extension: 'json'};\r\n              this.commonService.session.files.push(auspiceFile);\r\n              this.homepageTabs[0].componentRef.instance.addToTable(auspiceFile);\r\n            //   console.log(this.homepageTabs[0].componentRef);\r\n                // this.goldenLayout.componentInstances[0].addToTable(auspiceFile);\r\n              //this.homepageTabs[0].componentRef.addToTable(auspiceFile);\r\n              this.homepageTabs[0].isActive = true;\r\n              console.log(\"Trying to launch\");\r\n              this.homepageTabs[0].componentRef.instance.launchClick();\r\n              $('#overlay').fadeOut();\r\n              $('.ui-tabview-nav').fadeTo(\"slow\", 1);\r\n              $('.m-portlet').fadeTo(\"slow\", 1);\r\n            }\r\n          });\r\n          break;\r\n        }\r\n        case 'Cancel': {\r\n            break;\r\n        }\r\n      }\r\n      this.displayUrlDialog = !this.displayUrlDialog;\r\n      if (this.displayUrlDialog){\r\n        console.log(this.displayUrlDialog);\r\n        this.continueClicked();\r\n      }\r\n    }\r\n\r\n    DisplayMTDialog(saveUrl: string) {\r\n      switch (saveUrl) {\r\n        case 'Open': {\r\n          //const auspiceUrl = this.auspiceUrlVal;\r\n          break;\r\n        }\r\n        case 'Cancel': {\r\n            break;\r\n        }\r\n      }\r\n      this.displayMTDialog = !this.displayMTDialog;\r\n    }\r\n\r\n    ResetTabs() {\r\n        const home = this.homepageTabs.find(x => x.label === \"Files\");\r\n        home.isActive = true;\r\n        this.homepageTabs = this.homepageTabs.filter(x => home === x);\r\n        this.homepageTabs = [home];\r\n\r\n        this.commonService.activeTab = 'Files';\r\n        this.activeTabIndex = 0;\r\n    }\r\n\r\n    // Commonet back when implementing stash\r\n\r\n    NewSession() {\r\n\r\n        // Emit new session event for other components to reset/destroy\r\n        this.commonService.onNewSession();\r\n\r\n        this.ResetTabs();\r\n        this.onReloadScreen();\r\n    }\r\n\r\n\r\n    FileClick(actionName: any) {\r\n        switch (actionName) {\r\n            case \"New Session\": {\r\n                this.NewSession();\r\n                break;\r\n            }\r\n            case \"Stash Session\": {\r\n                this.stashSession();\r\n                break;\r\n            }\r\n            case \"Recall Session\": {\r\n                // this.DisplayRecallStashDialog(\"Cancel\");\r\n                this.displayRecallStashDialog = true;\r\n                this.updateTable();\r\n                break;\r\n            }\r\n            case \"Save Session\": {\r\n                this.DisplayStashDialog(\"Cancel\");\r\n                break;\r\n            }\r\n            case \"Open URL\": {\r\n              this.DisplayUrlDialog(\"Cancel\");\r\n              break;\r\n            }\r\n            case \"Add Data\": {\r\n                \r\n                // If files tab exists, go to it\r\n                if(this.homepageTabs.length > 1 && this.homepageTabs.findIndex(x => x.label === \"Files\") !== -1) {\r\n                    this._goldenLayoutHostComponent.focusComponent(\"Files\");\r\n                } else {\r\n                    this.addComponent('Files');\r\n                }\r\n\r\n                break;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    SettingsClick(actionName: any) {\r\n        switch (actionName) {\r\n            case \"Global Settings\": {\r\n                console.log('snps settings: ', this.SelectedDistanceMetricVariable);\r\n                this.DisplayGlobalSettingsDialog();\r\n                break;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    stashSession() {\r\n        console.log('sesssion: ', this.commonService.session);\r\n        this.commonService.localStorageService.setItem(\r\n            \"stash-\" + Date.now() + \"-\" + $(\"#stash-name\").val(),\r\n            JSON.stringify(this.commonService.session)\r\n          )\r\n    }\r\n\r\n    public table;\r\n    \r\n    updateTable() {\r\n        \r\n        this.table = new Tabulator(this.stashes.nativeElement, {\r\n            height: \"100%\",\r\n            layout: \"fitData\",\r\n            selectable: 1,\r\n            columns: [\r\n              { title: \"Name\", field: \"name\" },\r\n              { title: \"Date\", field: \"date\", align: \"right\", sorter: \"date\" }\r\n            ]\r\n          });\r\n        const rows = [];\r\n        this.commonService.localStorageService.keys().then(keys => {\r\n          keys.forEach(k => {\r\n            if (k.substring(0, 5) !== \"stash\") return;\r\n            rows.push({\r\n              fullname: k,\r\n              name: k.substring(20),\r\n              date: new Date(parseFloat(k.substring(6, 19))).toISOString()\r\n            });\r\n          });\r\n          this.table.setData(rows);\r\n        });\r\n      }\r\n\r\n    // $(\"#recall-load-stash\").on(\"click\", () => {\r\n    //     let key = table.getSelectedData()[0].fullname;\r\n    //     localforage.getItem(key).then(json => {\r\n    //       MT.applySession(JSON.parse(json));\r\n    //       $(\"#session-recall-modal\").modal(\"hide\");\r\n    //     });\r\n    //   });\r\n\r\n    Viewclick(viewName: string) {\r\n        if(this.commonService.debugMode) {\r\n            console.log('--- viewClick: ', viewName);\r\n            console.log(this.commonService.session.style.widgets['link-threshold']);\r\n            console.log('homepage tabs: ' , this.homepageTabs);\r\n            console.log('--- polygon color show11: ', this.commonService.session.style.widgets['polygons-color-show']);\r\n\r\n        }\r\n       \r\n\r\n        if (viewName == \"2d network\") {\r\n            viewName = \"2D Network\";\r\n        }\r\n\r\n        const tabNdx = this.homepageTabs.findIndex(x => x.label == viewName);\r\n\r\n        /*/\r\n         * Don't allow duplicate tabs to get added.\r\n        /*/\r\n        if (tabNdx == -1) {\r\n\r\n            console.log('--- viewClick new view - add component');\r\n\r\n            this.activeTabIndex = this.activeTabIndex + 1;\r\n            this.addComponent(viewName);\r\n\r\n        }\r\n        else {\r\n            \r\n            const container = this._goldenLayoutHostComponent.focusComponent(viewName);\r\n\r\n            const instance = this._goldenLayoutHostComponent.getComponentRef(container).instance as any;\r\n\r\n            console.log('--- viewClick exisitng view - load settings');\r\n\r\n             //Load global settings changes if changed in another view\r\n            if (instance.loadSettings) {        \r\n                instance.loadSettings();\r\n                if (this.metric === 'snps'){\r\n                    this.commonService.session.style.widgets['default-distance-metric'] = 'snps';\r\n                    this.commonService.session.style.widgets['link-threshold'] = parseInt(this.threshold);\r\n                    this.onLinkThresholdChanged();\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    DisplayGlobalSettingsDialog(activeTab = \"Styling\") {\r\n\r\n        this.getGlobalSettingsData();\r\n        // TODO: May need to refacor this\r\n        this.updateGlobalSettingsModel();\r\n\r\n\r\n        this.GlobalSettingsDialogSettings.setVisibility(true);\r\n        this.cachedGlobalSettingsVisibility = this.GlobalSettingsDialogSettings.isVisible;\r\n\r\n        this.commonService.updateThresholdHistogram(this.linkThresholdSparkline.nativeElement);\r\n\r\n        this.globalSettingsTab.tabs[activeTab === \"Styling\" ? 1 : 0].active = true;\r\n    }\r\n\r\n\r\n    WindowClick(actionName: any) {\r\n        switch (actionName) {\r\n            case \"Fullscreen\": \r\n\r\n                if (this.elem.requestFullscreen) {\r\n                    this.elem.requestFullscreen();\r\n                    } else if (this.elem.mozRequestFullScreen) {\r\n                    /* Firefox */\r\n                    this.elem.mozRequestFullScreen();\r\n                    } else if (this.elem.webkitRequestFullscreen) {\r\n                    /* Chrome, Safari and Opera */\r\n                    this.elem.webkitRequestFullscreen();\r\n                    } else if (this.elem.msRequestFullscreen) {\r\n                    /* IE/Edge */\r\n                    this.elem.msRequestFullscreen();\r\n                    }\r\n                \r\n                break;\r\n\r\n            case \"Reload Screen\": {\r\n\r\n                this.onReloadScreen();\r\n\r\n                window.location.reload()\r\n\r\n                \r\n                // this.homepageTabs.forEach(tab => {\r\n                //     if (tab.componentRef &&\r\n                //         tab.componentRef.instance.openRefreshScreen) {\r\n                //         tab.componentRef.instance.openRefreshScreen();\r\n                //     }\r\n                // })\r\n                break;\r\n            }\r\n          case \"Settings\": {\r\n            this.DisplayGlobalSettingsDialog(\"Filtering\");\r\n          }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Opens MicroTrace Classic in a new tab and retains the Auspice URL if it exists\r\n     */\r\n    openMT_Classic() {\r\n        if (this.auspiceUrlVal) {\r\n            let mt_url = \"https://microbetrace.cdc.gov/MicrobeTraceClassic/?url=\" + this.auspiceUrlVal.replace(/\\//g, \"%2F\");\r\n            window.open(mt_url, \"_blank\")\r\n        } else {\r\n            window.open(\"https://microbetrace.cdc.gov/MicrobeTraceClassic/\", \"_blank\")\r\n        }\r\n    }\r\n\r\n    HelpClick(actionName: any) {\r\n        switch (actionName) {\r\n            case \"Help\": {\r\n                this.DisplayHelp();\r\n                break;\r\n            }\r\n            case \"Report\": {\r\n                this.DisplayHelp();\r\n                break;\r\n            }\r\n            case \"About\": {\r\n                this.DisplayAbout();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    setActiveTabProperties(tabNdx: number = -1) {\r\n\r\n\r\n        if (tabNdx === -1) tabNdx = this.homepageTabs.findIndex(x => x.isActive == true);\r\n\r\n        const activeComponentName: string = this.homepageTabs[tabNdx].label;\r\n\r\n\r\n        this.homepageTabs.forEach((item: HomePageTabItem) => {\r\n            item.isActive = item.label === activeComponentName;\r\n        });\r\n\r\n        // this.activeTabIndex = tabNdx;\r\n        if(this.commonService.debugMode) {\r\n            console.log('-- set active tab tab switched is: ', tabNdx);\r\n            console.log('global l: ', this.GlobalSettingsLinkColorDialogSettings);\r\n            console.log('global n: ', this.GlobalSettingsNodeColorDialogSettings);\r\n       }\r\n       \r\n\r\n        switch (activeComponentName) {\r\n\r\n            case \"Files\": {\r\n\r\n                this.showSettings = true;\r\n                this.showExport = false;\r\n                this.showCenter = false;\r\n                this.showPinAllNodes = false;\r\n                this.showRefresh = false;\r\n                this.showButtonGroup = false;\r\n                this.showSorting = false;\r\n\r\n                this.cachedGlobalSettingsVisibility = this.GlobalSettingsDialogSettings.isVisible;\r\n                this.cachedGlobalSettingsLinkColorVisibility = this.GlobalSettingsLinkColorDialogSettings.isVisible;\r\n                this.cachedGlobalSettingsNodeColorVisibility = this.GlobalSettingsNodeColorDialogSettings.isVisible;\r\n                // this.GlobalSettingsDialogSettings.setVisibility(false);\r\n                // this.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n                // this.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n\r\n                break;\r\n            }\r\n            case \"2D Network\": {\r\n\r\n                this.showSettings = true;\r\n                this.showExport = true;\r\n                this.showCenter = true;\r\n                this.showPinAllNodes = true;\r\n                this.showRefresh = false;\r\n                this.showButtonGroup = false;\r\n                this.showSorting = false;\r\n\r\n                break;\r\n            }\r\n            case \"Table\": {\r\n\r\n                this.showSettings = false;\r\n                this.showExport = true;\r\n                this.showCenter = false;\r\n                this.showPinAllNodes = false;\r\n                this.showRefresh = false;\r\n                this.showButtonGroup = true;\r\n                this.showSorting = true;\r\n\r\n                // this.GlobalSettingsDialogSettings.setVisibility(false);\r\n                this.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n                this.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n\r\n                break;\r\n            }\r\n            case \"Map\": {\r\n\r\n                this.showSettings = true;\r\n                this.showExport = true;\r\n                this.showCenter = true;\r\n                this.showPinAllNodes = false;\r\n                this.showRefresh = false;\r\n                this.showButtonGroup = false;\r\n                this.showSorting = false;\r\n\r\n                break;\r\n            }\r\n            case \"Phylogenetic Tree\": {\r\n\r\n                this.showSettings = true;\r\n                this.showExport = true;\r\n                this.showCenter = true;\r\n                this.showPinAllNodes = false;\r\n                this.showRefresh = false;\r\n                this.showButtonGroup = false;\r\n                this.showSorting = false;\r\n\r\n                // this.GlobalSettingsDialogSettings.setVisibility(false);\r\n                this.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n                this.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n\r\n                break;\r\n            }\r\n        }\r\n\r\n\r\n        if (!this.homepageTabs[tabNdx].componentRef) {\r\n            setTimeout(() => {\r\n\r\n                tabNdx = this.homepageTabs.findIndex(x => x.label == activeComponentName);\r\n                if (this.homepageTabs[tabNdx].componentRef.instance.DisplayGlobalSettingsDialogEvent) {\r\n                    this.homepageTabs[tabNdx].componentRef.instance.DisplayGlobalSettingsDialogEvent.subscribe((v) => { this.DisplayGlobalSettingsDialog(v) });\r\n                }\r\n\r\n            });\r\n        } else {\r\n          \r\n            if (this.homepageTabs[tabNdx].componentRef.instance.DisplayGlobalSettingsDialogEvent) {\r\n                this.homepageTabs[tabNdx].componentRef.instance.DisplayGlobalSettingsDialogEvent.subscribe((v) => { this.DisplayGlobalSettingsDialog(v) });\r\n            }\r\n        }\r\n\r\n\r\n        this.previousTab = activeComponentName;\r\n    }\r\n\r\n    addTab(tabLabel: any, tabTitle: any, tabPosition: any, componentRef: any, activate: boolean = true): void {\r\n\r\n        console.log('--- addTab called');\r\n        /*/\r\n         * Ensure that all tabs are not selected before we set the next new tab.\r\n         * This will ensure that the newly created component appears on the currently selected tab, \r\n         * which will be the newly added tab array element.\r\n        /*/\r\n        this.homepageTabs.map(x => {\r\n\r\n            x.isActive = false;\r\n        });\r\n\r\n        // this.tabView.tabs.map(x => {\r\n\r\n        //     x.selected = false;\r\n        // });\r\n\r\n        this.activeTabIndex = tabPosition;\r\n        this.homepageTabs.splice(tabPosition, 0, {\r\n            label: tabLabel,\r\n            templateRef: null,\r\n            tabTitle: tabTitle,\r\n            isActive: activate,\r\n            componentRef: componentRef\r\n            // componentRef: this.goldenLayout.componentInstances[this.goldenLayout.componentInstances.length - 1]\r\n        });\r\n\r\n        \r\n        console.log('--- addTab end: ', this.homepageTabs, componentRef);\r\n\r\n    }\r\n\r\n    clearTable(tableId) {\r\n        const linkColorTable = $(tableId).empty();\r\n    }\r\n\r\n    onReloadScreen() {\r\n        this.commonService.session.style.widgets = this.commonService.defaultWidgets();\r\n        this.loadFilterSettings();\r\n    }\r\n\r\n    loadFilterSettings() {\r\n\r\n        this.store.setSettingsLoaded(false);\r\n\r\n        this.commonService.session.network.settingsLoaded = false;\r\n        this.getGlobalSettingsData();\r\n\r\n        //Filtering|Prune With\r\n        this.SelectedPruneWithTypesVariable = this.commonService.session.style.widgets[\"link-show-nn\"] ? \"Nearest Neighbor\" : \"None\";\r\n        // this.onPruneWithTypesChanged();\r\n\r\n        //Filtering|Minimum Cluster Size\r\n        this.SelectedClusterMinimumSizeVariable = this.commonService.session.style.widgets[\"cluster-minimum-size\"];\r\n        this.onMinimumClusterSizeChanged(true);\r\n        \r\n        //Filtering|Filter Links on\r\n        this.SelectedLinkSortVariable = this.commonService.session.style.widgets[\"link-sort-variable\"];\r\n        this.onLinkSortChanged(true);\r\n\r\n\r\n        //Filtering|Filtering Threshold\r\n        console.log('--- loadSettings link-threshold changed: ', this.commonService.session.style.widgets[\"link-threshold\"]);\r\n        this.SelectedLinkThresholdVariable = this.commonService.session.style.widgets[\"link-threshold\"];\r\n        this.onLinkThresholdChanged();\r\n\r\n    }\r\n\r\n    loadUISettings() {\r\n\r\n        this.ShowGlobalSettingsLinkColorTable = false;\r\n        this.ShowGlobalSettingsNodeColorTable = false;\r\n\r\n        // console.log('xy link color table: ', linkColorTable);\r\n        console.log('xy link color table 1.5: ', $('#link-color-table'));\r\n        //Styling|Color Nodes By\r\n         this.SelectedColorNodesByVariable = this.commonService.session.style.widgets[\"node-color-variable\"];\r\n         this.onColorNodesByChanged(false);\r\n \r\n         console.log('oncolorNodesByChanged 2 - selected color nodes by variable: ', this.SelectedColorNodesByVariable);\r\n\r\n         //Styling|Nodes\r\n         this.SelectedNodeColorVariable = this.commonService.session.style.widgets[\"node-color\"];\r\n         this.onNodeColorChanged(true);\r\n         \r\n         console.log('xy link color table 2: ', $('#link-color-table'));\r\n \r\n \r\n         //Styling|Color Links By\r\n         if (this.commonService.session.style.widgets['link-color-variable'] === \"None\") {\r\n             this.commonService.session.style.widgets['link-color-variable'] = \"origin\";\r\n         }\r\n\r\n        //  console.log('1this.ShowGlobalSettingsLinkColorTable: ', this.ShowGlobalSettingsLinkColorTable); \r\n\r\n \r\n         this.SelectedColorLinksByVariable = this.commonService.session.style.widgets['link-color-variable'];\r\n         console.log('oncolorLinksByChanged - loadUISettings - selected color links by variable: ', this.SelectedColorLinksByVariable);\r\n         console.log('link colorTable - loadui1: ', $('#link-color-table'));\r\n\r\n         this.onColorLinksByChanged(true);\r\n \r\n         console.log('xy link colorTable 3 - loadui2: ', $('#link-color-table'));\r\n\r\n          //Styling|Links\r\n          this.SelectedLinkColorVariable = this.commonService.session.style.widgets[\"link-color\"];\r\n          this.onLinkColorChanged(true);\r\n\r\n         //Styling|Selected\r\n         this.SelectedColorVariable = this.commonService.session.style.widgets['selected-color'];\r\n \r\n         //Styling|Background\r\n         this.SelectedBackgroundColorVariable = this.commonService.session.style.widgets['background-color'];\r\n         this.onBackgroundChanged();\r\n  \r\n        //  console.log('xy link color table 3: ', linkColorTable);\r\n\r\n        //  console.log('this.ShowGlobalSettingsLinkColorTable: ', this.ShowGlobalSettingsLinkColorTable); \r\n        //  console.log('2 this.ShowGlobalSettingsLinkColorTable: ', this.GlobalSettingsLinkColorDialogSettings.isVisible); \r\n\r\n         this.store.setSettingsLoaded(true);\r\n\r\n         console.log('link colorTable - loadui3: ', $('#link-color-table'));\r\n\r\n \r\n         this.updateGlobalSettingsModel();\r\n\r\n    }\r\n\r\n    publishLoadNewData() {\r\n\r\n        console.log('--- publishLoadNewData called');\r\n        // this.goldenLayout.componentInstances[1].onLoadNewData();\r\n        this.homepageTabs.forEach(tab => {\r\n            // componentRef.instance.onLoadNewData ?\r\n            if (tab.componentRef &&\r\n                tab.componentRef.onLoadNewData) {\r\n                tab.componentRef.onLoadNewData();\r\n            }\r\n        })\r\n    }\r\n\r\n    publishFilterDataChange() {\r\n\r\n        // this.goldenLayout.componentInstances[1].onFilterDataChange();\r\n        this.homepageTabs.forEach(tab => {\r\n            if (tab.componentRef &&\r\n                tab.componentRef.instance.onFilterDataChange) {\r\n                tab.componentRef.instance.onFilterDataChange();\r\n            }\r\n        })\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.NewSession();\r\n    }\r\n\r\n    getCurrentThresholdStepSize() {\r\n        return this.store.currentThresholdStepSizeValue;\r\n    }\r\n\r\n    /**\r\n     * Updates default-distance-metric widget and this.SelectedLinkThresholdVariable (7 for snps, 0.015 for TN93).\r\n     * Calls onLinkThresholdChanged to updated links\r\n     */\r\n  onDistanceMetricChanged = () => {\r\n    if(!this.SelectedDistanceMetricVariable) this.SelectedDistanceMetricVariable = this.commonService.session.style.widgets['default-distance-metric'];\r\n    this.store.updatecurrentThresholdStepSize(this.SelectedDistanceMetricVariable);\r\n    if (this.SelectedDistanceMetricVariable.toLowerCase() === 'snps') {\r\n      $('#default-distance-threshold')\r\n        .attr('step', 1)\r\n        .val(7)\r\n        .trigger('change');\r\n      this.commonService.session.style.widgets['default-distance-metric'] = 'snps';\r\n      this.SelectedLinkThresholdVariable = '7';\r\n      this.onLinkThresholdChanged();\r\n    } else {\r\n      $('#default-distance-threshold')\r\n        .attr('step', 0.001)\r\n        .val(0.015)\r\n        .trigger('change');\r\n      this.commonService.session.style.widgets['default-distance-metric'] = 'tn93';\r\n      this.SelectedLinkThresholdVariable = '0.015';\r\n      this.onLinkThresholdChanged();\r\n    }\r\n  }\r\n}\r\n\r\nclass BpaaSPayloadWrapper {\r\n    public BlockHashCode: string | undefined = undefined;\r\n    public BlockName: string | undefined = undefined;\r\n    public BpaaSPayload: BpaaSPayloadWrapperData | undefined = undefined;\r\n    public FuzzyMatchRatios: string | undefined = undefined;\r\n\r\n}\r\n\r\nclass BpaaSPayloadWrapperData {\r\n    public Type: string | undefined = undefined;\r\n    public SubType: 'Edgelist' | 'Nodelist' | undefined = undefined;\r\n    public JurisdictionKey: number | undefined = undefined;\r\n    public JurisdictionName: string | undefined = undefined;\r\n    public Jurisdiction: string | undefined = undefined;\r\n    public FileName: string | undefined = undefined;\r\n    public Data: any[] = [];\r\n}\r\n","import { AfterViewInit, ChangeDetectorRef, Component, ElementRef, Inject, Injector, OnDestroy, OnInit, Renderer2, ViewChild } from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { CommonService } from '@app/contactTraceCommonServices/common.service';\r\nimport { MicobeTraceNextPluginEvents } from '@app/helperClasses/interfaces';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport { OrderList } from 'primeng/orderlist';\r\nimport { MicrobeTraceNextVisuals } from '@app/microbe-trace-next-plugin-visuals';\r\n\r\nimport * as Papa from 'papaparse';\r\nimport JSZip from 'jszip';\r\nimport * as saveAs from 'file-saver';\r\nimport * as XLSX from 'xlsx';\r\n//import pdfMake from 'pdfmake/build/pdfmake.js';\r\n//import pdfFonts from 'pdfmake/build/vfs_fonts.js';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\nimport { CommonStoreService } from '@app/contactTraceCommonServices/common-store.services';\r\nimport { Subject, takeUntil } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'AggregateComponent',\r\n  templateUrl: './aggregate.component.html',\r\n  styleUrls: ['./aggregate.component.scss'],\r\n})\r\nexport class AggregateComponent extends BaseComponentDirective implements OnInit, AfterViewInit, MicobeTraceNextPluginEvents, OnDestroy {\r\n\r\n  @ViewChild('orderList') orderList: OrderList;\r\n  \r\n  visuals: MicrobeTraceNextVisuals;\r\n  widgets: any;\r\n\r\n  SelectedDataTables: TableData[] = [];\r\n  fieldOptions =  [\r\n    {\r\n        label: 'Node',\r\n        value: 'nodes',\r\n        items: []\r\n    },\r\n    {\r\n        label: 'Link',\r\n        value: 'links',\r\n        items: []\r\n    },\r\n    {\r\n        label: 'Cluster',\r\n        value: 'clusters',\r\n        items: []\r\n    }\r\n];\r\n\r\n  SelectedDataFields = ['Node-cluster']\r\n  \r\n  viewActive = true;\r\n  settingsOpen = true;\r\n  exportOpen = false;\r\n  SelectedAggregateExportFilename = '';\r\n  AggregateExportFileTypeList = [\r\n    { label: 'xlsx', value: 'xlsx' },\r\n    { label: 'csv.zip', value: 'csv.zip' },\r\n    { label: 'json', value: 'json'},\r\n    { label: 'pdf', value: 'pdf'}\r\n  ]\r\n  SelectedAggregateExportFileType = 'pdf';\r\n\r\n  viewHeight: number;\r\n  tableStyle;\r\n\r\n  private destroy$ = new Subject<void>();\r\n\r\n  constructor(injector: Injector,\r\n    private renderer: Renderer2,\r\n    private elem: ElementRef,\r\n    private eventManager: EventManager,\r\n    public commonService: CommonService,\r\n    @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer, \r\n    elRef: ElementRef,\r\n    private cdref: ChangeDetectorRef,\r\n    private store: CommonStoreService,\r\n    private gtmService: GoogleTagManagerService) {\r\n\r\n      super(elRef.nativeElement);\r\n\r\n      this.visuals = commonService.visuals;\r\n      this.visuals.aggregate = this;\r\n      this.widgets = this.commonService.session.style.widgets;\r\n\r\n      this.updateFieldOptions();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.gtmService.pushTag({\r\n            event: \"page_view\",\r\n            page_location: \"/aggregate\",\r\n            page_title: \"Aggregate View\"\r\n        });\r\n\r\n    this.SelectedDataFields.forEach((field, index) => {\r\n      this.SelectedDataTables.push({label: '', data: [], tableColumns: []})\r\n      this.updateTable(index);\r\n    })\r\n\r\n    this.updateViewHeight();\r\n    this.updateTableColWidth();\r\n\r\n    this.container.on('resize', () => { \r\n      this.updateViewHeight();\r\n      this.updateTableColWidth();\r\n    })\r\n    this.container.on('hide', () => { \r\n      this.viewActive = false; \r\n      this.cdref.detectChanges();\r\n    })\r\n    this.container.on('show', () => { \r\n      this.viewActive = true; \r\n      this.cdref.detectChanges();\r\n    })\r\n\r\n    this.store.clusterUpdate$.pipe(takeUntil(this.destroy$)).subscribe(() => {\r\n      let tableUpdated = false;\r\n      this.SelectedDataFields.forEach((field, i) => {\r\n        if (field.split('-')[1] == 'cluster' || field.split('-')[0] == 'Cluster') {\r\n          this.updateTable(i);\r\n          tableUpdated = true;\r\n        }\r\n      })\r\n      if (tableUpdated) { \r\n        this.cdref.detectChanges(); \r\n        this.updateTableColWidth(); \r\n      }\r\n    })\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.updateTableColWidth()\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  updateTable(i) {\r\n    let fullField = this.SelectedDataFields[i].split('-')\r\n    let dataset = fullField[0];\r\n    let field = fullField.slice(1).join('-');\r\n\r\n    let tableColumns;\r\n    let total = 0;\r\n    let rawdata;\r\n\r\n    if (dataset == 'Node') {\r\n      rawdata = this.commonService.getVisibleNodes();\r\n      tableColumns = [{field:'groupName', header: this.commonService.capitalize(field)}, {field:'count', header:'Number of Nodes'}, {field:'percent', header:'Percent of Total Nodes'}];\r\n    } else if (dataset == 'Link') {\r\n      rawdata = this.commonService.getVisibleLinks();\r\n      tableColumns = [{field:'groupName', header: this.commonService.capitalize(field)}, {field:'count', header:'Number of Links'}, {field:'percent', header:'Percent of Total Links'}];\r\n    } else {\r\n      rawdata = this.commonService.getVisibleClusters();\r\n      tableColumns = [{field:'groupName', header: this.commonService.capitalize(field)}, {field:'count', header:'Number of Clusters'}, {field:'percent', header:'Percent of Total Clusters'}];\r\n    }   \r\n    \r\n    // populate count array [{}, {}, ...] where each item/object is a row\r\n    var data = [];\r\n\r\n    rawdata.forEach(row => {\r\n      var match = data.find(arow => arow.groupName == row[field]);\r\n      if (match) {\r\n        match['count']++;\r\n      } else {\r\n        data.push({ groupName: row[field], count: 1 });\r\n      }\r\n      total++;\r\n    });\r\n\r\n    data.forEach(row => {\r\n      row['percent'] = (row['count']*100/total)\r\n      if (row.groupName == null) {\r\n        row.groupName = 'null'\r\n      }\r\n    })\r\n    \r\n    this.SelectedDataTables[i] = {\r\n      label: dataset+'-'+field,\r\n      data: data,\r\n      tableColumns: tableColumns,\r\n    };\r\n  }\r\n\r\n  updateViewHeight() {\r\n    this.viewHeight = $(\".aggregate-wrapper\").parent().height()-70\r\n  }\r\n\r\n  updateTableColWidth() {\r\n    let width = ($('#tablesContainer').width() - 40);\r\n    width = width > 700 ? width*.7 : width;\r\n    this.tableStyle = {\r\n        'width' : width+'px',\r\n        'display': 'block'\r\n    }\r\n    $('#tablesContainer th').width(width/3);\r\n  }\r\n\r\n\r\n  addTable() {\r\n    this.SelectedDataFields = [...this.SelectedDataFields, 'Node-selected']\r\n    this.SelectedDataTables.push({label: 'Node-selected', data: [], tableColumns: []})\r\n\r\n    this.updateTable(this.SelectedDataTables.length-1)\r\n    setTimeout(() => this.updateTableColWidth(), 0);\r\n  }\r\n  deleteTable(i) {\r\n    console.log(`deleting table ${i}`);\r\n    this.SelectedDataFields = this.SelectedDataFields.filter((_, loc) => loc != i)\r\n    this.SelectedDataTables = this.SelectedDataTables.filter((_, loc) => loc != i)\r\n  }\r\n\r\n  updateFieldOptions() {\r\n    this.commonService.session.data['nodeFields'].map((d) => {\r\n      if (['seq', 'origin', '_diff', '_ambiguity', 'index', '_id'].includes(d)) return;\r\n      this.fieldOptions[0]['items'].push({\r\n        short_label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n        label : `Node-${this.commonService.capitalize(d.replace(\"_\", \"\"))}`,\r\n        value: `Node-${d}`\r\n      });\r\n    })\r\n\r\n    this.commonService.session.data['linkFields'].map((d) => {\r\n      if (['index', 'origin', 'nearest neighbor', 'nn'].includes(d)) return;\r\n      this.fieldOptions[1]['items'].push({\r\n        short_label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n        label : `Link-${this.commonService.capitalize(d.replace(\"_\", \"\"))}`,\r\n        value: `Link-${d}`\r\n      });\r\n    })\r\n\r\n    this.commonService.session.data['clusterFields'].map((d) => {\r\n      this.fieldOptions[2]['items'].push({\r\n        short_label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n        label : `Cluster-${this.commonService.capitalize(d.replace(\"_\", \"\"))}`,\r\n        value: `Cluster-${d}`\r\n      });\r\n    })\r\n\r\n  }\r\n\r\n  formatTableTitle(inputString) {\r\n    let fullField = inputString.split('-')\r\n    //let datasetName = this.commonService.capitalize(fullField[0]);\r\n    let colGroupName = this.commonService.capitalize(fullField.slice(1).join('-'));\r\n    return colGroupName;\r\n  }\r\n\r\n  updateNodeColors() {}\r\n  updateLinkColor() {}\r\n  updateVisualization() {}\r\n  applyStyleFileSettings() {}\r\n  openRefreshScreen() {}\r\n  onRecallSession() {}\r\n  onLoadNewData() {}\r\n  onFilterDataChange() {}\r\n\r\n  openSettings() {\r\n    console.log(\"open settings pushed\");\r\n    this.settingsOpen = true;\r\n  }\r\n\r\n  openExport() {\r\n    console.log(\"open export pushed\")\r\n    this.exportOpen = true;\r\n  }\r\n\r\n  async exportVisualization() {\r\n    console.log(this.SelectedAggregateExportFilename + '.' + this.SelectedAggregateExportFileType);\r\n    if (this.SelectedAggregateExportFileType == 'csv.zip') {\r\n      let zip = new JSZip();\r\n      this.SelectedDataTables.forEach(table => {\r\n        let tmpData = table.data.map(item => {\r\n          let colGroupName = table.label.split('-').slice(1).join('-')\r\n          return { [colGroupName]: item.groupName, 'count': item.count, 'percent': item.percent+'%'}\r\n        })\r\n        \r\n        zip.file(table.label + '.csv', Papa.unparse(tmpData))\r\n        console.log(Papa.unparse(tmpData));\r\n      })\r\n      zip.generateAsync({type: 'blob'}).then(content => saveAs(content, this.SelectedAggregateExportFilename + '.zip'))\r\n    } else if (this.SelectedAggregateExportFileType == 'xlsx') {\r\n      let wb = XLSX.utils.book_new();\r\n      this.SelectedDataTables.forEach(table => {\r\n        let tmpData = table.data.map(item => {\r\n          let colGroupName = table.label.split('-').slice(1).join('-');\r\n          return { [colGroupName]: item.groupName, 'count': item.count, 'percent': item.percent+'%'}\r\n        })\r\n\r\n        let ws = XLSX.utils.json_to_sheet(tmpData);\r\n        XLSX.utils.book_append_sheet(wb, ws, table.label)\r\n      })\r\n      XLSX.writeFile(wb, this.SelectedAggregateExportFilename+'.xlsx')\r\n    \r\n    } else if (this.SelectedAggregateExportFileType == 'json') {\r\n      let outputData = [];\r\n      this.SelectedDataTables.forEach(table => {\r\n        let fullField = table.label.split('-')\r\n        let datasetName = fullField[0];\r\n        let colGroupName = fullField.slice(1).join('-');\r\n\r\n        let tmpData = table.data.map(item => {\r\n          return { [colGroupName]: item.groupName, 'n': item.count, 'percent': item.percent+'%'}\r\n        })\r\n        outputData.push({\"dataset\": datasetName.toLowerCase(), \"column\": colGroupName, data: tmpData})\r\n      })\r\n      let blob = new Blob([JSON.stringify(outputData)], { type: \"application/json;charset=utf-8\"});\r\n      saveAs(blob, this.SelectedAggregateExportFilename+'.json');\r\n    } else if ( this.SelectedAggregateExportFileType == 'pdf') {\r\n\r\n      try {\r\n        const { default: pdfMake } = await import('pdfmake/build/pdfmake.js');\r\n        const { default: pdfFonts } = await import('pdfmake/build/vfs_fonts.js');\r\n        pdfMake.vfs = pdfFonts;\r\n\r\n        const documentDefinition = {\r\n          content: [\r\n            { image: this.commonService.watermark },\r\n            { \r\n              text: \"Cluster Aggregation Snapshot\",\r\n              style: \"header\",\r\n              alignment: \"center\"\r\n            },\r\n            ...this.SelectedDataTables.map(table => {\r\n              let fullField = table.label.split('-')\r\n              let datasetName = fullField[0];\r\n              let colGroupName = fullField.slice(1).join('-');\r\n\r\n              let tmpData = table.data.map(item => {\r\n                let colGroupName = table.label.split('-').slice(1).join('-');\r\n                return [item.groupName, item.count, `${item.percent.toFixed(2)}%`];\r\n              });\r\n\r\n              return {\r\n                style: \"paddedTable\",\r\n                table: {\r\n                  headerRow: 1,\r\n                  widths: [\"*\", \"*\", \"*\"],\r\n                  body: [\r\n                    [\r\n                      `${this.commonService.capitalize(colGroupName)}`,\r\n                      `Number of ${datasetName}s`,\r\n                      `Percent of Total ${datasetName}s`\r\n                    ],\r\n                    ...tmpData\r\n                  ]\r\n                }\r\n              }\r\n            })\r\n          ],\r\n          footer: function(currentPage, pageCount) {\r\n            return [\r\n              {\r\n                text: `Page ${currentPage.toString()} of ${pageCount}`,\r\n                alignment: \"center\"\r\n              }\r\n            ];\r\n          },\r\n          styles: {\r\n            header: {\r\n              fontSize: 22,\r\n              bold: true\r\n            },\r\n            paddedTable: {\r\n              margin: [10, 10, 10, 10]\r\n            }\r\n          }\r\n        };\r\n\r\n        pdfMake.createPdf(documentDefinition).download(`${this.SelectedAggregateExportFilename}.pdf`);\r\n        \r\n      } catch (error) {\r\n        console.error(\"Failed to load pdfmake modules\", error);\r\n        // Optionally, notify the user about the failure using a toast or alert\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  reordered(e) {\r\n    console.log('reordered ', this.SelectedDataFields, e)\r\n    let updatedTableOrder = [];\r\n    this.SelectedDataFields.forEach((field) => {\r\n      updatedTableOrder.push(this.SelectedDataTables.find((table) => {\r\n        if (table.label == field) {\r\n          return true;\r\n        }\r\n      }))\r\n    })\r\n    this.SelectedDataTables = updatedTableOrder;\r\n  }\r\n\r\n  updateDataField(i,e) {\r\n    console.log(`data field ${i} changed\\nBefore: ${this.SelectedDataFields[0]}, ${this.SelectedDataFields[1]}, ${this.SelectedDataFields[2]}`);\r\n    console.log(e);\r\n    this.SelectedDataFields[i] = e.value;\r\n    console.log(`After: ${this.SelectedDataFields[0]}, ${this.SelectedDataFields[1]}, ${this.SelectedDataFields[2]}`);\r\n    this.updateTable(i); \r\n    setTimeout(() => this.updateTableColWidth(), 0);\r\n  }\r\n}\r\n\r\nexport namespace AggregateComponent {\r\n  export const componentTypeName = 'Aggregate';\r\n}\r\n\r\ninterface TableData {\r\n  label: string,\r\n  data: any[],\r\n  tableColumns: any[],\r\n}","import { Component, OnInit, Injector, Inject, ElementRef, ChangeDetectorRef, AfterViewInit, OnDestroy } from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { MicrobeTraceNextVisuals } from '@app/microbe-trace-next-plugin-visuals';\r\nimport { CommonService } from '@app/contactTraceCommonServices/common.service';\r\nimport { DialogSettings } from '../../helperClasses/dialogSettings';\r\nimport { MicobeTraceNextPluginEvents } from '../../helperClasses/interfaces';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport { generateCanvas } from './generateAlignmentViewCanvas';\r\nimport { SelectItem } from 'primeng/api';\r\nimport { saveAs } from 'file-saver';\r\nimport { svgAsPngUri } from 'save-svg-as-png';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\nimport { ExportService } from '@app/contactTraceCommonServices/export.service';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport { CommonStoreService } from '@app/contactTraceCommonServices/common-store.services';\r\n\r\n@Component({\r\n  selector: 'AlignmentViewComponent',\r\n  templateUrl: './alignment-view-plugin-component.html',\r\n  styleUrls: ['./alignment-view-plugin-component.scss']\r\n})\r\nexport class AlignmentViewComponent extends BaseComponentDirective implements OnInit, AfterViewInit, MicobeTraceNextPluginEvents, OnDestroy {\r\n\r\n  // General Settings\r\n  alignmentDialogSettings: DialogSettings = new DialogSettings('#alignment-settings-pane', false)\r\n  ShowAlignExportPane: boolean = false;\r\n  viewActive: boolean = true;\r\n\r\n  showHideOptions: any = [\r\n    { label: 'Show', value: true },\r\n    { label: 'Hide', value: false }\r\n  ];\r\n  labelFieldList: SelectItem[] = [];\r\n  //labelField = \"_id\" // replaced with this.widgets['alignView-labelField']\r\n  labelArray: any[];\r\n  //sortField = \"index\" // replaced with this.widgets['alignView-sortField']\r\n\r\n  private visuals: MicrobeTraceNextVisuals;\r\n  widgets;\r\n  \r\n  // Data\r\n  nodesWithSeq: any[];\r\n  nodesWithoutSeq: any[];\r\n  showPopupMessage: boolean = false;\r\n  seqArray: string[];\r\n  seqArrayShortened: any[];\r\n  longestSeqLength: number = 0;\r\n\r\n  /**\r\n   * count matrix: [ [#A, #C, #G, #T, #other/ambig]-for each location, ... ]\r\n   */\r\n  countMatrix;\r\n  /**\r\n   * proportion matrix: [ [A, C, G, T, #other/ambig]-for each location, ... ]\r\n   */\r\n  proportionMatrix;\r\n  /**\r\n   * position matrix: [ [A, C, G, T, #other/ambig]-for each location, ... ]\r\n   * y position (top) for each base at each postion in sequence\r\n   */\r\n  positionMatrix;\r\n  proportionMatrixAA;\r\n  positionMatrixAA;\r\n\r\n  // Layout\r\n  //showMiniMap: boolean; // replaced with this.widgets['alignView-showMiniMap']\r\n  //alignmentTopDisplay: string; // replaced with this.widgets['alignView-topDisplay']\r\n  alignmentTopDisplayOptions = [\r\n    { label: 'Logo', value: 'logo' },\r\n    { label: 'Bar Plot', value: 'barplot'}\r\n  ]\r\n  //charSetting: string; // 'show', 'min', 'hide' // replaced with this.widgets['alignView-charSetting']\r\n  charSettingOptions: any = [\r\n    { label: 'Show', value: 'show' },\r\n    { label: 'Minimum', value: 'min'},\r\n    { label: 'Hide', value: 'hide' }\r\n  ];\r\n  seqTypeOptions = [\r\n    { label: 'Nucleotides', value: 'nt'},\r\n    { label: 'Codons', value: 'codon'},\r\n    { label: 'Amino Acids', value: 'aa'}\r\n  ];\r\n  selectedSeqType = 'nt';\r\n  startPos = 1;\r\n  //rulerMinorInterval: number = 20; replaced with this.widgets['alignView-rulerMinorInterval']\r\n  rulerIntervalOptions = [0, 10, 20, 25, 50]\r\n  translationSetting = 'Maintain Codons'\r\n\r\n  // Sizing\r\n  // spanWidth and spanHeight values are duplicated in the widgets; I didn't replace because these are used through the template in loops and I was concerned that\r\n  // looking up there values 1000's of times from this.commonService.session.style.widgets would hurt performance\r\n  spanWidth: number; \r\n  spanHeight: number;\r\n  fontSize: number;\r\n\r\n  sizes = [\r\n    { label: 'Small', value: 's'},\r\n    { label: 'Medium', value: 'm'},\r\n    { label: 'Large', value: 'l'},\r\n    { label: 'Custom', value: 'c'}\r\n  ]\r\n  //selectedSize: string; // replaced with this.widgets['alignView-selectedSize']\r\n\r\n  alignmentViewHeight: number;\r\n  rightViewHeight: number;\r\n  canvasViewHeight: number;\r\n\r\n  leftWidth: number;\r\n  rightWidth: number;\r\n\r\n  // Colors\r\n  //selectedColorSchemeName: string; // replaced with this.widgets['alignView-colorSchemeName']\r\n  colorScheme; // current color scheme;\r\n  // customColorScheme; // replaced with this.widgets['alignView-customColorScheme']\r\n  useCustomColorScheme: boolean;\r\n  colorSchemeOptions = [\r\n    { label: 'Normal', \r\n      value: 'n',\r\n    },\r\n    { label: 'Alternative', \r\n    value: 'a',\r\n    },\r\n    {\r\n      label: 'Custom',\r\n      value: 'c'\r\n    }\r\n  ]\r\n\r\n  // Export\r\n  AlignmentExportFileName: string = \"\"\r\n  AlignmentExportFileTypeVis: string = \"svg\";\r\n  AlignmentExportFileTypeData: string = \"fasta\";\r\n\r\n  private destroy$ = new Subject<void>();\r\n\r\n  constructor(injector: Injector,\r\n    public commonService: CommonService,\r\n    @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer, \r\n    elRef: ElementRef,\r\n    private cdref: ChangeDetectorRef,\r\n    private gtmService: GoogleTagManagerService,\r\n    private store: CommonStoreService,\r\n    private exportService: ExportService) {\r\n\r\n    super(elRef.nativeElement);\r\n\r\n    this.visuals = commonService.visuals;\r\n    this.commonService.visuals.alignment = this;\r\n    this.widgets = this.commonService.session.style.widgets;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.gtmService.pushTag({\r\n            event: \"page_view\",\r\n            page_location: \"/alignment\",\r\n            page_title: \"Alignment View\"\r\n        });\r\n    // set events such as node-selected\r\n    this.setEvents();\r\n\r\n    this.setDefaultWidgets();\r\n\r\n    this.labelFieldList = [];\r\n    this.commonService.session.data['nodeFields'].map((d, i) => {\r\n      if (d != 'seq' && d != 'sequence') {\r\n        this.labelFieldList.push({\r\n          label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n          value: d\r\n        });\r\n      }\r\n    });\r\n\r\n    // sets nodesWithSeq, seqArr, and longestSeqLength\r\n    this.nodesWithSeq = [];\r\n    this.nodesWithoutSeq = [];\r\n    this.seqArray = [];\r\n    this.commonService.session.data.nodes.forEach((node, index) => {\r\n      if (this.isSeq(node.seq)){\r\n        this.nodesWithSeq.push(index);\r\n        this.seqArray.push(node.seq.toUpperCase());\r\n        if (node.seq.length > this.longestSeqLength) {\r\n          this.longestSeqLength = node.seq.length;\r\n        }\r\n      } else {\r\n        this.nodesWithoutSeq.push({index: node.index, ID: node.id});\r\n      }\r\n    })\r\n\r\n    this.labelArray = this.getData(this.nodesWithSeq, ['index', this.widgets['alignView-labelField']]);\r\n\r\n    // calculations countMatrix, proportionMatrix, and positionMatrix\r\n    this.calculateProportionAtEachLocation();\r\n\r\n    // sets different variables relating to size and display\r\n    this.onAlignmentTopChange()\r\n\r\n    if (this.widgets['alignView-colorSchemeName'] == 'n' || this.widgets['alignView-colorSchemeName'] == 'a') {\r\n      this.useCustomColorScheme = false;\r\n    } else {\r\n      this.useCustomColorScheme = true;\r\n    }\r\n    this.onSelectedColorChanged(true)\r\n\r\n    // updates spanWidth, spanHeight, rightWidth, leftWidth, fontSize, and then updates alignment\r\n    this.onSelectedSizeChanged()\r\n    // updates the valus of nodeWidthSeqShortened based on size of rigthWitdth, longestSeqLength, and nodesWithSeq\r\n    this.shortenNodesWithSeq();\r\n\r\n    // updates shows or hides minimap and then updates view heights\r\n    this.updateMiniMapVisibility();    \r\n\r\n    this.container.on('resize', () => { this.goldenLayoutComponentResize()})\r\n    this.container.on('hide', () => { \r\n      this.viewActive = false; \r\n      this.cdref.detectChanges();\r\n    })\r\n    this.container.on('show', () => { \r\n      this.viewActive = true; \r\n      this.cdref.detectChanges();\r\n    })\r\n\r\n    this.store.clusterUpdate$.pipe(takeUntil(this.destroy$)).subscribe(() => {\r\n      if (this.widgets['alignView-labelField'] == 'cluster') {\r\n        this.onLabelFieldChange();\r\n      }\r\n      if (this.widgets['alignView-sortField'] == 'cluster') {\r\n        this.onSortFieldChange()\r\n      }\r\n      this.cdref.detectChanges();\r\n    })\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.highlightRows();\r\n\r\n    if (this.nodesWithoutSeq.length > 0) {\r\n      this.showPopupMessage = true;\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  // General\r\n\r\n  isSeq(seq: string) {\r\n    if (seq === null || seq === \"\" || seq === \"null\") {\r\n      return false;\r\n    } else if (/[^-\\s]/.test(seq)) { // test if seq contains chars other than dash (-) or space\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Defines new widgets and set default values\r\n   */\r\n  setDefaultWidgets() {\r\n    //size\r\n    if (this.widgets['alignView-selectedSize'] == undefined) {\r\n      this.widgets['alignView-selectedSize'] = 's';\r\n    }\r\n    // height and width are declare/checked in this.onSelectedSizeChanged()\r\n\r\n    // color\r\n    if (this.widgets['alignView-colorSchemeName'] == undefined) {\r\n      this.widgets['alignView-colorSchemeName'] = 'n';\r\n    }\r\n\r\n    if (this.widgets['alignView-customColorScheme'] == undefined) {\r\n      this.widgets['alignView-customColorScheme'] = {\r\n        'A': '#ccff00',\r\n        'C': '#f0e442',\r\n        'G': '#ff9900',\r\n        'T': '#ff6600',\r\n        'ambig': '#ffffff',\r\n      }\r\n    }\r\n\r\n    // labels/sorting\r\n    if (this.widgets['alignView-labelField'] == undefined) {\r\n      this.widgets['alignView-labelField'] = '_id';\r\n    }\r\n\r\n    if (this.widgets['alignView-sortField'] == undefined) {\r\n      this.widgets['alignView-sortField'] = 'index';\r\n    }\r\n\r\n    // top settings\r\n    if (this.widgets['alignView-showMiniMap'] == undefined) {\r\n      this.widgets['alignView-showMiniMap'] = true;\r\n    }\r\n\r\n    if (this.widgets['alignView-topDisplay'] == undefined) {\r\n      this.widgets['alignView-topDisplay'] = 'barplot';\r\n    }\r\n\r\n    if (this.widgets['alignView-rulerMinorInterval'] == undefined) {\r\n      this.widgets['alignView-rulerMinorInterval'] = 50;\r\n    }\r\n\r\n    // main canvas\r\n    if (this.widgets['alignView-charSetting'] == undefined) {\r\n      this.widgets['alignView-charSetting'] = 'show';\r\n    }\r\n    this.widgets['alignView-charSetting'] = 'show';\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param indexList an array of indexes for the nodes to get data from\r\n   * @param field string | array of which field to get data from\r\n   * @returns an array of objects\r\n   */\r\n  getData(indexList, field) {\r\n    if (Array.isArray(field)) {\r\n      return indexList.map(index => {\r\n        let currentObj = {}\r\n        field.forEach(f => currentObj[f] = (f == \"seq\") ? this.commonService.session.data.nodes[index][f].toUpperCase() : this.commonService.session.data.nodes[index][f]);\r\n        return currentObj;\r\n      })\r\n    } else if (field == \"seq\") {\r\n      return indexList.map(index => this.commonService.session.data.nodes[index][\"seq\"].toUpperCase());\r\n    } else {\r\n      return indexList.map(index => this.commonService.session.data.nodes[index][field])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates the value of this.longestSeqLength\r\n   */\r\n  updateLongestSeqLength() {\r\n    let longestSeq = 0;\r\n    this.seqArray.forEach((seq) => {\r\n      if (seq.length > longestSeq) {\r\n        longestSeq = seq.length\r\n      }\r\n    })\r\n    this.longestSeqLength = longestSeq;\r\n  }\r\n\r\n  /**\r\n  * Updates the alignment by generating a new canvas, and recalcuating various heights\r\n  */\r\n  updateAlignment() {\r\n    generateCanvas(this.seqArray, {width: this.spanWidth, height: this.spanHeight, charSetting: this.widgets['alignView-charSetting'], fontSize: this.fontSize, colors: this.colorScheme}).then(function(canvas: HTMLCanvasElement) {\r\n      $('#msa-viewer .canvasHolder').empty().append(canvas)\r\n    })\r\n    \r\n    this.updateViewHeights();\r\n  }\r\n\r\n  // Mini Map\r\n\r\n  /**\r\n  * Creates a minimap. \r\n  * The sequences (seqArrayShortened) are previously downsample by picking 1 nt / every n nucleotides;\r\n  */\r\n  updateMiniMap() {\r\n    $('#miniMap canvas').remove();\r\n    generateCanvas(this.seqArrayShortened, {width: 1, height: 1, charSetting: 'hide', fontSize: 1, colors: this.colorScheme}).then(function(canvas: HTMLCanvasElement) {\r\n      $('#miniMap').append(canvas);\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Adds/Removed miniMap and miniMap title\r\n   */\r\n  updateMiniMapVisibility() {\r\n    if (this.widgets['alignView-showMiniMap']){\r\n      this.updateMiniMap();\r\n      $('#miniMapHolder').css({'display': 'block'});\r\n      $('#miniMapTitle').css({'display': 'block'});\r\n    } else {\r\n      $('#miniMapHolder').css({'display': 'none'});\r\n      $('#miniMapTitle').css({'display': 'none'});\r\n    }\r\n\r\n    this.updateViewHeights();\r\n  }\r\n\r\n  /**\r\n   * Add miniMapHighlight to correct position\r\n   * @param e mouse event\r\n   * @param miniMap HTMLElement\r\n   */\r\n  showMiniMapHighlight(e: MouseEvent, miniMap: HTMLElement) {\r\n    let mmDimensions = miniMap.getBoundingClientRect();\r\n    \r\n    // need to reduce number of sequences on minimap if there are too many\r\n    let scaleFactorNumber = (this.nodesWithSeq.length <= 100)? 1: Math.ceil(this.nodesWithSeq.length/100);\r\n    let viewHeight = $('.canvasLabels').height();\r\n    let highlightHeight = viewHeight/(this.spanHeight*scaleFactorNumber);\r\n\r\n    // want the minimap to be around this.rightWidth pixels wide; caculate how much to downscale by and then downscale\r\n    let scaleFactorLength = (this.longestSeqLength < this.rightWidth)? 1 : Math.ceil(this.longestSeqLength/this.rightWidth);\r\n    let highlightWidth = $('.canvasHolder').width()/(this.spanWidth*scaleFactorLength)\r\n\r\n    let canvasWidth = $('#miniMap canvas').width()\r\n    let left = e.clientX - mmDimensions.left - highlightWidth/2;\r\n    if (left < 0) {\r\n      left = 0;\r\n    } else if (left > canvasWidth - highlightWidth) {\r\n      left = canvasWidth - highlightWidth;\r\n    }\r\n\r\n    $('#miniMapHighlight').css({'display': 'block', 'top': top +'px', 'left': left +'px', 'height': highlightHeight+'px', 'width': highlightWidth+'px'})\r\n  }\r\n\r\n  /**\r\n   * Moves the position of miniMapHighlight\r\n   * @param e mouse event\r\n   * @param miniMap HTMLElement\r\n   */\r\n  updateMiniMapHighlight(e: MouseEvent, miniMap: HTMLElement) {\r\n    let mmDimensions = miniMap.getBoundingClientRect();\r\n\r\n    let highlightHeight = $('#miniMapHighlight').height()\r\n    let top = e.clientY - mmDimensions.top - (highlightHeight/2)\r\n    if (top < 0) {\r\n      top = 0\r\n    } else if (top > mmDimensions.height-highlightHeight) {\r\n      top = mmDimensions.height-highlightHeight\r\n    }\r\n\r\n    let canvasWidth = $('#miniMap canvas').width()\r\n    let highlightWidth = $('#miniMapHighlight').width()\r\n    let left = e.clientX - mmDimensions.left - highlightWidth/2;\r\n    if (left < 0) {\r\n      left = 0;\r\n    } else if (left > canvasWidth - highlightWidth) {\r\n      left = canvasWidth - highlightWidth;\r\n    }\r\n\r\n    $('#miniMapHighlight').css({'top': top +'px', 'left': left +'px'});\r\n  }\r\n\r\n  /**\r\n   * Removes highling from minimap\r\n   */\r\n  hideMiniMapHighlight() {\r\n    $('#miniMapHighlight').css({'display': 'none'})\r\n  }\r\n\r\n  /**\r\n   * Moves scroll position of main canvas, canvasLabels, and alignmentTop(Bar Plot, Rule) based on position of miniMapHighlight\r\n   */\r\n  miniMapClick(e: MouseEvent, miniMap: HTMLElement, canvasHolder: HTMLElement, canvasLabels: HTMLElement, alignmentTop: HTMLElement) {\r\n    let mmDimensions = miniMap.getBoundingClientRect();\r\n    let highlightDimensions =  document.getElementById('miniMapHighlight').getBoundingClientRect();\r\n\r\n    // want the minimap to be around this.rightWidth pixels wide; caculate how much to downscale by and then downscale\r\n    let scaleFactorLength = (this.longestSeqLength < this.rightWidth)? 1 : Math.ceil(this.longestSeqLength/this.rightWidth);\r\n    // need to reduce number of sequences on minimap if there are too many\r\n    let scaleFactorNumber = (this.nodesWithSeq.length <= 100)? 1: Math.ceil(this.nodesWithSeq.length/100);\r\n    //let scaleFactor = Math.ceil(this.longestSeqLength/this.rightWidth)\r\n    let horizontalScroll = (highlightDimensions.left - mmDimensions.left)*this.spanWidth*scaleFactorLength;    \r\n    alignmentTop.scrollLeft = horizontalScroll < 10 ? horizontalScroll : horizontalScroll + 7;\r\n    canvasHolder.scrollLeft = horizontalScroll < 10 ? horizontalScroll : horizontalScroll + 7;\r\n\r\n    let verticalScroll = (highlightDimensions.top - mmDimensions.top)*this.spanHeight*scaleFactorNumber;\r\n    canvasLabels.scrollTop = verticalScroll < 4 ? verticalScroll : verticalScroll+4;\r\n    canvasHolder.scrollTop = verticalScroll < 4 ? verticalScroll : verticalScroll+4;  \r\n  }\r\n\r\n  // Tooltip\r\n\r\n  /**\r\n   * \r\n   * @param e $event\r\n   * @param index index of the nt for the tooltip\r\n   */\r\n  showTooltip(e: MouseEvent ,index:number) {\r\n    // offsetX = mouse X position + adjustment to center of the bar -50 to center toolbar\r\n    let [x, ] = this.getRelativeMousePosition(e);\r\n    let adjX = this.spanWidth/2 - (e.offsetX % this.spanWidth)\r\n    let offsetX = x + adjX -50;\r\n    \r\n    // offsetY = 151 (51 offset + 100 height) + height of minimap (number of seq/scaleFactor + 26 for padding, border, margin)\r\n    let offsetY;\r\n    if (this.widgets['alignView-showMiniMap']) {\r\n      let scaleFactorNumber = (this.nodesWithSeq.length <= 100)? 1: Math.ceil(this.nodesWithSeq.length/100)\r\n      offsetY = 151 + Math.ceil(this.nodesWithSeq.length/scaleFactorNumber+26)\r\n    } else {\r\n      offsetY = 151;\r\n    }\r\n\r\n    let htmlString = this.tabulate(index);\r\n    $('#tooltipAlign').html(htmlString)\r\n    $('#tooltipHolder').css({'display': 'block', 'position': 'absolute', 'left': offsetX + 'px', 'top': offsetY + 'px'})\r\n  }\r\n\r\n  /**\r\n   * Hides the tooltip\r\n   */\r\n  hideTooltip() {\r\n    //$('#tooltipAlign').html(\"\")\r\n    $('#tooltipHolder').css({'display': 'none'})\r\n  }\r\n\r\n\r\n  // Data\r\n\r\n  /**\r\n   * Updates seqArrayShortened by downsampling (selecting 1 out of every n NTs and selected 1 out of every m sequences, as needed) nodesWithSeq\r\n   * \r\n   */\r\n  shortenNodesWithSeq() {\r\n    if (this.longestSeqLength < this.rightWidth && this.nodesWithSeq.length <= 100) {\r\n      this.seqArrayShortened = this.seqArray\r\n      $('#miniMap').css({'width': this.longestSeqLength+'px', 'height': this.nodesWithSeq.length+'px'})\r\n      $('#miniMapTitle').css({'height': (this.nodesWithSeq.length+16)+'px', 'line-height': (this.nodesWithSeq.length+16)+'px'})\r\n      return; \r\n    }\r\n\r\n    // want the minimap to be around this.rightWidth pixels wide; caculate how much to downscale by and then downscale\r\n    let scaleFactorLength = (this.longestSeqLength < this.rightWidth)? 1 : Math.ceil(this.longestSeqLength/this.rightWidth);\r\n    // need to reduce number of sequences on minimap if there are too many\r\n    let scaleFactorNumber = (this.nodesWithSeq.length <= 100)? 1: Math.ceil(this.nodesWithSeq.length/100);\r\n    this.seqArrayShortened = [];\r\n    this.seqArray.forEach((seq, index) => {\r\n      if (index % scaleFactorNumber != 0) return;\r\n      let downSizedSeq = \"\";\r\n      for (let i=0; i < this.longestSeqLength; i+= scaleFactorLength) {\r\n        downSizedSeq += seq.charAt(i);\r\n      }\r\n      this.seqArrayShortened.push(downSizedSeq)\r\n    })\r\n\r\n    $('#miniMap').css({'width': Math.ceil(this.longestSeqLength/scaleFactorLength)+'px', 'height': Math.ceil(this.nodesWithSeq.length/scaleFactorNumber)+'px'})\r\n    $('#miniMapTitle').css({'height': Math.ceil(this.nodesWithSeq.length/scaleFactorNumber+16)+'px', 'line-height': Math.ceil(this.nodesWithSeq.length/scaleFactorNumber+16)+'px'})\r\n  }\r\n\r\n  /**\r\n   * Calculates the count, proportion, and y position (for logo/bar plot) of each base at each position\r\n   */\r\n  calculateProportionAtEachLocation() {\r\n    // count matrix: [ [#A, #C, #G, #T, #other/ambiguos]-for each location, ... ]\r\n    this.countMatrix = [];\r\n    this.proportionMatrix = [];\r\n    this.positionMatrix = [];\r\n\r\n    for (let i =0; i<this.longestSeqLength; i++) {\r\n      this.countMatrix.push([0,0,0,0,0]);\r\n    }\r\n\r\n    for (let seq of this.seqArray) {\r\n      for (let i=0; i< seq.length; i++) {\r\n        let nt = seq[i];\r\n        switch (nt) {\r\n          case 'A':\r\n            this.countMatrix[i][0] += 1;\r\n            break;\r\n          case 'C':\r\n            this.countMatrix[i][1] += 1;\r\n            break;\r\n          case 'G':\r\n            this.countMatrix[i][2] += 1;\r\n            break;\r\n          case 'T':\r\n            this.countMatrix[i][3] += 1;\r\n            break; \r\n          default:\r\n            this.countMatrix[i][4] += 1\r\n        }\r\n      } \r\n    }\r\n    \r\n    function calcProportion(value) {\r\n      let sum = value[0] + value[1] + value[2] + value[3] + value[4];\r\n      return [value[0]/sum, value[1]/sum, value[2]/sum, value[3]/sum, value[4]/sum]\r\n    }\r\n\r\n    function calculatePosition(value) {\r\n      // custom merge sort; i want  first four items in value sorted but i want array of indexes returned not array of values\r\n      let mergeA = value[0] > value[1] ? [0,1] : [1,0]\r\n      let mergeB = value[2] > value[3] ? [2,3] : [3,2]\r\n      let sortedIndexes = [];\r\n      let locA = 0, locB=0;\r\n      for (let i =0; i<4; i++) {\r\n        if (locA == 2) {\r\n          sortedIndexes.push(mergeB[locB])\r\n          locB += 1;\r\n        } else if (locB == 2) {\r\n          sortedIndexes.push(mergeA[locA])\r\n          locA += 1;\r\n        } else if (value[mergeA[locA]] > value[mergeB[locB]]) {\r\n          sortedIndexes.push(mergeA[locA])\r\n          locA += 1;\r\n        } else {\r\n          sortedIndexes.push(mergeB[locB])\r\n          locB += 1;\r\n        }\r\n      }\r\n\r\n      // use sorted index to create temp/row of positionMatrix such at the ambig (value[4]) is at the very top and then largest to smallest\r\n      let temp = [0,0,0,0,0];\r\n      let y = value[4]*100;\r\n      for (let index of sortedIndexes) {\r\n        temp[index] = y;\r\n        y += value[index]*100\r\n      }\r\n      return temp;\r\n    }\r\n\r\n    this.proportionMatrix = this.countMatrix.map(calcProportion)\r\n    this.positionMatrix = this.proportionMatrix.map(calculatePosition)\r\n  }\r\n\r\n  /**\r\n   * Generates and returns the proportion matrix from Amino Acid sequence\r\n   */\r\n    calculateProportionAminoAcids() {\r\n      // count matrix: [ [#A, #R, #N, #D, #C, #E, #Q, #G, #H, #I, #L, #K, #M, #F, #P, #S, #T, #W, #Y, #V, #*, #-, #X]-for each location, ... ]\r\n      let countMatrix = [];\r\n  \r\n      for (let i =0; i<this.longestSeqLength; i++) {\r\n        countMatrix.push(Array(23).fill(0));\r\n      }\r\n  \r\n      for (let seq of this.seqArray) {\r\n        for (let i=0; i< seq.length; i++) {\r\n          let nt = seq[i];\r\n          switch (nt) {\r\n            case 'A':\r\n              countMatrix[i][0] += 1;\r\n              break;\r\n            case 'R':\r\n              countMatrix[i][1] += 1;\r\n              break;\r\n            case 'N':\r\n              countMatrix[i][2] += 1;\r\n              break;\r\n            case 'D':\r\n              countMatrix[i][3] += 1;\r\n              break; \r\n            case 'C':\r\n              countMatrix[i][4] += 1;\r\n              break;\r\n            case 'E':\r\n              countMatrix[i][5] += 1;\r\n              break;\r\n            case 'Q':\r\n              countMatrix[i][6] += 1;\r\n              break;\r\n            case 'G':\r\n              countMatrix[i][7] += 1;\r\n              break;\r\n            case 'H':\r\n              countMatrix[i][8] += 1;\r\n              break;\r\n            case 'I':\r\n              countMatrix[i][9] += 1;\r\n              break;\r\n            case 'L':\r\n              countMatrix[i][10] += 1;\r\n              break; \r\n            case 'K':\r\n              countMatrix[i][11] += 1;\r\n              break;\r\n            case 'M':\r\n              countMatrix[i][12] += 1;\r\n              break;\r\n            case 'F':\r\n              countMatrix[i][13] += 1;\r\n              break; \r\n            case 'P':\r\n              countMatrix[i][14] += 1;\r\n              break;\r\n            case 'S':\r\n              countMatrix[i][15] += 1;\r\n              break; \r\n            case 'T':\r\n              countMatrix[i][16] += 1;\r\n              break; \r\n            case 'W':\r\n              countMatrix[i][17] += 1;\r\n              break; \r\n            case 'Y':\r\n              countMatrix[i][18] += 1;\r\n              break; \r\n            case 'V':\r\n              countMatrix[i][19] += 1;\r\n              break; \r\n            case '*':\r\n              countMatrix[i][20] += 1;\r\n              break; \r\n            case '-':\r\n              countMatrix[i][21] += 1;\r\n              break; \r\n            case 'X':\r\n              countMatrix[i][22] += 1;\r\n              break; \r\n            default:\r\n              countMatrix[i][22] += 1;\r\n          }\r\n        } \r\n      }\r\n\r\n      function calcProportion(value) {\r\n        let sum = value.reduce((acc, cur) => acc + cur, 0)\r\n        return value.map(current => current/sum);\r\n      }\r\n      return countMatrix.map(calcProportion)\r\n}\r\n\r\n  /**\r\n   * Generates and returns the position Matrix from Amino Acid proportion matrix\r\n   */\r\n  calculatePositionMatrixAminoAcids() {\r\n    let count = 0;\r\n    let output = [];\r\n      //let index2NT = ['A', 'R', 'N', 'D', 'C', 'E', 'Q', 'G', 'H', 'I', 'L', 'K', 'M', 'F', 'P', 'S', 'T', 'W', 'Y', 'V', '*', '-', 'X'];\r\n      this.proportionMatrixAA.forEach((row) => {\r\n        let nonZeroIndexes = [];\r\n        row.forEach((value, index) => {\r\n          if (value > 0 && index < 20) nonZeroIndexes.push(index);\r\n        })\r\n        nonZeroIndexes.sort(compareIndices);\r\n        function compareIndices(a,b) {\r\n          return row[b] - row[a]\r\n        }\r\n        count += 1;\r\n        let temp = new Array(23).fill(0);\r\n        let y = (row[22]+row[21]+row[20])*100;        \r\n        for (let index of nonZeroIndexes) {\r\n          temp[index] = y;\r\n          y += row[index]*100\r\n        }\r\n        output.push(temp);\r\n      })\r\n\r\n    return output;\r\n  }\r\n\r\n  /**\r\n   * Similar to caclulating the proportion, but gaps and ambiguous nucleotides are separated\r\n   */\r\n  calculateAdvancedProportion() {\r\n        // count matrix: [ [#A, #C, #G, #T, gaps, #N, #R, #Y, #K, #M, #S, #W, #B, #D, #H, #V #other]-for each location, ... ]\r\n        let countMatrix = [];\r\n    \r\n        for (let i =0; i<this.longestSeqLength; i++) {\r\n          countMatrix.push(Array(17).fill(0)); // update this\r\n        }\r\n    \r\n        for (let seq of this.seqArray) {\r\n          for (let i=0; i< seq.length; i++) {\r\n            let nt = seq[i];\r\n            switch (nt) {\r\n              case 'A':\r\n                countMatrix[i][0] += 1;\r\n                break;\r\n              case 'C':\r\n                countMatrix[i][1] += 1;\r\n                break;\r\n              case 'G':\r\n                countMatrix[i][2] += 1;\r\n                break;\r\n              case 'T':\r\n                countMatrix[i][3] += 1;\r\n                break; \r\n              case '-':\r\n                countMatrix[i][4] += 1;\r\n                break;\r\n              case 'N':\r\n                countMatrix[i][5] += 1;\r\n                break;\r\n              case 'R':\r\n                countMatrix[i][6] += 1;\r\n                break;\r\n              case 'Y':\r\n                countMatrix[i][7] += 1;\r\n                break;\r\n              case 'K':\r\n                countMatrix[i][8] += 1;\r\n                break;\r\n              case 'M':\r\n                countMatrix[i][9] += 1;\r\n                break;\r\n              case 'S':\r\n                countMatrix[i][10] += 1;\r\n                break; \r\n              case 'W':\r\n                countMatrix[i][11] += 1;\r\n                break;\r\n              case 'B':\r\n                countMatrix[i][12] += 1;\r\n                break;\r\n              case 'D':\r\n                countMatrix[i][13] += 1;\r\n                break; \r\n              case 'H':\r\n                countMatrix[i][14] += 1;\r\n                break;\r\n              case 'V':\r\n                countMatrix[i][15] += 1;\r\n                break; \r\n              default:\r\n                countMatrix[i][16] += 1;\r\n            }\r\n          } \r\n        }\r\n\r\n        function calcProportion(value) {\r\n          let sum = value.reduce((acc, cur) => acc + cur, 0)\r\n          return value.map(current => current/sum);\r\n        }\r\n        return countMatrix.map(calcProportion)\r\n  }\r\n\r\n  /** returns Math.floor(i); allows for it to be called from within the template */\r\n  floor(i) {\r\n    return Math.floor(i)\r\n  }\r\n\r\n  /**\r\n   * @param i position\r\n   * @returns the x pos for the elements in the barplot/logo/ruler based on the startPos and selectedSeqType\r\n   */\r\n  xPos(i) {\r\n    if (this.selectedSeqType == 'codon' && i < this.startPos) {\r\n      return 0\r\n    } else if (this.selectedSeqType=='codon') {\r\n      return this.spanWidth*(i-this.startPos+1+Math.floor((i-this.startPos+1)/3))\r\n    } else {\r\n      return this.spanWidth*i;\r\n    }\r\n  }\r\n\r\n  /** Calculates the need with of SVG image based on selectedSeqType and the length of the sequences */\r\n  getSVGWidth() {\r\n    if (this.selectedSeqType == 'nt') {\r\n      return this.spanWidth*this.proportionMatrix.length+17\r\n    } else if (this.selectedSeqType == 'codon') {\r\n      let length = this.proportionMatrix.length\r\n      return this.spanWidth*(length+Math.floor(length/3))+17\r\n    } else {\r\n      return this.spanWidth*this.proportionMatrixAA.length+17\r\n    }\r\n  }\r\n\r\n  /** Updates Alignment View when type of sequence is changed */\r\n  onSeqTypeChange() {\r\n    if (this.selectedSeqType=='nt') {\r\n      this.startPos = 1;\r\n      this.revert2NT();\r\n    } else if (this.selectedSeqType == 'codon') {\r\n      this.NT2Codon(this.startPos-1);\r\n    } else {\r\n      this.convertToAASequence(this.startPos-1);\r\n    }\r\n  }\r\n\r\n  /** Returns a lookup table for converting NTs to Amino Acids. Doesn't account for ambiguity. USe checkAmbiguousCodons() to convert a codon\r\n   * with ambiguous nucleotides into an Amino Acid\r\n   */\r\n  getNT2AATable() {\r\n    return {\r\n      'TTT': 'F', 'TTC': 'F', 'TTA': 'L', 'TTG': 'L', 'TCT': 'S', 'TCC': 'S', 'TCA': 'S', 'TCG': 'S', \r\n      'TAT': 'Y', 'TAC': 'Y', 'TAA': '*', 'TAG': '*', 'TGT': 'C', 'TGC': 'C', 'TGA': '*', 'TGG': 'W',\r\n      'CTT': 'L', 'CTC': 'L', 'CTA': 'L', 'CTG': 'L', 'CCT': 'P', 'CCC': 'P', 'CCA': 'P', 'CCG': 'P',\r\n      'CAT': 'H', 'CAC': 'H', 'CAA': 'Q', 'CAG': 'Q', 'CGT': 'R', 'CGC': 'R', 'CGA': 'R', 'CGG': 'R', \r\n      'ATT': 'I', 'ATC': 'I', 'ATA': 'I', 'ATG': 'M', 'ACT': 'T', 'ACC': 'T', 'ACA': 'T', 'ACG': 'T',\r\n      'AAT': 'N', 'AAC': 'N', 'AAA': 'K', 'AAG': 'K', 'AGT': 'S', 'AGC': 'S', 'AGA': 'R', 'AGG': 'R', \r\n      'GTT': 'V', 'GTC': 'V', 'GTA': 'V', 'GTG': 'V', 'GCT': 'A', 'GCC': 'A', 'GCA': 'A', 'GCG': 'A',\r\n      'GAT': 'D', 'GAC': 'D', 'GAA': 'E', 'GAG': 'E', 'GGT': 'G', 'GGC': 'G', 'GGA': 'G', 'GGG': 'G'\r\n    }\r\n  }\r\n\r\n  /** Converts the nucleotide sequence for each node into an amino acid sequence, based on startPos and , then updates the view */\r\n  convertToAASequence(startPos=0) {\r\n    let NT2AA_table = this.getNT2AATable();\r\n\r\n    this.seqArray = this.getData(this.nodesWithSeq, 'seq');\r\n\r\n    this.updateLongestSeqLength();\r\n    let AAarray = [];\r\n    let NT_check = /^[ACGT]+$/;\r\n    \r\n    this.seqArray.forEach(seq => {\r\n      if (this.translationSetting=='Maintain Codons') {\r\n        let aaString = ''\r\n        for (let i=startPos; i< seq.length; i += 3) {\r\n          let codon = seq.substring(i, i+3);\r\n          if (NT_check.test(codon)) {\r\n            aaString += NT2AA_table[codon];\r\n          } else if (codon == '---') {\r\n            aaString += '-'\r\n          } else {\r\n            aaString += this.checkAmbiguousCodons(codon, NT2AA_table);\r\n          }\r\n        }\r\n        AAarray.push(aaString);\r\n      } else {\r\n        let aaString = '';\r\n        let gapCount = 0;\r\n        let codon = '';\r\n        for (let i=startPos; i < seq.length; i++) {\r\n          let nt = seq.charAt(i);\r\n          if (nt == '-') {\r\n            gapCount += 1;\r\n          } else {\r\n            codon += nt;\r\n          }\r\n\r\n          if (gapCount == 3) {\r\n            aaString += '-';\r\n            gapCount = 0;\r\n          } else if (codon.length == 3) {\r\n            if (NT_check.test(codon)) {\r\n              aaString += NT2AA_table[codon]\r\n            } else {\r\n              let aa = this.checkAmbiguousCodons(codon, NT2AA_table);\r\n              aaString += aa;\r\n            } \r\n            codon = '';\r\n          }\r\n        }\r\n        AAarray.push(aaString);\r\n      }     \r\n    })\r\n    this.seqArray = AAarray;\r\n    this.colorScheme =   {\r\n      A: '#33cc00',\r\n      R: '#cc0000',\r\n      N: '#6600cc',\r\n      D: '#0033ff',\r\n      C: '#ffff00',\r\n      Q: '#6600cc',\r\n      E: '#0033ff',\r\n      G: '#33cc00',\r\n      H: '#009900',\r\n      I: '#33cc00',\r\n      L: '#33cc00',\r\n      K: '#cc0000',\r\n      M: '#33cc00',\r\n      F: '#009900',\r\n      P: '#33cc00',\r\n      S: '#0099ff',\r\n      T: '#0099ff',\r\n      W: '#009900',\r\n      Y: '#009900',\r\n      V: '#33cc00',\r\n      X: '#ffffff'\r\n    }\r\n\r\n    this.updateAlignment();\r\n    this.updateLongestSeqLength();\r\n    this.shortenNodesWithSeq();\r\n    this.proportionMatrixAA = this.calculateProportionAminoAcids();\r\n    this.positionMatrixAA = this.calculatePositionMatrixAminoAcids();\r\n    this.updateMiniMap();\r\n  }\r\n\r\n  /** Converts a codon into an amino acid, tries to resolve ambiguous nucleotides; Return amino acid, X for ambiguous amino acid, or - if codon.length != 3 */\r\n  checkAmbiguousCodons(codon: string, NT2AA_table=this.getNT2AATable()) {\r\n    let ambiguousCheck = /^[ACGTNRYKMSWBDHV]+$/\r\n    if (codon.length != 3) {\r\n      return '-'\r\n    } else if (!ambiguousCheck.test(codon)) {\r\n      return 'X'\r\n    }\r\n\r\n    let positionPossibilities = [];\r\n    for (let i=0; i<3; i++) {\r\n      let currentNT = codon.charAt(i);\r\n      if (currentNT == 'A' || currentNT == 'C' || currentNT == 'G' || currentNT == 'T') {\r\n        positionPossibilities.push([currentNT])\r\n      } else if (currentNT == 'W') {\r\n        positionPossibilities.push(['A', 'T'])\r\n      } else if (currentNT == 'S') {\r\n        positionPossibilities.push(['C', 'G'])\r\n      } else if (currentNT == 'M') {\r\n        positionPossibilities.push(['A', 'C'])\r\n      } else if (currentNT == 'K') {\r\n        positionPossibilities.push(['G', 'T'])\r\n      } else if (currentNT == 'R') {\r\n        positionPossibilities.push(['A', 'G'])\r\n      } else if (currentNT == 'Y') {\r\n        positionPossibilities.push(['C', 'T'])\r\n      } else if (currentNT == 'B') {\r\n        positionPossibilities.push(['C', 'G', 'T'])\r\n      } else if (currentNT == 'D') {\r\n        positionPossibilities.push(['A', 'G', 'T'])\r\n      } else if (currentNT == 'H') {\r\n        positionPossibilities.push(['A', 'C', 'T'])\r\n      } else if (currentNT == 'V') {\r\n        positionPossibilities.push(['A','C', 'G'])\r\n      } else if (currentNT == 'N') {\r\n        positionPossibilities.push(['A', 'C', 'G', 'T'])\r\n      }\r\n    }\r\n    let possibleCodons = [];\r\n    positionPossibilities[0].forEach(nt0 => {\r\n      positionPossibilities[1].forEach(nt1 => {\r\n        positionPossibilities[2].forEach(nt2 => {\r\n          possibleCodons.push(nt0+nt1+nt2);\r\n        })\r\n      })\r\n    })\r\n\r\n    let possibleAA = NT2AA_table[possibleCodons[0]];\r\n    for (let i=1; i<possibleCodons.length; i++) {\r\n      let AA = NT2AA_table[possibleCodons[i]]\r\n      if (possibleAA != AA) {\r\n        return 'X'\r\n      }\r\n    }\r\n\r\n    return possibleAA;\r\n  }\r\n\r\n  /** Reverts the view back to the original sequence view */\r\n  revert2NT() {\r\n    this.seqArray = this.getData(this.nodesWithSeq, 'seq');\r\n    this.updateLongestSeqLength();\r\n    this.shortenNodesWithSeq();\r\n    this.onSelectedColorChanged();\r\n  }\r\n\r\n  /** Converts the sequence into a codons by introducing spaces every 3NTs and then updates the view */\r\n  NT2Codon(start) {\r\n    let newSeqs = []\r\n    this.seqArray = this.getData(this.nodesWithSeq, 'seq');\r\n    this.seqArray.forEach(seq => {\r\n      let codons = []\r\n      for (let i=start; i<seq.length; i+= 3) {\r\n        codons.push(seq.slice(i, i+3));\r\n      }\r\n      newSeqs.push(codons.join(' '));\r\n    })\r\n\r\n    this.seqArray = newSeqs;\r\n    this.updateLongestSeqLength();\r\n    this.shortenNodesWithSeq();\r\n    this.onSelectedColorChanged();\r\n  }\r\n\r\n  // Layout Positioning\r\n\r\n  /**\r\n  * Set rightViewHeigh, alignmentViewHeight, and canvasViewHeigh\r\n  */\r\n  updateViewHeights() {\r\n    // order is important as subsequent calculations rely on previous updated values; These values are used to ensure the view heights are correct and scrolling occurs as expectd\r\n    this.rightViewHeight = this.calculateRightHeight();\r\n    this.alignmentViewHeight = this.calculateViewHeight();\r\n    this.canvasViewHeight = this.calculateCanvasViewHeight();\r\n  }\r\n\r\n  /**\r\n   * @returns the height needed to for all the elements on the right half of msa-viewer. If this height > available space, then scrolling will be used\r\n   */\r\n  calculateRightHeight(): number {\r\n    let miniMapHeight = (this.widgets['alignView-showMiniMap']) ? $('#miniMapHolder').height()+16 : 0;\r\n    // 170 alignmentTop, 17 bottomScrollBar, height of canvas\r\n    return 170+25+this.nodesWithSeq.length*this.spanHeight+ miniMapHeight;\r\n  }\r\n\r\n  /**\r\n   * @returns the height for msa-viewer element based on the minimum of the available space for the view and the height needed for the elements\r\n   */\r\n  calculateViewHeight(): number {\r\n    return Math.min($(\".msa-viewer-container\").parent().height()-50, this.rightViewHeight)\r\n  }\r\n\r\n  /**\r\n   * @returns the height for the canvasHolder element and then subsequently the canvasLabels element. Not the height of the canvas itself\r\n   */\r\n  calculateCanvasViewHeight(): number {\r\n    let miniMapHeight = (this.widgets['alignView-showMiniMap']) ? $('#miniMapHolder').outerHeight() : 0;\r\n    return Math.min(this.alignmentViewHeight - 170 - miniMapHeight, this.nodesWithSeq.length*this.spanHeight+25)\r\n  }\r\n\r\n  /**\r\n   * @returns the width for the right half of the viewer\r\n   */\r\n  calculateRightWidth(): number {\r\n    // 7: gap between left and right (5) + 2\r\n    return $(\"#msa-viewer\").width() - this.leftWidth - 7;\r\n  }\r\n\r\n\r\n  // Sizing\r\n  \r\n  /**\r\n  * Updates font size as needed and then updates the alignment view based on new height\r\n  */\r\n  onSpanHeightChange(e) {\r\n    if (e >= 16) {\r\n      this.fontSize = 16;\r\n      this.leftWidth=250;\r\n    } else if (e >= 12) {\r\n      this.fontSize = 12;\r\n      this.leftWidth = 200;\r\n    } else if (e >= 10) {\r\n      this.fontSize = 10;\r\n      this.leftWidth = 150;\r\n    }\r\n\r\n    this.rightWidth = this.calculateRightWidth();\r\n\r\n    this.widgets['alignView-selectedSize']='c';\r\n    this.widgets['alignView-spanHeight'] = e;\r\n    this.updateAlignment();\r\n  }\r\n\r\n  /**\r\n   * Updates the alignment view with the new width\r\n   */\r\n  onSpanWidthChange(e){\r\n    this.widgets['alignView-selectedSize']='c';\r\n    this.widgets['alignView-spanWidth'] = e\r\n    this.updateAlignment();\r\n  }\r\n\r\n  /**\r\n   * Updates spanHeight, spanWidth, fontSize, and sometimes charSetting and then updates alignment view with new settings\r\n   */\r\n  onSelectedSizeChanged() {\r\n    if (this.widgets['alignView-selectedSize'] == 's') {\r\n      this.spanHeight = 10;\r\n      this.spanWidth = 2;\r\n      this.widgets['alignView-charSetting'] = 'hide';\r\n    } else if (this.widgets['alignView-selectedSize'] == 'm') {\r\n      this.spanHeight = 12;\r\n      this.spanWidth = 6;\r\n      //this.charSetting = 'hide';\r\n    } else if (this.widgets['alignView-selectedSize'] == 'l') {\r\n      this.spanHeight = 16;\r\n      this.spanWidth = 10;\r\n      //this.charSetting = 'show';\r\n    } else if (this.widgets['alignView-selectedSize'] == 'c') {\r\n      \r\n      if (!this.widgets['alignView-spanWidth']) {\r\n        this.spanWidth = 10;\r\n      } else {\r\n        this.spanWidth = this.widgets['alignView-spanWidth']\r\n      }\r\n\r\n      if (!this.widgets['alignView-spanHeight']) {\r\n        this.spanHeight = 16;\r\n      } else {\r\n        this.spanHeight = this.widgets['alignView-spanHeight']\r\n      }\r\n    }\r\n\r\n    if (this.spanHeight >= 16) {\r\n      this.fontSize = 16;\r\n      this.leftWidth=250;\r\n    } else if (this.spanHeight >= 12) {\r\n      this.fontSize = 12;\r\n      this.leftWidth = 200;\r\n    } else if (this.spanHeight >= 10) {\r\n      this.fontSize = 10;\r\n      this.leftWidth = 150;\r\n    }\r\n\r\n    this.widgets['alignView-spanWidth'] = this.spanWidth;\r\n    this.widgets['alignView-spanHeight'] = this.spanHeight;\r\n\r\n    this.rightWidth = this.calculateRightWidth();\r\n    this.updateAlignment();\r\n  }\r\n\r\n\r\n  // Colors\r\n\r\n  /**\r\n   * Updates the color scheme for the view based on what is selected\r\n   * @param skipUpdateAlignment set to true during ngOnInit to skip this.updateAlignment() and if statement for this.updateMiniMap()\r\n   */\r\n  onSelectedColorChanged(skipUpdateAlignment=false) {\r\n    if (this.selectedSeqType != 'aa') {\r\n      if (this.widgets['alignView-colorSchemeName'] == 'n') {\r\n        this.colorScheme = {\r\n          'A': '#ccff00',\r\n          'C': '#f0e442',\r\n          'G': '#ff9900',\r\n          'T': '#ff6600',\r\n          'ambig': '#ffffff',\r\n        }\r\n        this.useCustomColorScheme = false;\r\n      } else if (this.widgets['alignView-colorSchemeName'] == 'a') {\r\n        this.colorScheme = {\r\n          'A': '#009E73',\r\n          'C': '#F0E442',\r\n          'G': '#E69F00',\r\n          'T': '#D55E00',\r\n          'ambig': '#ffffff',\r\n          }\r\n          this.useCustomColorScheme = false;\r\n      } else {\r\n        this.colorScheme = {\r\n          'A': this.widgets['alignView-customColorScheme']['A'],\r\n          'C': this.widgets['alignView-customColorScheme']['C'],\r\n          'G': this.widgets['alignView-customColorScheme']['G'],\r\n          'T': this.widgets['alignView-customColorScheme']['T'],\r\n          'ambig': this.widgets['alignView-customColorScheme']['ambig'],\r\n          }\r\n        this.useCustomColorScheme = true;\r\n      }\r\n    } else {\r\n      this.useCustomColorScheme = false;\r\n      this.colorScheme =   {\r\n        A: '#33cc00',\r\n        R: '#cc0000',\r\n        N: '#6600cc',\r\n        D: '#0033ff',\r\n        C: '#ffff00',\r\n        Q: '#6600cc',\r\n        E: '#0033ff',\r\n        G: '#33cc00',\r\n        H: '#009900',\r\n        I: '#33cc00',\r\n        L: '#33cc00',\r\n        K: '#cc0000',\r\n        M: '#33cc00',\r\n        F: '#009900',\r\n        P: '#33cc00',\r\n        S: '#0099ff',\r\n        T: '#0099ff',\r\n        W: '#009900',\r\n        Y: '#009900',\r\n        V: '#33cc00',\r\n        X: '#ffffff'\r\n      }\r\n      \r\n    }\r\n\r\n    if (skipUpdateAlignment == false) {\r\n      this.updateAlignment();\r\n      if (this.widgets['alignView-showMiniMap']) {\r\n        this.updateMiniMap();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates the colorScheme for nt given with the e.target.value color\r\n   * @param nt 'A' | 'C' | 'G' | 'T' | 'ambig'\r\n   */\r\n  updateColorScheme(nt, e) {\r\n    this.colorScheme[nt] = e.target.value;\r\n    this.widgets['alignView-customColorScheme'][nt] = e.target.value;\r\n    this.updateAlignment();\r\n    if (this.widgets['alignView-showMiniMap']) {\r\n      this.updateMiniMap();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param index 0=A, 1=C, 2=G, 3=T, anythingElse=ambig\r\n   * @returns the value (hexvalue) from colorScheme based on the index given\r\n   */\r\n  fillColor(index:number) {\r\n    if (this.selectedSeqType == 'aa') {\r\n      switch (index) {\r\n        //['A', 'R', 'N', 'D', 'C', 'E', 'Q', 'G', 'H', 'I', 'L', 'K', 'M', 'F', 'P', 'S', 'T', 'W', 'Y', 'V', '*', '-', 'X']\r\n        case 0:\r\n          return this.colorScheme['A']\r\n        case 1:\r\n          return this.colorScheme['R']\r\n        case 2:\r\n          return this.colorScheme['N']\r\n        case 3:\r\n          return this.colorScheme['D']\r\n        case 4:\r\n          return this.colorScheme['C']\r\n        case 5:\r\n          return this.colorScheme['E']\r\n        case 6:\r\n          return this.colorScheme['Q']\r\n        case 7:\r\n          return this.colorScheme['G']\r\n        case 8:\r\n          return this.colorScheme['H']\r\n        case 9:\r\n          return this.colorScheme['I']\r\n        case 10:\r\n          return this.colorScheme['L']\r\n        case 11:\r\n          return this.colorScheme['K']\r\n        case 12:\r\n          return this.colorScheme['M']\r\n        case 13:\r\n          return this.colorScheme['F']\r\n        case 14:\r\n          return this.colorScheme['P']\r\n        case 15:\r\n          return this.colorScheme['S']\r\n        case 16:\r\n          return this.colorScheme['T']\r\n        case 17:\r\n          return this.colorScheme['W']\r\n        case 18:\r\n          return this.colorScheme['Y']\r\n        case 19:\r\n          return this.colorScheme['V']\r\n        case 22:\r\n          return this.colorScheme['X']\r\n        default:\r\n          return this.colorScheme['X']\r\n      }\r\n    }\r\n    if (index == 0) {\r\n      return this.colorScheme['A'];\r\n    } else if (index == 1) {\r\n      return this.colorScheme['C'];\r\n    } else if (index == 2) {\r\n      return this.colorScheme['G'];\r\n    } else if (index == 3) {\r\n      return this.colorScheme['T'];\r\n    } else {\r\n      return this.colorScheme['ambig'];\r\n    }\r\n  }\r\n\r\n  // Helper\r\n\r\n  /**\r\n   * Searches nodesWithSequences for name given; changes background color for all nodes that are found\r\n   * @param name name/id of node to search for\r\n   * @param field which field from node to search in\r\n   */\r\n  search(name: string, field: string) {\r\n    $('.canvasLabels div').removeClass('searchHighlight2')\r\n    if (name == \"\") {\r\n      return;\r\n    }\r\n\r\n    let isFieldNumerical = typeof this.getData([this.nodesWithSeq[0]], field)[0] === 'number'\r\n\r\n    let data = this.getData(this.nodesWithSeq, (field == 'index' ? ['index'] : ['index', field]))\r\n    let indexes;\r\n    if (isFieldNumerical) {\r\n      indexes = data.filter((obj) => obj[field] == parseFloat(name)).map((obj) => obj['index'])\r\n    } else {\r\n      indexes = data.filter((obj) => obj[field].includes(name)).map((obj) => obj['index'])\r\n    }\r\n    //let indexes = this.nodesWithSeq.filter((obj) => obj.name.includes(name)).map((obj) => this.nodesWithSeq.indexOf(obj));\r\n    if (indexes.length == 0) {\r\n      console.log('not found');\r\n      return;\r\n    }\r\n\r\n    for (let index of indexes) {\r\n      //let element = $('.canvasLabels div').get(index);\r\n      let element = $(`.canvasLabels div[data-index=\"${index}\"]`)\r\n      $(element).addClass('searchHighlight2')\r\n    }\r\n\r\n    // need to scroll if necessary\r\n    let scroll = $('.canvasLabels').scrollTop();\r\n    let topIndex = scroll/this.spanHeight;\r\n    topIndex = (topIndex%1 > .2) ? Math.ceil(topIndex) : Math.floor(topIndex)\r\n    let bottomIndex = Math.floor((this.canvasViewHeight-20) / this.spanHeight + topIndex -1);\r\n    if (indexes[0] < topIndex || indexes[0] > bottomIndex) {\r\n        let scrollPos = (indexes[0])*this.spanHeight -5\r\n        $('.canvasLabels').scrollTop(scrollPos)\r\n    }\r\n    \r\n  }\r\n\r\n  /**\r\n   * Replaces search function and better incorporates with all node-selected events and not node-selected from search\r\n   */\r\n  highlightRows() {\r\n    $('.canvasLabels div').removeClass('searchHighlight2')\r\n    let nodes = this.getData(this.nodesWithSeq, ['index', 'selected']);\r\n    let selectedNodes = nodes.filter(node => node.selected);\r\n\r\n    if (selectedNodes.length == 0) {\r\n      return;\r\n    }\r\n\r\n    for (let node of selectedNodes) {\r\n      //let element = $('.canvasLabels div').get(index);\r\n      let element = $(`.canvasLabels div[data-index=\"${node.index}\"]`)\r\n      $(element).addClass('searchHighlight2')\r\n    }\r\n    let firstPositionSelected = nodes.indexOf(selectedNodes[0])\r\n\r\n    // need to scroll if necessary\r\n    let scroll = $('.canvasLabels').scrollTop();\r\n    let topIndex = scroll/this.spanHeight;\r\n    topIndex = (topIndex%1 > .2) ? Math.ceil(topIndex) : Math.floor(topIndex)\r\n    let bottomIndex = Math.floor((this.canvasViewHeight-20) / this.spanHeight + topIndex -1);\r\n    if (firstPositionSelected < topIndex || firstPositionSelected > bottomIndex) {\r\n        let scrollPos = (firstPositionSelected)*this.spanHeight -5\r\n        $('.canvasLabels').scrollTop(scrollPos)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Opens settings pane\r\n   */\r\n  openSettings() {\r\n    //this.alignmentDialogSettings.isVisible ? this.alignmentDialogSettings.setVisibility(false) : this.alignmentDialogSettings.setVisibility(true);\r\n    this.alignmentDialogSettings.isVisible = !this.alignmentDialogSettings.isVisible\r\n  }\r\n\r\n  /**\r\n   * Updates text in Alignment Top\r\n   */\r\n  onAlignmentTopChange() {\r\n    if (this.widgets['alignView-topDisplay'] == 'barplot') {\r\n      $('#alignmnetTopTitle').text('Bar Plot').prop('title', 'Barplot representation of the sequences that shows the proportion of each nucleotide at each position.');\r\n    } else {\r\n      $('#alignmnetTopTitle').text('Logo').prop('title', 'Logo representation of the sequences that shows the proportion of each nucleotide at each position.');\r\n    }\r\n  }\r\n\r\n  /** XXXX May need to remove; currently use position matrix instead of calculating each XXXX\r\n   * @param i current index of the base/nt in proportion matrix\r\n   * @param j A=0, C=1, G=2, T=3, other/ambiguos=4\r\n   * @returns location for the y value of rectangle in the logo\r\n   */\r\n  calculateY(i:number, j:number) {\r\n    if (j == 4) { return 0}\r\n    let nt = this.proportionMatrix[i];\r\n    let y = nt[4]*100;\r\n    if (j==0) { return y }\r\n    for (let k=0; k<j; k++) {\r\n      y += nt[k]*100\r\n    }\r\n    return y;\r\n  }\r\n\r\n  /**\r\n   * Sychronises horizonal scrolls on canvasHolder with alignmentTop and vertical scrolls on canvasHolder with canvasLabels\r\n   * @param canvasHolder div class=\"canvasHolder\"\r\n   * @param canvasLabels div class=\"canvasLabels\"\r\n   * @param alignmentTop div class=\"alignmentTop\"\r\n   */\r\n  canvasScroll(canvasHolder: HTMLElement, canvasLabels: HTMLElement, alignmentTop: HTMLElement) {\r\n    if (canvasHolder.scrollLeft != alignmentTop.scrollLeft) {\r\n      alignmentTop.scrollLeft = canvasHolder.scrollLeft\r\n    }\r\n    if (canvasHolder.scrollTop != canvasLabels.scrollTop) {\r\n      canvasLabels.scrollTop = canvasHolder.scrollTop;\r\n    }   \r\n  }\r\n\r\n\r\n  /**\r\n  * Generate a tabular HTML string from the index of proportionMatrix\r\n  * @param data index of the position to use to make the HTML string of the table\r\n  * @returns an HTML string with a table representation of the data\r\n  */\r\n  tabulate(index) {\r\n    let dataType = this.selectedSeqType == 'aa' ? 'AA': 'NT'\r\n\r\n    let tableHtml = `\r\n        <style>\r\n        #tooltip-table {\r\n            border-spacing: 0;\r\n            width: 100%;\r\n            border: 1px solid #ddd;\r\n            z-index: 1000;\r\n        }\r\n        \r\n        #tooltip-table td, #tooltip-table th {\r\n            text-align: left;\r\n            padding: 2px;\r\n            border: 1px solid #ddd;\r\n        }\r\n        \r\n        #tooltip-table tr:nth-child(even) {\r\n            background-color: #f2f2f2;\r\n        }\r\n        \r\n        #tooltip-table tr:nth-child(odd) {\r\n            background-color: #fff;\r\n        }\r\n        </style>\r\n        <div>Position: ${index+1}</div>\r\n        <table id=\"tooltip-table\"><thead><th>${dataType}</th><th> % </th></thead><tbody>`;\r\n\r\n        \r\n        if (this.selectedSeqType == 'aa') {\r\n          let data = this.proportionMatrixAA[index];\r\n          let nonZeroIndexes = [];\r\n          let index2NT = ['A', 'R', 'N', 'D', 'C', 'E', 'Q', 'G', 'H', 'I', 'L', 'K', 'M', 'F', 'P', 'S', 'T', 'W', 'Y', 'V', 'STOP', 'GAP', 'UNK'];\r\n          data.forEach((value, index) => {\r\n            if (value > 0) nonZeroIndexes.push(index);\r\n          })\r\n          nonZeroIndexes.sort(compareIndices);\r\n          function compareIndices(a,b) {\r\n            return data[b] - data[a]\r\n          }\r\n          let numberOfRows = Math.min(4, nonZeroIndexes.length)\r\n          let sum = 0;\r\n          for (let i = 0; i< numberOfRows; i++) {\r\n            let AAindex = nonZeroIndexes[i];\r\n            tableHtml += `<tr><td>${index2NT[AAindex]}</td><td>`+(data[AAindex]*100).toFixed(1) +'%</td>';\r\n            sum += data[AAindex];\r\n          }\r\n          if (sum <= 0.99) {\r\n            tableHtml += `<tr><td>Other</td><td>`+((1-sum)*100).toFixed(1) +'%</td>';\r\n          }\r\n          \r\n        } else {\r\n          for (let i = 0; i<5; i++) {\r\n            let data = this.proportionMatrix[index]\r\n            tableHtml += '<tr>';\r\n            if (i == 0) {\r\n              tableHtml += '<td>A</td><td>' + (data[i]*100).toFixed(1) + '%</td>';\r\n            } else if (i == 1) {\r\n              tableHtml += '<td>C</td><td>' + (data[i]*100).toFixed(1) + '%</td>';\r\n            } else if (i == 2) {\r\n              tableHtml += '<td>G</td><td>' + (data[i]*100).toFixed(1) + '%</td>';\r\n            } else if (i == 3) {\r\n              tableHtml += '<td>T</td><td>' + (data[i]*100).toFixed(1) + '%</td>';\r\n            } else {\r\n              tableHtml += '<td>other</td><td>' + (data[i]*100).toFixed(1) + '%</td>'\r\n            }\r\n            tableHtml += '</tr>';\r\n          } \r\n        }\r\n        \r\n    tableHtml += '</tbody></table>';\r\n\r\n    return tableHtml;\r\n  }\r\n\r\n  /**\r\n  * @returns an array [X, Y] of the position of mouse relative to alignment view. Global position (i.e. d3.event.pageX) doesn't work for a dashboard\r\n  */  \r\n  getRelativeMousePosition(e) {\r\n    let rect = document.querySelector('alignmentviewcomponent').getBoundingClientRect();\r\n    let X = e.pageX - rect.left;\r\n    let Y = e.pageY - rect.top; \r\n    return [X, Y];\r\n  }\r\n\r\n  /**\r\n   * Set events such as node-selected so that they can be triggered; such as with search\r\n   */\r\n  setEvents() {\r\n    let that = this;\r\n\r\n    $(document).on( \"node-selected\", function( ) {  \r\n      //that.search($('#search').val() as string, $('#search-field').val() as string)\r\n      that.highlightRows();\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * updates labelArray and then searches again if needed\r\n   */\r\n  onLabelFieldChange() {\r\n    this.labelArray = this.getData(this.nodesWithSeq, ['index', this.widgets['alignView-labelField']])\r\n    \r\n    setTimeout(()=>this.highlightRows(), 1);\r\n  }\r\n\r\n  /**\r\n   * Sorts the indexes in nodesWithSeq based on the field selected. \r\n   * After updating nodesWithSeq, it updates labelArray, seqArray, seqArrayShortened, main canvas, and minimap\r\n   */\r\n  onSortFieldChange() {\r\n    let newSort;\r\n    let sortField = this.widgets['alignView-sortField']\r\n    if (sortField == \"None\") {\r\n      return;\r\n    } else if ( sortField == \"index\") {\r\n      //return\r\n      newSort = this.getData(this.nodesWithSeq, [sortField]).sort((a,b) => a[sortField] -b[sortField]);\r\n      //this.nodesWithSeq.sort((a,b) => )\r\n    } else if (typeof this.getData([this.nodesWithSeq[0]], sortField)[0] == 'number') {\r\n      newSort = this.getData(this.nodesWithSeq, ['index', sortField]).sort((a,b) => a[sortField] - b[sortField]);\r\n    } else {\r\n      newSort = this.getData(this.nodesWithSeq, ['index', sortField]).sort((a,b) => a[sortField].localeCompare(b[sortField]));\r\n    }\r\n\r\n    // updates nodesWithSeq\r\n    this.nodesWithSeq = newSort.map((obj) => obj['index'])\r\n    // updates labelArray with new sort\r\n    this.onLabelFieldChange();\r\n\r\n    // updates seqArray with new order\r\n    this.seqArray = this.getData(this.nodesWithSeq, 'seq');\r\n\r\n    // updates seqArrayShortened with new order\r\n    this.shortenNodesWithSeq();\r\n\r\n    // updates main canvas and minimap canvas\r\n    this.updateAlignment();\r\n  }\r\n\r\n  \r\n  updateNodeColors() { }\r\n  updateLinkColor() { }\r\n\r\n  updateVisualization() {\r\n  }\r\n\r\n  // function is called when style file is applied\r\n  applyStyleFileSettings() {\r\n    this.widgets = (window as any).context.commonService.session.style.widgets;\r\n\r\n    this.labelArray = this.getData(this.nodesWithSeq, ['index', this.widgets['alignView-labelField']]);\r\n\r\n    // sets different variables relating to size and display\r\n    this.onAlignmentTopChange()\r\n\r\n    if (this.widgets['alignView-colorSchemeName'] == 'n' || this.widgets['alignView-colorSchemeName'] == 'a') {\r\n      this.useCustomColorScheme = false;\r\n    } else {\r\n      this.useCustomColorScheme = true;\r\n    }\r\n    this.onSelectedColorChanged(true)\r\n\r\n    // updates spanWidth, spanHeight, rightWidth, leftWidth, fontSize, and then updates alignment\r\n    this.onSelectedSizeChanged()\r\n\r\n    // updates shows or hides minimap and then updates view heights\r\n    this.updateMiniMapVisibility()\r\n  }\r\n\r\n  goldenLayoutComponentResize() {\r\n    this.updateViewHeights()\r\n    this.rightWidth = this.calculateRightWidth()\r\n  }\r\n\r\n  openRefreshScreen() {\r\n    \r\n  }\r\n  onRecallSession() {\r\n    \r\n  }\r\n  onLoadNewData() {   \r\n  }\r\n  onFilterDataChange() {\r\n    \r\n  }\r\n\r\n  /**\r\n   * Opens the Alignment View Export Pain\r\n  */\r\n  openExport() {\r\n    this.ShowAlignExportPane = true;\r\n  }\r\n\r\n  /**\r\n   * Exports the alignmentTop and main canvas as png image\r\n   */\r\n  exportPNG() {\r\n    let that = this;\r\n    let alignmentTop = document.querySelector('#alignmentTop svg');\r\n    let mainCanvas = $('.canvasHolder canvas').get(0) as HTMLCanvasElement\r\n    let exportWidth = mainCanvas.width\r\n    let exportHeight = mainCanvas.height + 140;\r\n    svgAsPngUri(alignmentTop, {\r\n      scale: 1,\r\n      backgroundColor: '#ffffff',\r\n      encoderType: 'image/png',\r\n      encoderOptions: 0.8\r\n    }).then((topB64string) => {\r\n      let imageDataUrl;\r\n\r\n      let exportCanvas = document.createElement(\"canvas\");\r\n      exportCanvas.height = exportHeight;\r\n      exportCanvas.width = exportWidth;\r\n      let ctx = exportCanvas.getContext(\"2d\");\r\n\r\n      let iTop = new Image();\r\n      let iMain = new Image();\r\n      iTop.src = topB64string;\r\n      iTop.onload = function() {\r\n        iMain.src = mainCanvas.toDataURL()\r\n        iMain.onload = function() {\r\n\r\n          ctx.drawImage(iTop, 0, 0)\r\n          ctx.drawImage(iMain, 0, 140)\r\n\r\n          imageDataUrl = exportCanvas.toDataURL(\"image/png\")\r\n          saveAs(imageDataUrl, that.AlignmentExportFileName + '.png')\r\n        }\r\n      }\r\n  }); \r\n  }\r\n\r\n  /**\r\n   * Exports the alignment top and main canvas as svg or png image\r\n   */\r\n  exportVisualization() {\r\n    $(\"body\").css(\"cursor\", \"progress\");\r\n    if (this.AlignmentExportFileTypeVis == 'png') {\r\n      this.exportPNG();\r\n    } else {\r\n      \r\n    let canvas = $('.canvasHolder canvas').get(0) as HTMLCanvasElement\r\n    let canvasDataURL = canvas.toDataURL();\r\n  \r\n    let foreignObj = document.createElementNS('http://www.w3.org/2000/svg', 'image')\r\n    foreignObj.setAttribute('x', '0'); // Set the x-coordinate\r\n    foreignObj.setAttribute('y', '140'); // Set the y-coordinate\r\n    foreignObj.setAttribute('width', canvas.width.toString()); // Set the width\r\n    foreignObj.setAttribute('height', canvas.height.toString()); // Set the height\r\n    foreignObj.setAttribute('xlink:href', canvasDataURL);\r\n\r\n    let top = $('#alignmentTop svg').get(0)\r\n    top.style.height = 150+canvas.height+'px'\r\n    top.appendChild(foreignObj);\r\n\r\n    let content = this.exportService.unparseSVG(top);\r\n    let blob = new Blob([content], { type: 'image/svg+xml;charset=utf-8' });\r\n    saveAs(blob, this.AlignmentExportFileName + '.svg');\r\n\r\n    top.style.height = 150+canvas.height+'px';\r\n    top.removeChild(foreignObj)\r\n    }\r\n    $(\"body\").css(\"cursor\", \"default\");\r\n  }\r\n\r\n  /**\r\n   * Exports sequencing data (id + seq string) as fasta or mega file\r\n   */\r\n  exportData(includeConsensus=false) {\r\n    let data, consensus, megaFormat;\r\n    if (this.selectedSeqType == 'aa') {\r\n      let labels = this.getData(this.nodesWithSeq, '_id')\r\n      data = labels.map((id, index) => ({ '_id': id, seq: this.seqArray[index] }));\r\n      consensus = includeConsensus? this.getConsensus(this.proportionMatrixAA, 'plurality', 'aa') : '';\r\n      megaFormat = 'DataType=Protein Missing=X Indel=-;\\r\\n\\r\\n'\r\n    } else {\r\n      data = this.getData(this.nodesWithSeq, ['_id', 'seq']);\r\n      consensus = includeConsensus? this.getConsensus(this.proportionMatrix) : '';\r\n      megaFormat = 'DataType=DNA CodeTable=Standard\\r\\n\\tIdentical=. Missing=? Indel=-;\\r\\n\\r\\n'\r\n    }\r\n    if (this.AlignmentExportFileTypeData == 'fasta') {\r\n      let consensusString = includeConsensus? '>consensus\\r\\n' + consensus + \"\\r\\n\":'';\r\n      let blob = new Blob([consensusString, data.map(node => \">\" + node._id + \"\\r\\n\" + node.seq).join(\"\\r\\n\")])\r\n      saveAs(blob, this.AlignmentExportFileName+'.fasta')\r\n    } else if (this.AlignmentExportFileTypeData == 'mega') {\r\n      let headers = \"#mega\\r\\n!Title \" + this.AlignmentExportFileName + \";\\r\\n!Format\\r\\n\\t\" + megaFormat;\r\n      let consensusString = includeConsensus? '#consensus\\r\\n' + consensus + \"\\r\\n\" : '';\r\n      let blob = new Blob([headers, consensusString, data.map(node => \"#\" + node._id + \"\\r\\n\" + node.seq).join(\"\\r\\n\")])\r\n      saveAs(blob, this.AlignmentExportFileName+'.meg')\r\n    }\r\n  }\r\n\r\n  exportDataTable(option='basic', includeConsensus) {\r\n    // basic 5 number for each position     // may not use basic option but keeping it for now\r\n    // advances includes proportion for gaps and each ambiguous nucleotide option\r\n    // [A, C, G, T, #other/ambig]\r\n    let csvString;\r\n    if (option == 'basic') {\r\n      let csvHeader = 'A,C,G,T,other (including gap and abiguous)\\n';\r\n      csvString = csvHeader + this.proportionMatrix.map(innerArray => innerArray.join(',')).join('\\n');\r\n    } else if (includeConsensus) {\r\n      let csvHeader;\r\n      let proportionMatrix;\r\n      let consensus;\r\n      if (this.selectedSeqType =='aa') {\r\n        csvHeader = 'position,consensus,\"consensus ambiguities (most prevalent AA outside of brackets, other AAs found at this position inside brackets)\",A,R,N,D,C,E,Q,G,H,I,L,K,M,F,P,S,T,W,Y,V,stop,gap,ambiguous\\n';\r\n        proportionMatrix = this.proportionMatrixAA;\r\n        consensus = this.getConsensus(proportionMatrix, 'meme', 'aa')\r\n      } else {\r\n        csvHeader = 'position,consensus,\"consensus ambiguities (most prevalent NT outside of brackets, other NTs found at this position inside brackets)\",A,C,G,T,gap,N,R,Y,K,M,S,W,B,D,H,V,other\\n';\r\n        proportionMatrix= this.calculateAdvancedProportion();\r\n        consensus = this.getConsensus(proportionMatrix, 'meme')\r\n      }\r\n       \r\n      let consensusInterator = getNextPosition(consensus);\r\n      csvString = csvHeader + proportionMatrix.map((innerArray,pos) => {\r\n        let chars = consensusInterator.next().value;\r\n        return (pos+1) + ',' + chars.charAt(0)+',' + chars + ',' + innerArray.join(',')\r\n      }).join('\\n');\r\n    } else {\r\n      let proportionMatrix;\r\n      let csvHeader;\r\n      if (this.selectedSeqType == 'aa') {\r\n        csvHeader = 'position,A,R,N,D,C,E,Q,G,H,I,L,K,M,F,P,S,T,W,Y,V,stop,gap,ambiguous\\n';\r\n        proportionMatrix = this.proportionMatrixAA;\r\n      } else {\r\n        csvHeader = 'position,A,C,G,T,gap,N,R,Y,K,M,S,W,B,D,H,V,other\\n';\r\n        proportionMatrix = this.calculateAdvancedProportion();\r\n      }\r\n\r\n      csvString = csvHeader + proportionMatrix.map((innerArray,pos) => (pos+1)+ ',' + innerArray.join(',')).join('\\n');\r\n    }\r\n    function* getNextPosition(input) {\r\n      for (let i = 0; i < input.length; i++) {\r\n        const char = input[i];\r\n        if (input[i+1] === '[') {\r\n            // Yield the character and everything in the brackets\r\n            let bracketContent = '';\r\n            while (input[i] !== ']') {\r\n                bracketContent += input[i];\r\n                i++;\r\n            }\r\n            bracketContent += ']';\r\n            yield bracketContent;\r\n        } else {\r\n            // Yield individual characters\r\n            yield char;\r\n        }\r\n      }\r\n    }\r\n\r\n    let blob = new Blob([csvString], { type: 'text/csv' })\r\n    saveAs(blob, this.AlignmentExportFileName + '.csv')\r\n  }\r\n\r\n  /** Gets the consensus sequence of a NT or AA sequence, defined by most common char at a position (not based on meeting a threshold);\r\n   * \r\n   * Option: \r\n   ** 'pluratily' returns just the sequence of most common bases\r\n   ** 'meme' return the most common base, then adds other bases found at that position in brackets.\r\n   * \r\n   * Given all A at first 1, and 70% C and 30% A at 2nd pos, plurality returns 'AC', 'meme' returns 'AC[A]'\r\n   */\r\n  getConsensus(proportionMatrix, option='plurality', seq='nt') {\r\n    let consensusSeq = '';\r\n    if (option == 'plurality') {\r\n      let index2NT = seq == 'nt' ? ['A', 'C', 'G', 'T', '-'] : ['A', 'R', 'N', 'D', 'C', 'E', 'Q', 'G', 'H', 'I', 'L', 'K', 'M', 'F', 'P', 'S', 'T', 'W', 'Y', 'V', '*', '-', 'X']\r\n      proportionMatrix.forEach((row) => {\r\n        let maxPos = row.indexOf(Math.max(...row));\r\n        if (maxPos > 4 && seq=='nt') {consensusSeq += 'N'}\r\n        else {consensusSeq += index2NT[maxPos];}\r\n      })\r\n      return consensusSeq;\r\n    } else if (option == 'meme') {\r\n      let index2NT = seq == 'nt' ?  ['A','C','G','T','-','N','R','Y','K','M','S','W','B','D','H','V', 'invalid'] : ['A', 'R', 'N', 'D', 'C', 'E', 'Q', 'G', 'H', 'I', 'L', 'K', 'M', 'F', 'P', 'S', 'T', 'W', 'Y', 'V', '*', '-', 'X'];\r\n      proportionMatrix.forEach((row) => {\r\n        let nonZeroIndexes = [];\r\n        row.forEach((value, index) => {\r\n          if (value > 0) nonZeroIndexes.push(index);\r\n        })\r\n        nonZeroIndexes.sort(compareIndices);\r\n        function compareIndices(a,b) {\r\n          return row[b] - row[a]\r\n        }\r\n        nonZeroIndexes.forEach((index, pos) => {\r\n          if (pos == 1) {\r\n            consensusSeq += '['\r\n          }\r\n          consensusSeq += index2NT[index]\r\n        })\r\n        if (nonZeroIndexes.length > 1) consensusSeq+=']'\r\n      })\r\n\r\n      return consensusSeq;\r\n    }\r\n  }\r\n}\r\n\r\nexport namespace AlignmentViewComponent {\r\n  export const componentTypeName = 'Alignment View';\r\n}\r\n\r\n","\r\n// Moved out of alignment-view-plugin-component, so that it can be accessed from files view without having to initialize the whole view\r\n/**\r\n   * Adapted from  https://github.com/CDCgov/AlignmentViewer to also allow minimum charSetting, accepts array of seq (not array of seq objects)\r\n   * @param seqs array of sequences objects ['ATGA...', 'TATA...', ...]\r\n   * @param config  object: { width: number, height: number, charSetting:['hide'|'show'|'min'], fontSize: number, colors: {'A':'#000000', 'C': , 'G':, 'T':, 'ambig':}}\r\n   * @returns promise of a HTMLCanvasElement showing the alignment\r\n   */\r\nexport function generateCanvas(seqs, config) {\r\n    config = Object.assign({\r\n      width: 1,\r\n      height: 1,\r\n      'charSetting': 'hide'\r\n    }, config, {\r\n      colors: Object.assign({\r\n        'A': '#ccff00',\r\n        'C': '#ffff00',\r\n        'G': '#ff9900',\r\n        'T': '#ff6600',\r\n        'ambig': '#ffffff'\r\n      }, ('colors' in config) ? config.colors : {}),\r\n    });\r\n  \r\n    return new Promise(resolve => {\r\n      let longest = 0;\r\n      let n = seqs.length;\r\n      for (let i = 0; i < n; i++) {\r\n        let seq = seqs[i].toUpperCase();\r\n        if (seq.length > longest) longest = seq.length;\r\n      }\r\n      let ch = Math.ceil(config.height);\r\n      let cw = Math.ceil(config.width);\r\n      let width = longest * config.width;\r\n      let height = seqs.length * config.height;\r\n      let canvas = document.createElement('canvas');\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n      let context = canvas.getContext('2d', { alpha: false });\r\n      context.fillStyle = config.colors['ambig'];\r\n      context.fillRect(0, 0, width, height);\r\n      Object.keys(config.colors).forEach(nucleotide => {\r\n        if(nucleotide == 'ambig') return;\r\n        context.fillStyle = config.colors[nucleotide];\r\n        for (let row = 0; row < n; row ++) {\r\n          let seq = seqs[row];\r\n          let y = Math.floor(row * ch);\r\n          for (let col = 0; col < longest; col++) {\r\n            let c = seq[col];\r\n            if(!c) break;\r\n            if(c != nucleotide) continue;\r\n            let x = Math.floor(col * cw);\r\n            context.fillRect(x, y, cw, ch);\r\n          }\r\n        }\r\n      });\r\n      context.font = (config.fontSize) + 'px mono';\r\n      context.textAlign = 'center';\r\n      context.textBaseline = 'bottom';\r\n      context.fillStyle = 'black';\r\n      if(config.charSetting=='show'){\r\n        for (let row = 0; row < n; row++) {\r\n          let seq = seqs[row];\r\n          let y = row * ch + ch;\r\n          for (let col = 0; col < longest; col++) {\r\n            let c = seq[col];\r\n            if(!c) break;\r\n            let x = col * cw + cw/2;\r\n            context.fillText(c, x, y, cw);\r\n          }\r\n        }\r\n      } else if (config.charSetting=='min'){\r\n        let refSeq = seqs[0]\r\n        for (let col = 0; col < longest; col++) {\r\n          let c = refSeq[col];\r\n          if(!c) break;\r\n          let x = col * cw + cw/2;\r\n          context.fillText(c, x, ch, cw);\r\n        }\r\n\r\n        for (let row = 1; row < n; row++) {\r\n          let seq = seqs[row];\r\n          let y = row * ch + ch;\r\n          for (let col = 0; col < longest; col++) {\r\n            let c = (refSeq[col] != seq[col] || seq[col]=='-' || refSeq[col] == ' ')? seq[col]: '.';\r\n            if(!c) break;\r\n            let x = col * cw + cw/2;\r\n            context.fillText(c, x, y, cw);\r\n          }\r\n        } \r\n\r\n      }\r\n      resolve(canvas);\r\n    });\r\n  }","import { ChangeDetectorRef, Component, ElementRef, Inject, OnInit, Output, EventEmitter, ViewChild, OnDestroy } from '@angular/core';\r\nimport { SelectItem } from 'primeng/api';\r\nimport * as saveAs from 'file-saver';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\n\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { CommonService } from '@app/contactTraceCommonServices/common.service';\r\nimport { MicobeTraceNextPluginEvents } from '@app/helperClasses/interfaces';\r\nimport { MicrobeTraceNextVisuals } from '@app/microbe-trace-next-plugin-visuals';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport cytoscape, { Core } from 'cytoscape';\r\nimport svg from 'cytoscape-svg';\r\nimport { ExportService, ExportOptions } from '@app/contactTraceCommonServices/export.service';\r\nimport { Subject, Subscription, takeUntil } from 'rxjs';\r\nimport { CommonStoreService } from '@app/contactTraceCommonServices/common-store.services';\r\n\r\ntype DataRecord = { index: number, id: string, x: number; y: number, color: string, Xgroup: number, Ygroup: number, strokeColor: string, totalCount?: number, counts ?: any }//selected: boolean }\r\n\r\n@Component({\r\n  selector: 'bubble-component',\r\n  templateUrl: './bubble.component.html',\r\n  styleUrls: ['./bubble.component.scss']\r\n})\r\nexport class BubbleComponent extends BaseComponentDirective implements OnInit, MicobeTraceNextPluginEvents, OnDestroy {\r\n\r\n  @Output() DisplayGlobalSettingsDialogEvent = new EventEmitter();\r\n\r\n  @ViewChild('cyBubble', { static: false }) cyContainer: ElementRef;\r\n  @ViewChild('bubbleTooltip') toolTip: ElementRef;\r\n  \r\n  cy: Core;\r\n  \r\n  visuals: MicrobeTraceNextVisuals;\r\n  widgets: any;\r\n\r\n  viewActive: boolean = true;\r\n  settingsOpen: boolean = false;\r\n  exportOpen: boolean = false;\r\n\r\n  BubbleExportFileType: string = 'png'\r\n  BubbleExportFileName: string = ''\r\n  SelectedBubbleExportScaleVariable: number = 1;\r\n  CalculatedResolution: string;\r\n\r\n  viewHeight: number;\r\n  viewWidth: number;\r\n\r\n  selectedFieldList: SelectItem[] = [];\r\n  xVariable: string;\r\n  yVariable: string;\r\n  xVarDate: boolean = false;\r\n  yVarDate: boolean = false;\r\n  nodeSize: number;\r\n  nodeSpacing = 0.05;\r\n  labelSize: number = 12;\r\n\r\n  allData: DataRecord[] = [];\r\n  visibleData: DataRecord[] = [];\r\n\r\n  X_categories: string[] = []\r\n  X_tickValues = []\r\n\r\n  Y_categories: string[] = []\r\n  Y_tickValues = []\r\n\r\n  scaleFactor: number = 200;\r\n  svgDefs: {} = {};\r\n\r\n  OnOffTypes: any = [\r\n    { label: 'On', value: true },\r\n    { label: 'Off', value: false }\r\n  ];\r\n  SelectedNodeCollapsingTypeVariable: boolean;\r\n\r\n  private suppressCySelectionEvents: boolean = false;\r\n\r\n  private destroy$ = new Subject<void>();\r\n\r\n  constructor(\r\n    public commonService: CommonService,\r\n    @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer,\r\n    elRef: ElementRef,\r\n    private cdref: ChangeDetectorRef,\r\n    private gtmService: GoogleTagManagerService,\r\n    private store: CommonStoreService,\r\n    private exportService: ExportService\r\n  ) {\r\n    super(elRef.nativeElement);\r\n\r\n    this.visuals = commonService.visuals;\r\n    this.visuals.bubble = this;\r\n    this.widgets = this.commonService.session.style.widgets;\r\n\r\n    cytoscape.use(svg);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.gtmService.pushTag({\r\n      event: \"page_view\",\r\n      page_location: \"/bubble\",\r\n      page_title: \"Bubble View\"\r\n    });\r\n\r\n    try {\r\n      this.viewHeight = this.container.height - 73;\r\n      this.viewWidth = this.container.width - 42;\r\n    } catch (error) {\r\n      console.log('unable to set proper view sizes for bubble view, setting to default values');\r\n      this.viewWidth = 800;\r\n      this.viewHeight = 600;\r\n    } \r\n    \r\n    this.selectedFieldList.push({ label: \"None\", value: \"None\"})\r\n    this.commonService.session.data['nodeFields'].map((d) => {\r\n      if (['seq', 'origin', '_diff', '_ambiguity', 'index', '_id'].includes(d)) return;\r\n      this.selectedFieldList.push({\r\n        label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n        value: d\r\n      });\r\n    })\r\n\r\n    this.setWidgets();\r\n    this.updateAxisValues('X');\r\n    this.updateAxisValues('Y');\r\n\r\n    this.getData();\r\n    this.onNodeSizeChange();\r\n\r\n    this.container.on('resize', () => { this.goldenLayoutComponentResize()})\r\n    this.container.on('hide', () => { \r\n      this.viewActive = false; \r\n      this.cdref.detectChanges();\r\n    })\r\n    this.container.on('show', () => { \r\n        this.viewActive = true; \r\n        this.setSelectedNodes(this);\r\n        setTimeout(() => {\r\n          this.goldenLayoutComponentResize();\r\n          this.cdref.detectChanges();\r\n        }, 5)\r\n\r\n    })\r\n    \r\n    let that = this;\r\n    $(document).on(\"node-selected\", function() {\r\n      if (that.viewActive && that.cy) {\r\n        that.visuals.bubble.setSelectedNodes(that);\r\n      }\r\n    });\r\n\r\n    this.store.clusterUpdate$.pipe(takeUntil(this.destroy$)).subscribe(() => {\r\n      if (this.widgets['node-color-variable'] == 'cluster') {\r\n        this.updateNodeColors();\r\n      }\r\n      if (this.xVariable == \"cluster\") {\r\n        this.onDataChange('X');\r\n      }\r\n      if (this.yVariable == \"cluster\") {\r\n        this.onDataChange('Y');\r\n      }\r\n    })\r\n\r\n    $( document ).on( \"node-visibility\", function( ) {\r\n      //console.log('node visi event')\r\n      that.updateVisibleNodes()\r\n      that.updateNodes();\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.generateCytoscape();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n\r\n    if (this.cy){\r\n        this.cy.removeAllListeners();\r\n        this.cy.destroy();\r\n    }\r\n    this.cyContainer = null;\r\n  }\r\n\r\n  setWidgets() {\r\n    if (this.widgets['bubble-x'] == undefined || !(this.selectedFieldList.map(x=> x.value).includes(this.widgets['bubble-x']))) {\r\n      this.xVariable = 'cluster';\r\n      this.widgets['bubble-x'] = this.xVariable;\r\n    } else {\r\n      this.xVariable = this.widgets['bubble-x'];\r\n    }\r\n\r\n    if (this.widgets['bubble-y'] == undefined || !(this.selectedFieldList.map(x=> x.value).includes(this.widgets['bubble-y']))) {\r\n      this.xVariable = 'None';\r\n      this.widgets['bubble-y'] = this.xVariable;\r\n    } else {\r\n      this.yVariable = this.widgets['bubble-y']\r\n    }\r\n\r\n    if (this.widgets['bubble-x'] == 'None' && this.widgets['bubble-y'] == 'None') {\r\n      this.openSettings();\r\n    }\r\n\r\n    if (this.widgets['bubble-size'] < 10 || this.widgets['bubble-size'] > 40 || this.widgets['bubble-size'] == undefined || this.widgets['bubble-size'] == null || typeof this.widgets['bubble-size'] != 'number') {\r\n      this.widgets['bubble-size'] = 15;\r\n    }\r\n    this.nodeSize = this.widgets['bubble-size']\r\n\r\n    if (this.widgets['bubble-charge'] < .01 || this.widgets['bubble-charge'] > .15 || this.widgets['bubble-charge'] == undefined || this.widgets['bubble-charge'] == null || typeof this.widgets['bubble-charge'] != 'number') {\r\n      this.widgets['bubble-charge'] = 0.05;\r\n    }\r\n    this.nodeSpacing = this.widgets['bubble-charge']\r\n\r\n    if (this.widgets['bubble-collapsed'] == undefined || this.widgets['bubble-collapsed'] == null) {\r\n      this.widgets['bubble-collapsed'] = false;\r\n    }\r\n    this.SelectedNodeCollapsingTypeVariable = this.widgets['bubble-collapsed']\r\n  }\r\n\r\n  mapDataToCytoscapElements(data: DataRecord[]): cytoscape.ElementsDefinition {\r\n    const nodes = data.map((node) => {\r\n      let size = this.SelectedNodeCollapsingTypeVariable ? this.nodeSize * Math.sqrt(node.totalCount): this.nodeSize;\r\n      // probably do something here for node size\r\n      return {\r\n        data: {\r\n          id: node.id,\r\n          nodeSize: size,\r\n          nodeColor: node.color,\r\n          label: node.id,\r\n          counts: node.counts,\r\n          totalCount: node.totalCount,\r\n        },\r\n        position: {\r\n          x: node.x*this.scaleFactor,\r\n          y: node.y*this.scaleFactor\r\n        }\r\n      }\r\n    })\r\n\r\n    return { nodes: nodes, edges: null }\r\n  }\r\n\r\n  estimateSize(text: string) {\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    ctx.font = `${this.labelSize}px Helvetica Neue`;\r\n    const metrics = ctx.measureText(text);\r\n\r\n    return metrics.width;\r\n  }\r\n\r\n  AddAxes() {\r\n    let Axes = [];\r\n    if ( this.xVariable != 'None') {\r\n      this.X_categories.forEach((value, i) => {\r\n        let label;\r\n        if (this.xVarDate) {\r\n          label = new Date(Date.parse(value)).toLocaleDateString('en-US', { \r\n            year: 'numeric', \r\n            month: '2-digit', \r\n            day: '2-digit' \r\n          });\r\n          if (label == 'Invalid Date') {\r\n            label = 'Unknown'\r\n          }\r\n        } else {\r\n          label = value== null || value == undefined ? 'Unknown': value;\r\n        }\r\n        Axes.push(\r\n          {group: 'nodes', data: {id: `x_axis${i}`, label: label}, position: {x: i*this.scaleFactor, y: this.Y_categories.length*this.scaleFactor-50}, classes: ['X_axis'],\r\n        })\r\n      })\r\n\r\n      Axes.push({ group: 'nodes', data: {id: 'x_axis_Label', label: this.commonService.capitalize(this.xVariable)}, position: {x: (this.X_categories.length-1)*this.scaleFactor/2, y: this.Y_categories.length*this.scaleFactor}, classes: ['X_axis', 'axisLabel']})\r\n    }\r\n\r\n    let longestYLabel: string = '';\r\n    if ( this.yVariable != 'None') {\r\n      this.Y_categories.forEach((value, i) => {\r\n        let label;\r\n        if (this.yVarDate) {\r\n          label = new Date(Date.parse(value)).toLocaleDateString('en-US', { \r\n            year: 'numeric', \r\n            month: '2-digit', \r\n            day: '2-digit' \r\n          });\r\n          if (label == 'Invalid Date') {\r\n            label = 'Unknown'\r\n          }\r\n        } else {\r\n          label = value== null || value == undefined ? 'Unknown': value;\r\n        }\r\n        if (label.length > longestYLabel.length) longestYLabel = label\r\n        Axes.push(\r\n          {group: 'nodes', data: {id: `y_axis${i}`, label: label}, position: {x: -80, y: i*this.scaleFactor}, classes: ['Y_axis'],\r\n        })\r\n      });\r\n      let yAxisLabelOffset = this.estimateSize(longestYLabel) + 20\r\n\r\n      Axes.push({ group: 'nodes', data: {id: 'y_axis_Label', label: this.commonService.capitalize(this.yVariable)}, position: {x: -(80+yAxisLabelOffset), y: (this.Y_categories.length-1)*this.scaleFactor/2}, classes: ['Y_axis', 'axisLabel']})\r\n\r\n    }\r\n\r\n    this.cy.add(Axes);\r\n    this.cy.fit(this.cy.nodes(), 30);\r\n    this.cy.nodes().lock()\r\n  }\r\n\r\n  getCytoscapeStyle(): cytoscape.StylesheetCSS[] {\r\n    return [\r\n      {\r\n        selector: 'node',\r\n        css: {\r\n            //'background-color': 'data(nodeColor)', // Use dynamic node color\r\n            //'label': 'data(label)',\r\n            'width': 'data(nodeSize)',\r\n            'height': 'data(nodeSize)',\r\n            'border-width': 3, // Use dynamic border width\r\n            'border-color': '#000000',\r\n        }\r\n      },\r\n      // Apply styles only to nodes with nodeColor defined\r\n      {\r\n        selector: 'node[nodeColor]',\r\n        css: {\r\n            'background-color': 'data(nodeColor)'\r\n        }\r\n      },\r\n      {\r\n        selector: '.X_axis',\r\n        css: {\r\n          'label': 'data(label)',\r\n          'shape': 'rectangle',\r\n          'font-size' : this.labelSize,\r\n          'border-width': 0,\r\n          'background-color': 'white',\r\n          'width': 1,\r\n          'height': 1\r\n        }\r\n      },\r\n      {\r\n        selector: '.Y_axis',\r\n        css: {\r\n          'label': 'data(label)',\r\n          'shape': 'rectangle',\r\n          //'border-color': 'none',\r\n          'font-size' : this.labelSize,\r\n          'border-width': 0,\r\n          'background-color': 'white',\r\n          'width': 1,\r\n          'height': 1,\r\n          'text-valign': 'center',\r\n          'text-halign': 'left'\r\n        }\r\n      },\r\n      {\r\n        selector: '#y_axis_Label',\r\n        css: {\r\n          'text-rotation': 4.71239,\r\n          'text-halign': 'center',\r\n          'text-valign': 'top'\r\n        }\r\n      },\r\n      {\r\n        selector: '.axisLabel',\r\n        css: {\r\n          'font-size': this.labelSize + 4\r\n        }\r\n      },\r\n      {\r\n        selector: 'node:selected',\r\n        css: {\r\n            'border-color': '#ff8300',\r\n        }\r\n      },\r\n    ]\r\n  }\r\n\r\n  generateCytoscape() {\r\n    this.cy = cytoscape({\r\n      container: this.cyContainer.nativeElement,\r\n      elements: this.mapDataToCytoscapElements(this.visibleData),\r\n      style: this.getCytoscapeStyle(),\r\n      layout: {\r\n        name: 'preset',\r\n        fit: true,\r\n        padding: 30\r\n      },\r\n  \r\n      zoomingEnabled: true,\r\n      userZoomingEnabled: true,\r\n      panningEnabled: true,\r\n      userPanningEnabled: true,\r\n    });\r\n  \r\n    this.AddAxes();\r\n    this.cy.nodes().lock();\r\n  \r\n    // --- NEW: Bubble <-> global selection sync (Bubble -> session -> other views) ---\r\n    this.cy.on('select', 'node', (evt) => {\r\n      if (this.suppressCySelectionEvents) return;\r\n  \r\n      const ele = evt.target;\r\n      if (ele.classes().length > 0) return; // ignore axis/label nodes\r\n      if (this.SelectedNodeCollapsingTypeVariable) return;\r\n  \r\n      const id = ele.id();\r\n  \r\n      // Update shared session selection\r\n      this.commonService.session.data.nodes\r\n        .filter((n) => n._id === id)\r\n        .forEach((n) => (n.selected = true));\r\n  \r\n      this.commonService.session.data.nodeFilteredValues\r\n        .filter((n) => n._id === id)\r\n        .forEach((n) => (n.selected = true));\r\n  \r\n      // Broadcast to other views (Table/2D/etc)\r\n      $(document).trigger('node-selected');\r\n    });\r\n  \r\n    this.cy.on('unselect', 'node', (evt) => {\r\n      if (this.suppressCySelectionEvents) return;\r\n  \r\n      const ele = evt.target;\r\n      if (ele.classes().length > 0) return; // ignore axis/label nodes\r\n      if (this.SelectedNodeCollapsingTypeVariable) return;\r\n  \r\n      const id = ele.id();\r\n  \r\n      // Update shared session selection\r\n      this.commonService.session.data.nodes\r\n        .filter((n) => n._id === id)\r\n        .forEach((n) => (n.selected = false));\r\n  \r\n      this.commonService.session.data.nodeFilteredValues\r\n        .filter((n) => n._id === id)\r\n        .forEach((n) => (n.selected = false));\r\n  \r\n      // Broadcast to other views (Table/2D/etc)\r\n      $(document).trigger('node-selected');\r\n    });\r\n  \r\n    // --- NEW: initial sync (session -> bubble) ---\r\n    this.syncCySelectionFromSession();\r\n  \r\n    // Existing hover events\r\n    this.cy.on('mouseover', 'node', (evt) => {\r\n      const node = evt.target;\r\n      if (node.classes().length > 0) return;\r\n      this.showTooltip(node.data(), evt.originalEvent);\r\n    });\r\n  \r\n    this.cy.on('mouseout', 'node', () => {\r\n      this.hideTooltip();\r\n    });\r\n  }\r\n  \r\n\r\n  showTooltip(d, e) {\r\n    let tooltipHTML: string = '';\r\n    if (this.SelectedNodeCollapsingTypeVariable) {\r\n      tooltipHTML = `\r\n      <style>\r\n        #bubbleToolTip {\r\n          border-spacing: 0;\r\n          width: 100%;\r\n          //border: 1px solid #ddd;\r\n          z-index: 1000;\r\n        }\r\n\r\n        #bubbleToolTip td, #bubbleToolTip th {\r\n          text-align: center;\r\n          padding: 2px;\r\n          font-weight: 400;\r\n          border: 1px solid #ddd;\r\n        }\r\n\r\n        #bubbleToolTip tr:nth-child(even) {\r\n          background-color: #f2f2f2;\r\n        }\r\n\r\n        #bubbleToolTip tr:nth-child(odd) {\r\n          background-color: #fff;\r\n        } \r\n      </style>\r\n      <table id=\"bubbleToolTip\"><thead><th>${this.commonService.capitalize(this.commonService.session.style.widgets['node-color-variable'])}</th><th> Count </th><th> % </th></thead><tbody>`;\r\n      d.counts.forEach((x) => tooltipHTML += `<tr><td>${x.label}</td><td> ${x.count}</td><td>${(x.count/d.totalCount*100).toFixed(1)}%</td></tr>`)\r\n      tooltipHTML += `<tr><td>Total</td><td> ${d.totalCount}</td><td></td></tr></tbody></table>`;\r\n    } else {\r\n      tooltipHTML = `${d.id}`\r\n    }\r\n    let [X, Y] = this.getRelativeMousePosition(event);\r\n    \r\n    this.toolTip.nativeElement.innerHTML = tooltipHTML;\r\n    Object.assign(this.toolTip.nativeElement.style, {\r\n      position: 'absolute',\r\n      left: (X+20)+'px',\r\n      top: (Y+10)+'px',\r\n      zIndex: '1000',\r\n      transition: 'opacity 100ms',\r\n      opacity: '1'\r\n    })\r\n    this.toolTip.nativeElement.addEventListener('transitionend', () => {\r\n      this.toolTip.nativeElement.style.zIndex = '1000'\r\n    }, { once: true })\r\n  }\r\n\r\n  getRelativeMousePosition(event) {\r\n    let rect = this.cyContainer.nativeElement.getBoundingClientRect();\r\n    const X = event['clientX'] - rect.left;\r\n    const Y = event['clientY'] - rect.top;\r\n    return [X, Y]\r\n  }\r\n\r\n  hideTooltip() {\r\n    Object.assign(this.toolTip.nativeElement.style, {\r\n      transition: 'opacity 100ms',\r\n      opacity: 0\r\n    })\r\n    this.toolTip.nativeElement.addEventListener('transitionend', () => {\r\n      this.toolTip.nativeElement.style.zIndex = '-1'\r\n    }, { once: true })\r\n  }\r\n\r\n  /**\r\n   * Gets the data from commonService.getVisibleNodes and then creates node with this. Creates the axis labels and \r\n   * (updates axes and places nodes with this.updateAxes and updates color of nodes with this.updateColors)\r\n   */\r\n  getData() {\r\n    this.allData = [];\r\n  \r\n    let nodes = this.commonService.session.data.nodeFilteredValues;\r\n    nodes.forEach(node => {\r\n      let nodeDR: DataRecord = {\r\n        index: node.index,\r\n        id: node._id,\r\n        x: 0,\r\n        y: 0,\r\n        color: '#ff00ff',\r\n        Xgroup: 0,\r\n        Ygroup: 0,\r\n        strokeColor: node.selected ? this.commonService.session.style.widgets['selected-color']: '#000000',\r\n        totalCount: 1\r\n      }\r\n      if (this.xVariable != undefined || this.xVariable != 'None') {\r\n        let nodeX = node[this.xVariable];\r\n        let locX = this.X_categories.indexOf(nodeX);\r\n        nodeDR.Xgroup = locX;\r\n      }\r\n      if (this.yVariable != undefined || this.yVariable != 'None') {\r\n        let nodeY = node[this.yVariable];\r\n        let locY = this.Y_categories.indexOf(nodeY);\r\n        nodeDR.Ygroup = locY;\r\n      }\r\n\r\n      this.allData.push(nodeDR)\r\n    })\r\n    this.updateAxes();\r\n    this.updateColors();\r\n    if (this.widgets[\"node-timeline-variable\"] != 'None') {\r\n      this.sortData(this.widgets[\"node-timeline-variable\"])\r\n      let currentLength = this.allData.length;\r\n      this.visibleData = this.allData.slice(0, currentLength);\r\n    }\r\n    this.updateVisibleNodes();\r\n\r\n  }\r\n\r\n  /**\r\n   * updates values of visibleNodes based on SelectedNodeCollapsingTypeVariable and if timeline mode is active\r\n   */\r\n  updateVisibleNodes() {\r\n    // if no timeline and not collapsed\r\n    if (this.widgets[\"node-timeline-variable\"] == 'None' && this.SelectedNodeCollapsingTypeVariable == false) {\r\n      this.visibleData = this.allData;\r\n    // if timeline and not collapse\r\n    } else if (this.widgets[\"node-timeline-variable\"] != 'None' && this.SelectedNodeCollapsingTypeVariable == false) {\r\n      let visibleNodes = this.commonService.getVisibleNodes();\r\n      if (visibleNodes.length == this.visibleData.length) { return }\r\n      this.visibleData = [];\r\n      this.allData.forEach(node => {\r\n        if (visibleNodes.find(vNode => vNode._id == node.id)) {\r\n          this.visibleData.push(node);\r\n        }\r\n      })\r\n    // if no timeline and collapse\r\n    } else if (this.widgets[\"node-timeline-variable\"] == 'None'){\r\n      // console.log(this.commonService.getVisibleNodes().length, this.visibleData.reduce((sum, obj) => sum + obj.totalCount, 0))\r\n      this.getCollapsedData(false, false)\r\n    // if timeline and collapse\r\n    } else {\r\n      if (this.commonService.getVisibleNodes().length == this.visibleData.reduce((sum, obj) => sum + obj.totalCount, 0)) { return }\r\n      this.getCollapsedData(false, false);\r\n    } \r\n    \r\n\r\n  }\r\n\r\n  /**\r\n  * Updates the value of X_categories X_tickValues based on xVariables (or those variables for Y axis)\r\n  * @param axis 'X' or anything else defaults to 'Y' axis\r\n  */\r\n  updateAxisValues(axis: string) {\r\n    let nodes = this.commonService.session.data.nodeFilteredValues;\r\n\r\n    if (axis == 'X') {\r\n      this.widgets['bubble-x'] = this.xVariable;\r\n      if ( this.xVariable == 'None' || this.xVariable == undefined) {\r\n        this.X_categories = [ undefined ];\r\n        this.X_tickValues = [ 0 ];\r\n      } else {\r\n        this.X_categories = [];\r\n        this.X_tickValues = [];\r\n  \r\n        nodes.forEach(node => {\r\n          let nodeX = node[this.xVariable];\r\n          if (this.X_categories.indexOf(nodeX) == -1) {\r\n            this.X_tickValues.push(this.X_categories.length);\r\n            this.X_categories.push(nodeX);\r\n          }\r\n        })\r\n\r\n        if (this.xVarDate) {\r\n          this.X_categories.sort((a, b) => new Date(a).getTime() - new Date(b).getTime())\r\n        }\r\n      }\r\n    } else { // axis == 'Y'\r\n      this.widgets['bubble-y'] = this.yVariable;\r\n      if ( this.yVariable == 'None' || this.yVariable == undefined) {\r\n        this.Y_categories = [ undefined ];\r\n        this.Y_tickValues = [ 0 ];\r\n      } else {\r\n        this.Y_categories = [];\r\n        this.Y_tickValues = [];\r\n\r\n        nodes.forEach(node => {\r\n          let nodeY = node[this.yVariable];\r\n          if (this.Y_categories.indexOf(nodeY) == -1) {\r\n            this.Y_tickValues.push(this.Y_categories.length);\r\n            this.Y_categories.push(nodeY);\r\n          }\r\n        })\r\n\r\n        if (this.yVarDate) {\r\n          this.Y_categories.sort((a, b) => new Date(a).getTime() - new Date(b).getTime())                   \r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates axis tickValues (X_tickValues & Y_tickValues) and positions for each node\r\n   */\r\n  updateAxes() {\r\n    this.X_tickValues.forEach(xLoc => {\r\n      this.Y_tickValues.forEach(yLoc => {\r\n        let filteredNodes = this.allData.filter(node => node.Xgroup == xLoc && node.Ygroup == yLoc)\r\n        if (filteredNodes.length == 0) {\r\n          return;\r\n        } else if (filteredNodes.length == 1) {\r\n          filteredNodes[0].x = xLoc;\r\n          filteredNodes[0].y = yLoc;\r\n        } else {\r\n          this.calculateHexagonalGridPositions(filteredNodes)\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Updates this.visibleData so that each node represents a multiple datapoints instead of a single data point;\r\n   * Also updates color/pattern of nodes so that they are pie charts based on proportion of each datapoint's color\r\n   */\r\n  getCollapsedData( sortData = false, initial  = true) {\r\n    if (this.widgets[\"node-timeline-variable\"] != 'None' && sortData) {\r\n      this.sortData(this.widgets[\"node-timeline-variable\"])\r\n    }\r\n    \r\n    if (initial) {\r\n      this.visibleData = [];\r\n      let fullNodes = this.commonService.session.data.nodeFilteredValues;\r\n      this.allData.forEach(node => {\r\n        let X_group = 0, Y_group = 0;\r\n        let currentFullNode = fullNodes.find(fNode => fNode.index == node.index)\r\n        if (this.xVariable != undefined || this.xVariable != 'None') {\r\n          let nodeX = currentFullNode[this.xVariable];\r\n          X_group = this.X_categories.indexOf(nodeX);\r\n        }\r\n        if (this.yVariable != undefined || this.yVariable != 'None') {\r\n          let nodeY = currentFullNode[this.yVariable];\r\n          Y_group = this.Y_categories.indexOf(nodeY);\r\n        }\r\n\r\n        let index = this.visibleData.findIndex((node) => node.Xgroup==X_group && node.Ygroup==Y_group);\r\n        if (index == -1) {\r\n          //console.log(X_group, Y_group)\r\n          let length = this.visibleData.length;\r\n          this.visibleData.push({\r\n            index: length,\r\n            id: `cNode${length}`,\r\n            x: X_group,\r\n            y: Y_group,\r\n            color: node.color,\r\n            Xgroup: X_group,\r\n            Ygroup: Y_group,\r\n            strokeColor: '#000000',\r\n            totalCount: 0,\r\n            counts: []\r\n          })\r\n        }\r\n      })\r\n\r\n    }\r\n\r\n    let changedVisibleNodes = this.generateCollapsedCounts();\r\n    this.generatePieChartsSVGDefs(changedVisibleNodes);\r\n\r\n    this.cy.remove('node');\r\n    this.updateNodes();\r\n\r\n    this.cy.style().resetToDefault();\r\n    this.cy.style(this.getCytoscapeStyle())\r\n    this.visibleData.forEach((node, i) => {\r\n      if ( node.totalCount == 1 || node.counts.length == 1) {\r\n        return;\r\n      } else {\r\n        let size = this.nodeSize * Math.sqrt(node.totalCount);\r\n        let svgPattern = `<svg width='${size}' height='${size}' xmlns='http://www.w3.org/2000/svg'><defs>${this.svgDefs[`node${i}`]}</defs><circle fill=\"url(#node${i})\" cx='${size/2}' cy='${size/2}' r='${size/2}'/></svg>`;\r\n        let b64 = 'data:image/svg+xml;base64,' + btoa(svgPattern);\r\n        this.cy.style().selector(`#cNode${i}`).style({ 'background-color': 'transparent', 'background-fit': 'cover', 'background-image': b64})\r\n      }\r\n    })\r\n    this.cy.style().update();\r\n\r\n    this.updateAxes();\r\n  }\r\n\r\n  onLabelSizeChange() {\r\n    let longestYLabel: string = '';\r\n    this.cy.$('.X_axis').forEach((ele) => {\r\n      ele.style({ 'font-size' : this.labelSize})\r\n    })\r\n    this.cy.$('.axisLabel').forEach((ele) => {\r\n      ele.style({ 'font-size' : this.labelSize+4})\r\n    })\r\n    this.cy.$('.Y_axis').forEach((ele) => {\r\n      if (ele.data().id == 'y_axis_Label') return;\r\n      let label = ele.data().label\r\n\r\n      if (label.length > longestYLabel.length) longestYLabel = label\r\n      ele.style({ 'font-size' : this.labelSize})\r\n    })\r\n    let yAxisLabelOffset = this.estimateSize(longestYLabel) +20;\r\n\r\n    let node = this.cy.getElementById('y_axis_Label')\r\n    node.unlock();\r\n    let y = node.position('y')\r\n    let newXPos = -80 - yAxisLabelOffset;\r\n    node.position({'x': newXPos, 'y': y});\r\n    node.lock();\r\n  }\r\n\r\n  /**\r\n   * Update the values for counts for each node in this.visibleData (relevant when nodes are collapsed). These values are used when creating a pie\r\n   * chart of each collapsed node.\r\n   * @returns an array of indexes of visibleData that was changed\r\n   */\r\n  generateCollapsedCounts() {\r\n    let fullNodes = this.commonService.getVisibleNodes();\r\n    let colorCategory = this.commonService.session.style.widgets['node-color-variable']\r\n    let changedVisibleNodes = [];\r\n\r\n    this.visibleData.forEach(node => {\r\n      if (node.id == '' && node.index == 1000) {\r\n        node.counts = { label: '', count: 0}\r\n        return;\r\n      }\r\n      let X = this.X_categories[node.Xgroup]\r\n      let Y = this.Y_categories[node.Ygroup]\r\n      \r\n      let currentNodes = fullNodes.filter(fNode => fNode[this.xVariable] == X && fNode[this.yVariable]==Y) \r\n      node.counts = [];\r\n      let previousTotal = node.totalCount;\r\n      node.totalCount = 0;\r\n      currentNodes.forEach(cNode => {\r\n        let currentCategory = cNode[colorCategory];\r\n        let index = node.counts.findIndex((countItem) => countItem.label == currentCategory)\r\n        if (index == -1) {\r\n          node.counts.push({\r\n            label: currentCategory,\r\n            count: 1\r\n          })\r\n        } else {\r\n          node.counts[index].count += 1\r\n        }\r\n        node.totalCount += 1;\r\n      })\r\n      if (previousTotal != node.totalCount) {\r\n        //console.log('node updated: ', node.totalCount, node.index)\r\n        changedVisibleNodes.push(node.index)\r\n      }\r\n    })\r\n    return changedVisibleNodes;\r\n  }\r\n\r\n  /**\r\n   * @returns a string representing the SVG def of the patterns needed to generate the pie chart\r\n   */\r\n  generatePieChartsSVGDefs(changedVisibleNodes) : void {\r\n    changedVisibleNodes.forEach((indexNumber) => {\r\n      let patternString = '';\r\n      let node = this.visibleData.find(vNode => vNode.index == indexNumber);\r\n\r\n      if (node.totalCount < 2 || node.counts.length == 1 || node == undefined) {\r\n        return;\r\n      }\r\n      let proportions = []\r\n      let coordinates = []\r\n      let colors = [];\r\n      node.counts.forEach(x => {\r\n        let proportion = proportions.reduce((acc, cv) => acc+cv, 0) + x.count/node.totalCount\r\n        let xPos = Math.cos(2 * Math.PI * proportion)\r\n        let yPos = Math.sin(2 * Math.PI * proportion)\r\n        \r\n        proportions.push(x.count/node.totalCount)\r\n        coordinates.push([xPos, yPos])\r\n        colors.push(this.commonService.temp.style.nodeColorMap(x.label))\r\n      })\r\n\r\n      patternString += `<pattern id='node${indexNumber}' viewBox='-1 -1 2 2' style='transform: rotate(-.25turn)' width='100%' height='100%'>` ;\r\n      for (let i = 0; i<coordinates.length; i++) {\r\n        let arcStart = i == 0 ? '1 0': coordinates[i-1][0] + ' ' + coordinates[i-1][1];\r\n        let largeArcFlag = proportions[i] > .5 ? 1: 0 \r\n        let arcEnd = i == coordinates.length-1 ? '1 0' : coordinates[i][0] + ' ' + coordinates[i][1]\r\n        patternString += `<path d='M 0 0 L ${arcStart} A 1 1 0 ${largeArcFlag} 1 ${arcEnd} L 0 0' fill='${colors[i]}' />`\r\n      }\r\n      patternString += '</pattern>'\r\n      this.svgDefs[`node${indexNumber}`] = (patternString);\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Updates the color of the nodes in allData\r\n   */\r\n  updateColors() {\r\n    let fillcolor = this.commonService.session.style.widgets['node-color']\r\n    let colorVariable = this.commonService.session.style.widgets['node-color-variable']\r\n\r\n    let fullNodes = this.commonService.session.data.nodeFilteredValues;\r\n\r\n    this.allData.forEach(node => {\r\n      let currentFullNode = fullNodes.find(Fnode => node.index == Fnode.index);\r\n      node.color = colorVariable == 'None' ? fillcolor : this.commonService.temp.style.nodeColorMap(currentFullNode[colorVariable]);\r\n    })\r\n\r\n    if (this.cy && this.cy.nodes().length > 0) {\r\n      this.cy.nodes().forEach(node => {\r\n        if (node.classes().length > 0) return;\r\n        let currentNode = this.allData.find(dataNode => dataNode.id == node.id());\r\n        node.data('nodeColor', currentNode.color);\r\n      });\r\n      this.cy.style().update(); // Refresh Cytoscape styles to apply changes\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * Calculates the position (x, y) for the array of nodes; nodes are positioned in a layers spiral/hexagonal pattern \r\n   */\r\n  calculateHexagonalGridPositions(nodes: DataRecord[]) {\r\n    // alternative method could use d3 forces and/or phyllotaxis arrangement\r\n    // https://2019.wattenberger.com/blog/spirals\r\n    const layerDistance = this.nodeSpacing + .02;\r\n    let layer = 0;\r\n    let nodesInLayer = 1;\r\n\r\n    let count = 0;\r\n    nodes.forEach(node => {\r\n      const angle = (2 * Math.PI / nodesInLayer) * count;\r\n      node.x = node.Xgroup + layer * layerDistance * Math.cos(angle);\r\n      node.y = node.Ygroup + layer * layerDistance * Math.sin(angle);\r\n\r\n      count++;\r\n      if (count >= nodesInLayer) {\r\n        count = 0;\r\n        layer++;\r\n        nodesInLayer = 6*layer;\r\n      }\r\n    })\r\n  }\r\n\r\n  onNodeCollapsingChange() {\r\n    this.widgets['bubble-collapsed'] = this.SelectedNodeCollapsingTypeVariable;\r\n    if (this.SelectedNodeCollapsingTypeVariable) {\r\n      this.getCollapsedData(true);\r\n    } else {\r\n      this.cy.remove('node');\r\n      this.getData();\r\n      this.updateNodes();\r\n    }\r\n  }\r\n\r\n  goldenLayoutComponentResize() {    \r\n    this.viewHeight = this.container.height - 73;\r\n    this.viewWidth = this.container.width - 42;\r\n    setTimeout(() => this.cy.fit(this.cy.nodes(), 30), 300);\r\n  }\r\n\r\n  setSelectedNodes(that) {\r\n    if (!that.cy) return;\r\n  \r\n    // If collapsed, bubble nodes are aggregates, so node-level selection doesn't map cleanly.\r\n    if (that.commonService.visuals.bubble.SelectedNodeCollapsingTypeVariable) {\r\n      return;\r\n    }\r\n  \r\n    // Sync Cytoscape selection state from shared session state.\r\n    that.syncCySelectionFromSession();\r\n  }\r\n  \r\n\r\n  private syncCySelectionFromSession() {\r\n    if (!this.cy) return;\r\n  \r\n    // If collapsed, selection doesn't map 1:1 to nodes.\r\n    if (this.SelectedNodeCollapsingTypeVariable) return;\r\n  \r\n    const selectedIds = new Set(\r\n      this.commonService.session.data.nodes\r\n        .filter((n) => n.selected)\r\n        .map((n) => n._id)\r\n    );\r\n  \r\n    this.suppressCySelectionEvents = true;\r\n  \r\n    // Clear selection first\r\n    this.cy.nodes().unselect();\r\n  \r\n    // Re-apply selection only for real nodes (skip axes/labels)\r\n    this.cy.nodes().forEach((ele) => {\r\n      if (ele.classes().length > 0) return; // axis nodes have classes\r\n      const id = ele.id();\r\n      if (selectedIds.has(id)) {\r\n        ele.select();\r\n      }\r\n    });\r\n  \r\n    this.suppressCySelectionEvents = false;\r\n  \r\n    // Force style refresh (border-color for node:selected)\r\n    this.cy.style().update();\r\n  }\r\n  \r\n\r\n  updateNodes() {\r\n    if (this.cy) {\r\n      this.cy.remove('node');\r\n      this.cy.add(this.mapDataToCytoscapElements(this.visibleData))\r\n      this.AddAxes();\r\n    }\r\n  }\r\n\r\n  onDataChange(axis: string) {\r\n    this.updateAxisValues(axis)\r\n    this.svgDefs = {};\r\n    if (this.SelectedNodeCollapsingTypeVariable) {\r\n      this.getCollapsedData(true);\r\n    } else {\r\n      this.getData();\r\n    }\r\n    this.updateNodes();\r\n  }\r\n\r\n  /**\r\n   * Sorts this.allData chronologically based on the given sortVariable\r\n   * @param sortVariable name of a property of commonService.session.data.nodeFilteredValues\r\n   */\r\n  sortData(sortVariable) {\r\n    let allNodes = JSON.parse(JSON.stringify(this.commonService.session.data.nodeFilteredValues));\r\n    allNodes.sort((a, b) => new Date(a[sortVariable]).getTime() - new Date(b[sortVariable]).getTime())\r\n    \r\n    let allData = []\r\n    allNodes.forEach(node => {\r\n      allData.push(this.allData.find(dataNode => node._id == dataNode.id))      \r\n    })\r\n\r\n    this.allData = allData;\r\n    this.recalculatePositions();\r\n    this.updateVisibleNodes();\r\n    this.updateNodes();\r\n  }\r\n\r\n  /**\r\n   * Recalculates the position of the nodes in allData\r\n   */\r\n  recalculatePositions() {\r\n    this.X_tickValues.forEach(xLoc => {\r\n      this.Y_tickValues.forEach(yLoc => {\r\n        let filteredNodes = this.allData.filter(node => node.Xgroup == xLoc && node.Ygroup == yLoc)\r\n        if (filteredNodes.length == 0) {\r\n          return;\r\n        } else if (filteredNodes.length == 1) {\r\n          filteredNodes[0].x = xLoc;\r\n          filteredNodes[0].y = yLoc;\r\n        } else {\r\n          this.calculateHexagonalGridPositions(filteredNodes)\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  onNodeSpacingChange() {\r\n    this.widgets['bubble-charge'] = this.nodeSpacing;\r\n    this.recalculatePositions();\r\n    if (this.cy) {\r\n      this.cy.nodes().unlock();\r\n      this.cy.nodes().positions((node, i) => {\r\n        if (node.classes().length > 0) return;\r\n        let current = this.visibleData[i];\r\n        return {\r\n          x: current.x*this.scaleFactor,\r\n          y: current.y*this.scaleFactor\r\n        }\r\n      })  \r\n\r\n      this.cy.fit(this.cy.nodes(), 30);\r\n      this.cy.nodes().lock();\r\n    }\r\n  }\r\n\r\n  onNodeSizeChange() {\r\n    this.widgets['bubble-size'] = this.nodeSize;\r\n    if (this.SelectedNodeCollapsingTypeVariable) {\r\n      if (this.cy) {\r\n        this.cy.nodes().forEach(node => {\r\n          node.data('nodeSize', this.nodeSize * Math.sqrt(node.data().totalCount));\r\n        });\r\n        this.cy.style().update();\r\n        this.cy.fit(this.cy.nodes(), 30);\r\n      }\r\n    } else {\r\n      this.recalculatePositions();\r\n      if (this.cy) {\r\n        this.cy.nodes().forEach(node => {\r\n          node.data('nodeSize', this.nodeSize);\r\n        }); \r\n        this.cy.style().update(); \r\n        this.cy.fit(this.cy.nodes(), 30);\r\n      }\r\n    }\r\n}\r\n\r\n  /**\r\n  * Opens Global Setting Dialog\r\n  */\r\n  showGlobalSettings() {\r\n    this.DisplayGlobalSettingsDialogEvent.emit(\"Styling\");\r\n  }\r\n\r\n  updateNodeColors() {\r\n    if (this.SelectedNodeCollapsingTypeVariable) {\r\n      let _ = this.generateCollapsedCounts();\r\n      this.generatePieChartsSVGDefs(this.visibleData.map(obj => obj.index));\r\n      this.cy.remove('node');\r\n      this.getData();\r\n      this.updateNodes();\r\n\r\n      this.visibleData.forEach((node, i) => {\r\n        if ( node.totalCount == 1 || node.counts.length == 1) {\r\n          let currrentVar = node.counts[0].label\r\n          //console.log(node, currrentVar)\r\n          this.cy.style().selector(`#${node.id}`).style({ 'background-color': this.commonService.temp.style.nodeColorMap(currrentVar)})\r\n          return;\r\n        } else {\r\n          let size = this.nodeSize * Math.sqrt(node.totalCount);\r\n          let svgPattern = `<svg width='${size}' height='${size}' xmlns='http://www.w3.org/2000/svg'><defs>${this.svgDefs[`node${i}`]}</defs><circle fill=\"url(#node${i})\" cx='${size/2}' cy='${size/2}' r='${size/2}'/></svg>`;\r\n          let b64 = 'data:image/svg+xml;base64,' + btoa(svgPattern);\r\n          this.cy.style().selector(`#cNode${i}`).style({ 'background-color': 'transparent', 'background-fit': 'cover', 'background-image': b64})\r\n        }\r\n      })\r\n      this.cy.style().update();\r\n\r\n      let fillcolor = this.commonService.session.style.widgets['node-color']\r\n      let colorVariable = this.commonService.session.style.widgets['node-color-variable']\r\n  \r\n      let fullNodes = this.commonService.session.data.nodeFilteredValues;\r\n  \r\n      this.allData.forEach(node => {\r\n        let currentFullNode = fullNodes.find(Fnode => node.index == Fnode.index);\r\n        node.color = colorVariable == 'None' ? fillcolor : this.commonService.temp.style.nodeColorMap(currentFullNode[colorVariable]);\r\n      })\r\n    } else {\r\n      this.updateColors();\r\n    }\r\n  }\r\n\r\n  getAxisLabel(axis: string) {\r\n    if (axis == 'X') {\r\n      if (this.xVariable == 'None') return;\r\n      return this.commonService.capitalize(this.xVariable)\r\n    }\r\n    else {\r\n      if (this.yVariable == 'None') return;\r\n      return this.commonService.capitalize(this.yVariable)\r\n    }\r\n  }\r\n\r\n  updateLinkColor() {}\r\n  updateVisualization() {}\r\n  applyStyleFileSettings() {\r\n    this.widgets = (window as any).context.commonService.session.style.widgets;\r\n\r\n    if (this.widgets['bubble-x'] != undefined && this.selectedFieldList.map(x => x.value).includes(this.widgets['bubble-x'])) {\r\n      this.xVariable = this.widgets['bubble-x'];\r\n      this.onDataChange('X');\r\n    } else {\r\n      this.widgets['bubble-x'] = this.xVariable;\r\n    }\r\n\r\n    if (this.widgets['bubble-y'] != undefined && this.selectedFieldList.map(x => x.value).includes(this.widgets['bubble-y'])) {\r\n      this.yVariable = this.widgets['bubble-y'];\r\n      this.onDataChange('Y');\r\n    } else {\r\n      this.widgets['bubble-y'] = this.yVariable;\r\n    }\r\n\r\n    if (this.widgets['bubble-size'] >= 10 && this.widgets['bubble-size'] <= 40) {\r\n      this.nodeSize = this.widgets['bubble-size'];\r\n      this.onNodeSizeChange()\r\n    } else {\r\n      this.widgets['bubble-size'] = this.nodeSize;\r\n    }\r\n    \r\n    if (this.widgets['bubble-charge'] >= .01 && this.widgets['bubble-charge'] <= .15) {\r\n      this.nodeSpacing = this.widgets['bubble-charge'];\r\n      this.onNodeSpacingChange();\r\n    } else {\r\n      this.widgets['bubble-charge'] = this.nodeSpacing;\r\n    }\r\n    \r\n    if (this.widgets['bubble-collapsed'] == undefined || this.widgets['bubble-collapsed'] == null) {\r\n      this.widgets['bubble-collapsed'] = this.SelectedNodeCollapsingTypeVariable;\r\n    } else if (this.widgets['bubble-collapsed'] != this.SelectedNodeCollapsingTypeVariable) {\r\n      this.SelectedNodeCollapsingTypeVariable = this.widgets['bubble-collapsed'];\r\n      this.onNodeCollapsingChange();\r\n    }\r\n  }\r\n\r\n  openRefreshScreen() {}\r\n  onRecallSession() {}\r\n  onLoadNewData() {}\r\n  onFilterDataChange() {}\r\n\r\n  /**\r\n * On click of center button, show centers the view\r\n */\r\n  openCenter() {\r\n    if (this.cy) {\r\n        this.cy.fit(this.cy.nodes(), 30);\r\n    } else {\r\n        console.error('Cytoscape instance is not initialized.');\r\n    }\r\n  }\r\n    \r\n  openExport() { \r\n    this.setCalculatedResolution();\r\n    this.exportOpen = true;\r\n  }\r\n\r\n  /**\r\n  * Sets CalculatedResolution variable to string such as '1250 x 855px'. Only called when export is first opened\r\n  */\r\n  setCalculatedResolution() {\r\n    this.CalculatedResolution = (Math.round((this.viewWidth-42) * this.SelectedBubbleExportScaleVariable) + \" x \" + Math.round((this.viewHeight-73) * this.SelectedBubbleExportScaleVariable) + \"px\");\r\n  }\r\n\r\n  /**\r\n   * Updates CalculatedResolution variable to string such as '1250 x 855px' based on ImageDimensions and SelectedNetworkExportScaleVariable. \r\n   * This is called anytime SelectedNetworkExportScaleVariable is updated.\r\n   */\r\n  updateCalculatedResolution() {\r\n    this.CalculatedResolution = (Math.round((this.viewWidth-42) * this.SelectedBubbleExportScaleVariable) + \" x \" + Math.round((this.viewHeight-73) * this.SelectedBubbleExportScaleVariable) + \"px\");\r\n    this.cdref.detectChanges();\r\n  }\r\n\r\n  exportVisualization() {\r\n    const exportOptions: ExportOptions = {\r\n      filename: this.BubbleExportFileName,\r\n      filetype: this.BubbleExportFileType,\r\n      scale: this.SelectedBubbleExportScaleVariable,\r\n      quality: 1,\r\n    };\r\n\r\n    // Set export options in the service\r\n    this.exportService.setExportOptions(exportOptions);\r\n\r\n    if (this.BubbleExportFileType == 'svg') {\r\n      let options = { scale: 1, full: true, bg: '#ffffff'};\r\n      let content = (this.cy as any).svg(options);\r\n\r\n      this.exportService.requestSVGExport([], content, true, false); \r\n    } else {\r\n      this.exportService.requestExport([this.cyContainer.nativeElement], true, false);\r\n    }\r\n    this.exportOpen = false;\r\n  }\r\n\r\n  openSettings() {\r\n  this.settingsOpen = true;\r\n  }\r\n}\r\n\r\nexport namespace BubbleComponent {\r\n  export const componentTypeName = 'Bubble';\r\n}\r\n","import { ChangeDetectorRef, Component, ElementRef, Inject, Injector, OnDestroy, OnInit, Renderer2, ViewChild } from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport { SelectItem } from 'primeng/api';\r\nimport { Table } from 'primeng/table';\r\nimport * as saveAs from 'file-saver';\r\n// import pdfMake from 'pdfmake/build/pdfmake.js';\r\n// import pdfFonts from 'pdfmake/build/vfs_fonts.js'\r\n\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { MicobeTraceNextPluginEvents } from '../../helperClasses/interfaces';\r\nimport { MicrobeTraceNextVisuals } from '../../microbe-trace-next-plugin-visuals';\r\nimport { CommonService } from '../../contactTraceCommonServices/common.service';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport { CommonStoreService } from '@app/contactTraceCommonServices/common-store.services';\r\n\r\n@Component({\r\n  selector: 'CrosstabComponent',\r\n  templateUrl: './crosstab-plugin.component.html',\r\n  styleUrls: ['./crosstab-plugin.component.scss']\r\n})\r\nexport class CrosstabComponent extends BaseComponentDirective implements OnInit, MicobeTraceNextPluginEvents, OnDestroy {\r\n\r\n  private visuals: MicrobeTraceNextVisuals;\r\n  private destroy$ = new Subject<void>();\r\n\r\n  @ViewChild('dt') dataTable: Table;\r\n\r\n  widgets;\r\n  xVariable;\r\n  yVariable; \r\n\r\n  viewActive: boolean = true;\r\n  \r\n  showOptions: any = [\r\n    { label: 'Counts', value: false },\r\n    { label: 'Proportion', value: true }\r\n  ]\r\n\r\n  settingsOpen: boolean = true;\r\n  exportOpen: boolean = false;\r\n\r\n  SelectedCrossTabExportFilename: string = \"\";\r\n  SelectedCrossTabExportFileType = 'csv';\r\n  CrossTabExportFileTypeList: any = [\r\n    { label: 'xlsx', value: 'xlsx' },\r\n    { label: 'csv', value: 'csv' },\r\n    { label: 'json', value: 'json'},\r\n    { label: 'pdf', value: 'pdf'}\r\n];\r\n\r\n  fieldList: SelectItem[];\r\n  SelectedTableData: TableData;\r\n  totalRow;\r\n  selectedSize = '';\r\n  scrollHeight: string;\r\n  tableStyleCrosstab;\r\n  sizes = [\r\n      { name: 'Small', class: 'p-datatable-sm' },\r\n      { name: 'Normal', class: '' },\r\n      { name: 'Large',  class: 'p-datatable-lg' }\r\n  ];\r\n\r\n  constructor(injector: Injector,\r\n    private renderer: Renderer2,\r\n    private elem: ElementRef,\r\n    private eventManager: EventManager,\r\n    public commonService: CommonService,\r\n    @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer, \r\n    elRef: ElementRef,\r\n    private cdref: ChangeDetectorRef,\r\n    private store: CommonStoreService,\r\n    private gtmService: GoogleTagManagerService) {\r\n\r\n      super(elRef.nativeElement);\r\n\r\n      this.visuals = commonService.visuals;\r\n      this.visuals.crossTab = this;\r\n      this.widgets = this.commonService.session.style.widgets;\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    this.gtmService.pushTag({\r\n            event: \"page_view\",\r\n            page_location: \"/crosstab\",\r\n            page_title: \"Crosstab View\"\r\n        });\r\n\r\n    this.updateFieldLists();\r\n    this.setWidgets();\r\n\r\n    this.updateTable();\r\n\r\n    // offsets: 70 table-wrapper padding-top, 10 table-wrapper padding-bottom\r\n    let pFooterHeight = this.selectedSize == 'p-datatable-sm' ? 41 : this.selectedSize == 'p-datatable-lg' ? 65 : 57;\r\n    this.scrollHeight = ($('crosstabcomponent').height() - 70 - 10 - pFooterHeight) + 'px';\r\n    let width = ($('crosstabcomponent').width() - 23) + 'px';\r\n    this.tableStyleCrosstab = {\r\n        'max-width' : width,\r\n        'display': 'block'\r\n    }\r\n\r\n    this.container.on('resize', () => { this.goldenLayoutComponentResize()})\r\n    this.container.on('hide', () => { \r\n      this.viewActive = false; \r\n      this.cdref.detectChanges();\r\n    })\r\n    this.container.on('show', () => { \r\n        this.viewActive = true; \r\n        this.cdref.detectChanges();\r\n    })\r\n\r\n    this.store.clusterUpdate$.pipe(takeUntil(this.destroy$)).subscribe(() => {\r\n      if (this.xVariable == \"cluster\" || this.yVariable == \"cluster\") {\r\n        this.onDataChange();\r\n        this.cdref.detectChanges();\r\n      }\r\n    })\r\n  }\r\n\r\n    ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  /**\r\n   * Set Default widgets if not previously defined or when a style file is loaded\r\n   */\r\n  setWidgets() {\r\n\r\n    // x and y variable\r\n    if (this.widgets['crosstab-xVariable'] == undefined || !(this.fieldList.map(x => x.value).includes(this.widgets['crosstab-xVariable']))) {\r\n      this.xVariable = 'cluster';\r\n      this.widgets['crosstab-xVariable'] = 'cluster'\r\n    } else {\r\n      this.xVariable = this.widgets['crosstab-xVariable'];\r\n    }\r\n\r\n    if (this.widgets['crosstab-yVariable'] == undefined || !(this.fieldList.map(x => x.value).includes(this.widgets['crosstab-yVariable']))) {\r\n      this.yVariable = 'None';\r\n      this.widgets['crosstab-yVariable'] = 'None';\r\n    } else {\r\n      this.yVariable = this.widgets['crosstab-yVariable'];\r\n    }\r\n\r\n    // use proportion\r\n    if (this.widgets['crosstab-useProportion'] == undefined) {\r\n      this.widgets['crosstab-useProportion'] = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generates the table by counting the data. Converts the counts into proportions if needed\r\n   */\r\n  updateTable() {\r\n    var xValues = [], yValues = [];\r\n    let rawdata = this.commonService.getVisibleNodes();\r\n\r\n    // get values for X and Y axis\r\n    rawdata.forEach(row => {\r\n      var val = row[this.xVariable];\r\n      if (!xValues.includes(val)) xValues.push(val);\r\n      val = row[this.yVariable];\r\n      if (!yValues.includes(val)) yValues.push(val);\r\n    });\r\n    xValues.push('Total');\r\n    yValues.push('Total');\r\n    xValues = xValues.map(String);\r\n    \r\n    // populate count array [{}, {}, ...] where each item/object is a row\r\n    var data = [];\r\n    this.totalRow = { col: 'Total'}\r\n    xValues.forEach(col => this.totalRow[col] = 0)\r\n    rawdata.forEach(row => {\r\n      var match = data.find(arow => arow.col == row[this.widgets['crosstab-yVariable']]);\r\n      if (match) {\r\n        match[row[this.xVariable]]++;\r\n        match['Total']++;\r\n      } else {\r\n        var newRow = { col: row[this.widgets['crosstab-yVariable']] };\r\n        xValues.forEach(col => newRow[col] = 0);\r\n        newRow[row[this.xVariable]]++;\r\n        newRow['Total'] = 1;\r\n        data.push(newRow);\r\n      }\r\n      this.totalRow[row[this.xVariable]]++;\r\n    });\r\n    this.totalRow['Total'] = Object.keys(this.totalRow).filter(key => key!= 'col').reduce((acc, key) => acc + this.totalRow[key], 0);\r\n    data.forEach(row => {\r\n      row.col = String(row.col)\r\n    })\r\n\r\n    this.SelectedTableData = {\r\n      tableColumns: [\r\n        {\r\n          field: 'col',\r\n          header: ''\r\n        }\r\n       ],\r\n      data: data\r\n    }\r\n    xValues.forEach(value => {\r\n      this.SelectedTableData.tableColumns.push({\r\n        field: value,\r\n        header: value\r\n      })\r\n    })\r\n    \r\n    if(this.widgets['crosstab-useProportion']) {\r\n      this.convertToProportion();\r\n    }\r\n    \r\n  }\r\n\r\n  /**\r\n   * Calculate proportion instead of count for each cell based on total. \r\n   */\r\n  convertToProportion() {\r\n    // Future updates may give option for proportion based on col and row as well\r\n    // But it's not clear how to work with pivot function (would proportion by row/X become by col/Y or not)\r\n\r\n    let total = this.totalRow['Total'];\r\n    this.SelectedTableData.data.forEach(row => {\r\n      Object.keys(row).forEach(key => {\r\n        if (key =='col') return;\r\n        row[key] = (row[key]/total).toFixed(3);\r\n      })\r\n    })\r\n    Object.keys(this.totalRow).forEach(key => {\r\n      if (key == 'col') return;\r\n      this.totalRow[key] = (this.totalRow[key]/total).toFixed(3);\r\n    })\r\n    //this.cdref.detectChanges();\r\n  }\r\n\r\n  /**\r\n   * Switch the value of widgets['crosstab-xVariable'] and widgets['crosstab-yVariable'], and then updates the values in the table so that it pivots.\r\n   * This function does not recount the value.\r\n   */\r\n  pivotCrosstab() {\r\n    // switch widgets['crosstab-xVariable'] and yVariable\r\n    let tmp = this.xVariable;\r\n    this.xVariable = this.yVariable;\r\n    this.yVariable = tmp;\r\n    \r\n    // use prevData and prevColumn to generate the newData and newTableColumns\r\n    let prevData = this.SelectedTableData.data;\r\n    let prevColumns = this.SelectedTableData.tableColumns.slice(1).map(obj => obj.header);\r\n    let newData = [];\r\n    let newTotalRow = { col: 'Total'};\r\n\r\n    let newTableColumns = [{\r\n      field: 'col',\r\n      header: ''\r\n    }]\r\n    prevData.forEach((row)=> {\r\n      newTableColumns.push({\r\n        field: row.col,\r\n        header: row.col\r\n      })\r\n      newTotalRow[row.col] = row['Total']\r\n    })\r\n    newTableColumns.push({ field: 'Total', header: 'Total'})\r\n\r\n    prevColumns.forEach(pcol => {\r\n      if (pcol == 'Total') return;\r\n      let newRow = {col: pcol}\r\n\r\n      newTableColumns.forEach(ncol => {\r\n        if (ncol.header == '') return;\r\n        else if (ncol.header == 'Total') {\r\n          newRow['Total'] = this.totalRow[pcol]\r\n          return;\r\n        }\r\n        newRow[ncol.field] = prevData.find(aRow => aRow.col == ncol.field)[pcol];\r\n      })\r\n      newData.push(newRow);\r\n    })\r\n\r\n    newTotalRow['Total'] = this.totalRow['Total'];\r\n\r\n    // update the table with new values\r\n    this.SelectedTableData = {\r\n      tableColumns: newTableColumns,\r\n      data: newData\r\n    }\r\n    this.totalRow = newTotalRow;\r\n\r\n    this.widgets['crosstab-xVariable'] = this.xVariable;\r\n    this.widgets['crosstab-yVariable'] = this.yVariable;\r\n  }\r\n\r\n  /**\r\n   * Converts the data into proportion or recounts the data\r\n   */\r\n  useProportionChanged() {\r\n    if (this.widgets['crosstab-useProportion']) {\r\n      this.convertToProportion();\r\n    } else {\r\n      this.updateTable();\r\n    }\r\n  }\r\n\r\n  formatTableTitle() {\r\n    if (this.xVariable != 'None' && this.yVariable != 'None') {\r\n      return `${this.commonService.capitalize(this.xVariable.replace(\"_\", \"\"))} vs ${this.commonService.capitalize(this.yVariable.replace(\"_\",\"\"))}`\r\n    } else if (this.xVariable != 'None') {\r\n      return `${this.commonService.capitalize(this.xVariable.replace(\"_\", \"\"))}`\r\n    } else if (this.yVariable != 'None') {\r\n      return `${this.commonService.capitalize(this.yVariable.replace(\"_\",\"\"))}`\r\n    } else {\r\n      return ''\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates the stored values and table when the widgets['crosstab-xVariable'] or widgets['crosstab-yVariable'] is changed\r\n   */\r\n  onDataChange() {\r\n\r\n    this.widgets['crosstab-xVariable'] = this.xVariable;\r\n    this.widgets['crosstab-yVariable'] = this.yVariable;\r\n\r\n    this.updateTable();\r\n  }\r\n\r\n\r\n  /**\r\n   * Updates the values for the fieldListDictionary then updates the fieldList\r\n   */\r\n  updateFieldLists() {\r\n    this.fieldList = []\r\n\r\n    this.fieldList.push({ label: \"None\", value: \"None\"})\r\n    this.commonService.session.data['nodeFields'].map((d) => {\r\n      if (['seq', 'origin', '_diff', '_ambiguity', 'index', '_id'].includes(d)) return;\r\n      this.fieldList.push({\r\n        label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n        value: d\r\n      });\r\n    })\r\n  }\r\n\r\n  updateNodeColors() {  }\r\n  updateVisualization() {  }\r\n\r\n  applyStyleFileSettings() { \r\n    this.widgets = (window as any).context.commonService.session.style.widgets;\r\n    let tempX, tempY;\r\n    if (this.widgets['crosstab-xVariable'] != undefined) {\r\n      tempX = this.widgets['crosstab-xVariable']\r\n    } \r\n    if (this.widgets['crosstab-yVariable'] != undefined) {\r\n      tempY = this.widgets['crosstab-yVariable'];\r\n    }\r\n\r\n    this.cdref.detectChanges();\r\n    \r\n    // x and y variable\r\n    if (tempX == undefined || !(this.fieldList.map(x => x.value).includes(tempX))) {\r\n      this.xVariable = 'None';\r\n      this.widgets['crosstab-xVariable'] = 'None';\r\n    } else {\r\n      this.xVariable = tempX;\r\n      this.widgets['crosstab-xVariable'] = tempX\r\n    }\r\n\r\n    if (tempY == undefined || !(this.fieldList.map(x => x.value).includes(tempY))) {\r\n      this.yVariable = 'None';\r\n      this.widgets['crosstab-yVariable'] = 'None';\r\n    } else {\r\n      this.yVariable = tempY;\r\n      this.widgets['crosstab-yVariable'] = tempY;\r\n    }\r\n\r\n    // use proportion\r\n    if (this.widgets['crosstab-useProportion'] == undefined) {\r\n      this.widgets['crosstab-useProportion'] = false;\r\n    }\r\n\r\n    this.updateTable();\r\n   }\r\n\r\n  updateLinkColor() {  }\r\n  openRefreshScreen() { }\r\n  onRecallSession() {  }\r\n  onLoadNewData() { \r\n    this.updateTable();\r\n   }\r\n  onFilterDataChange() { \r\n    this.updateTable();\r\n   }\r\n\r\n  /**\r\n   * Opens the settings menu\r\n   */\r\n  openSettings() {\r\n    this.settingsOpen = true;\r\n  }\r\n\r\n  /**\r\n   * Opens the export menu\r\n   */\r\n  openExport() {\r\n    this.exportOpen = true;\r\n  }\r\n\r\n  /**\r\n   * Exports visualization as csv file or calls saveAsExcelFile to save as Excel\r\n   */\r\n  async exportVisualization() {\r\n    if (this.SelectedCrossTabExportFileType == 'xlsx') {\r\n      this.saveAsExcelFile();\r\n  } else if (this.SelectedCrossTabExportFileType == 'csv') {\r\n      this.dataTable.exportFilename = this.SelectedCrossTabExportFilename;\r\n      this.dataTable.value.push(this.totalRow)\r\n      this.dataTable.exportCSV()\r\n      this.dataTable.value.pop()\r\n  } else if (this.SelectedCrossTabExportFileType == 'json') {\r\n    let keys = Object.keys(this.SelectedTableData.data[0])\r\n    let data = this.SelectedTableData.data.map(row => {\r\n      let output = {}\r\n      keys.forEach(key => {\r\n        if (key == 'Total') return;\r\n        else if (row[key] == 'null') {\r\n          output[key] = null;\r\n        } else {\r\n          output[key] = row[key]\r\n        }\r\n      })\r\n      return output;\r\n    })\r\n    let blob = new Blob([JSON.stringify(data)], { type: \"application/json;charset=utf-8\"});\r\n    saveAs(blob, this.SelectedCrossTabExportFilename +'.json');\r\n  } else {\r\n    let columns = ['col']\r\n    this.SelectedTableData.tableColumns.forEach(col => {\r\n      if (col.header != '') {\r\n        columns.push(col.header)\r\n      }\r\n    })\r\n\r\n    let dataBody = [this.SelectedTableData.tableColumns.map(col => {\r\n      if (col.header == '') return this.commonService.capitalize(this.yVariable)      \r\n      return this.commonService.capitalize(col.header);\r\n    })].concat(this.SelectedTableData.data.map(formatData)).concat([formatData(this.totalRow)]);\r\n    \r\n    function formatData(dataRow) {\r\n      return columns.map(header => dataRow[header])\r\n    }\r\n\r\n    try {\r\n      const { default: pdfMake } = await import('pdfmake/build/pdfmake.js');\r\n      const { default: pdfFonts } = await import('pdfmake/build/vfs_fonts.js');\r\n      pdfMake.vfs = pdfFonts;\r\n      pdfMake.createPdf({\r\n        content: [ \r\n          { image: this.commonService.watermark },\r\n          { \r\n            text: \"Cluster Crosstab Snapshot:\",\r\n            style: \"header\",\r\n            alignment: \"center\"\r\n          },\r\n          {\r\n            text: `${this.commonService.capitalize(this.xVariable)} vs ${this.commonService.capitalize(this.yVariable)}`,\r\n            style: \"fontSize: 18\",\r\n            alignment: \"center\"\r\n          },\r\n          {\r\n            style: \"paddedTable\",\r\n            table: {\r\n              headerRows: 1,\r\n              widths: this.SelectedTableData.tableColumns.map(col => \"*\"),\r\n              body: dataBody,\r\n            }\r\n          }\r\n        ],\r\n        footer: function(currentPage, pageCount) {\r\n          return [\r\n            {\r\n              text: `Page ${currentPage.toString()} of ${pageCount}`,\r\n              alignment: \"center\"\r\n            }\r\n          ];\r\n        },\r\n        styles: {\r\n          header: {\r\n            fontSize: 22,\r\n            bold: true\r\n          },\r\n          paddedTable: {\r\n            margin: [10, 10, 10, 10]\r\n          }\r\n        }\r\n      }).download(this.SelectedCrossTabExportFilename + '.pdf');\r\n    } catch (error) {\r\n      console.error('Unable to export pdf: ', error); \r\n    }\r\n  }\r\n\r\n  this.exportOpen = !this.exportOpen;\r\n  }\r\n\r\n  /**\r\n   * Exports the data as an excel file\r\n   */\r\n  saveAsExcelFile() {\r\n    import(\"xlsx\").then(xlsx => {\r\n      this.dataTable.value.push(this.totalRow);\r\n      let headers = [];\r\n      this.SelectedTableData.tableColumns.forEach(item => headers.push(item.field))\r\n      let worksheet = xlsx.utils.json_to_sheet(this.dataTable.value, { header: headers}) ; \r\n      const workbook = { Sheets: { 'data': worksheet }, SheetNames: ['data'] }\r\n      const excelBuffer: any = xlsx.write(workbook, { bookType: 'xlsx', type: 'array' });\r\n      const EXCEL_TYPE = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8';\r\n      const data: Blob = new Blob([excelBuffer], { type: EXCEL_TYPE });\r\n      saveAs(data, this.SelectedCrossTabExportFilename + '.xlsx');\r\n      this.dataTable.value.pop()\r\n  })\r\n}\r\n\r\n  /**\r\n   * Resizes the component as need based on how the goldenlayout dashboard is resized\r\n   */\r\n  goldenLayoutComponentResize() {\r\n    let pFooterHeight = this.selectedSize == 'p-datatable-sm' ? 41 : this.selectedSize == 'p-datatable-lg' ? 65 : 57;\r\n    this.scrollHeight = ($('crosstabcomponent').height() - 70 - 10 - pFooterHeight) + 'px';\r\n    let width = ($('crosstabcomponent').width() - 23) + 'px';\r\n    this.tableStyleCrosstab = {\r\n        'max-width' : width,\r\n        'display': 'block'\r\n    }\r\n  }\r\n\r\n  onTableSizeChange() {\r\n    let pFooterHeight = this.selectedSize == 'p-datatable-sm' ? 41 : this.selectedSize == 'p-datatable-lg' ? 65 : 57;\r\n    console.log('abc', pFooterHeight);\r\n    this.scrollHeight = ($('crosstabcomponent').height() - 70 - 10 - pFooterHeight) + 'px';\r\n  }\r\n\r\n}\r\n\r\nexport namespace CrosstabComponent {\r\n  export const componentTypeName = 'Crosstab';\r\n}\r\n\r\ninterface TableData {\r\n  data: any[],\r\n  tableColumns: any[],\r\n}","export const colorSchemes = {\r\n    colorful: [\r\n        '#EAC435', '#345995', '#03CEA4', '#FF6B6B', '#CA1551',\r\n        '#3A3335', '#FFE19C', '#C1FFF2', '#511730', '#8789C0' ],\r\n    cool: [\r\n        '#5680E9', '#84CEEB', '#5AB9EA', '#C1C8E4', '#8860D0',\r\n        '#7555E8', '#69C6EA', '#5971EA', '#AAACE2', '#C060D1' ],\r\n    warm: [\r\n        '#BA9434', '#FFE899', '#FFAC47', '#FF813D', '#E55730',\r\n        '#BA9948', '#A38B3C', '#A36E2E', '#A35327', '#92381F'\r\n    ]\r\n};\r\n","import { Component, OnInit, OnChanges, Input, ElementRef, ChangeDetectorRef } from '@angular/core';\r\nimport { colorSchemes } from '../constants/color-schemes';\r\nimport { GanttChartService } from './gantt-chart.service';\r\n\r\n@Component({\r\n  selector: 'ngx-gantt-chart',\r\n  templateUrl: './gantt-chart.component.html',\r\n  styleUrls: ['./gantt-chart.component.scss'],\r\n  providers: [GanttChartService]\r\n})\r\nexport class GanttChartComponent implements OnInit, OnChanges {\r\n\r\n  @Input() data;\r\n  @Input() width: number;\r\n  @Input() colorScheme = 'colorful';\r\n  @Input() customColorScheme: string[] = [];\r\n\r\n  componentID;\r\n  xPadding = 60;\r\n  yPadding = this.xPadding / 2;\r\n  phaseTimelines;\r\n  height: number;\r\n\r\n  gridWidthX: number;\r\n  gridWidthY: number;\r\n\r\n  gridPrecisionX: number;\r\n\r\n  gridID: string;\r\n  gridPath: string;\r\n\r\n  xAxis: any;\r\n  yAxis: any;\r\n\r\n  monthNames = [\r\n    'January', 'February', 'March',\r\n    'April', 'May', 'June', 'July',\r\n    'August', 'September', 'October',\r\n    'November', 'December'\r\n  ];\r\n\r\n\r\n  addDays(date, days: number) {\r\n    const newdate = new Date(date);\r\n    newdate.setDate((new Date(date)).getDate() + days);\r\n    const day = newdate.getDate();\r\n    const monthIndex = newdate.getMonth();\r\n    const year = newdate.getFullYear();\r\n\r\n\r\n    return this.monthNames[monthIndex] + ' ' + day + ', ' + year;\r\n  }\r\n\r\n  shortenDate(date) {\r\n    if (typeof date === \"string\"){\r\n      date = date.replace('January', 'Jan');\r\n      date = date.replace('February', 'Feb');\r\n      date = date.replace('March', 'Mar');\r\n      date = date.replace('April', 'Apr');\r\n      date = date.replace('May', 'May');\r\n      date = date.replace('June', 'Jun');\r\n      date = date.replace('July', 'Jul');\r\n      date = date.replace('August', 'Aug');\r\n      date = date.replace('September', 'Sep');\r\n      date = date.replace('October', 'Oct');\r\n      date = date.replace('November', 'Nov');\r\n      date = date.replace('December', 'Dec');\r\n    }\r\n    return date;\r\n  }\r\n\r\n  computeGrid() {\r\n    this.cdref.detectChanges();\r\n    // compute the min date and max date\r\n    // const oneDay = 24 * 60 * 60 * 1000;\r\n    // const dateRange = Math.round(Math.abs(\r\n    //     (this.ganttChartService.ganttMaxDate.getTime()\r\n    //      - this.ganttChartService.ganttMinDate.getTime()\r\n    //      ) / (oneDay)));\r\n    let flag = 0;\r\n    let qts = 1;\r\n\r\n    // 3m --> 1 week  --> 12\r\n    // 6m --> 2 weeks --> 12\r\n    // 9m --> 3 weeks --> 12\r\n\r\n    while (flag === 0) {\r\n      if (this.ganttChartService.ganttDateRange <= 90 * qts) {\r\n        this.gridPrecisionX = 7 * qts;\r\n        flag = 1;\r\n      } else qts = qts + 1;\r\n    }\r\n\r\n    // console.log(this.gridPrecisionX);\r\n\r\n    this.gridWidthX = this.ganttChartService.transformX(this.gridPrecisionX);\r\n    this.gridWidthY = this.ganttChartService.rectHeight / this.ganttChartService.ganttPhases.length;\r\n    this.gridPath = 'M ' + this.gridWidthX + ' 0 L 0 0 0 ' + this.gridWidthY;\r\n\r\n    this.xAxis = [];\r\n    this.yAxis = [];\r\n\r\n    let date = this.ganttChartService.ganttMinDate;\r\n    // let xPos = this.ganttChartService.transformGanttDate(date) + this.ganttChartService.xPadding + 150;\r\n    const yTrans = this.ganttChartService.rectHeight + this.ganttChartService.yPadding + 10;\r\n    // let transform = 'translate(' + xPos + 'px, ' + yTrans + 'px)';\r\n    // this.xAxis.push({xPos: xPos, value: date, transform: transform});\r\n    while (new Date(date) <= new Date(this.ganttChartService.ganttMaxDate)) {\r\n      // console.log(date);\r\n      const xPos = this.ganttChartService.transformGanttDate(date) + this.ganttChartService.xPadding + 150;\r\n      const transform = 'translate(' + xPos + 'px, ' + yTrans + 'px)';\r\n      this.xAxis.push({xPos, value: this.shortenDate(date), transform});\r\n      date = this.addDays(date, this.gridPrecisionX);\r\n    }\r\n\r\n    // console.log(this.xAxis);\r\n    let cnt = 0;\r\n    for (const phase of this.ganttChartService.ganttPhases) {\r\n      const yPos = this.gridWidthY * cnt + this.gridWidthY * 0.5 + this.ganttChartService.yPadding;\r\n      this.yAxis.push({yPos, value: phase });\r\n      cnt++;\r\n    }\r\n    // console.log(this.yAxis);\r\n    // console.log(this.xAxis);\r\n  }\r\n\r\n  getWidth(gEntry): number {\r\n    if (gEntry.to === gEntry.from) {\r\n      return 15;\r\n    } else {\r\n      return this.ganttChartService.transformGanttDate(gEntry.to) - this.ganttChartService.transformGanttDate(gEntry.from); \r\n    }\r\n  }\r\n\r\n\r\n\r\n  setDimensions() {\r\n    if (this.width) this.height = this.width - this.xPadding;\r\n    else {\r\n      const host = this.currentElement.nativeElement;\r\n      if (host.parentNode != null) {\r\n        const dims = host.parentNode.getBoundingClientRect();\r\n        this.width = dims.width;\r\n        this.height = this.width - this.xPadding;\r\n      }\r\n    }\r\n    \r\n     /*\r\n     console.log('---set dimensions---');\r\n     console.log('width: ' + this.width);\r\n     console.log('height: ' + this.height);\r\n     console.log('--------------------');\r\n     */\r\n     \r\n  }\r\n\r\n  setColors() {\r\n    let cnt = 0;\r\n    for (const team of this.data) {\r\n      if (!team.color) {\r\n        if (this.customColorScheme.length > 0) {\r\n          team.color = this.customColorScheme[cnt % this.customColorScheme.length];\r\n        } else {\r\n          team.color = colorSchemes[this.colorScheme][cnt % 10];\r\n        }\r\n        cnt++;\r\n      }\r\n    }\r\n  }\r\n\r\n  definePhaseTimelines() {\r\n    this.phaseTimelines = {};\r\n    for (const phase of this.ganttChartService.ganttPhases) {\r\n      this.phaseTimelines[phase] = [];\r\n    }\r\n\r\n    for (const team of this.ganttChartService.data) {\r\n      for (const phase of Object.keys(team.timelines)) {\r\n        for (const timeline of team.timelines[phase]) {\r\n          this.phaseTimelines[phase].push({from: timeline.from,\r\n            to: timeline.to,\r\n            color: team.color,\r\n            info: timeline.info,\r\n            toolTip: (timeline.info ? 'block' : 'none')});\r\n        }\r\n      }\r\n    }\r\n    // console.log('phase timelines: ');\r\n    // console.log(this.phaseTimelines);\r\n  }\r\n\r\n  // setColors() {\r\n  //   let cnt = 0;\r\n  //   for (const team of this.ganttChartService.data) {\r\n  //     if (!team.color) team.color = colorSchemes[this.ganttChartService.colorScheme][cnt % 10];\r\n  //     cnt++;\r\n  //   }\r\n  // }\r\n\r\n  constructor(public ganttChartService: GanttChartService,              \r\n              private currentElement: ElementRef,\r\n              private cdref: ChangeDetectorRef) { //super(ganttChartService, cdref);\r\n                }\r\n\r\n  ngOnInit() {\r\n    this.cdref.detectChanges();\r\n    this.componentID = 1;\r\n    this.setDimensions();\r\n    this.setColors();\r\n    this.ganttChartService.setValues({\r\n      componentID: this.componentID,\r\n      width: this.width,\r\n      xPadding: this.xPadding,\r\n      yPadding: this.yPadding,\r\n      data: this.data\r\n    });\r\n    this.gridID = 'grid' + this.ganttChartService.componentID;\r\n    this.height = this.ganttChartService.height;\r\n    this.definePhaseTimelines();\r\n    this.computeGrid();\r\n  }\r\n\r\n  ngOnChanges() {\r\n    this.setDimensions();\r\n    this.setColors();\r\n    this.ganttChartService.setValues({\r\n      componentID: this.componentID,\r\n      width: this.width,\r\n      xPadding: this.xPadding,\r\n      yPadding: this.yPadding,\r\n      data: this.data\r\n    });\r\n    this.height = this.ganttChartService.height;\r\n    this.definePhaseTimelines();\r\n    this.computeGrid();\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { colorSchemes } from '../constants/color-schemes';\r\n\r\n@Injectable({\r\n   providedIn: 'root'\r\n})\r\nexport class GanttChartService {\r\n\r\n  width: number;\r\n  height: number;\r\n  ganttTeams: Array<any>;\r\n  ganttPhases: Array<any>;\r\n  phaseTimelines;\r\n  legion;\r\n  ganttMinDate;\r\n  ganttMaxDate;\r\n  ganttDateRange: number;\r\n  xPadding: number;\r\n  yPadding: number;\r\n  componentID: number;\r\n  data: any;\r\n  ganttOpacity = \"0.9\";\r\n\r\n  rectWidth: number;\r\n  rectHeight: number;\r\n  legionWidth: number;\r\n  legionHeight: number;\r\n  minX: number;\r\n  maxX: number;\r\n\r\n  monthNames = [\r\n    'January', 'February', 'March',\r\n    'April', 'May', 'June', 'July',\r\n    'August', 'September', 'October',\r\n    'November', 'December'\r\n  ];\r\n\r\n  constructor() { }\r\n\r\n  computeRectDimensions() {\r\n    this.rectWidth = this.width - this.xPadding * 2 - 150;\r\n    this.rectHeight = this.ganttPhases.length * 60;\r\n  }\r\n\r\n  computeLegionDimensions() {\r\n    const noOfLines = Math.ceil(this.data.length / 3);\r\n    this.legionWidth = this.width - this.xPadding * 2 - 150;\r\n    this.legionHeight = 40 + 40 * noOfLines;\r\n  }\r\n\r\n  transformX(x: number) {\r\n    return this.rectWidth * x / (this.maxX - this.minX);\r\n  }\r\n\r\n  computeLegion() {\r\n    const noOfLines = Math.ceil(this.data.length / 3);\r\n    this.legion = [];\r\n    let cnt = 0;\r\n    for (let line = 0; line < noOfLines; line++) {\r\n      const legionLine = [];\r\n      for (let i = 0; i < 3; i++) {\r\n        if (this.ganttTeams[cnt]) legionLine.push(this.ganttTeams[cnt]);\r\n        cnt++;\r\n      }\r\n      this.legion.push(legionLine);\r\n    }\r\n    // console.log(this.legion);\r\n  }\r\n\r\n  transformGanttDate(d) {\r\n    const oneDay = 24 * 60 * 60 * 1000;\r\n    const daysSinceMinDate = Math.round(Math.abs(\r\n        (new Date(d).getTime()\r\n        - (new Date(this.ganttMinDate)).getTime()\r\n        ) / (oneDay)));\r\n    return this.rectWidth * daysSinceMinDate / (this.maxX - this.minX);\r\n  }\r\n\r\n  closestMultipleLessThanEqualTo(factor, num) {\r\n    if (num % factor === 0) return num;\r\n    else return this.closestMultipleLessThanEqualTo(factor, num - 1);\r\n  }\r\n\r\n  closestMultipleMoreThanEqualTo(factor, num) {\r\n    if (num % factor === 0) return num;\r\n    else return this.closestMultipleMoreThanEqualTo(factor, num + 1);\r\n  }\r\n\r\n\r\n  setValues({\r\n    componentID: componentID,\r\n    width: width,\r\n    xPadding: xPadding,\r\n    yPadding: yPadding,\r\n    data: data\r\n  }) {\r\n    this.componentID = componentID;\r\n    this.width = width;\r\n    this.xPadding = xPadding;\r\n    this.yPadding = yPadding;\r\n    this.data = data;\r\n    const froms: any = [];\r\n    const tos: any = [];\r\n    const phases = new Set();\r\n    this.ganttTeams = [];\r\n    // this.setColors();\r\n    for (const team of this.data) {\r\n      this.ganttTeams.push({name: team.name, color: team.color, opacity: team.opacity});\r\n      for (const phase of Object.keys(team.timelines)) {\r\n        phases.add(phase);\r\n        for (const timeline of team.timelines[phase]) {\r\n          froms.push(timeline.from);\r\n          tos.push(timeline.to);\r\n        }\r\n      }\r\n    }\r\n    this.ganttPhases = Array.from(phases);\r\n\r\n    const minDate = froms.filter(x => x !== null && x!==\"null\").reduce((a, b) => new Date(a) < new Date(b) ? a : b );\r\n    const maxDate = tos.filter(x=>x!==null && x!==\"null\").reduce((a, b) => new Date(a) > new Date(b) ? a : b );\r\n\r\n    this.ganttMinDate = minDate;\r\n    this.ganttMaxDate = maxDate;\r\n    const noOfLines = Math.ceil(this.data.length / 3);\r\n    this.height = this.ganttPhases.length * 60 + this.yPadding * 3 + 100 + 40 + 30 * noOfLines;\r\n\r\n    const oneDay = 24 * 60 * 60 * 1000;\r\n    this.ganttDateRange = Math.round(Math.abs(\r\n        (new Date(this.ganttMaxDate).getTime()\r\n        - new Date(this.ganttMinDate).getTime()\r\n        ) / (oneDay)));\r\n    this.minX = 0;\r\n    this.maxX = this.ganttDateRange;\r\n    let flag = 0;\r\n    let qts = 1;\r\n    let gridPrecisionX = 0;\r\n    while (flag === 0) {\r\n      if (this.ganttDateRange <= 90 * qts) {\r\n        gridPrecisionX = 7 * qts;\r\n        flag = 1;\r\n        break;\r\n      } else { qts = qts + 1; }\r\n    }\r\n\r\n    this.maxX = this.closestMultipleMoreThanEqualTo(7 * qts, this.ganttDateRange);\r\n    this.ganttMaxDate = this.addDays(this.ganttMinDate, this.maxX);\r\n\r\n    this.computeRectDimensions();\r\n    this.computeLegionDimensions();\r\n    this.computeLegion();\r\n    // this.printAll();\r\n  }\r\n\r\n  addDays(date, days: number) {\r\n    const newdate = new Date(date);\r\n    newdate.setDate((new Date(date)).getDate() + days);\r\n    const day = newdate.getDate();\r\n    const monthIndex = newdate.getMonth();\r\n    const year = newdate.getFullYear();\r\n\r\n\r\n    return this.monthNames[monthIndex] + ' ' + day + ', ' + year;\r\n  }\r\n\r\n  printAll() {\r\n    console.log('line-graph-service');\r\n    console.log('component ID: ' + this.componentID);\r\n    console.log('width: ' + this.width);\r\n    console.log('height: ' + this.height);\r\n    console.log('xPadding: ' + this.xPadding);\r\n    console.log('yPadding: ' + this.yPadding);\r\n    console.log('rectWidth: ' + this.rectWidth);\r\n    console.log('rectHeight: ' + this.rectHeight);\r\n    console.log('ganttMinDate: ' + this.ganttMinDate);\r\n    console.log('ganttMaxDate: ' + this.ganttMaxDate);\r\n  }\r\n}\r\n","import { Injector, Component, Output, EventEmitter, OnInit,\r\n  ViewChild, ViewContainerRef, ElementRef, ChangeDetectorRef, Inject } from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { CommonService } from '@app/contactTraceCommonServices/common.service';\r\nimport { SelectItem } from 'primeng/api';\r\nimport { DialogSettings } from '@app/helperClasses/dialogSettings';\r\nimport * as _ from 'lodash';\r\nimport * as saveAs from 'file-saver';\r\nimport * as domToImage from 'html-to-image';\r\nimport { CustomShapes } from '@app/helperClasses/customShapes';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport { GanttChartService } from './gantt-chart/gantt-chart.service';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\nimport { MicrobeTraceNextVisuals } from '../../microbe-trace-next-plugin-visuals';\r\nimport { cloneDeep } from 'lodash';\r\nimport { ExportService } from '@app/contactTraceCommonServices/export.service';\r\n\r\n\r\n@Component({\r\n  selector: 'GanttComponent',\r\n  templateUrl: './gantt-plugin.component.html',\r\n  styleUrls: ['./gantt-plugin.component.scss']\r\n})\r\nexport class GanttComponent extends BaseComponentDirective implements OnInit {\r\n  @ViewChild('ganttContainer', {read: ViewContainerRef}) ganttContainer: ViewContainerRef;\r\n  @Output() DisplayGlobalSettingsDialogEvent = new EventEmitter();\r\n  viewActive: boolean = true;\r\n  svgStyle: object = {\r\n    height: '0px',\r\n    width: '1000px'\r\n  };\r\n\r\n  ganttChartData: object[];\r\n\r\n  private customShapes: CustomShapes = new CustomShapes();\r\n\r\n  ShowNetworkAttributes = false;\r\n  ShowStatistics = false;\r\n  ShowGanttExportPane = false;\r\n  ShowGanttSettingsPane = false;\r\n  IsDataAvailable = true;\r\n  svg: any = null;\r\n  settings: object = this.commonService.session.style.widgets;\r\n  visuals: MicrobeTraceNextVisuals;\r\n  nodeIds: string[] = [];\r\n  FieldList: SelectItem[] = [];\r\n  ganttChartService: GanttChartService;\r\n  GanttEntryName: string = \"\";\r\n  GanttStartVariable: string = \"\";\r\n  GanttEndVariable: string = \"\";\r\n  GanttEntryColor: string = \"#000000\";\r\n  ganttEntries: object[] = [];\r\n  SelectedGanttChartImageFilenameVariable = \"default_gantt_chart\";\r\n\r\n  // ganttChartData: Object[] = [];\r\n\r\n  NetworkExportFileTypeList: any = [\r\n    { label: 'png', value: 'png' },\r\n    { label: 'jpeg', value: 'jpeg' },\r\n    { label: 'svg', value: 'svg' }\r\n  ];\r\n\r\n  SelectedNetworkExportFileTypeListVariable = 'png';\r\n  GanttSettingsDialogSettings: DialogSettings = new DialogSettings('#gantt-settings-pane', false);\r\n  isExportClosed: boolean;\r\n\r\n  constructor(injector: Injector,\r\n              private eventManager: EventManager,\r\n              public commonService: CommonService,\r\n              @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer,\r\n              @Inject(ViewContainerRef) ViewContainerRef, \r\n              elRef: ElementRef,\r\n              ganttChartService: GanttChartService,\r\n              private cdref: ChangeDetectorRef,\r\n              private gtmService: GoogleTagManagerService,\r\n              private exportService: ExportService) {\r\n\r\n    super(elRef.nativeElement);\r\n\r\n    this.visuals = commonService.visuals;\r\n    this.commonService.visuals.gantt = this;\r\n    this.ganttChartService = ganttChartService;\r\n  }\r\n\r\n  dataAvail(): boolean {\r\n    if (!this.ganttChartData || this.ganttChartData.length === 1 && this.ganttChartData[0][\"name\"] === \"_blank\"){\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  openSettings(): void {\r\n    this.visuals.gantt.GanttSettingsDialogSettings.setVisibility(true);\r\n  }\r\n  openExport(): void {\r\n    this.ShowGanttExportPane = true;\r\n\r\n    this.visuals.microbeTrace.GlobalSettingsDialogSettings.setStateBeforeExport();\r\n    //this.visuals.microbeTrace.GlobalSettingsLinkColorDialogSettings.setStateBeforeExport();\r\n    //this.visuals.microbeTrace.GlobalSettingsNodeColorDialogSettings.setStateBeforeExport();\r\n    this.isExportClosed = false;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.gtmService.pushTag({\r\n            event: \"page_view\",\r\n            page_location: \"/gantt\",\r\n            page_title: \"Gantt Chart View\"\r\n        });\r\n\r\n    this.nodeIds = this.getNodeIds();\r\n    this.visuals.gantt.FieldList.push(\r\n      {\r\n        label: \"None\",\r\n        value: \"\",\r\n      }\r\n    )\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    this.commonService.session.data['nodeFields'].map((d, i) => {\r\n\r\n      this.visuals.gantt.FieldList.push(\r\n        {\r\n          label: this.visuals.gantt.commonService.capitalize(d.replace('_', '')),\r\n          value: d\r\n        });\r\n    });\r\n\r\n    this.visuals.microbeTrace.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n    this.visuals.microbeTrace.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n    \r\n\r\n    // this.createGanttEntry();\r\n    this.ganttChartData = [this.makeBlankEntry()];\r\n    this.openSettings();\r\n    \r\n    // this.ganttChartData = [this.makeGanttEntry(\"_blank\", \"Ipstart\", \"Ipend\", \"#2ca02c\")];\r\n    this.goldenLayoutComponentResize();\r\n\r\n    this.container.on('resize', () => { this.goldenLayoutComponentResize() })\r\n    this.container.on('hide', () => { \r\n      this.viewActive = false; \r\n      this.cdref.detectChanges();\r\n    })\r\n    this.container.on('show', () => { \r\n      this.viewActive = true; \r\n      this.cdref.detectChanges();\r\n      this.visuals.microbeTrace.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n      this.visuals.microbeTrace.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n    })\r\n  }\r\n\r\n  makeBlankEntry(): object {\r\n    const timelineEntry = [{from:\"2000/01/01\", to: \"2024/12/31\"}];\r\n    const timelines = {};\r\n    this.nodeIds.forEach( (element: string) => {\r\n      timelines[element] = timelineEntry;\r\n    });\r\n    const blankEntry = {name: \"_blank\", color: \"#ffffff\", timelines: timelines};\r\n    return blankEntry;\r\n\r\n    // return this.makeGanttEntry(\"_blank\", \"ipstart\", \"ipend\", \"#2ca02c\");\r\n  }\r\n  goldenLayoutComponentResize() {\r\n    $('#gantt-plugin').height($('ganttcomponent').height()-19);\r\n    $('#gantt-plugin').width($('ganttcomponent').width()-1)\r\n  }\r\n\r\n  makeGanttEntry(dateName: string, startVariable: string, endVariable: string, entryColor: string): object {\r\n    const timeline = {};\r\n\r\n    this.nodeIds.forEach( (element: string) => {\r\n      const nodeData = this.visuals.gantt.commonService.session.data.nodes.filter(x => x._id == element)\r\n      const hasTimeZone: RegExp = /GMT.\\d{4}/;\r\n      const startDate = hasTimeZone.exec(nodeData[0][startVariable])? nodeData[0][startVariable].substring(4,15) : nodeData[0][startVariable];\r\n      const endDate = hasTimeZone.exec(nodeData[0][endVariable])? nodeData[0][endVariable].substring(4,15) : nodeData[0][endVariable];\r\n      const regExp: RegExp = /^.*$/;\r\n      if (startDate && endDate && regExp.exec(startDate) && regExp.exec(endDate)) {\r\n        const entry = [{ from: startDate, to: endDate, info: dateName }]\r\n        timeline[element] = entry;\r\n      }\r\n    })\r\n\r\n    const ganttEntry = {name: dateName, color: entryColor, opacity: this.ganttChartService.ganttOpacity, timelines: timeline};\r\n    return ganttEntry;\r\n  }\r\n\r\n  createGanttEntry(): void {\r\n    if (!this.GanttEndVariable) {\r\n      this.GanttEndVariable = this.GanttStartVariable;\r\n    }\r\n    if (this.ganttEntries.length === 0) { //} || this.ganttChartData.length === 1 && this.ganttChartData[0][\"name\"] === \"_blank\"){\r\n      const newEntry = this.makeGanttEntry(this.GanttEntryName, this.GanttStartVariable, this.GanttEndVariable, this.GanttEntryColor);\r\n      this.ganttEntries = [{entryName: this.GanttEntryName, startDate: this.GanttStartVariable, endDate: this.GanttEndVariable, color: this.GanttEntryColor}]\r\n      this.ganttChartData = [newEntry];\r\n\r\n    }\r\n    else {\r\n      const newEntry = this.makeGanttEntry(this.GanttEntryName, this.GanttStartVariable, this.GanttEndVariable, this.GanttEntryColor);\r\n      this.ganttEntries.push({entryName: this.GanttEntryName, startDate: this.GanttStartVariable, endDate: this.GanttEndVariable, color: this.GanttEntryColor});\r\n      const existingData = cloneDeep(this.ganttChartData);\r\n      existingData.push(newEntry);\r\n      this.ganttChartData = existingData;\r\n    }\r\n    this.cdref.markForCheck();\r\n    this.resetEntryForm();\r\n    this.visuals.gantt.GanttSettingsDialogSettings.setVisibility(false);\r\n\r\n  }\r\n\r\n  removeGanttEntry(entryName): void {\r\n    const startingEntries = cloneDeep(this.ganttChartData);\r\n    const endingEntries = startingEntries.filter(x => x[\"name\"] !== entryName)\r\n    this.ganttEntries = this.ganttEntries.filter(x => x[\"entryName\"] !== entryName);\r\n    this.ganttChartData = endingEntries;\r\n  }\r\n\r\n  resetEntryForm(): void {\r\n    this.GanttEntryName = \"\";\r\n    this.GanttEntryColor = \"#000000\";\r\n    this.GanttEndVariable = \"\";\r\n    this.GanttStartVariable = \"\";\r\n  }\r\n\r\n  updateEntryColor(entryName: string, event: Event): void {\r\n    const color = (event.target as HTMLInputElement).value;\r\n    const startingData = cloneDeep(this.ganttChartData);\r\n    for (let i=0; i<startingData.length; i++){\r\n      if (startingData[i][\"name\"] === entryName){\r\n        startingData[i][\"color\"] = color;\r\n      }\r\n    }\r\n    this.ganttChartData = startingData;\r\n\r\n  }\r\n\r\n  getNodeIds(): string[] {\r\n    const idSet: string[] = this.visuals.gantt.commonService.session.data.nodes.map(x=>x._id);\r\n    return idSet;\r\n  }\r\n\r\n  listGanttEntries(): object[] {\r\n    return this.ganttEntries;\r\n  }\r\n  saveImage(event): void {\r\n    const fileName = this.SelectedGanttChartImageFilenameVariable;\r\n    const domId = 'gantt';\r\n    const exportImageType = this.SelectedNetworkExportFileTypeListVariable ;\r\n    const content = document.getElementById(domId);\r\n    if (exportImageType === 'png') {\r\n      domToImage.toPng(content).then(\r\n        dataUrl => {\r\n          saveAs(dataUrl, fileName);\r\n      });\r\n    } else if (exportImageType === 'jpeg') {\r\n        domToImage.toJpeg(content, { quality: 0.85 }).then(\r\n          dataUrl => {\r\n            saveAs(dataUrl, fileName);\r\n          });\r\n    } else if (exportImageType === 'svg') {\r\n        // The tooltips were being displayed as black bars, so I add a rule to hide them.\r\n        // Have to parse the string into a document, get the right element, add the rule, and reserialize it\r\n        let svgContent = this.exportService.unparseSVG(content);\r\n        const parser = new DOMParser();\r\n        const deserialized = parser.parseFromString(svgContent, 'text/xml')\r\n        console.log(deserialized);\r\n        const style = deserialized.getElementsByTagName('style');\r\n        console.log(style);\r\n        style[0].innerHTML = \".tooltip { display: none !important; } .small { font-size: 80%; font-family: Roboto, 'Helvetica Neue', sans-serif; }\";\r\n        const serializer = new XMLSerializer();\r\n        svgContent = serializer.serializeToString(deserialized);\r\n        const blob = new Blob([svgContent], { type: 'image/svg+xml;charset=utf-8' });\r\n        saveAs(blob, fileName);\r\n    }\r\n\r\n  }\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace GanttComponent {\r\n    export const componentTypeName = 'Gantt Chart';\r\n}\r\n","import { Injector, Component, Output, EventEmitter, \r\n  ElementRef, Renderer2, ChangeDetectorRef, Inject, OnInit, ViewContainerRef,\r\n  ViewChild} from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { CommonService } from '@app/contactTraceCommonServices/common.service';\r\nimport * as _ from 'lodash';\r\nimport * as saveAs from 'file-saver';\r\nimport * as domToImage from 'html-to-image';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\nimport { DialogSettings } from '../../helperClasses/dialogSettings';\r\nimport { PlotlyComponent, PlotlyModule } from 'angular-plotly.js';\r\nimport { SelectItem } from 'primeng/api';\r\nimport { MicrobeTraceNextVisuals } from '../../microbe-trace-next-plugin-visuals';\r\nimport { cloneDeep } from 'lodash';\r\nimport { ExportService } from '@app/contactTraceCommonServices/export.service';\r\n//import * as plotlyjs from 'plotly.js-dist-min';\r\n\r\n\r\n@Component({\r\n  selector: 'HeatmapComponent',\r\n  templateUrl: './heatmap.component.html',\r\n  styleUrls: ['./heatmap.component.scss']\r\n})\r\nexport class HeatmapComponent extends BaseComponentDirective implements OnInit {\r\n\r\n  @ViewChild('heatmapContainer', { read: ElementRef }) heatmapContainerRef: ElementRef;  \r\n  @Output() DisplayGlobalSettingsDialogEvent = new EventEmitter();\r\n\r\n  private Plotly: any;\r\n\r\n  \r\n  labels: string[];\r\n  //xLabels: string[];\r\n  //yLabels: string[];\r\n  matrix: object;\r\n  plot: PlotlyComponent;\r\n  visuals: MicrobeTraceNextVisuals;\r\n  nodeIds: string[];\r\n  viewActive: boolean;\r\n  heatmapData: object;\r\n  FieldList: SelectItem[] = [];\r\n  heatmapLayout: object;\r\n  heatmapConfig: object;\r\n  invertX: boolean;\r\n  invertY: boolean;\r\n  heatmapShowLabels: boolean;\r\n  loColor: string;\r\n  medColor: string;\r\n  hiColor: string;\r\n  HeatmapSettingsDialogSettings: DialogSettings = new DialogSettings('#heatmap-settings-pane', false);\r\n  ShowHeatmapExportPane: boolean = false;\r\n  invertOptions: object = [\r\n    { label: \"Yes\", value: true },\r\n    { label: \"No\", value: false }\r\n  ];\r\n  SelectedImageFilenameVariable = \"default_heatmap\";\r\n  SelectedNetworkExportFileTypeVariable: string = \"png\";\r\n  NetworkExportFileTypeList: object = [\r\n    { label: 'png', value: 'png' },\r\n    { label: 'jpeg', value: 'jpeg' },\r\n    { label: 'svg', value: 'svg' }\r\n  ];\r\n  SelectedDistanceMatrixFilenameVariable: string = \"distance_matrix.csv\";\r\n  heatmapLabels: string[];\r\n  heatmapMetric: string;\r\n    \r\n  constructor(injector: Injector,\r\n        private eventManager: EventManager,\r\n        public commonService: CommonService,\r\n        @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer, \r\n        elRef: ElementRef,\r\n        private cdref: ChangeDetectorRef,\r\n        private gtmService: GoogleTagManagerService,\r\n        private renderer: Renderer2,\r\n        private exportService: ExportService,\r\n        private plotlyModule: PlotlyModule,\r\n      ) {\r\n          super(elRef.nativeElement);\r\n          this.visuals = commonService.visuals;\r\n          this.visuals.heatmap = this;\r\n          this.invertX = this.commonService.session.style.widgets['heatmap-invertX'];\r\n          this.invertY = this.commonService.session.style.widgets['heatmap-invertY'];\r\n          this.heatmapShowLabels = this.commonService.session.style.widgets['heatmap-axislabels-show'];\r\n          this.loColor = this.commonService.session.style.widgets['heatmap-color-low'];\r\n          this.medColor = this.commonService.session.style.widgets['heatmap-color-medium'];\r\n          this.hiColor = this.commonService.session.style.widgets['heatmap-color-high']\r\n          this.heatmapMetric = this.commonService.session.style.widgets['default-distance-metric'].toUpperCase();\r\n        }\r\n\r\n  openSettings(): void {\r\n    this.visuals.heatmap.HeatmapSettingsDialogSettings.setVisibility(true);\r\n  }\r\n  \r\n  openExport(): void {\r\n    this.ShowHeatmapExportPane = true;\r\n  }\r\n  \r\n  openCenter(): void {\r\n    const reCenter = {\r\n      'xaxis.autorange': true,\r\n      'yaxis.autorange': true\r\n    }\r\n    PlotlyModule.plotlyjs.relayout(\"heatmap\", reCenter);\r\n  }\r\n  \r\n  ngOnInit(): void {\r\n\r\n\r\n    this.viewActive = true;\r\n    this.gtmService.pushTag({\r\n            event: \"page_view\",\r\n            page_location: \"/heatmap\",\r\n            page_title: \"Heatmap View\"\r\n        });\r\n\r\n    //this.nodeIds = this.getNodeIds();\r\n    this.visuals.heatmap.FieldList.push(\r\n      {\r\n        label: \"None\",\r\n        value: \"\",\r\n      }\r\n    )\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    this.commonService.session.data['nodeFields'].map((d, i) => {\r\n\r\n      this.visuals.heatmap.FieldList.push(\r\n        {\r\n          label: this.visuals.heatmap.commonService.capitalize(d.replace('_', '')),\r\n          value: d\r\n        });\r\n    });\r\n\r\n    //this.visuals.microbeTrace.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n    //this.visuals.microbeTrace.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n    \r\n\r\n    this.goldenLayoutComponentResize();\r\n\r\n    this.container.on('resize', () => { this.goldenLayoutComponentResize() })\r\n    this.container.on('hide', () => { \r\n      this.viewActive = false; \r\n      this.cdref.detectChanges();\r\n    })\r\n    this.container.on('show', () => { \r\n      this.viewActive = true; \r\n      this.cdref.detectChanges();\r\n    })\r\n\r\n    this.redrawHeatmap();\r\n  }\r\n\r\n  drawHeatmap(config: object): void {\r\n    this.commonService.getDM().then(({dm, labels}) => {\r\n      this.nodeIds = labels;\r\n      const xLabels = labels.map(d => 'N' + d);\r\n      const yLabels = xLabels.slice();\r\n\r\n      if (this.invertX) {\r\n        dm.forEach(l => l.reverse());\r\n        xLabels.reverse();\r\n      }\r\n      this.heatmapLabels = xLabels;\r\n      if (this.invertY) {\r\n        dm.reverse();\r\n        yLabels.reverse();\r\n      }\r\n\r\n      this.heatmapData = [{\r\n        x: xLabels,\r\n        y: yLabels,\r\n        z: dm,\r\n        type: 'heatmap',\r\n        colorscale: [\r\n          [0, this.loColor],\r\n          [0.5, this.medColor],\r\n          [1, this.hiColor]\r\n        ]\r\n      }]\r\n\r\n/*      const parentElement = this.heatmapContainerRef.nativeElement.parentElement;\r\n    const width = parentElement.clientWidth;\r\n    const height = parentElement.clientHeight;\r\n*/\r\n      this.heatmapLayout = {\r\n          xaxis: config,\r\n          yaxis: config,\r\n          width: $('#heatmap').parent().width(),\r\n          height: $('#heatmap').parent().height(),\r\n        }\r\n      this.heatmapConfig = {\r\n          displaylogo: false,\r\n          displayModeBar: false\r\n        }\r\n\r\n      //  this.Plotly.newPlot('heatmap', this.heatmapData, this.heatmapLayout, this.heatmapConfig);\r\n\r\n      this.plot = PlotlyModule.plotlyjs.newPlot('heatmap', this.heatmapData, this.heatmapLayout, this.heatmapConfig);\r\n    });\r\n  }\r\n\r\n  goldenLayoutComponentResize(): void {\r\n    const height = $('heatmapcomponent').height();\r\n    const width = $('heatmapcomponent').width();\r\n    if (height)\r\n      $('#heatmap').height(height-19);\r\n    if (width)\r\n      $('#heatmap').width(width-1)\r\n/*    const heatmapElement = this.heatmapContainerRef.nativeElement;\r\n    const parentElement = heatmapElement.parentElement;\r\n  \r\n    const height = parentElement.clientHeight;\r\n    const width = parentElement.clientWidth;\r\n    if (height) {\r\n      this.renderer.setStyle(heatmapElement, 'height', `${height - 19}px`);\r\n    }\r\n    if (width) {\r\n      this.renderer.setStyle(heatmapElement, 'width', `${width - 1}px`);\r\n    }\r\n*/\r\n  }\r\n\r\n  // getNodeIds(): string[] {\r\n  //   const idSet: string[] = this.visuals.heatmap.commonService.session.data.nodes.map(x=>x._id);\r\n  //   return idSet;\r\n  // }\r\n  \r\n  redrawHeatmap(): void {\r\n    //if (!this.heatmapContainerRef.nativeElement.length) return;\r\n    if (!$('#heatmap').length) return;\r\n    if (this.plot) PlotlyModule.plotlyjs.purge('heatmap');\r\n    // const labels = this.nodeIds;\r\n    // const xLabels = labels.map(d => 'N' + d);\r\n    // const yLabels = xLabels.slice();\r\n    // console.log(this.heatmapShowLabels, xLabels.length, xLabels);\r\n    this.heatmapMetric = this.commonService.session.style.widgets['default-distance-metric'].toUpperCase();\r\n\r\n\r\n    const config = {\r\n      autotick: false,\r\n      showticklabels: this.heatmapShowLabels\r\n    };\r\n\r\n    if (!config.showticklabels) {\r\n      config[\"ticks\"] = '';\r\n    }\r\n\r\n    this.drawHeatmap(config);\r\n    this.setBackground();\r\n  }\r\n\r\n  setBackground(): void {\r\n    const col = this.commonService.session.style.widgets['background-color'];\r\n    $('#heatmap svg.main-svg').first().css('background', col);\r\n    $('#heatmap rect.bg').css('fill', col);\r\n\r\n    const contrast = this.commonService.session.style.widgets['background-color-contrast'];\r\n    $('#heatmap .xtitle, .ytitle').css('fill', contrast);\r\n    $('#heatmap .xaxislayer-above text').css('fill', contrast);\r\n    $('#heatmap .yaxislayer-above text').css('fill', contrast);\r\n    /*const heatmapElement: HTMLElement = this.heatmapContainerRef.nativeElement;\r\n    const col = this.commonService.session.style.widgets['background-color'];\r\n    const contrast = this.commonService.session.style.widgets['background-color-contrast'];\r\n      \r\n    // Set background color of the main SVG\r\n    const mainSvg = heatmapElement.querySelector('svg.main-svg');\r\n    if (mainSvg) {\r\n      this.renderer.setStyle(mainSvg, 'background', col);\r\n    }\r\n\r\n    // Set fill for rect.bg\r\n    const rectBg = heatmapElement.querySelector('rect.bg');\r\n    if (rectBg) {\r\n      this.renderer.setStyle(rectBg, 'fill', col);\r\n    }\r\n\r\n    // Set fill for titles\r\n    const titles = heatmapElement.querySelectorAll('.xtitle, .ytitle');\r\n    titles.forEach(title => {\r\n      this.renderer.setStyle(title, 'fill', contrast);\r\n    });\r\n\r\n    // Set fill for axis layer texts\r\n    const axisTexts = heatmapElement.querySelectorAll('.xaxislayer-above text, .yaxislayer-above text');\r\n    axisTexts.forEach(text => {\r\n      this.renderer.setStyle(text, 'fill', contrast);\r\n    });*/\r\n  }\r\n\r\n  updateLoColor(color: string): void {\r\n    this.commonService.session.style.widgets[\"heatmap-color-low\"] = color;\r\n    this.loColor = color;\r\n    this.redrawHeatmap();\r\n  }\r\n\r\n  updateMedColor(color: string): void {\r\n    this.commonService.session.style.widgets[\"heatmap-color-medium\"] = color;\r\n    this.medColor = color;\r\n    this.redrawHeatmap();\r\n  }\r\n\r\n  updateHiColor(color: string): void {\r\n    this.commonService.session.style.widgets[\"heatmap-color-high\"] = color;\r\n    this.hiColor = color;\r\n    this.redrawHeatmap();\r\n  }\r\n\r\n  updateInvertX(direction: boolean): void {\r\n    this.invertX = direction;\r\n    this.commonService.session.style.widgets[\"heatmap-invertX\"] = this.invertX;\r\n    this.redrawHeatmap();\r\n  }\r\n\r\n  updateInvertY(direction: boolean): void {\r\n    this.invertY = direction;\r\n    this.commonService.session.style.widgets[\"heatmap-invertY\"] = this.invertY;\r\n    this.redrawHeatmap();\r\n  }\r\n\r\n  saveImage(): void {\r\n    const fileName = this.SelectedImageFilenameVariable;\r\n    const domId = 'heatmap';\r\n    const exportImageType = this.SelectedNetworkExportFileTypeVariable;\r\n    const content = document.getElementById(domId);\r\n    if (content) {\r\n      const fixedContent = this.fixGradient(content);\r\n      if (exportImageType === 'png') {\r\n        domToImage.toPng(content).then(\r\n          dataUrl => {\r\n            saveAs(dataUrl, fileName+\".\"+exportImageType);\r\n        });\r\n      } else if (exportImageType === 'jpeg') {\r\n          domToImage.toJpeg(content, { quality: 0.85 }).then(\r\n            dataUrl => {\r\n              saveAs(dataUrl, fileName+\".\"+exportImageType);\r\n            });\r\n      } else if (exportImageType === 'svg') {\r\n          const svgContent = this.exportService.unparseSVG(fixedContent);\r\n          const blob = new Blob([svgContent], { type: 'image/svg+xml;charset=utf-8' });\r\n          saveAs(blob, fileName+\".\"+exportImageType);\r\n      }\r\n    }\r\n  }\r\n\r\n  fixGradient(el: HTMLElement): HTMLElement {\r\n    const insertionPoint = el.getElementsByClassName(\"gradient_filled\");\r\n    const startingUrl = insertionPoint[0][\"style\"][\"fill\"];\r\n    const idVal = startingUrl.substring(startingUrl.indexOf(\"#\"));\r\n    insertionPoint[0][\"style\"][\"fill\"] = 'url(\"'+idVal;\r\n    return el;\r\n  }\r\n\r\n  saveDistanceMatrix(): void {\r\n    const fileName = this.SelectedDistanceMatrixFilenameVariable;\r\n    const labelArray = cloneDeep(this.heatmapLabels);\r\n    this.commonService.getDM().then(({dm, _}) => {\r\n      let csvContent = \"data:text/csv;charset=utf-8,\";\r\n      if (this.heatmapShowLabels) {\r\n        labelArray.unshift(\"\");\r\n        csvContent += labelArray.join(\",\") + \"\\n\";\r\n        for(let i=0; i<dm.length; i++) {\r\n          dm[i].unshift(this.heatmapLabels[i]);\r\n          csvContent += dm[i].join(\",\") + \"\\n\";\r\n        }\r\n      } else {\r\n        csvContent += dm.map(e => e.join(\",\")).join(\"\\n\");\r\n      }\r\n      saveAs(csvContent, fileName);\r\n    });\r\n    \r\n  } \r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace HeatmapComponent {\r\n    export const componentTypeName = 'Heatmap';\r\n}","import { Injector, Component, Output, OnChanges, SimpleChange, EventEmitter, OnInit, NgZone, InjectionToken, ElementRef, ViewChild, ViewContainerRef, ViewChildren, QueryList, ChangeDetectorRef, Renderer2, Inject, OnDestroy } from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { AppComponentBase } from '@shared/common/app-component-base';\r\nimport { CommonService } from '../../contactTraceCommonServices/common.service';\r\nimport * as saveAs from 'file-saver';\r\nimport * as d3 from 'd3';\r\nimport * as domToImage from 'dom-to-image-more';\r\nimport * as L from 'leaflet';\r\n// import * as moment from 'moment';\r\n//import moment from 'moment';\r\nimport 'leaflet.markercluster';\r\n\r\nimport * as MarkerCluster from 'leaflet.markercluster';\r\nimport { SelectItem } from 'primeng/api';\r\nimport { Observable, takeUntil, Subject } from 'rxjs';\r\nimport { tileLayer, latLng, marker, icon, polyline, circle, polygon, Map, MapOptions, Layer, Marker, markerClusterGroup, MarkerClusterGroupOptions, MarkerClusterGroup, circleMarker, PathOptions, featureGroup, FeatureGroup, TileLayer, geoJSON } from 'leaflet';\r\nimport { DialogSettings } from '../../helperClasses/dialogSettings';\r\nimport { MicobeTraceNextPluginEvents } from '../../helperClasses/interfaces';\r\nimport { MicrobeTraceNextVisuals } from '../../microbe-trace-next-plugin-visuals';\r\n//import { ColorIterator } from '../../helperClasses/colorIterator';\r\nimport * as _ from 'lodash';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\nimport { CommonStoreService } from '@app/contactTraceCommonServices/common-store.services';\r\nimport { ExportService, ExportOptions } from '@app/contactTraceCommonServices/export.service';\r\n\r\ndeclare var google: any;\r\n\r\n\r\n/**\r\n * @title Complex Example\r\n */\r\n\r\ninterface LongLatInterface {\r\n    Longitude: any;\r\n    Latitude: any;\r\n}\r\n\r\nclass LongLatClass implements LongLatInterface {\r\n    Longitude: any;\r\n    Latitude: any;\r\n}\r\n\r\n// interface gmapMarkerInterface {\r\n//     zip: string;\r\n//     marker: google.maps.Marker;\r\n// }\r\n\r\n// class gmapMarkerClass implements gmapMarkerInterface {\r\n//     zip: string;\r\n//     marker: google.maps.Marker;\r\n// }\r\n\r\n\r\n@Component({\r\n    selector: 'MapComponent',\r\n    templateUrl: './map-plugin.component.html',\r\n    styleUrls: ['./map-plugin.component.css'],\r\n})\r\n\r\n\r\n\r\n\r\nexport class MapComponent extends BaseComponentDirective implements OnInit, MicobeTraceNextPluginEvents, OnDestroy {\r\n\r\n    @Output() DisplayGlobalSettingsDialogEvent = new EventEmitter();\r\n    @ViewChild('mapContainer') exportContainer: ElementRef;\r\n\r\n    viewActive: boolean = true;\r\n    svgStyle: {} = {\r\n        'height': '0px',\r\n        'width': '1000px'\r\n    };\r\n\r\n    nodes: any = [];\r\n    map: any = null;\r\n    layers: MapLayers = new MapLayers();\r\n\r\n    IsDataAvailable: boolean = false;\r\n    ShowGEOMapExportPane: boolean = false;\r\n    ShowGEOMapSettingsPane: boolean = false;\r\n    FieldList: SelectItem[] = [];\r\n    LinkToolTipList: SelectItem[] = [];\r\n    SelectedLatitude: string = \"None\";\r\n    SelectedLongitude: string = \"None\";\r\n    SelectedCensusTract: string = \"None\";\r\n    SelectedZipCode: string = \"None\";\r\n    SelectedCounty: string = \"None\";\r\n    SelectedState: string = \"None\";\r\n    SelectedCountry: string = \"None\";\r\n    //SelectedResidenceAddress: string = \"None\";\r\n    //SelectedVenueAddress: string = \"None\";\r\n    //SelectedExposureAddress: string = \"None\";\r\n\r\n    geocoder: any = null;\r\n    //address: any = \"new york city\";\r\n\r\n    markers: any[] = [];\r\n    //gmapOptions: any;\r\n    //overlays: any[];\r\n\r\n\r\n    SelectedNetworkExportFilenameVariable: string = \"\";\r\n\r\n    NetworkExportFileTypeList: any = [\r\n        { label: 'png', value: 'png' },\r\n        { label: 'jpeg', value: 'jpeg' },\r\n        { label: 'webp', value: 'webp' },\r\n        // { label: 'svg', value: 'svg' }\r\n    ];\r\n    SelectedNetworkExportFileTypeListVariable: string = \"png\";\r\n\r\n    networkUpdatedSubscription: any;\r\n    private destroy$ = new Subject<void>()\r\n\r\n    SelectedNetworkExportScaleVariable: any = 1;\r\n    SelectedNetworkExportQualityVariable: any = 0.92;\r\n    // view implementation of 2D to calculate resolution before export\r\n    CalculatedResolutionWidth: any = 1918;\r\n    CalculatedResolutionHeight: any = 909;\r\n    CalculatedResolution: any = ((this.CalculatedResolutionWidth * this.SelectedNetworkExportScaleVariable) + \" x \" + (this.CalculatedResolutionHeight * this.SelectedNetworkExportScaleVariable) + \"px\");\r\n\r\n\r\n    NodesTypes: any = [\r\n        { label: 'Show', value: 'Show' },\r\n        { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedNodesTypeVariable: string = \"Show\";\r\n\r\n\r\n    LinksTypes: any = [\r\n        { label: 'Show', value: 'Show' },\r\n        { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedLinksTypeVariable: string = \"Show\";\r\n\r\n\r\n    CountriesTypes: any = [\r\n        { label: 'Show', value: 'Show' },\r\n        { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedCountriesTypeVariable: string = \"Show\";\r\n\r\n\r\n    StatesTypes: any = [\r\n        { label: 'Show', value: 'Show' },\r\n        { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedStatesTypeVariable: string = \"Show\";\r\n\r\n\r\n    CountiesTypes: any = [\r\n        { label: 'Show', value: 'Show' },\r\n        { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedCountiesTypeVariable: string = \"Hide\";\r\n\r\n\r\n    BasemapTypes: any = [\r\n        { label: 'Show', value: 'Show' },\r\n        { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedBasemapTypeVariable: string = \"Hide\";\r\n\r\n    SatelliteTypes: any = [\r\n        { label: 'Show', value: 'Show' },\r\n        { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedSatelliteTypeVariable: string = \"Hide\";\r\n\r\n    NodeCollapsingTypes: any = [\r\n        { label: 'On', value: 'On' },\r\n        { label: 'Off', value: 'Off' }\r\n    ];\r\n    SelectedNodeCollapsingTypeVariable: string = \"On\";\r\n\r\n    // GeospatialTypes: any = [\r\n    //     { label: 'On', value: 'On' },\r\n    //     { label: 'Off', value: 'Off' }\r\n    // ];\r\n    //SelectedGeospatialTypeVariable: string = \"Off\";\r\n\r\n\r\n    SelectedNodeTransparencyVariable: any = 0.0;\r\n    SelectedNodeJitterVariable: any = -2;\r\n    SelectedNodeTooltipVariable: string = \"None\";\r\n\r\n    SelectedLinkTransparencyVariable: any = 0.0;\r\n    SelectedLinkTooltipVariable: string = \"None\";\r\n\r\n    //@ViewChild('select.nodeVariables') selectList: ElementRef;\r\n    //@ViewChildren('map-field-lat') targets: ElementRef\r\n\r\n    //@ViewChild('gmap') mapElement: any;\r\n    //gmap: google.maps.Map;\r\n    //gmapMarkers: gmapMarkerInterface[];\r\n\r\n    // clusterImages: any =\r\n    //     {\r\n    //         m1: \"data:image/png;base64,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\",\r\n    //         m2: \"data:image/png;base64,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\",\r\n    //         m3: \"data:image/png;base64,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\",\r\n    //         m4: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE4AAABNCAYAAAAIPlKzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABOWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjarZGxSsNQFIa/G0XFoVYI4uBwJ1FQbNXBjElbiiBYq0OSrUlDldIk3NyqfQhHtw4u7j6Bk6PgoPgEvoHi1MEhSHASwW/6zs/hcOAHo2LXnYZRhkGsVbvpSNfz5ewTM0wBQCfMUrvVOgCIkzjiJwI+XxEAz5t23WnwN+bDVGlgAmx3oywEUQH6FzrVIMaAGfRTDeIOMNVJuwbiASj1cn8BSkHub0BJuZ4P4gMwe67ngzEHmEHuK4Cpo0sNUEvSkTrrnWpZtSxL2t0kiOTxKNPRIJP7cZioNFEdHXWB/D8AFvPFdtORa1XL2lvnn3E9X+b2foQAxNJjkRWEQ3X+3YWx8/tc3Bgvw+EtTE+KbPcKbjZg4brIVqtQ3oL78RfCs0/+HAmzJwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6AAAUggAARVYAAA6lwAAF2/XWh+QAAAUiklEQVR42tScWWxc53XHf+fODIeLKGrfZcuWbcXNZhdN2jiw6zgtmjoF0gJugCJPfS1QoC1SFGiB5qVPfetz0Ie8FEXb1N3sLkBcJ3YTw0njxnVsx5JXWYsp0aIWcjicmXv6MP9DHl6NKA5FiukFCFGcO/d+3/876/+c77OSi6znMgzHr/vboCvuy9+p/g7UgAIw/Vs4Xgd6hnUB108PKPNzbzSePCbHbzjm+GyYq87WXAUwAjQ0hroAswSIpYn7inXo/3T109FP73ZO4HYBVxjWcLxhWCOky7CQrCKvePrdl/60EjhzvCHJK4HS8Z5hHccDyPL/K3CFAGoYFtJVS9Ll6aesqnQCzAdIXNxQq8yhK8nrpJ/uZoBY30TARpM61hw3w9zxEnALTQRLvy+BJBBLARkqbPF7qLCeF/fUgLphI44HgG399DYSwI0ELmzUuEBr6v+l4yFVAZ7JILs+c8NMTqAXn+m75niRFqXhuAeA8V7Hy4o9LGIcji8CC/rpVSR4S4EzATUZqpgAiUkGWGHPekDbsEVgURKyQi2rnlDfKwyrOT4CjMgM1GUrXYBn6bV0zzhwFWj9NABXAyYNG01GPksEjodKdh2fB+aBbrJlo8AUMKHfGxW1MtmqFjDv+DXD5hyfE6h1w8YNGxOgXvGyHiGOYVOON4E5qfKWADeqyY6EDZNkWfKmbtiCBtqWeo4DB4Htjo8bNiKvW0/xnFdiK5caRxiyqGfOAhcdv2LYFUn+hGFjFS8c6l/TZ4UWceF2AmfAqGHb5AAII51isFLS0ZI6FsBeYKdhO4Ftjo9JjQBKTcxvFMRKai0FyYuGzQNXHL8MzBp2yfFZSeeYbFzNsDIcjp4R4JnA880GrtBLt+n7S7GWBlFKshaAjuN1x/cbtgvYD+yQVC3Gvem52ckMmkhZ+bcmu7pLqnkZuABclCRe0/PHpP6FvuvJLtf199YwXteGTLlC0qY0aK8AVwqwlv6+0/EjwEHZn648ZynVLjz7AkJcV0iea0GKFL9ZSqUCiHAaTdnQc4adBi7JK4enr6VQpgjbC1zR99YGhDMzrLRNSM2KtEImYz8HLDi+DTgKHDZsAugK1PC2CLSIyRaBdgobOlKnnDmMyPA3BMBIhDdaCJJDKjS+ecPOAO/LoYxobI3w+OG4BNzcWqXO1pHk1wwL+1TTS9vArOMdw44Cdzo+FasboElCQjUWDLsIzDh+2bB5GWvXd3Ypwa85fkUOwZLnnTJsN7DH8THZrm4sTLKDXantGeBdjXmHnlEqhJl3/Now+e56gEOT2SY7twBcEkjHHT8IbFMeGpG9RY7q+AzwjmFnJZ2TwH7D9jm+BxgXyOMCoQbMGdYD5hw/J8k+KylpAocdvwPYq/sikC40rp4c1XnglGFtYDcwKkm8pjiSoVXVh3Aqkoi6wOho9U5o4qOhPuGAFN/NAO8C5wTIXYYdB/Y6vlt2cyq8dE7sk3q3BXzLsEvAB46fAt6RpB4E7nB8r+zYYgTdssGLhk07/iZw1bCm423Dej5kMnErcVzEU03gbuC4VDaMdajxfKiJVOEe4CPA/cCdsjek73nVqybb2BS4S+EI8B7wY+Ak8LY86lHgDql15KimRblbz351GGewGZlDxEmtZMdqGuxlAXYG2AP8guOPAoekpm3D2ul7OV7LBKNL7VdQTlLFew37KDANPAe8YNibslnHge0yET29Y0Hvaw4T/OZg3PHBqnojNvVGrKnjTcNOAEcitnP8A0nBgmEPOv64YXcq8m8HI5JYkxyKhDQHUzIiW2WVFC5/r+H4iGFnHX/asBe1qPfJ9hV63hngDXnQGzLDqzHbqwK3mt0bAByyFycUgpwBfuL4duBx4HMKMcoERuSOJimYk/Gfl9G/qO80gN2O75D9nHB8QnGhy/BnO1iT/X0OeMrxS4bd7/ghxXYnA7S1ADeIUl83cKtcY3L1LYUlvwh8XGxtJ9mvUUnPNPAm8KrjZwWeiyluKqS5LC/Y1WfbgAOGfUQOaa+kr5WC5XjfK8B3ZC6mgAtK0VgLcKvVUIYC7mYinezTUeDXgU8pW2jre6NAUxL5XcdfklQdcvwu4IDSpx2GbXd8n2HTspVXlMxfMOwdx98TrfQA8JDjRwVKW2CMyYG8BPy14xcqjMwtAbcZDLDLW13Uv00NYtzxNvA94HkBcQL4OPBp4GdEAmxTfNVIzwzOLlT4DeBFgfID4HVJ94OKA8Pozyl3bUliN461HVbibqbC6Z69wGOGPSrq6JLjz8vz7TDsCeAJx0/IXg20oVVbmu7pShX/Hvg7AfQw8BBwQF7128Azkto1rLhvnqoOARxKi77k+CeAfwO+Y9hngT8BPl8BZ1BFa00TlSP4muPPGfaQ478qJ/CPjs/crGa6Ws11q4DDsKbClLcc/7Jhf6Yg2BWKUKkhrNUcWOX3c8AfAn+rzOGqeLrVAahI95YDV3lRDfhzw76ssKAYtnK+BulzqeSTwJ9KddcsacMCV2yowRz8ohrwW4Z9xfEjqVjDBr/bRJR+BfhNefBNLRrnCdY2+PkjwBdl0/ZzGy6xLb+ncKi+2cAFQZkrTRvx0k8AX1VSz2ZI2g2ue4HfAX5uE/CqAVaXXjcMGxfL2oyap2KtSUlOK+WQ5RqKG5PAbzj+MFtzfQZ4QiHLtXWWPXsJrFqivBbrSaU83WhqYnGRhIcF3CWxqbNiFkKEelWDCzzs+ONbAFh46zrwiOOfNezfK2MbVEtZai+L6phSwjFgTA6uJkyKevD/obYRHkSxVjZjSkzDlNKWUyIUj+i+kxUJHHH8QeD4GtO0DXUS6X13GPZp4NlUTRt0jQM7xQpHcf2qUjwMq4tyD2qrHu0KI6kIHHTNIv0KeT3rt+OIR9shdbhHdcwLIhR/6Pi9si/bBsRdt8dH9N+3B/iM40eBU+nzw7KDNY255vidymiKRJI2EqMT5GrheL2eu4YcXyIL1Wu2Q4l0mcp/i2o9uNuwQ2JbDxp2DNhn2NuOHxe7a+sIbjdK6oKFPiri9DTwRZmdSUnYjHLfaalhI5Uo6yJBr0SxPTm4on4D7xl082gKUUx/X1Dfxm554GihiupRQ4DuXCc1tdHXNsOOOf6K8ti7ktrWxcC8LZtdJjtYkwrPyiGOVN1rwfUdj9FqNZKY07B/i6KCJmU4wyB3gcvqiDwgu8jtlrZKQBze/YTA+NCwGcOuiOMbkVQt0u868IrDyE5zRS9LkW+WioaUBGlYT6ytq3YZraQ1VlbcOyo073Z8fKulTRMdc/yA6PprMkfhCEvrh2Rhhqp9d6O5mTHPp1iFcUC0dLWNtJSkjbLc4GyGdQ2bHSDBW3ZpLtEbXHP8QwFYSC0LObCJKJxncFKz4i1XuaJZsCn7YEmFO4Zd0GCagxZlq6VP9YzuANPkqxAUSx2jWYiKod/fv9qixJf0XlWmvSx3IPV+moCTzR6VtGVVjn48FGoNspVWsX8rgat2fUc3T2XVavJAUXyOVasrtitlO8y2WGNlbgoVf3qKBEY1bpNqXhPFv6IQLiyKtbAjg65oNrZ0f10vXqzaBJZ70K6yzk7HTbgWFatFL12MP+Y0r3tqFTwiexro4QplCXmFTFJlag3tpJWwtGdhrpKvmlpUG46fdnxGou9bpJqu988CP1YttpZU0g3r0O/qHFfokVWkVLkyUtLrvGo3wEuTXOrDrawAMvwTSrFms1rLaYyJib20lXFc8vhXDXsf2KXUMuZdApcMOyfQGhGOJUFZVDpWDyGLfDW3YlVjmLrjswpoA8RCyf64YdOSSJLEjRl2h1qx3s4x4e2WtgTCe46fA46p1uop1JrTHMccH3G8kKRG0HslOkdTywaGldFK2q0k4kvVcHVLkiSyDkw5flENy7lo0qTfhfSe4z9Q4zS3O65LAeuM4y8Ydh64T/Hnkn1z/Kq0Y0I5eYC6lF6y3GAdpsqBbhjDbsVgogcRht6wWvKSu/TQ845fq2xiOyaVfYl+a8PtzlezzX7dsO8rHz2sRu5YyAXDLjq+oHy2noSmKxvuSvxzOOKOd4pgQri+ozvswazjrZR6uRL4Cfp9H6fl4qMXdwfwKfrV9ie3KFtATu1bwP/S7xTYlgjLGnBeY5w0bHvYPalrW8xJ5KtFJUzphMRFJ1GVOh4ROzAnTxsRdhM4atgZw37C9XXOh7TT5UnDvmu3W1P717fpF6Sjv6SWUyn1npwUkzORpKqQNl1keT9tjklLYLGQKpUsdwOFHqPwoqUcNHI7V/53WL+/Zti7GqCLddgHPCae64/Dw97GxP6y43/h+EnDvgDsU95ZCsAPgXfF6OxLGJjmEC1nwf6UKb3sGtbLAV9HoYklRzCmL1wy7MOwA4731BV+EHgL+J76P2JZ5hx/QIWaF4E/ki1ZkRtuRtymyX3NsOfVbvEpvTtawEYNe8mw/xHBuVtguUKPOQFLIjI8zbsDy9sZcXxRHxQpoa2JWvnQ8WkFtyR7dkwP/5Hjb8qQFlL9hmGPOP4I8A3DfleSt7ST8FaD4xQ6kLZt/gHwdeAjjj8W6Va0rxp2zvGX5fGPsdwm6/p8hn7XZhAZUU6oSWLb1Up+bIz1Ss46rhdPKwoPun3RsL1iVKcN+2elYdE0veD4TuCXgEeAvwK+6vjJxLLaeuK8DFZ6xvvA7zv+dcePOP7Lhh0ybEGf1xToPw28Jmr/AP3NK2jRWwqzukE1Va6uYR3DlkAIo9cRExp/LxXwjtJv7jurIgfaVObi9GcN+yFwDHhU9y8o8t7n+K/pWf8iNfht4PMyyrHzeZiiTr6nBTwD/KXjzwEf02Id1/tLpYkF8JxhL8jD3pMXQZnDW6FZho2mEM2kou2w/1U+Lvax15M9Cu79ihqT92vCQR+NqtLVUv1yJ/AAy13dC6LRn9Bn/2XYO6oufU4lxiMDALnZdZ5+e/6zwN8oNHpYoO1Xc+GixtEDXnf8Kdnpjyrhb8kh1BWvntbfdgnoXhrXYi4xVvdyxdbw7dm76u9Xpd93GXZvyvciCv/QsB85vsewLzr+San1YooLC+BlxVcfqCP8Zw37guP3KNkek4cuKyxOR0TkHP2e3m9pEV7RRB+n329ckxlxvbN0/JRh33T8fUnkkaC/ZNNrjr8mR1fXttCwe6ENV0RBDQQuKj87Yh9p2lzW1hcb9NtPd+vvZSoDTjv+ffq7Zr5Ev3ekk/Zyxf76a4a9rnvflD05JCA/adhRBaEk73YW+L7qox8Ydlm10J837H5JdS9VqqJt4ZTj/2TYqwL2iMDpRTqlPWUvS6KmEuARMC/QbwdZ2lE9aC+XaSKTKamNVKOlgsd++v27k6zc/9mTuP+Y/s6WJwx7ELgW3invGNQ+qpZIgacUrU/KRvZSbFYTb9ZTcfljSqF2aZzNdDhCOIIx4BXHv2nYKUnaQd0bMVsIxGv0W/nHgInkHE3zvhop2Go1BxfCuYE5+iqa8izntDKxB74jcOv0dw4WkoxvSFJ+JdE0od5NlnvYJh3/D9ml1QjQCcPupt9l3khbN11qZ+lAmP8EnlZ4cb/jh0XvB91fU6nzLHBWGjYWQX6iy+IIDl9LsaYraZhKqUowI+N60DsS+Tt1T6mVrCtEqQM/Af7B8Q/Um3uX7u2kreg1+m2o7TWEIV2p+R615ndTmbMhuzbt+LPAC/KCJ0Q8IEDC4ZVpQ1yhedXTJmNThjTHgI71+k1o8xF50Lypty5pm5FU1ejv2KuxfNbRiOKkMfqt9M8InI9Lxfez3INXl32ZXYMnbQNvOz4n6SmSd59R0v468N8yIw84flCOpptsuAPnpcKtIDkroHmKCnyo8qAGWEsiHAazKc9zCTgphnSPxD3iwUIATRn2phLqNxz/aLJRB5QCvcsazgIJmsvx07JXLQXfZ+h3TL3s+LwygvvUaRXHBBUpxJjWuGflkZtJqyKgXqS/T3ZgcL6Wjb6jChib6SQFkwGe10o3JEl3pBVdal5RQD0jRuKMBn/EsBOOTxn2r/JaN6y4pWs7/c0g+wXAawpPSnnMw4YdSDZ1qWKlSlfQSVcTPZaPLSpk1y6zvFlvXcAFeNtFbuag0LTqVySJx6Si2xKLshTSaAJzAvuCBof2YZU34NWu0xJtV+qqQj9Jf3fgLpmQorJwIWktSepb4h+nxH7E3vzw3l3NZ/5GRephgDMVYaYUMJZpFaNUOK8B7Xb8HklEMK2WTlxwOZ8O/Q1ur1Zd/c3A0wa5u7VA48qn68nmBXBNTXxatjHauSZSQJ6dVE8Z0vzN8ue1tkCEoSx0SEstMSS55WGefkfQy9rPcKfUoZ0pK+WCYwoJhu5018bi3Sk18sS3hfdvSB1jo/G8ToGYkAe2FCyH7bvG8tEfbARwkfDHSkymMKVk5cFPLQ34lFTxEP3OyEmWTxqMvHhFND7kWEK9i1Q0Dy99TfHZ+wpPSi34RAXo3MMcFf01HZ8xbNNNKZVE4p75uWA5JuTar6qYMy0G5YAY5WhGXjDsknJZv0n94LrqvDbw7pO0RxfVZWU305KyBdnn6Jz3tKvaUrYzFGjrAS5ACps0IWZhqQoUqki/EXlBk3lX9Ppecfx7HW/rvJHeOiXuqhax0HjiSI0zaQy7ZJsjZQxSMlKpjiR36Hb+oc4dGbANcuk0L5YPIPBUiI4Wi7YMblDYozLoq56mdZOy4rjCjlLqOK/3RqdBpr290lXgkto5Oa+Be9k2E7iwK2OihHJLu1cnL+mKTqceNzk98CbA5fOW6ol8rA/ourLEOPe0YPNx2N96gLvVbUfR0VMqYR5T6bCRWkODZY3TV+uS0IE54JDvjq1UzfT8JSAifhQZ0DVsQaDd8vG3G7VJLKSnK6YkDo3Knjd4uzgAdCOKrRHW1GOhUq4ZHUY9BdjB4HY2YsIbvbsuWgcWJAVNUVP1bAMTRX+rV5ny0CXA9I441bAtUnRDDhXdLOBChbqigFoCcEzviv6T7lpUZQ22Jt7T0KIEON10jl25Gb0rm33ydASqrcTljbDGM3nXMOFe6ozvqRTY2ih1XO36vwEAoW9tY5gUsLQAAAAASUVORK5CYII=\",\r\n    //         m5: 'data:image/png;base64,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'\r\n    //     };\r\n\r\n    // getImageValues() {\r\n    //     return(Object.values(this.clusterImages))\r\n    // }\r\n\r\n    //locationsFound: any[] = [];\r\n\r\n    private lmap: Map;\r\n    private mapTooltip: string = '#mapTooltip'\r\n\r\n    nodesWithoutLoc: {index: number, ID: string}[];\r\n    showPopupMessage: boolean = false;\r\n\r\n    public leafletMarkers: Layer[] = [];\r\n    public leafletInitialOptions: MapOptions;\r\n    public leafletMarkerClusterOptions: MarkerClusterGroupOptions;\r\n\r\n    public isExporting: boolean = false;\r\n    public isExportClosed: boolean = false;\r\n    private exportTryCount: number = 0;\r\n\r\n    public NodeMapSettingsExportDialogSettings: DialogSettings;\r\n\r\n    private visuals: MicrobeTraceNextVisuals;\r\n\r\n    //private colorIterator: ColorIterator = new ColorIterator();\r\n\r\n    // private marker: { triangle: string, square: string, circle: string } = {\r\n    //     triangle: '<svg version=\"1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\"><path d=\"M7.5 0 L0 15 L15 15 Z\" fill=\"{mapIconColor}\"/></svg>',\r\n    //     square: '<svg version=\"1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\"><rect width=\"15\" height=\"15\" fill=\"{mapIconColor}\" /></svg>',\r\n    //     circle: '<svg version=\"1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\"><circle cx=\"7.5\" cy=\"7.5\" r=\"7.5\" fill=\"{mapIconColor}\" /></svg>',\r\n    // };\r\n\r\n    // public dateFilterRangeValues: number[] = [0, 100];\r\n    // public dateFilterRangeMax: number = 100;\r\n    // public dateFilterRangeDates: Date[] = [new Date(), new Date()];\r\n    // public dateFilterRangeMinDate: Date;\r\n    //public geospatialNodes: MarkerWithData[] = [];\r\n\r\n    constructor(injector: Injector,\r\n        private renderer: Renderer2,\r\n        private elem: ElementRef,\r\n        private eventManager: EventManager,\r\n        public commonService: CommonService,\r\n        private store: CommonStoreService,\r\n        @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer, \r\n        elRef: ElementRef,\r\n        private cdref: ChangeDetectorRef,\r\n        private exportService: ExportService,\r\n        private gtmService: GoogleTagManagerService) {\r\n\r\n            super(elRef.nativeElement);\r\n\r\n        this.visuals = commonService.visuals;\r\n        this.visuals.gisMap = this;\r\n    }\r\n\r\n\r\n    ngOnInit() {\r\n\r\n        this.gtmService.pushTag({\r\n            event: \"page_view\",\r\n            page_location: \"/map\",\r\n            page_title: \"Map View\"\r\n        });\r\n\r\n        if (!this.NodeMapSettingsExportDialogSettings) {\r\n            this.NodeMapSettingsExportDialogSettings = new DialogSettings('#map-settings-pane', false);\r\n        }\r\n\r\n        this.IsDataAvailable = (this.commonService.session.data.nodes.length == 0 ? false : true);\r\n\r\n        this.FieldList = [];\r\n\r\n        this.FieldList.push({ label: \"None\", value: \"None\" });\r\n        this.commonService.session.data['nodeFields'].map((d, i) => {\r\n\r\n            this.FieldList.push(\r\n                {\r\n                    label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n                    value: d\r\n                });\r\n\r\n        });\r\n\r\n        this.LinkToolTipList = [{ label: \"None\", value: \"None\" }];\r\n        this.commonService.session.data['linkFields'].map((d, i) => {\r\n            if (d == 'source' || d == 'target' || d == 'nn') return;\r\n\r\n            this.LinkToolTipList.push({\r\n                    label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n                    value: d\r\n                });\r\n        });\r\n\r\n        //this.geocoder = new google.maps.Geocoder();\r\n        this.initializeMap(\"US\");\r\n\r\n        if (this.commonService.temp.mapData.zipcodes == undefined) {\r\n            this.commonService.getMapData('zipcodes.csv').then((x) => {\r\n\r\n            });\r\n        }\r\n\r\n        this.hideTooltip();\r\n\r\n        // TODO: remove when not needed\r\n        // this.eventManager.addGlobalEventListener('window', 'node-selected', () => {\r\n        //     this.drawNodes();\r\n        // });\r\n\r\n        let that = this;\r\n\r\n        $( document ).on( \"node-selected\", function( ) {\r\n            //update this?\r\n            that.drawNodes(false);\r\n        });\r\n\r\n         // Used for timeline mode, TODO: update to use an RxJS Observable\r\n        $( document ).on( \"node-visibility\", function( ) {\r\n            let visNodes = that.commonService.getVisibleNodes();\r\n            if (visNodes.length == that.nodes.length) { return; }\r\n            that.nodes = visNodes;\r\n            that.matchCoordinates(undefined, true);\r\n            that.nodes.forEach(node => {\r\n                if (node._jlat == undefined || node._jlon == undefined) {\r\n                    that.rerollNodeAndJitter(node);\r\n                }\r\n            })\r\n\r\n            that.drawNodes(false);\r\n            that.drawLinks();\r\n            //that.centerMap();\r\n        });\r\n        \r\n        this.networkUpdatedSubscription = this.store.networkUpdated$\r\n            .pipe(takeUntil(this.destroy$))\r\n            .subscribe(newPruned => {\r\n                console.log('--- Map updated', newPruned, this.viewActive);\r\n                if (this.viewActive && newPruned) {\r\n                    this.drawNodes(false)\r\n                    this.drawLinks();\r\n                    this.store.setNetworkUpdated(false); \r\n                }\r\n        });\r\n\r\n        this.container.on('resize', () => { this.lmap.invalidateSize() })\r\n        this.container.on('hide', () => { \r\n            this.viewActive = false; \r\n            this.cdref.detectChanges();\r\n        })\r\n        this.container.on('show', () => { \r\n            this.viewActive = true; \r\n            this.cdref.detectChanges();\r\n        })\r\n\r\n        // Subscribe to style file applied event\r\n        this.store.styleFileApplied$.pipe(takeUntil(this.destroy$)).subscribe(() => {\r\n            this.applyStyleFileSettings();\r\n        });\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        setTimeout(() => this.centerMap(), 1000)\r\n    }\r\n\r\n\r\n    initializeMap(address: string) {\r\n\r\n        this.codeAddress([\"US\"]).then((result: any[]) => {\r\n\r\n            console.log('map codeAddress result', result);\r\n            if (result.length > 0) {\r\n                let latitude = result[0].Latitude;\r\n                let longitude = result[0].Longitude;\r\n\r\n                this.initializeLeafletMap(latitude, longitude);\r\n            }\r\n        });\r\n    }\r\n\r\n    initializeLeafletMap(latitude: number, longitude: number) {\r\n        //TODO: put this in a config?\r\n        const mapTokenKey: string = 'sk.eyJ1IjoicndhdHR5IiwiYSI6ImNrY2RuMWlzcDAwMmUyc3A5ejl3ODEzMXoifQ.qpXOouVsI6P8-HOHUWofuQ'\r\n\r\n        this.layers.basemap = tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n            maxZoom: 20,\r\n            attribution: ' <a href=\"https://openstreetmap.org/about\" target=\"_blank\">OpenStreetMap</a> contributors'\r\n        }); \r\n        this.layers.satellite = tileLayer(`https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v9/tiles/256/{z}/{x}/{y}?access_token=${mapTokenKey}`);\r\n\r\n        this.leafletInitialOptions = {\r\n            zoom: 4,\r\n            zoomControl: true,\r\n            maxZoom: 15,\r\n            preferCanvas: true,\r\n            center: latLng([latitude, longitude]),\r\n        };\r\n\r\n        this.leafletMarkerClusterOptions = {\r\n            showCoverageOnHover: false,\r\n            zoomToBoundsOnClick: true,\r\n            spiderfyOnMaxZoom: true,\r\n            removeOutsideVisibleBounds: false,\r\n            maxClusterRadius: 20,\r\n            spiderLegPolylineOptions: { opacity: 0 }\r\n        };\r\n    }\r\n\r\n    onMapReady(map: Map) {\r\n\r\n        //get the leaflet map\r\n        this.lmap = map;\r\n        this.lmap.zoomControl.setPosition('bottomleft');\r\n\r\n\r\n        setTimeout(() => {\r\n            this.loadSettings();\r\n            //this.setDefaultAddressFields();\r\n            //this.setDateRangeFilterValues();\r\n            //this.onDataChange(undefined);\r\n        }, 600);\r\n    }\r\n\r\n    onMarkerClusterReady(markerCluster: MarkerClusterGroup) {\r\n        this.layers.markerClusterGroup = markerCluster;\r\n    }\r\n\r\n    getMarker(latitude: number, longitude: number): Layer {\r\n        return circleMarker([latitude, longitude], {\r\n            color: '#3c4b8d',\r\n            fillColor: '#3c4b8d',\r\n            radius: 5\r\n        });\r\n    }\r\n\r\n    /* Not sure goal of this at the moment\r\n    setDefaultAddressFields() {\r\n        const foundExposureAddressColName = this.commonService.session.data['nodeFields'].find(x => x === 'ExposureLocation');\r\n        if (foundExposureAddressColName) this.SelectedExposureAddress = foundExposureAddressColName;\r\n        const foundVenueAddressColName = this.commonService.session.data['nodeFields'].find(x => x === 'VenueLocation');\r\n        if (foundVenueAddressColName) this.SelectedVenueAddress = foundVenueAddressColName;\r\n    }*/\r\n\r\n    // onDateFilterChange(e: any) {\r\n    //     this.dateFilterRangeDates[0] = moment(this.dateFilterRangeMinDate).add(this.dateFilterRangeValues[0], 'days').toDate();\r\n    //     this.dateFilterRangeDates[1] = moment(this.dateFilterRangeMinDate).add(this.dateFilterRangeValues[1], 'days').toDate();\r\n\r\n    //     this.onDataChange(undefined);\r\n    // }\r\n\r\n    /* Not sure about this function\r\n    setDateRangeFilterValues() {\r\n        let markers = this.getGeospatialNodes().filter(x => x.locationDetail.Name != 'Residence');\r\n\r\n        const dates = markers.filter(x => x.locationDetail)\r\n            .map(x => x.locationDetail.Date);\r\n        this.dateFilterRangeDates[0] = _.min(dates);\r\n        this.dateFilterRangeDates[1] = _.max(dates);\r\n        const daysDiff = moment(this.dateFilterRangeDates[1]).diff(moment(this.dateFilterRangeDates[0]), 'days');\r\n        this.dateFilterRangeValues = [0, daysDiff];\r\n        this.dateFilterRangeMax = daysDiff;\r\n        this.dateFilterRangeMinDate = this.dateFilterRangeDates[0];\r\n\r\n        this.onDataChange(undefined);\r\n    }\r\n        */\r\n\r\n    showAllVisibleMarkers() {\r\n        // var bounds = new google.maps.LatLngBounds();\r\n        // for (var i = 0; i < this.markers.length; i++) {\r\n        //     bounds.extend(this.markers[i].getPosition());\r\n        // }\r\n    }\r\n\r\n    centerMap() {\r\n        if (this.lmap && this.layers.nodes().getLayers().length > 0) {\r\n            this.lmap.flyToBounds(this.layers.nodes().getBounds());\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Calls clearAllMarkers_Leftlet() which removes all nodes from map and remove _jlat and _jlon value for each node\r\n     */\r\n    clearAllMarkers() {\r\n        this.clearAllMarkers_Leaflet();\r\n    }\r\n\r\n    /*clearAllMarkers_Google() {\r\n        for (var i = 0; i < this.markers.length; i++) {\r\n            this.markers[i].setMap(null);\r\n        }\r\n\r\n        this.markers = [];\r\n    }*/\r\n\r\n    /**\r\n     * Removes all nodes from map and remove _jlat and _jlon value for each node\r\n     */\r\n    clearAllMarkers_Leaflet() {\r\n        this.layers.removeNodes();\r\n        this.nodes.forEach(node => {\r\n            node._jlat = undefined;\r\n            node._jlon = undefined;\r\n        });\r\n    }\r\n\r\n    onDataChange(event) {\r\n        this.commonService.session.style.widgets['map-field-lat'] = this.SelectedLatitude;\r\n        this.commonService.session.style.widgets['map-field-lon'] = this.SelectedLongitude;\r\n        this.commonService.session.style.widgets['map-field-tract'] = this.SelectedCensusTract;\r\n        this.commonService.session.style.widgets['map-field-zipcode'] = this.SelectedZipCode;\r\n        this.commonService.session.style.widgets['map-field-county'] = this.SelectedCounty;\r\n        this.commonService.session.style.widgets['map-field-state'] = this.SelectedState;\r\n        this.commonService.session.style.widgets['map-field-country'] = this.SelectedCountry;\r\n        //this.commonService.session.style.widgets['map-field-residence-address'] = this.SelectedResidenceAddress;\r\n        //this.commonService.session.style.widgets['map-field-venue-address'] = this.SelectedVenueAddress;\r\n        //this.commonService.session.style.widgets['map-field-exposure-address'] = this.SelectedExposureAddress;\r\n\r\n        this.clearAllMarkers();\r\n        this.layers.removeLinks();\r\n\r\n        this.nodes = this.commonService.getVisibleNodes();\r\n        //let cnt: any = 0;\r\n        //let dataFound: boolean = false;\r\n\r\n        let that = this;\r\n        // XXX check if reroll is need for drawNodes()\r\n        this.matchCoordinates(function () {\r\n            let rerollCheck = that.rerollCheck();\r\n            if (rerollCheck) {\r\n                that.drawNodes();\r\n            } else {\r\n                that.jitter();\r\n                that.drawNodes(false);\r\n            }\r\n            that.drawLinks();\r\n            that.resetStack();\r\n            // that.visuals.gisMap.lmap.flyToBounds(that.layers.nodes().getBounds());\r\n            }, false);\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Updates where to show or hide nodes on the Map\r\n     * @param e 'Show' | 'Hide'\r\n     */\r\n    onMapNodeShowHideChange(e) {\r\n        this.SelectedNodesTypeVariable = e;\r\n\r\n        if (e == \"Show\") {\r\n            this.commonService.session.style.widgets['map-node-show'] = true;\r\n            this.drawNodes(false);\r\n            //this.drawLinks();\r\n        }\r\n        else {\r\n            this.commonService.session.style.widgets['map-node-show'] = false;\r\n            this.layers.removeNodes();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates where to show or hide links on the Map\r\n     * @param e 'Show' | 'Hide'\r\n     */\r\n    onMapLinksShowHideChange(e) {\r\n        this.SelectedLinksTypeVariable = e;\r\n\r\n        if (e == \"Show\") {\r\n            this.commonService.session.style.widgets['map-link-show'] = true;\r\n            this.drawNodes(false);\r\n            this.drawLinks();\r\n        }\r\n        else {\r\n            this.commonService.session.style.widgets['map-link-show'] = false;\r\n            this.layers.links.remove();\r\n        }\r\n    }\r\n\r\n\r\n    onCountriesShowHidChange(e) {\r\n        this.SelectedCountriesTypeVariable = e;\r\n\r\n        if (e == \"Show\") {\r\n\r\n            this.commonService.session.style.widgets['map-countries-show'] = true;\r\n            this.onSatelliteChange('Hide', true);\r\n            this.onBasemapChange('Hide', true);\r\n            if (this.layers.countries.getLayers().length > 0) {\r\n                this.layers.countries.addTo(this.lmap);\r\n                this.resetStack();\r\n            } else {\r\n                //this.commonService.getMapData('countries.json', () => $(this).trigger('click'));\r\n                this.getMapData('countries.json', () => {\r\n                    this.layers.countries.addTo(this.lmap);\r\n                    this.resetStack();\r\n                });\r\n\r\n            }\r\n        }\r\n        else {\r\n\r\n            this.commonService.session.style.widgets['map-countries-show'] = false;\r\n            this.layers.countries.remove();\r\n\r\n        }\r\n    }\r\n\r\n\r\n    onStatesShowHideChange(e) {\r\n        this.SelectedStatesTypeVariable = e;\r\n\r\n        if (e == \"Show\") {\r\n            this.commonService.session.style.widgets['map-states-show'] = true;\r\n            if (this.layers.states.getLayers().length > 0) {\r\n                this.layers.states.addTo(this.lmap);\r\n                this.resetStack();\r\n            } else {\r\n                this.getMapData('states.json', () => {\r\n                    this.layers.states.addTo(this.lmap);\r\n                    this.resetStack();\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            this.commonService.session.style.widgets['map-states-show'] = false;\r\n            this.layers.states.remove();\r\n        }\r\n    }\r\n\r\n\r\n    onCountiesShowHideChange(e) {\r\n        this.SelectedCountiesTypeVariable = e;\r\n\r\n        if (e == \"Show\") {\r\n            this.commonService.session.style.widgets['map-counties-show'] = true;\r\n\r\n            if (this.layers.counties.getLayers().length > 0) {\r\n                this.layers.counties.addTo(this.lmap);\r\n                this.resetStack();\r\n            } else {\r\n                this.getMapData('counties.json', () => {\r\n                    this.layers.counties.addTo(this.lmap);\r\n                    this.resetStack();\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            this.commonService.session.style.widgets['map-counties-show'] = false;\r\n            this.layers.counties.remove();\r\n        }\r\n    }\r\n\r\n    onBasemapChange(e, isReload: boolean = false) {\r\n        this.SelectedBasemapTypeVariable = e;\r\n\r\n        if (e == \"Show\") {\r\n            this.commonService.session.style.widgets['map-basemap-show'] = true;\r\n\r\n            this.layers.basemap.addTo(this.lmap);\r\n            this.layers.basemap.bringToFront();\r\n\r\n            if (!isReload) {\r\n                this.SelectedSatelliteTypeVariable = 'Hide';\r\n                this.onSatelliteChange('Hide');\r\n                this.onCountiesShowHideChange('Hide');\r\n                this.onStatesShowHideChange('Hide');\r\n                this.onCountriesShowHidChange('Hide');\r\n            }\r\n        }\r\n        else {\r\n\r\n            this.commonService.session.style.widgets['map-basemap-show'] = false;\r\n\r\n            if (!isReload) {\r\n                if (this.SelectedSatelliteTypeVariable === 'Hide' && this.SelectedBasemapTypeVariable === 'Hide') {\r\n                    this.onCountriesShowHidChange('Show');\r\n                    this.onStatesShowHideChange('Show');\r\n                }\r\n            }\r\n\r\n            this.layers.basemap.remove();\r\n        }\r\n    }\r\n\r\n    onSatelliteChange(e, isReload: boolean = false) {\r\n        this.SelectedSatelliteTypeVariable = e;\r\n\r\n        if (e == \"Show\") {\r\n            this.commonService.session.style.widgets['map-satellite-show'] = true;\r\n\r\n            this.layers.satellite.addTo(this.lmap);\r\n            this.layers.satellite.bringToFront();\r\n\r\n            if (!isReload) {\r\n                this.SelectedBasemapTypeVariable = 'Hide';\r\n                this.onBasemapChange('Hide');\r\n                this.onCountiesShowHideChange('Hide');\r\n                this.onStatesShowHideChange('Hide');\r\n                this.onCountriesShowHidChange('Hide');\r\n            }\r\n        }\r\n        else {\r\n            this.commonService.session.style.widgets['map-satellite-show'] = false;\r\n\r\n            if (!isReload) {\r\n                if (this.SelectedSatelliteTypeVariable === 'Hide' && this.SelectedBasemapTypeVariable === 'Hide') {\r\n                    this.onCountriesShowHidChange('Show');\r\n                    this.onStatesShowHideChange('Show');\r\n                }\r\n            }\r\n\r\n            this.layers.satellite.remove();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates nodes to be collapsing or not and updates the value of the widget['map-collapsing-on']\r\n     */\r\n    onNodeCollapsingChange(e) {\r\n        if (this.SelectedNodeCollapsingTypeVariable == \"On\") {\r\n            this.commonService.session.style.widgets['map-collapsing-on'] = true;\r\n            this.drawNodes(false);\r\n        }\r\n        else {\r\n            this.commonService.session.style.widgets['map-collapsing-on'] = false;\r\n            this.drawNodes(false);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * revisit if nodes need to be rerolled or not\r\n     * @param e \r\n     */\r\n    onGeospatialTypeChange(e) {\r\n        // if (this.SelectedGeospatialTypeVariable == \"On\") {\r\n        //     this.commonService.session.style.widgets['map-geospatial-type-on'] = true;\r\n        //     this.drawNodes();\r\n        //     this.drawLinks();\r\n        // }\r\n        // else {\r\n            this.commonService.session.style.widgets['map-geospatial-type-on'] = false;\r\n            this.drawNodes();\r\n            this.drawLinks();\r\n        //}\r\n    }\r\n\r\n    /**\r\n     * Updates transparency of the nodes and the value of the widget['map-node-transparency']\r\n     */\r\n    onNodeTransparencyChange(e) {\r\n        this.commonService.session.style.widgets['map-node-transparency'] = e;\r\n        this.drawNodes(false);\r\n    }\r\n\r\n\r\n    /**\r\n     * updates node and link positions after rerolling nodes and also updates the value of the widget['map-node-jitter']\r\n     * @param e \r\n     */\r\n    onNodeJitterChange(e?) {\r\n        if (e) {\r\n            this.commonService.session.style.widgets['map-node-jitter'] = e;\r\n        }\r\n        \r\n        this.drawNodes();\r\n        this.drawLinks();\r\n    }\r\n\r\n\r\n    onNodeToolTipChange(e) {\r\n        this.commonService.session.style.widgets['map-node-tooltip-variable'] = e;\r\n    }\r\n\r\n\r\n    /**\r\n     * Updates transparency of the link and the value of the widget['map-link-transparency']\r\n     */\r\n    onLinkTransparencyChange(e) {\r\n        this.commonService.session.style.widgets['map-link-transparency'] = e;\r\n        this.drawLinks();\r\n    }\r\n\r\n\r\n    onLinkToolTipChange(e) {\r\n        this.commonService.session.style.widgets['map-link-tooltip-variable'] = e;\r\n    }\r\n\r\n    exportVisualization(event) {\r\n        this.visuals.gisMap.ShowGEOMapExportPane = false;\r\n        this.isExporting = true;\r\n\r\n        /*\r\n        Currently not able to export map view as an SVG, with a lot of work may be possible with limitations (I was able to use similar idea from 2D)\r\n        1. updated preferCanvas to false initially, so it renders an SVG; 2. selected that element [document.querySelector('.mapStyle svg').outerHTML;]\r\n        3. made modifications and passed it to a modified this.exportService.requestSVGExport; 4. that was able to export but still needed to add xmlns=\"http://www.w3.org/2000/svg\" to svg tag\r\n        The resulting svg was still incomplete; it didn't have collapsed nodes and only allowed the offline map setting (not sure if its possible to use basemap or satellite)\r\n        */\r\n\r\n        if (!this.isExportClosed) {\r\n            setTimeout(() => this.exportVisualization(undefined), 300);\r\n        }\r\n        else {\r\n            this.exportWork();\r\n        }\r\n    }\r\n\r\n    onCloseExport() {\r\n        this.isExportClosed = true;\r\n    }\r\n\r\n    exportWork() {\r\n        this.lmap.removeControl(this.lmap.zoomControl)\r\n        setTimeout(() => {\r\n            const exportOptions: ExportOptions = {\r\n                filename: this.SelectedNetworkExportFilenameVariable,\r\n                filetype: this.SelectedNetworkExportFileTypeListVariable,\r\n                scale: this.SelectedNetworkExportScaleVariable,\r\n                quality: this.SelectedNetworkExportQualityVariable,\r\n            }\r\n            this.exportService.setExportOptions(exportOptions);\r\n            let elementsToExport: HTMLDivElement[] = [this.exportContainer.nativeElement]\r\n            this.exportService.requestExport(elementsToExport, true, true)\r\n        }, 1000);\r\n        new Promise(resolve => setTimeout(resolve, 2000)).then(() => this.lmap.addControl(this.lmap.zoomControl))\r\n    }\r\n\r\n    displayColorOptions() {\r\n        this.DisplayGlobalSettingsDialogEvent.emit(\"Styling\");\r\n    }\r\n\r\n    codeAddress(addressList: any[]) {\r\n\r\n        let positionList: any[] = [];\r\n        let cnt: number = 0;\r\n\r\n        return new Promise((resolve, reject) => {\r\n\r\n            addressList.map(address => {\r\n\r\n                if (this.geocoder) {\r\n                    this.geocoder.geocode({ 'address': address }, (results, status) => {\r\n\r\n                        //    debugger;\r\n\r\n                        let latLng: LongLatInterface = new LongLatClass();\r\n\r\n                        if (results != null) {\r\n                            if (results.length > 0) {\r\n\r\n                                console.log(cnt, results);\r\n\r\n                                latLng.Latitude = results[0].geometry.location.lat();\r\n                                latLng.Longitude = results[0].geometry.location.lng();\r\n\r\n                                if (status == 'OK') {\r\n                                    positionList.push(latLng);\r\n\r\n                                } else {\r\n                                    alert('Geocode was not successful for the following reason: ' + status);\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        cnt = cnt + 1;\r\n\r\n                        if (cnt >= addressList.length)\r\n                            resolve(positionList);\r\n\r\n                    });\r\n                }\r\n                else\r\n                {\r\n                    let latLng: LongLatInterface = new LongLatClass();\r\n                    latLng.Latitude = 39.833332;\r\n                    latLng.Longitude = -98.583336;\r\n                    positionList.push(latLng);\r\n                    resolve(positionList);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    updateCalculatedResolution(event) {\r\n        this.CalculatedResolution = (Math.round(this.CalculatedResolutionWidth * this.SelectedNetworkExportScaleVariable) + \" x \" + Math.round(this.CalculatedResolutionHeight * this.SelectedNetworkExportScaleVariable) + \"px\");\r\n        this.cdref.detectChanges();\r\n    }\r\n\r\n    getMapData(type, callback) {\r\n        var name = type.split('.')[0];\r\n        this.commonService.getMapData(type).then(data => {\r\n            if (this.commonService.includes(['countries', 'states', 'counties'], name)) {\r\n\r\n                this.layers[name] = geoJSON(data,\r\n                    {\r\n                        style: {\r\n                            color: '#dadde0',\r\n                            weight: name == 'countries' ? 1 : 0.5,\r\n                            fillColor: '#fafaf8',\r\n                            fillOpacity: name == 'countries' ? 1 : 0\r\n                        }\r\n                    });\r\n            }\r\n            if (callback) callback();\r\n        })\r\n    }\r\n\r\n    matchCoordinates(callback, norefresh) {\r\n        if (!norefresh) this.nodes = this.commonService.getVisibleNodes();\r\n        if (this.commonService.session.style.widgets['map-field-country'] !== 'None') {\r\n            if (!this.commonService.temp.mapData.countries) {\r\n                this.getMapData('countries.json', () => this.matchCoordinates(callback, true));\r\n                return;\r\n            }\r\n            var val = this.commonService.session.style.widgets['map-field-country'];\r\n            this.nodes.forEach(n => {\r\n                var country = this.commonService.temp.mapData.countries.features.find(c => c.id == n[val] || c.properties.name == n[val]);\r\n                if (country) {\r\n                    n._lat = country.properties._lat,\r\n                        n._lon = country.properties._lon\r\n                }\r\n            });\r\n        }\r\n        if (this.commonService.session.style.widgets['map-field-state'] !== 'None') {\r\n            if (!this.commonService.temp.mapData.states) {\r\n                this.getMapData('states.json', () => this.matchCoordinates(callback, true));\r\n                return;\r\n            }\r\n            var sval = this.commonService.session.style.widgets['map-field-state'];\r\n            this.nodes.forEach(n => {\r\n                var state = this.commonService.temp.mapData.states.features.find(s => s.properties.usps == n[sval] || s.properties.name == n[sval]);\r\n                if (state) {\r\n                    n._lat = state.properties._lat;\r\n                    n._lon = state.properties._lon;\r\n                }\r\n            });\r\n        }\r\n        if (this.commonService.session.style.widgets['map-field-county'] !== 'None') {\r\n            if (!this.commonService.temp.mapData.counties) {\r\n                this.getMapData('counties.json', () => this.matchCoordinates(callback, true));\r\n                return;\r\n            }\r\n            var sval = this.commonService.session.style.widgets['map-field-state'];\r\n            var cval = this.commonService.session.style.widgets['map-field-county'];\r\n            this.nodes.forEach(n => {\r\n                var county;\r\n                county = this.commonService.temp.mapData.counties.features.find(c => {\r\n                    return (c.properties.fips == n[cval] ||\r\n                        parseFloat(c.properties.fips) == parseFloat(n[cval]));\r\n                });\r\n                if (county) {\r\n                    n._lat = county.properties._lat;\r\n                    n._lon = county.properties._lon;\r\n                    return;\r\n                }\r\n                var state = this.commonService.temp.mapData.states.features.find(s => s.properties.usps == n[sval].toUpperCase() || s.properties.name.toLowerCase().includes(n[sval].toLowerCase()));\r\n                county = this.commonService.temp.mapData.counties.features.find(c => {\r\n                    var small = n[cval].toLowerCase();\r\n                    return c.properties.state == state.properties.usps && (\r\n                        c.properties.name.includes(small) ||\r\n                        small.includes(c.properties.name)\r\n                    );\r\n                });\r\n                if (county) {\r\n                    n._lat = county.properties._lat;\r\n                    n._lon = county.properties._lon;\r\n                }\r\n            });\r\n        }\r\n        if (this.commonService.session.style.widgets['map-field-zipcode'] !== 'None') {\r\n            if (!this.commonService.temp.mapData.zipcodes) {\r\n                this.getMapData('zipcodes.csv', () => this.matchCoordinates(callback, true));\r\n                return;\r\n            }\r\n            var val = this.commonService.session.style.widgets['map-field-zipcode'];\r\n            this.nodes.forEach(n => {\r\n                var zo = this.commonService.temp.mapData.zipcodes.find(z => z.zipcode == n[val]);\r\n                if (zo) {\r\n                    n._lat = zo._lat;\r\n                    n._lon = zo._lon;\r\n                }\r\n            });\r\n        }\r\n        if (this.commonService.session.style.widgets['map-field-tract'] !== 'None') {\r\n            if (!this.commonService.temp.mapData.tracts) {\r\n                this.getMapData('tracts.csv', () => this.matchCoordinates(callback, true));\r\n                return;\r\n            }\r\n            var val = this.commonService.session.style.widgets['map-field-tract'];\r\n            this.nodes.forEach(n => {\r\n                var tract = this.commonService.temp.mapData.tracts.find(t => t.tract == n[val]);\r\n                if (tract) {\r\n                    n._lat = tract._lat;\r\n                    n._lon = tract._lon;\r\n                }\r\n            });\r\n        }\r\n\r\n        // debugger;\r\n\r\n        if (this.commonService.session.style.widgets['map-field-lat'] !== 'None' && this.commonService.session.style.widgets['map-field-lon'] !== 'None') {\r\n            var lat = this.commonService.session.style.widgets['map-field-lat'],\r\n                lon = this.commonService.session.style.widgets['map-field-lon'];\r\n\r\n\r\n            this.nodes.forEach(n => {\r\n\r\n\r\n                if (typeof n[lat] == 'string') {\r\n                    n._lat = (n[lat].includes('S') ? -1 : 1) * parseFloat(n[lat]);\r\n                } else {\r\n                    n._lat = n[lat];\r\n                }\r\n                if (typeof n[lon] == 'string') {\r\n                    n._lon = (n[lon].includes('W') ? -1 : 1) * parseFloat(n[lon]);\r\n                } else {\r\n                    n._lon = n[lon];\r\n                }\r\n            });\r\n        }\r\n\r\n        this.nodesWithoutLoc = [];\r\n        let nodeLocSet: boolean = false;\r\n        this.nodes.forEach(n => {\r\n            if (!n._lat || !n._lon){\r\n                this.nodesWithoutLoc.push({index: n.index, ID: n._id})\r\n            }\r\n            if ( !nodeLocSet && n._lat && n._lon) nodeLocSet = true;\r\n        })\r\n        if (this.nodesWithoutLoc.length > 0 && nodeLocSet) this.showPopupMessage = true;\r\n\r\n        if (callback) callback();\r\n    }\r\n\r\n    // getResidenceMarker(nodeColor: string, iconCode: string, location: LocationDetail, data: any): MarkerWithData {\r\n    //     const iconSettings = {\r\n    //         mapIconUrl: iconCode,\r\n    //         mapIconColor: nodeColor,\r\n    //     };\r\n\r\n    //     const divIcon = L.divIcon({\r\n    //         className: \"leaflet-data-marker\",\r\n    //         html: L.Util.template(iconSettings.mapIconUrl, iconSettings),\r\n    //         iconSize: [15, 15]\r\n    //     });\r\n\r\n    //     const locationDetail: LocationDetail = {\r\n    //         Name: location.Name,\r\n    //         FullAddress: location.FullAddress,\r\n    //         Date: location.Date ? new Date(location.Date) : undefined,\r\n    //         Latitude: location.Latitude,\r\n    //         Longitude: location.Longitude\r\n    //     }\r\n    //     data._jlat = location.Latitude;\r\n    //     data._jlon = location.Longitude;\r\n\r\n    //     let marker: MarkerWithData = L.marker([location.Latitude, location.Longitude], { icon: divIcon });\r\n    //     marker.data = data;\r\n    //     marker.locationDetail = locationDetail;\r\n\r\n    //     return marker;\r\n    // }\r\n\r\n    // getVenueMarker(nodeColor: string, iconCode: string, location: VenueLocationDetail, data: any): MarkerWithData | undefined {\r\n    //     const iconSettings = {\r\n    //         mapIconUrl: iconCode,\r\n    //         mapIconColor: nodeColor,\r\n    //     };\r\n\r\n    //     const divIcon = L.divIcon({\r\n    //         className: \"leaflet-data-marker\",\r\n    //         html: L.Util.template(iconSettings.mapIconUrl, iconSettings),\r\n    //         iconSize: [15, 15]\r\n    //     });\r\n\r\n    //     const locationDetail: LocationDetail = {\r\n    //         Name: location.Name,\r\n    //         FullAddress: location.FullAddress,\r\n    //         Date: location.DateOfContact ? new Date(location.DateOfContact) : undefined,\r\n    //         Latitude: location.Latitude,\r\n    //         Longitude: location.Longitude\r\n    //     }\r\n\r\n    //     if (locationDetail.Latitude != undefined && locationDetail.Longitude != undefined) {\r\n    //         let marker: MarkerWithData = L.marker([location.Latitude, location.Longitude], { icon: divIcon });\r\n    //         marker.data = data;\r\n    //         marker.locationDetail = locationDetail;\r\n\r\n    //         return marker;\r\n    //     }\r\n\r\n    //     return undefined\r\n    // }\r\n\r\n    // getExposureMarkers(nodeColor: string, iconCode: string, exposureProp: any, data: any): MarkerWithData[] {\r\n    //     const iconSettings = {\r\n    //         mapIconUrl: iconCode,\r\n    //         mapIconColor: nodeColor,\r\n    //     };\r\n\r\n    //     const divIcon = L.divIcon({\r\n    //         className: \"leaflet-data-marker\",\r\n    //         html: L.Util.template(iconSettings.mapIconUrl, iconSettings),\r\n    //         iconSize: [15, 15]\r\n    //     });\r\n\r\n    //     let markers: MarkerWithData[] = [];\r\n\r\n    //     let locationDetails: LocationDetail[] = [];\r\n\r\n    //     Object.keys(exposureProp).forEach(prop => {\r\n    //         const locationDetail: LocationDetail = {\r\n    //             Name: exposureProp[prop].Name,\r\n    //             FullAddress: exposureProp[prop].FullAddress,\r\n    //             Date: exposureProp[prop].ExposedDate ? new Date(exposureProp[prop].ExposedDate) : undefined,\r\n    //             Latitude: exposureProp[prop].Latitude,\r\n    //             Longitude: exposureProp[prop].Longitude\r\n    //         };\r\n\r\n    //         locationDetails.push(locationDetail);\r\n\r\n    //         if (locationDetail.Latitude != undefined && locationDetail.Longitude != undefined) {\r\n    //             let marker: MarkerWithData = L.marker([locationDetail.Latitude, locationDetail.Longitude], { icon: divIcon });\r\n    //             marker.data = data;\r\n    //             marker.locationDetail = locationDetail;\r\n\r\n    //             markers.push(marker);\r\n    //         }\r\n    //     })\r\n\r\n    //     return markers;\r\n    // }\r\n\r\n    /*getGeospatialNodes(): MarkerWithData[] {\r\n        let returnMarkerWithData: MarkerWithData[] = [];\r\n\r\n        let n = this.nodes.length;\r\n\r\n        for (let i = 0; i < n; i++) {\r\n            const venueValue = this.nodes[i][this.SelectedVenueAddress];\r\n            const exposureValue = this.nodes[i][this.SelectedExposureAddress];\r\n\r\n            const d = this.nodes[i];\r\n            const nodeColor = this.colorIterator.next();\r\n            let venueMarkers: MarkerWithData[] = [];\r\n            let exposureMarkers: MarkerWithData[] = [];\r\n\r\n            if (venueValue) {\r\n                const venues: VenueLocationDetail[] = JSON.parse(venueValue);\r\n                if (venues && Array.isArray(venues))\r\n                    venueMarkers = venues.map(v => this.getVenueMarker(nodeColor, this.marker.triangle, v, d));\r\n                venueMarkers = venueMarkers.filter(x => x != undefined);\r\n            }\r\n\r\n            if (exposureValue) {\r\n                const exposures: any = JSON.parse(exposureValue);\r\n                if (exposures)\r\n                    exposureMarkers = this.getExposureMarkers(nodeColor, this.marker.square, exposures, d);\r\n            }\r\n\r\n            const residence = this.getResidenceNode(d);\r\n            if (residence && residence.Latitude != 0 && residence.Longitude != 0) {\r\n                returnMarkerWithData.push(this.getResidenceMarker(nodeColor, this.marker.circle, residence, d));\r\n            }\r\n\r\n            returnMarkerWithData = returnMarkerWithData.concat(venueMarkers.concat(exposureMarkers));\r\n        }\r\n\r\n        return returnMarkerWithData;\r\n    }\r\n\r\n    getResidenceNode(data: any): LocationDetail | undefined {\r\n        if (!data ||\r\n            isNaN(data.CasedemographicsLatitude) ||\r\n            isNaN(data.CasedemographicsLongitude) ||\r\n            data.CasedemographicsLatitude == '' ||\r\n            data.CasedemographicsLongitude == '') return undefined;\r\n\r\n        return {\r\n            Date: new Date(),\r\n            FullAddress: data.CasedemographicsFullAddress,\r\n            Latitude: data.CasedemographicsLatitude,\r\n            Longitude: data.CasedemographicsLongitude,\r\n            Name: 'Residence'\r\n        };\r\n    } */\r\n\r\n    /**\r\n     * Calls drawLeafletMapNodes() which removes all previous nodes from map, updates _j, _theta, _jlat, _jlon for each node\r\n     */\r\n    drawNodes(rerollNodes=true) {\r\n        this.drawLeafletMapNodes(rerollNodes);\r\n    }\r\n\r\n    /**\r\n     * Updates map by redrawing nodes\r\n     * @param rerollNodes if true rerolls node positioning\r\n     */\r\n    drawLeafletMapNodes(rerollNodes) {\r\n        if (rerollNodes) {\r\n            this.clearAllMarkers();\r\n            this.rerollNodes();\r\n        } else {\r\n            this.layers.removeNodes();\r\n        }\r\n\r\n        if (!this.commonService.session.style.widgets['map-node-show']) return;\r\n\r\n        // if (this.SelectedGeospatialTypeVariable == 'On') {\r\n        //     //this.drawLeafletMapNodesGeospatial();\r\n        //     console.error('implement drawLeafletMapNodesGeospatial')\r\n        // }\r\n        // else {\r\n            this.drawLeafletMapNodesList();\r\n        //}\r\n    }\r\n\r\n    /*drawLeafletMapNodesGeospatial() {\r\n        const opacity = 1 - this.commonService.session.style.widgets['map-node-transparency'];\r\n        const selectedColor = this.commonService.session.style.widgets['selected-color'];\r\n\r\n        this.colorIterator.reset();\r\n\r\n        const features: Layer[] = [];\r\n\r\n        let markers = this.getGeospatialNodes();\r\n        markers = markers.filter(x => x.locationDetail && (x.locationDetail.Name === 'Residence' || (x.locationDetail.Date >= this.dateFilterRangeDates[0] &&\r\n            x.locationDetail.Date <= this.dateFilterRangeDates[1])));\r\n\r\n        markers.forEach(m => {\r\n            m.on('mouseover', (e) => this.showNodeTooltip(e))\r\n                .on('mouseout', (e) => this.hideTooltip())\r\n                .on('click', (e) => this.clickHandler(e));\r\n\r\n            features.push(m);\r\n        })\r\n\r\n        if (this.commonService.session.style.widgets['map-collapsing-on']) {\r\n            this.layers.markerClusterGroup.addLayers(features);\r\n        } else {\r\n            this.layers.featureGroup = featureGroup(features);\r\n            this.lmap.addLayer(this.layers.featureGroup);\r\n        }\r\n    } */\r\n\r\n    /**\r\n     * Draws nodes on the map\r\n     */\r\n    drawLeafletMapNodesList() {\r\n        var fillcolor = this.commonService.session.style.widgets['node-color'],\r\n            colorVariable = this.commonService.session.style.widgets['node-color-variable'],\r\n            selectedColor = this.commonService.session.style.widgets['selected-color'],\r\n            opacity = 1 - this.commonService.session.style.widgets['map-node-transparency'];\r\n\r\n        var features: Layer[] = [];\r\n\r\n        var n = this.nodes.length;\r\n        for (var i = 0; i < n; i++) {\r\n            var d = this.nodes[i];\r\n            if (!d._jlat || !d._jlon || d.visible === false) continue;\r\n\r\n            let circleMarker: CircleWithData = L.circleMarker(L.latLng(d._jlat, d._jlon), {\r\n                weight: d.selected ? 3 : 1,\r\n                color: d.selected ? selectedColor : '#000000',\r\n                opacity: opacity,\r\n                fillColor: colorVariable == 'None' ? fillcolor : this.commonService.temp.style.nodeColorMap(d[colorVariable]),\r\n                fillOpacity: opacity,\r\n                radius: 10\r\n            });\r\n\r\n            circleMarker.data = d;\r\n\r\n            circleMarker\r\n                .on('mouseover', (e) => this.showNodeTooltip(e))\r\n                .on('mouseout', (e) => this.hideTooltip())\r\n                .on('click', (e) => this.clickHandler(e));\r\n\r\n\r\n            features.push(circleMarker);\r\n        }\r\n\r\n        if (this.commonService.session.style.widgets['map-collapsing-on']) {\r\n            this.layers.markerClusterGroup.addLayers(features);\r\n        } else {\r\n            this.layers.featureGroup = featureGroup(features);\r\n            this.lmap.addLayer(this.layers.featureGroup);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Draws links on the map\r\n    */\r\n    drawLinks() {\r\n        this.layers.removeLinks();\r\n    \r\n        if (!this.commonService.session.style.widgets['map-link-show']) return;\r\n    \r\n        var lcv = this.commonService.session.style.widgets['link-color-variable'];\r\n        var opacity = 1 - this.commonService.session.style.widgets['map-link-transparency'];\r\n        var links = this.commonService.getVisibleLinks();\r\n    \r\n        var features: Layer[] = [];\r\n    \r\n        links.forEach((d) => {\r\n            if (!d.visible) return;\r\n            var source = this.nodes.find(node => node._id == d.source && node.visible);\r\n            var target = this.nodes.find(node => node._id == d.target && node.visible);\r\n    \r\n            if (source && target && source._jlat && source._jlon && target._jlat && target._jlon) {\r\n                // Handle multiple origins\r\n                if (lcv == 'origin' && d.origin && d.origin.length > 1) {\r\n                    let color1 = this.commonService.temp.style.linkColorMap(d.origin[0]);\r\n                    let color2 = this.commonService.temp.style.linkColorMap(d.origin[1]);\r\n    \r\n                    let dashPattern1 = '10, 10';\r\n                    let dashPattern2 = '0, 10, 10, 0';\r\n    \r\n                    let polyline1 = L.polyline([[source._jlat, source._jlon], [target._jlat, target._jlon]], {\r\n                        color: color1,\r\n                        dashArray: dashPattern1,\r\n                        opacity: opacity\r\n                    });\r\n    \r\n                    let polyline2: PolyLineWithData = L.polyline([[source._jlat, source._jlon], [target._jlat, target._jlon]], {\r\n                        color: color2,\r\n                        dashArray: dashPattern2,\r\n                        opacity: opacity\r\n                    });\r\n\r\n                    polyline2.data = d;\r\n                    polyline2\r\n                        .on('mouseover', (e) => this.showLinkTooltip(e))\r\n                        .on('mouseout', (e) => this.hideTooltip())\r\n    \r\n                    features.push(polyline1);\r\n                    features.push(polyline2);\r\n                } else {\r\n                    // Single origin handling\r\n                    const connectorLine: PolyLineWithData = L.polyline([\r\n                        [source._jlat, source._jlon],\r\n                        [target._jlat, target._jlon]\r\n                    ], {\r\n                        color: lcv === \"None\" ?\r\n                            this.commonService.session.style.widgets['link-color'] :\r\n                            this.commonService.temp.style.linkColorMap(d[lcv]),\r\n                        opacity: opacity\r\n                    });\r\n    \r\n                    connectorLine.data = d;\r\n\r\n                    connectorLine\r\n                        .on('mouseover', (e) =>this.showLinkTooltip(e))\r\n                        .on('mouseout', (e) => this.hideTooltip())\r\n    \r\n                    features.push(connectorLine);\r\n                }\r\n            }\r\n        });\r\n    \r\n        this.layers.links = featureGroup(features);\r\n        if (this.lmap != undefined) this.lmap.addLayer(this.layers.links);\r\n\r\n        if (this.commonService.session.style.widgets['map-node-show']) {\r\n            if (this.commonService.session.style.widgets['map-collapsing-on']) {\r\n                // Not sure how to move collapsed nodes to front with bringToFront(), they use markerClusterGroup (from leaflet.markercluster plugin) instead of featureGroup (from base leaflet)\r\n                this.drawNodes(false)\r\n            } else {\r\n                this.layers.featureGroup.bringToFront();\r\n            }\r\n        }\r\n    }\r\n    \r\n\r\n    showNodeTooltip(e) {\r\n        var data = e.target.data;\r\n        var locationData = e.target.locationDetail;\r\n        var variable = this.commonService.session.style.widgets['map-node-tooltip-variable'];\r\n        if (variable !== 'None' && (data[variable] || data[variable] == 0)) {\r\n\r\n            let htmlText = data[variable];\r\n            if (locationData) {\r\n                htmlText = `<p><strong>${variable}:</strong> ${data[variable]}</p>`\r\n                htmlText += `<p><strong>Location:</strong> ${locationData.Name}</p>`\r\n                htmlText += `<p><strong>Address:</strong> ${locationData.FullAddress}</p>`\r\n            }\r\n            d3.select(this.mapTooltip)\r\n                .html(htmlText)\r\n                .style('position', 'absolute')\r\n                .style('left', (e.containerPoint.x - 50) + 'px')\r\n                .style('top', (e.containerPoint.y - 50) + 'px')\r\n                .style('visibility', 'visible')\r\n                .style('z-index', 1001)\r\n                .transition().duration(100)\r\n                .style('opacity', 1)\r\n                ;\r\n        }\r\n    }\r\n\r\n    showLinkTooltip(e) {\r\n        var d = e.target.data;\r\n        var v = this.commonService.session.style.widgets['map-link-tooltip-variable'];\r\n        if (v !== 'None' && (d[v] || d[v] == 0)) {\r\n            d3.select(this.mapTooltip)\r\n                .html(d[v])\r\n                .style('position', 'absolute')\r\n                .style('left', (e.containerPoint.x - 50) + 'px')\r\n                .style('top', (e.containerPoint.y - 50) + 'px')\r\n                .style('z-index', 1001)\r\n                .transition().duration(100)\r\n                .style('opacity', 1);\r\n        }\r\n    }\r\n\r\n    hideTooltip() {\r\n        var tooltip = d3.select(this.mapTooltip);\r\n        tooltip\r\n            .transition().duration(100)\r\n            .style('opacity', 0)\r\n            .on('end', () => tooltip.style('z-index', -1));\r\n    }\r\n\r\n    /**\r\n     * Clicking on a node updates that status of node selected properties. Other nodes will be unselected and then triggers a document node-selected event\r\n     */\r\n    clickHandler(e) {\r\n        const node = e.sourceTarget.data;\r\n        if (!node || !node._id) return;\r\n      \r\n        const nodes = this.commonService.session.data.nodes;\r\n        const filtered = this.commonService.session.data.nodeFilteredValues;\r\n      \r\n        const setSelected = (id: string, selected: boolean) => {\r\n          nodes.filter(n => n._id === id).forEach(n => (n.selected = selected));\r\n          filtered.filter(n => n._id === id).forEach(n => (n.selected = selected));\r\n        };\r\n      \r\n        const ctrl = e.originalEvent && e.originalEvent.ctrlKey;\r\n      \r\n        if (!ctrl) {\r\n          // single select\r\n          nodes.forEach(n => setSelected(n._id, n._id === node._id));\r\n        } else {\r\n          // toggle multi-select\r\n          const cur = nodes.find(n => n._id === node._id)?.selected === true;\r\n          setSelected(node._id, !cur);\r\n        }\r\n      \r\n        $(document).trigger('node-selected');\r\n      }\r\n      \r\n\r\n    /**\r\n     * @returns an array [X, Y] of the position of mouse relative to alignment view. Global position (i.e. d3.event.pageX) doesn't work for a dashboard\r\n     */  \r\n    getRelativeMousePosition(e) {\r\n        let rect = document.querySelector('mapcomponent').getBoundingClientRect();\r\n        let X = e.pageX - rect.left;\r\n        let Y = e.pageY - rect.top; \r\n        return [X, Y];\r\n    }\r\n\r\n    resetStack() {\r\n        //Tile Layers, in reverse order:\r\n        if (this.layers.satellite && this.commonService.session.style.widgets['map-satellite-show']) this.layers.satellite.bringToBack();\r\n        if (this.layers.basemap && this.commonService.session.style.widgets['map-basemap-show']) this.layers.basemap.bringToBack();\r\n\r\n        //Background Layers, in order:\r\n        if (this.layers.countries && this.commonService.session.style.widgets['map-countries-show']) this.layers.countries.bringToFront();\r\n        if (this.layers.states && this.commonService.session.style.widgets['map-states-show']) this.layers.states.bringToFront();\r\n        if (this.layers.counties && this.commonService.session.style.widgets['map-counties-show']) this.layers.counties.bringToFront();\r\n\r\n        //User Layers:\r\n        Object.keys(this.layers)\r\n            .filter(l => !this.commonService.includes(['countries', 'states', 'counties', 'satellite', 'basemap', 'links', 'nodes'], l))\r\n            .forEach(l => this.layers[l].bringToFront());\r\n\r\n\r\n        //Foreground Layers, in order:\r\n        if (this.layers.links && this.commonService.session.style.widgets['map-link-show']) this.layers.links.bringToFront();\r\n        if (this.layers.nodes() && this.commonService.session.style.widgets['map-node-show']) {\r\n            if (this.commonService.session.style.widgets['map-collapsing-on']) {\r\n                this.drawNodes(false); //This did not work with clusters//this.layers.nodes().bringToFront();\r\n            } else {\r\n                this.layers.nodes().bringToFront()\r\n            }\r\n        }\r\n    }\r\n\r\n    rerollCheck() {\r\n        return this.nodes.some(node => node._theta == undefined || node._j == undefined);\r\n    }\r\n\r\n    /**\r\n     * Reroll and jitter function for an individual node\r\n     */\r\n    rerollNodeAndJitter(node) {\r\n        node._theta = this.commonService.r01() * Math.PI * 2;\r\n        node._j = this.commonService.r01();\r\n\r\n        var v = this.commonService.session.style.widgets['map-node-jitter'] == -2 ? 0 : Math.pow(2, this.commonService.session.style.widgets['map-node-jitter']);\r\n        node._jlon = parseFloat(node._lon) + v * node._j * Math.cos(node._theta);\r\n        node._jlat = parseFloat(node._lat) + v * node._j * Math.sin(node._theta);\r\n    }\r\n\r\n    /**\r\n     * Updates _jlon and _jLat for each node using _theta & _j values from each node and widget['map-node-jitter']\r\n     */\r\n    jitter() {\r\n        //debugger;\r\n        var v = this.commonService.session.style.widgets['map-node-jitter'] == -2 ? 0 : Math.pow(2, this.commonService.session.style.widgets['map-node-jitter']);\r\n        var n = this.nodes.length;\r\n        for (var i = 0; i < n; i++) {\r\n            var node = this.nodes[i];\r\n            this.nodes[i]._jlon = parseFloat(node._lon) + v * node._j * Math.cos(node._theta);\r\n            this.nodes[i]._jlat = parseFloat(node._lat) + v * node._j * Math.sin(node._theta);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates _theta and _j for each node. Then calls jitter() which uses those values to upate _jlon and _jlat\r\n     */\r\n    rerollNodes() {\r\n        //debugger;\r\n\r\n        this.nodes.forEach((node) => {\r\n            node._theta = this.commonService.r01() * Math.PI * 2;\r\n            node._j = this.commonService.r01();\r\n        });\r\n        this.jitter();\r\n    }\r\n\r\n    /*makeGeoJSON() {\r\n        var features = [];\r\n        var jitter = this.commonService.session.style.widgets['map-node-jitter'] > 0;\r\n        this.nodes.forEach((d) => {\r\n            if (d._lat && d._lon) {\r\n                features.push({\r\n                    type: 'Feature',\r\n                    geometry: {\r\n                        type: 'Point',\r\n                        coordinates: jitter ? [d._lon + d._jlon, d._lat + d._jlat] : [d._lon, d._lat]\r\n                    },\r\n                    properties: d\r\n                });\r\n            }\r\n        });\r\n        this.commonService.getVisibleLinks().forEach((d) => {\r\n            if (!d.visible) return;\r\n            var source = this.nodes.find(node => node.id == d.source);\r\n            var target = this.nodes.find(node => node.id == d.target);\r\n            if (source && target) {\r\n                if (source._lat && source._lon && target._lat && target._lon) {\r\n                    features.push({\r\n                        type: 'Feature',\r\n                        geometry: {\r\n                            type: 'LineString',\r\n                            coordinates: jitter ? [\r\n                                [source._lon + source._jlon, source._lat + source._jlat],\r\n                                [target._lon + target._jlon, target._lat + target._jlat]\r\n                            ] : [\r\n                                [source._lon, source._lat],\r\n                                [target._lon, target._lat]\r\n                            ]\r\n                        },\r\n                        properties: d\r\n                    });\r\n                }\r\n            }\r\n        });\r\n        return {\r\n            type: 'FeatureCollection',\r\n            features: features\r\n        };\r\n    } */\r\n\r\n    openSettings() {\r\n        this.NodeMapSettingsExportDialogSettings.setVisibility(true);\r\n    }\r\n\r\n    openExport() {\r\n        this.ShowGEOMapExportPane = true;\r\n\r\n        this.visuals.gisMap.NodeMapSettingsExportDialogSettings.setStateBeforeExport();\r\n    }\r\n\r\n    openCenter() {\r\n        this.centerMap();\r\n    }\r\n\r\n    //openPinAllNodes() {\r\n\r\n    //}\r\n\r\n    openRefreshScreen() {\r\n        this.centerMap();\r\n    }\r\n\r\n    openSelectDataSetScreen() {\r\n\r\n    }\r\n\r\n    updateNodeColors() {\r\n        this.drawNodes(false);\r\n        this.drawLinks();\r\n    }\r\n\r\n    updateVisualization() {\r\n        this.drawNodes(false);\r\n        this.drawLinks();\r\n    }\r\n\r\n    applyStyleFileSettings() {\r\n        this.loadSettings();\r\n        //this.widgets = (window as any).context.commonService.session.style.widgets;\r\n    }\r\n\r\n    updateLinkColor() {\r\n        this.drawLinks();\r\n    }\r\n\r\n    onRecallSession() {\r\n        // nothing to do here. loadSettings is called when the map is ready (onMapReady)\r\n    }\r\n\r\n    onLoadNewData() {\r\n        this.onDataChange(undefined);\r\n    }\r\n\r\n    onFilterDataChange() {\r\n        this.onDataChange(undefined);\r\n    }\r\n\r\n    loadSettings() {\r\n        //Components|Online|Basemap\r\n        console.log('SelectedBasemapTypeVariable: ', this.SelectedBasemapTypeVariable);\r\n\r\n        this.SelectedBasemapTypeVariable = this.commonService.session.style.widgets['map-basemap-show'] ? 'Show' : 'Hide';\r\n\r\n        //Component for basemap\r\n        if (this.commonService.session.style.widgets['map-basemap-show']) {\r\n            this.onBasemapChange('Show');\r\n        } else if (this.commonService.session.style.widgets['map-satellite-show']) {\r\n            this.onSatelliteChange('Show');\r\n        } else {\r\n            this.onCountriesShowHidChange('Show');\r\n        }\r\n\r\n        //Components|Network|Nodes\r\n        this.SelectedNodesTypeVariable = this.commonService.session.style.widgets['map-node-show'] ? 'Show' : 'Hide';\r\n        this.onMapNodeShowHideChange(this.SelectedNodesTypeVariable);\r\n\r\n        //Components|Network|Links\r\n        this.SelectedLinksTypeVariable = this.commonService.session.style.widgets['map-link-show'] ? 'Show' : 'Hide';\r\n        this.onMapLinksShowHideChange(this.SelectedLinksTypeVariable);\r\n\r\n        //Components|Offline|States\r\n        this.SelectedStatesTypeVariable = this.commonService.session.style.widgets['map-states-show'] ? 'Show' : 'Hide';\r\n        this.onStatesShowHideChange(this.SelectedStatesTypeVariable);\r\n\r\n        //Components|Offline|Counties\r\n        this.SelectedCountiesTypeVariable = this.commonService.session.style.widgets['map-counties-show'] ? 'Show' : 'Hide';\r\n        this.onCountiesShowHideChange(this.SelectedCountiesTypeVariable);\r\n\r\n        //Data|Geospatial\r\n        //this.SelectedGeospatialTypeVariable = this.commonService.session.style.widgets['map-geospatial-type-on'] ? 'On' : 'Off';\r\n        //this.onGeospatialTypeChange(undefined);\r\n\r\n        //Data|Latitude\r\n        this.SelectedLatitude = this.commonService.session.style.widgets['map-field-lat'];\r\n\r\n        //Data|Longitude\r\n        this.SelectedLongitude = this.commonService.session.style.widgets['map-field-lon'];\r\n\r\n        //Data|Census Tract\r\n        this.SelectedCensusTract = this.commonService.session.style.widgets['map-field-tract'];\r\n\r\n        //Data|Zipcode\r\n        this.SelectedZipCode = this.commonService.session.style.widgets['map-field-zipcode'];\r\n\r\n        //Data|County\r\n        this.SelectedCounty = this.commonService.session.style.widgets['map-field-county'];\r\n\r\n        //Data|State\r\n        this.SelectedState = this.commonService.session.style.widgets['map-field-state'];\r\n\r\n        //Data|Country\r\n        this.SelectedCountry = this.commonService.session.style.widgets['map-field-country'];\r\n\r\n        //Data|Country\r\n        //this.SelectedResidenceAddress = this.commonService.session.style.widgets['map-field-residence-address'];\r\n\r\n        //Data|Country\r\n        //this.SelectedVenueAddress = this.commonService.session.style.widgets['map-field-venue-address'];\r\n\r\n        //Data|Country\r\n        //this.SelectedExposureAddress = this.commonService.session.style.widgets['map-field-exposure-address'];\r\n\r\n        this.onDataChange(undefined);\r\n\r\n\r\n        //Nodes|Collapsing\r\n        this.SelectedNodeCollapsingTypeVariable = this.commonService.session.style.widgets['map-collapsing-on'] ? 'On' : 'Off';\r\n        this.onNodeCollapsingChange(undefined);\r\n\r\n        //Nodes|Transparency\r\n        this.SelectedNodeTransparencyVariable = this.commonService.session.style.widgets['map-node-transparency'];\r\n        this.onNodeTransparencyChange(this.SelectedNodeTransparencyVariable);\r\n\r\n        //Nodes|Jitter\r\n        this.SelectedNodeJitterVariable = this.commonService.session.style.widgets['map-node-jitter'];\r\n        this.onNodeJitterChange(this.SelectedNodeJitterVariable);\r\n\r\n        //Nodes|Tooltip\r\n        this.SelectedNodeTooltipVariable = this.commonService.session.style.widgets['map-node-tooltip-variable'];\r\n        this.onNodeToolTipChange(this.SelectedNodeTooltipVariable);\r\n\r\n\r\n        //Links|Transparency\r\n        this.SelectedLinkTransparencyVariable = this.commonService.session.style.widgets['map-link-transparency'];\r\n        this.onLinkTransparencyChange(this.SelectedLinkTransparencyVariable);\r\n\r\n        //Links|Tooltip\r\n        this.SelectedLinkTooltipVariable = this.commonService.session.style.widgets['map-link-tooltip-variable'];\r\n        this.onLinkToolTipChange(this.SelectedLinkTooltipVariable);\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n    }\r\n}\r\n\r\n//MOVE CLASSES TO NEW FILE\r\nclass MapLayers {\r\n    basemap!: TileLayer;\r\n    satellite!: TileLayer;\r\n    featureGroup: FeatureGroup = featureGroup();\r\n    markerClusterGroup: MarkerClusterGroup = markerClusterGroup();\r\n    links: FeatureGroup = featureGroup();\r\n    countries: L.GeoJSON<any> = geoJSON();\r\n    states: L.GeoJSON<any> = geoJSON();\r\n    counties: L.GeoJSON<any> = geoJSON();\r\n\r\n    public nodes(): FeatureGroup | MarkerClusterGroup {\r\n        if (this.markerClusterGroup.getLayers().length) return this.markerClusterGroup;\r\n        return this.featureGroup;\r\n    }\r\n\r\n    public removeNodes() {\r\n        this.featureGroup.clearLayers();\r\n        this.markerClusterGroup.clearLayers();\r\n    }\r\n\r\n    public removeLinks() {\r\n        this.links.clearLayers();\r\n    }\r\n}\r\n\r\nclass MarkerWithData extends L.Marker<any>{\r\n    public data?: any;\r\n    public locationDetail?: LocationDetail\r\n    public nodeType?: 'Residence' | 'Exposure' | 'Venue';\r\n}\r\n\r\nclass CircleWithData extends L.CircleMarker<any>{\r\n    public data?: any;\r\n}\r\n\r\nclass PolyLineWithData extends L.Polyline {\r\n    public data?: any;\r\n}\r\n\r\ninterface VenueLocationDetail {\r\n    City: string,\r\n    Country: string,\r\n    County: string,\r\n    DateOfContact: string,\r\n    FullAddress: string,\r\n    Latitude: number,\r\n    Longitude: number,\r\n    Name: string,\r\n    State: string,\r\n    StreetAddress: string,\r\n    Zipcode: string\r\n}\r\n\r\ninterface LocationDetail {\r\n    FullAddress: string | undefined,\r\n    Name: string | undefined,\r\n    Latitude: number | undefined,\r\n    Longitude: number | undefined,\r\n    Date: Date | undefined\r\n}\r\n\r\nexport namespace MapComponent {\r\n    export const componentTypeName = 'Map';\r\n}","import {\r\n  Injector, Component, Output, EventEmitter, OnInit,\r\n  ElementRef, ChangeDetectorRef, Inject, OnDestroy\r\n} from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { CommonService } from '@app/contactTraceCommonServices/common.service';\r\nimport * as saveAs from 'file-saver';\r\nimport * as domToImage from 'html-to-image';\r\nimport { SelectItem } from 'primeng/api';\r\nimport { DialogSettings } from '@app/helperClasses/dialogSettings';\r\nimport * as _ from 'lodash';\r\nimport { MicrobeTraceNextVisuals } from '@app/microbe-trace-next-plugin-visuals';\r\nimport { CustomShapes } from '@app/helperClasses/customShapes';\r\nimport TidyTree from './tidytree';\r\nimport * as d3 from 'd3';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\n//import { runInThisContext } from 'vm';\r\n//import { MatHint } from '@angular/material/form-field';\r\nimport { ExportService } from '@app/contactTraceCommonServices/export.service';\r\nimport { MicobeTraceNextPluginEvents } from '../../helperClasses/interfaces';\r\n\r\nimport { throws } from 'assert';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport { CommonStoreService } from '@app/contactTraceCommonServices/common-store.services';\r\n\r\n/**\r\n * @title PhylogeneticComponent\r\n */\r\n@Component({\r\n  selector: 'PhylogeneticComponent',\r\n  templateUrl: './phylogenetic-plugin.component.html',\r\n  styleUrls: ['./phylogenetic-plugin.component.scss']\r\n})\r\nexport class PhylogeneticComponent extends BaseComponentDirective implements OnInit, OnDestroy, MicobeTraceNextPluginEvents {\r\n\r\n  @Output() DisplayGlobalSettingsDialogEvent = new EventEmitter();\r\n  viewActive: boolean = true;\r\n  svgStyle: object = {\r\n    height: '0px',\r\n    width: '1000px'\r\n  };\r\n\r\n  private customShapes: CustomShapes = new CustomShapes();\r\n\r\n  ShowNetworkAttributes = false;\r\n  ShowStatistics = false;\r\n  ShowPhylogeneticExportPane = false;\r\n  ShowPhylogeneticSettingsPane = false;\r\n  IsDataAvailable = false;\r\n  svg: any = {};\r\n  settings: object = this.commonService.session.style.widgets;\r\n  radToDeg: number = (180 / Math.PI);\r\n  selected: boolean = false;\r\n  multidrag = false;\r\n  zoom: number = 1;\r\n  FieldList: SelectItem[] = [];\r\n  ToolTipFieldList: SelectItem[] = [];\r\n  nodeMin: number = 3;\r\n  nodeMax: number = 27;\r\n  nodeScale: d3.ScaleLinear<number, number> = d3.scaleLinear().domain([0, 1]).range([0, 1]);\r\n  minNodeWidth: number = 5;\r\n  maxNodeWidth: number = 15;\r\n  nodeMid: number = 1;\r\n  debugMode = false;\r\n\r\n\r\n\r\n  // Tree Tab\r\n  TreeLayouts: object = [\r\n    { label: 'Horizontal', value: 'horizontal' },\r\n    { label: 'Vertical', value: 'vertical' },\r\n    { label: 'Circular', value: 'circular' },\r\n  ];\r\n  SelectedTreeLayoutVariable: 'horizontal'|'vertical'|'circular' = this.settings['tree-layout-horizontal'] ? 'horizontal' :  this.settings['tree-layout-vertical'] ? 'vertical' :this.settings['tree-layout-circular'] ? 'circular' : 'horizontal';\r\n  TreeModes: object = [\r\n    { label: 'Smooth', value: 'smooth' },\r\n    { label: 'Square', value: 'square' },\r\n    { label: 'Straight', value: 'straight' },\r\n  ];\r\n  SelectedTreeModeVariable: 'smooth'|'square'|'straight' = this.settings['tree-mode-square'] ? 'square': this.settings['tree-mode-smooth'] ? 'smooth': this.settings['tree-mode-straight'] ? 'straight': 'square';\r\n  TreeTypes: object = [\r\n    { label: 'Weighted', value: 'weighted' },\r\n    { label: 'Unweighted (Tree)', value: 'tree' },\r\n    { label: 'Dendrogram', value: 'dendrogram' },\r\n  ];\r\n  SelectedTreeTypeVariable = this.settings['tree-type'] ?? 'weighted';  // 'weighted';\r\n  SelectedVerticalStretchVariable = this.settings['tree-vertical-stretch'] ?? 1;\r\n  SelectedHorizontalStretchVariable = this.settings['tree-horizontal-stretch'] ?? 1;\r\n\r\n  // Leaves Tab\r\n  SelectedLeafLabelShowVariable = this.settings['tree-leaf-label-show'] ?? true;\r\n  SelectedLeafLabelVariable: string = '_id';\r\n  LeafLabelFieldList: SelectItem[] = [];\r\n  SelectedLeafLabelSizeVariable = this.settings['tree-leaf-label-size'] ?? 12;\r\n  SelectedLeafTooltipShowVariable = this.settings['tree-tooltip-show'] ?? true;\r\n  SelectedLeafTooltipVariable = '_id';\r\n  //LeafTooltipFieldList: object[] = [];\r\n  SelectedLeafNodeShowVariable = this.settings['tree-leaf-node-show'] ?? true;\r\n  SelectedLeafNodeSizeVariable: string = this.settings['tree-leaf-node-radius-variable'] ?? 'None';\r\n  SelectedLeafNodeSize: number = this.settings['tree-leaf-node-size'] ?? 5;\r\n  SelectedLeafNodeColorVariable = this.settings['node-color'];\r\n  SelectedSelectedLeafNodeColorVariable = this.settings['selected-color'];\r\n\r\n  // Branch Tab\r\n  SelectedBranchNodeShowVariable = this.settings['tree-branch-nodes-show'] ?? false;\r\n  SelectedBranchNodeSizeVariable = 5;\r\n  SelectedBranchNodeColorVariable = this.settings['node-color'];\r\n  SelectedBranchSizeVariable = 3;\r\n  SelectedBranchLabelSizeVariable: 12 = 12;\r\n  SelectedLinkColorVariable = this.settings['link-color'];\r\n  SelectedBranchLabelShowVariable: false = false;\r\n  SelectedBranchDistanceShowVariable = !(this.settings['tree-branch-distances-hide'] ?? true); // inverse of its widget; defaults to false\r\n  SelectedBranchDistanceSizeVariable = this.settings['tree-branch-distance-size'] ?? 12;\r\n  //SelectedBranchTooltipShowVariable = false;\r\n\r\n  hideShowOptions: object = [\r\n    { label: 'Hide', value: false },\r\n    { label: 'Show', value: true }\r\n  ];\r\n\r\n  // Export Settings\r\n  private isExportClosed = false;\r\n  public isExporting = false;\r\n\r\n  SelectedTreeImageFilenameVariable = 'default_tree';\r\n  SelectedNewickStringFilenameVariable = 'default_tree.nwk';\r\n\r\n  NetworkExportFileTypeList: object = [\r\n    { label: 'png', value: 'png' },\r\n    { label: 'jpeg', value: 'jpeg' },\r\n    { label: 'svg', value: 'svg' }\r\n  ];\r\n\r\n  SelectedNetworkExportFileTypeListVariable = 'png';\r\n  SelectedNetworkExportScaleVariable: number = 1;\r\n  SelectedNetworkExportQualityVariable: number = 0.92;\r\n  CalculatedResolutionWidth: number = 1918;\r\n  CalculatedResolutionHeight: number = 909;\r\n  CalculatedResolution: string = ((this.CalculatedResolutionWidth * this.SelectedNetworkExportScaleVariable) + ' x ' + (\r\n    this.CalculatedResolutionHeight * this.SelectedNetworkExportScaleVariable) + 'px');\r\n\r\n\r\n  ShowAdvancedExport = true;\r\n\r\n  PhylogeneticTreeExportDialogSettings: DialogSettings = new DialogSettings('#phylotree-settings-pane', false);\r\n\r\n  //ContextSelectedNodeAttributes: { attribute: string, value: string }[] = [];\r\n  tree: TidyTree = null;\r\n\r\n  private visuals: MicrobeTraceNextVisuals;\r\n  private destroy$ = new Subject<void>();\r\n\r\n  constructor(injector: Injector,\r\n    private eventManager: EventManager,\r\n    public commonService: CommonService,\r\n    @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer,\r\n    elRef: ElementRef,\r\n    private cdref: ChangeDetectorRef,\r\n    private gtmService: GoogleTagManagerService,\r\n    private store: CommonStoreService,\r\n    private exportService: ExportService) {\r\n\r\n    super(elRef.nativeElement);\r\n\r\n    this.visuals = commonService.visuals;\r\n    this.commonService.visuals.phylogenetic = this;\r\n  }\r\n\r\n  openTree = async () => {\r\n    /*\r\n    if (this.visuals.phylogenetic.commonService.session.data.newickString) {\r\n      this.tree = new TidyTree(this.visuals.phylogenetic.commonService.session.data.tree,\r\n                               this.getTreeOptions(),\r\n                               this.getTreeHandlers());\r\n      console.log(this.visuals.phylogenetic.commonService.session.data.tree);\r\n      console.log(this.tree);\r\n      this.hideTooltip();\r\n      this.styleTree();\r\n    } else {\r\n    */\r\n    //@ts-ignore\r\n    if (this.visuals.phylogenetic.commonService.session.data.hasOwnProperty(\"newickString\") && this.visuals.phylogenetic.commonService.session.data.newickString) {\r\n      //@ts-ignore\r\n      const newickString = this.visuals.phylogenetic.commonService.session.data.newickString;\r\n      const tree = this.buildTree(newickString);\r\n      this.tree = tree;\r\n      this.commonService.visuals.phylogenetic.tree = tree;\r\n      //this.mergeNodeData();\r\n      this.hideTooltip();\r\n      this.styleTree();\r\n    } else {\r\n      const newickString = await this.commonService.computeTree();\r\n      this.commonService.session.data.newickString = newickString;\r\n      console.log(newickString);\r\n      //newickString.then((x) => {\r\n        const tree = this.buildTree(newickString);\r\n        this.tree = tree;\r\n        this.commonService.visuals.phylogenetic.tree = tree;\r\n        //this.mergeNodeData();\r\n        this.hideTooltip();\r\n        this.styleTree();\r\n      //});\r\n    }\r\n    // d3.select('svg#network').exit().remove();\r\n    // this.visuals.phylogenetic.svg = d3.select('svg#network').append('g');\r\n\r\n    // }\r\n  }\r\n\r\n  // mergeNodeData(): void {\r\n  //   let data = this.commonService.session.data.nodes;\r\n  //   console.log(this.tree.data);\r\n  //   let leafNodes = this.tree.data.getLeaves();\r\n  // }\r\n\r\n  styleTree = () => {\r\n    if (!this.tree) return;\r\n    this.svg = d3.select('#phylocanvas svg');\r\n    this.svg.style('overflow', 'visible');\r\n    // let nodes = this.commonService.session.data; // This section seems redundant (replaced with getTreeHandlers)\r\n    // nodes = this.svg.select('g.nodes').selectAll('g').data(nodes, d => d.id)\r\n    //   .join(\r\n    //     enter => {\r\n    //       const g = enter.append('g')\r\n    //         .attr('tabindex', '0')\r\n    //         .on('mouseenter focusin', (x) => this.showTooltip(x))\r\n    //         .on('mouseout focusout', (x) => this.hideTooltip())\r\n    //         .on('contextmenu', (x) => this.showContextMenu(x))\r\n    //         .on('click', (x) => this.clickHandler(x))\r\n    //         .on('keydown', n => {\r\n    //           if ((d3 as any).event.code === 'Space') this.clickHandler(n);\r\n    //           if ((d3 as any).event.shiftKey && (d3 as any).event.key === 'F10') this.showContextMenu(n);\r\n    //         });\r\n    //       g.append('path')\r\n    //         .style('stroke', 'black')\r\n    //         .style('stroke-width', '2px');\r\n    //       g.append('text')\r\n    //         .attr('dy', 5)\r\n    //         .attr('dx', 8);\r\n    //       return g;\r\n    //     }\r\n    //   );\r\n    this.tree.setBranchLabels(this.SelectedBranchLabelShowVariable);\r\n    this.tree.eachBranchLabel(this.styleBranchLabel);\r\n    this.tree.setBranchNodes(this.SelectedBranchNodeShowVariable);\r\n    this.tree.eachBranchNode(this.styleBranchNode);\r\n    this.tree.setBranchDistances(this.SelectedBranchDistanceShowVariable);\r\n    this.tree.eachBranchDistance(this.styleBranchDistance);\r\n    this.tree.setLeafNodes(this.SelectedLeafNodeShowVariable);\r\n    if (typeof this.SelectedLeafNodeSizeVariable === \"string\"){\r\n      this.updateMinMaxNode();\r\n    }\r\n    this.tree.eachLeafNode(this.styleLeafNode);\r\n    this.onLeafLabelVariableChange(this.SelectedLeafLabelVariable);\r\n    this.tree.setLeafLabels(this.SelectedLeafLabelShowVariable);\r\n    this.tree.eachLeafLabel(this.styleLeafLabel);\r\n    const branchEls = document.querySelectorAll('g.tidytree-link > path');\r\n    this.svg.style('height', '88vh;');\r\n    branchEls.forEach(this.styleBranch);\r\n    this.svg.style('background-color', '#ffffff');\r\n  }\r\n\r\n  styleBranch = (el) => {\r\n    d3.select(el).style('stroke', this.SelectedLinkColorVariable);\r\n    d3.select(el).style('stroke-width', `${this.SelectedBranchSizeVariable}px`);\r\n  }\r\n\r\n  styleBranchLabel = (label, data) => {\r\n    d3.select(label).style('font-size', `${this.SelectedBranchLabelSizeVariable}px`);\r\n  }\r\n\r\n  styleBranchNode = (node, data) => {\r\n    d3.select(node).attr('r', this.SelectedBranchNodeSizeVariable);\r\n    d3.select(node).style('fill', this.SelectedBranchNodeColorVariable);\r\n  }\r\n\r\n  styleBranchDistance = (label, data) => {\r\n    d3.select(label).style('font-size', `${this.SelectedBranchDistanceSizeVariable}px`);\r\n  }\r\n\r\n\r\n  styleLeafLabel = (label, data) => {\r\n    d3.select(label).style('font-size', `${this.SelectedLeafLabelSizeVariable}px`);\r\n  }\r\n\r\n  isNumber(a): boolean {\r\n    return typeof a == \"number\";\r\n  };\r\n\r\n  updateMinMaxNode() {\r\n    const visNodes = this.commonService.getVisibleNodes();\r\n    let n = visNodes.length;\r\n\r\n\r\n    this.nodeMin = Number.MAX_VALUE;\r\n    this.nodeMax = Number.MIN_VALUE;\r\n    for (let i = 0; i < n; i++) {\r\n        let size = visNodes[i][this.SelectedLeafNodeSizeVariable];\r\n        if (typeof size == 'undefined') continue;\r\n        if (size < this.nodeMin) this.nodeMin = size;\r\n        if (size > this.nodeMax) this.nodeMax = size;\r\n    }\r\n\r\n    this.nodeMid = (this.nodeMax - this.nodeMin) / 2;\r\n\r\n    this.nodeScale = d3.scaleLinear()\r\n        .domain([this.nodeMin, this.nodeMax])\r\n        .range([this.minNodeWidth, this.maxNodeWidth]);\r\n  }\r\n\r\n  getLeafSize = (node_id, variable): number => {\r\n    let defaultSize = this.SelectedLeafNodeSize;\r\n    let size = defaultSize, med = defaultSize, oldrng, min, max;\r\n    let nodes = this.visuals.phylogenetic.commonService.session.data.nodes;\r\n    const node = nodes.filter(x => {\r\n      if (x._id === node_id) {\r\n        return true;\r\n      }\r\n    });\r\n\r\n    if (variable === 'None') {\r\n      return defaultSize;\r\n    } else {\r\n\r\n      let v = node[0][variable];\r\n      if (variable === \"Cluster\" || variable === \"Cluster size\") {\r\n        return parseInt(v);\r\n      }\r\n\r\n      if (!this.isNumber(v)) v = this.nodeMid;\r\n\r\n      // Check the type of v before calling linkScale\r\n\r\n      // Ensure v is a number before using linkScale\r\n      if (typeof v === 'number') {\r\n        let scaleValue = this.nodeScale(v);\r\n        if (this.debugMode) {\r\n          console.log('link scale', scaleValue);\r\n        }\r\n        return scaleValue;\r\n      } else {\r\n        if (this.debugMode) {\r\n          console.error('v is not a number:', v);\r\n        }\r\n        return this.nodeScale; // Default to scalar if v is not a number\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  styleLeafNode = (node, data) => {\r\n    let nodes = this.visuals.phylogenetic.commonService.session.data.nodes;\r\n    let leafSize: number;\r\n    const variable = this.visuals.phylogenetic.commonService.session.style.widgets['node-color-variable'];\r\n    leafSize = this.getLeafSize(data.data.id, this.SelectedLeafNodeSizeVariable);\r\n    const selectedColor = this.SelectedSelectedLeafNodeColorVariable;\r\n    const nodeData = nodes.find(n => n._id === data.data.id);\r\n    const isSelected = !!(nodeData && nodeData.selected);\r\n    d3.select(node)\r\n      .attr('r', leafSize)\r\n      .style('stroke', isSelected ? selectedColor : '#000000')\r\n      .style('stroke-width', isSelected ? '3px' : '1px');\r\n\r\n    if (variable === 'None') {\r\n      d3.select(node).style('fill', this.SelectedLeafNodeColorVariable);\r\n    } else {\r\n      d3.select(node).style('fill', d => {\r\n        const node_values = nodes.filter(m => m._id === (d as any).data.id);\r\n        const node_color = this.visuals.phylogenetic.commonService.temp.style.nodeColorMap(node_values[0][variable]);\r\n        return node_color;\r\n      });\r\n      // d3.select(node).style('opacity', d => this.visuals.phylogenetic.commonService.temp.style.nodeAlphaMap(d[variable]));\r\n\r\n      //  this.context.microbeTrace.generateNodeColorTable(\"#node-color-table-bottom\", false);\r\n    }\r\n\r\n\r\n  }\r\n\r\n  buildTree(newick): TidyTree {\r\n    const tree: TidyTree = new TidyTree(\r\n      newick ? newick : this.tree.data.clone(),\r\n      this.getTreeOptions(),\r\n      this.getTreeHandlers(),\r\n    );\r\n    return tree;\r\n  }\r\n\r\n  getTreeOptions = () => {\r\n    const treeOpts = {\r\n      parent: '#phylocanvas',\r\n      layout: this.SelectedTreeLayoutVariable,\r\n      mode: this.SelectedTreeModeVariable,\r\n      type: this.SelectedTreeTypeVariable,\r\n      leafNodes: this.SelectedLeafNodeShowVariable,\r\n      branchNodes: this.SelectedBranchNodeSizeVariable,\r\n      leafLabels: this.SelectedLeafLabelSizeVariable,\r\n      branchLabels: this.SelectedBranchLabelSizeVariable,\r\n      branchDistances: this.SelectedBranchDistanceSizeVariable,\r\n      ruler: true,\r\n      animation: parseFloat('0'),  // range 0-2000 in steps of 10\r\n      margin: [10, 80, 50, 30] //CSS order: top, right, bottom, left\r\n    };\r\n    return treeOpts;\r\n  }\r\n\r\n  getTreeHandlers = () => {\r\n    const handlers = {\r\n      contextmenu: this.showContextMenu,\r\n      showtooltip: this.showTooltip,\r\n      hidetooltip: this.hideTooltip,\r\n      select: this.clickHandler\r\n    };\r\n    return handlers;\r\n  }\r\n\r\n  ngOnInit() {\r\n    let that = this;\r\n\r\n    this.gtmService.pushTag({\r\n      event: \"page_view\",\r\n      page_location: \"/phylogenetic\",\r\n      page_title: \"Phylogenetic Tree View\"\r\n    });\r\n\r\n    this.LeafLabelFieldList.push({ label: 'None', value: 'None' });\r\n    this.commonService.session.data['nodeFields'].map((d, i) => {\r\n      if (['seq', 'origin', '_diff', '_ambiguity', 'index'].includes(d)) return;\r\n      this.visuals.phylogenetic.LeafLabelFieldList.push({\r\n        label: this.visuals.phylogenetic.commonService.capitalize(d.replace('_', '')),\r\n        value: d\r\n        });\r\n    });\r\n\r\n    $(document).on(\"node-selected\", function () {\r\n      that.updateNodeColors();\r\n    });\r\n\r\n\r\n    this.goldenLayoutComponentResize()\r\n    this.openTree();\r\n\r\n    this.container.on('resize', () => { this.goldenLayoutComponentResize() })\r\n    this.container.on('hide', () => {\r\n      this.viewActive = false;\r\n      this.cdref.detectChanges();\r\n    })\r\n    this.container.on('show', () => {\r\n      this.viewActive = true;\r\n      this.cdref.detectChanges();\r\n    })\r\n\r\n    this.store.clusterUpdate$.pipe(takeUntil(this.destroy$)).subscribe(() => {\r\n      if (this.commonService.session.style.widgets['node-color-variable'] == 'cluster' || this.SelectedLeafLabelVariable == 'cluster' ) {\r\n        this.styleTree();\r\n      }\r\n    })\r\n\r\n    // Subscribe to style file applied event\r\n    this.store.styleFileApplied$.pipe(takeUntil(this.destroy$)).subscribe(() => {\r\n      this.applyStyleFileSettings();\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  goldenLayoutComponentResize() {\r\n    $('#phylocanvas').height($('phylogeneticcomponent').height() - 19);\r\n    $('#phylocanvas').width($('phylogeneticcomponent').width() - 1)\r\n  }\r\n\r\n  InitView() { // this function isn't called\r\n    this.visuals.phylogenetic.IsDataAvailable = (\r\n      this.visuals.phylogenetic.commonService.session.data.nodes.length === 0 ? false : true\r\n    );\r\n\r\n    //if (this.visuals.phylogenetic.IsDataAvailable === true && this.visuals.phylogenetic.zoom == null) {\r\n      // d3.select('svg#network').exit().remove();\r\n      // this.visuals.phylogenetic.svg = d3.select('svg#network').append('g');\r\n    //}\r\n  }\r\n\r\n  openSettings() {\r\n    this.visuals.phylogenetic.PhylogeneticTreeExportDialogSettings.setVisibility(true);\r\n    // this.context.twoD.ShowStatistics = !this.context.twoD.Show2DSettingsPane;\r\n  }\r\n\r\n\r\n  openExport() {\r\n    this.ShowPhylogeneticExportPane = true;\r\n\r\n    this.visuals.microbeTrace.GlobalSettingsDialogSettings.setStateBeforeExport();\r\n    this.visuals.microbeTrace.GlobalSettingsLinkColorDialogSettings.setStateBeforeExport();\r\n    this.visuals.microbeTrace.GlobalSettingsNodeColorDialogSettings.setStateBeforeExport();\r\n    this.isExportClosed = false;\r\n\r\n  }\r\n\r\n  openCenter() {\r\n    const thisTree = this.commonService.visuals.phylogenetic.tree;\r\n    thisTree.recenter()\r\n      .redraw();\r\n    this.styleTree();\r\n  }\r\n\r\n  openRefreshScreen() {\r\n\r\n  }\r\n\r\n  openSelectDataSetScreen() {\r\n\r\n  }\r\n\r\n  onTreeLayoutChange(event) {\r\n    if (this.tree) {\r\n      this.SelectedTreeLayoutVariable = event;\r\n      if (event == 'horizontal') {\r\n        this.commonService.session.style.widgets['tree-layout-horizontal'] = true;\r\n        this.commonService.session.style.widgets['tree-layout-vertical'] = this.commonService.session.style.widgets['tree-layout-circular'] = false\r\n      } else if (event == 'vertical') {\r\n        this.commonService.session.style.widgets['tree-layout-vertical'] = true;\r\n        this.commonService.session.style.widgets['tree-layout-horizontal'] = this.commonService.session.style.widgets['tree-layout-circular'] = false \r\n      } else if (event == 'circular') {\r\n        this.commonService.session.style.widgets['tree-layout-circular'] = true;\r\n        this.commonService.session.style.widgets['tree-layout-horizontal'] = this.commonService.session.style.widgets['tree-layout-vertical'] = false \r\n      }\r\n      this.tree.setLayout(event);\r\n      this.openCenter();\r\n      this.styleTree();\r\n    }\r\n  }\r\n\r\n  onTreeModeChange(event) {\r\n    if (this.tree){\r\n      this.SelectedTreeModeVariable = event;\r\n      if (event == 'smooth') {\r\n        this.commonService.session.style.widgets['tree-mode-smooth'] = true;\r\n        this.commonService.session.style.widgets['tree-mode-square'] = this.commonService.session.style.widgets['tree-mode-straight'] = false\r\n      } else if (event == 'square') {\r\n        this.commonService.session.style.widgets['tree-mode-square'] = true;\r\n        this.commonService.session.style.widgets['tree-mode-smooth'] = this.commonService.session.style.widgets['tree-mode-straight'] = false\r\n      } else if (event == 'straight') {\r\n        this.commonService.session.style.widgets['tree-mode-straight'] = true;\r\n        this.commonService.session.style.widgets['tree-mode-smooth'] = this.commonService.session.style.widgets['tree-mode-square'] = false\r\n      }\r\n      this.tree.setMode(event);\r\n      this.openCenter();\r\n      this.styleTree();\r\n    }\r\n  }\r\n\r\n  onTreeTypeChange(event) {\r\n    this.SelectedTreeTypeVariable = event;\r\n    this.commonService.session.style.widgets['tree-type'] = this.SelectedTreeTypeVariable;\r\n    if (this.tree) {\r\n      this.tree.setType(event);\r\n      this.openCenter();\r\n      this.styleTree();\r\n    }\r\n  }\r\n\r\n  onLeafLabelVariableChange(event) {\r\n    this.SelectedLeafLabelVariable = event;\r\n    let labelVar = event;\r\n    if (!this.tree || !labelVar) return;\r\n    this.tree.eachLeafLabel(label => {\r\n      d3.select(label).text(data => {\r\n        let id = data.data.id;\r\n        let node = this.commonService.session.data.nodes.find(node => node.id == id);\r\n        if (node === undefined)\r\n          node = this.commonService.session.data.nodes.find(d => d._id === data.data.id);\r\n        return node[labelVar];\r\n      }).attr('dx', 8)\r\n    });\r\n  }\r\n\r\n  onLeafTooltipVariableChange(event) {\r\n    this.SelectedLeafTooltipVariable = event;\r\n    let labelVar = event;\r\n    if (!this.tree || !labelVar || labelVar == 'None') return;\r\n    this.tree.eachLeafNode((circle, data) => {\r\n      let node = this.commonService.session.data.nodes.find(d => d.id === data.data.id);\r\n      if (node === undefined)\r\n        node = this.commonService.session.data.nodes.find(d => d._id === data.data.id);\r\n      d3.select(circle)\r\n        .attr('title', node[labelVar]);\r\n    });\r\n    this.styleTree();\r\n  }\r\n\r\n  onHorizontalStretchChange(event) {\r\n    let cached = this.tree.animation;\r\n    this.tree.setAnimation(0);\r\n    this.tree.setHStretch(this.SelectedHorizontalStretchVariable);\r\n    this.tree.setAnimation(cached);\r\n    this.styleTree();\r\n    this.settings['tree-horizontal-stretch'] = this.SelectedHorizontalStretchVariable \r\n  }\r\n\r\n  onVerticalStretchChange(event) {\r\n    let cached = this.tree.animation;\r\n    this.tree.setAnimation(0);\r\n    this.tree.setVStretch(this.SelectedVerticalStretchVariable);\r\n    this.tree.setAnimation(cached);\r\n    this.styleTree();\r\n    this.settings['tree-vertical-stretch'] = this.SelectedVerticalStretchVariable\r\n  }\r\n\r\n  // onBranchLabelShowChange(event) {\r\n  //   this.SelectedBranchLabelShowVariable = event;\r\n  //   this.tree.setBranchLabels(event);\r\n  //   this.styleTree();\r\n  // }\r\n\r\n  onBranchLabelSizeChange(event) {\r\n    this.SelectedBranchLabelSizeVariable = event;\r\n    this.styleTree();\r\n  }\r\n\r\n  onBranchDistanceShowChange(event) {\r\n    this.SelectedBranchDistanceShowVariable = event;\r\n    this.tree.setBranchDistances(event);\r\n    this.styleTree();\r\n    this.settings['tree-branch-distances-hide'] = !this.SelectedBranchDistanceShowVariable\r\n  }\r\n\r\n  onBranchDistanceSizeChange(event) {\r\n    this.SelectedBranchDistanceSizeVariable = event;\r\n    this.styleTree();\r\n    this.settings['tree-branch-distance-size'] = this.SelectedBranchDistanceSizeVariable\r\n  }\r\n\r\n  onBranchNodeShowChange(event) {\r\n    this.SelectedBranchNodeShowVariable = event;\r\n    this.tree.setBranchNodes(event);\r\n    this.styleTree();\r\n    this.settings['tree-branch-nodes-show'] = this.SelectedBranchNodeShowVariable\r\n  }\r\n\r\n  onBranchNodeSizeChange(event) {\r\n    this.SelectedBranchNodeSizeVariable = event;\r\n    this.styleTree();\r\n  }\r\n\r\n  // onBranchTooltipShowChange(event) {\r\n  //   this.SelectedBranchTooltipShowVariable = event;\r\n  //   this.styleTree();\r\n  // }\r\n\r\n  onLeafLabelTooltipShowChange(event) {\r\n    this.SelectedLeafTooltipShowVariable = event;\r\n    this.styleTree();\r\n    this.settings['tree-tooltip-show'] = this.SelectedLeafTooltipShowVariable\r\n  }\r\n\r\n  onLeafLabelShowChange(event) {\r\n    this.SelectedLeafLabelShowVariable = event;\r\n    this.tree.setLeafLabels(event);\r\n    this.styleTree();\r\n    this.settings['tree-leaf-label-show'] = this.SelectedLeafLabelShowVariable\r\n  }\r\n\r\n  showGlobalSettings() {\r\n    this.DisplayGlobalSettingsDialogEvent.emit('Styling');\r\n  }\r\n\r\n  onLeafNodeShowChange(event) {\r\n    this.SelectedLeafNodeShowVariable = event;\r\n    this.tree.setLeafNodes(this.SelectedLeafNodeShowVariable);\r\n    this.settings['tree-leaf-node-show'] = this.SelectedLeafNodeShowVariable\r\n  }\r\n\r\n  onLeafNodeSizeChange(event) {\r\n    this.SelectedLeafNodeSize = event;\r\n    this.styleTree();\r\n    this.settings['tree-leaf-node-size'] = this.SelectedLeafNodeSize\r\n  }\r\n\r\n  onLeafNodeSizeVariableChange(event) {\r\n    this.SelectedLeafNodeSizeVariable = event;\r\n    this.styleTree();\r\n    this.settings['tree-leaf-node-radius-variable'] = this.SelectedLeafNodeSizeVariable\r\n  }\r\n\r\n  onLeafLabelSizeChange(event) {\r\n    this.SelectedLeafLabelSizeVariable = event;\r\n    this.styleTree();\r\n    this.settings['tree-leaf-label-size'] = this.SelectedLeafLabelSizeVariable\r\n  }\r\n\r\n  onBranchSizeChange(event) {\r\n    this.SelectedBranchSizeVariable = event;\r\n    this.styleTree();\r\n  }\r\n\r\n  onCloseExport() {\r\n    this.isExportClosed = true;\r\n  }\r\n\r\n  updateNodeColors() {\r\n    let variable = this.visuals.phylogenetic.commonService.session.style.widgets['node-color-variable'];\r\n    const nodeColor = this.visuals.phylogenetic.commonService.session.style.widgets['node-color'];\r\n    this.SelectedLeafNodeColorVariable = nodeColor;\r\n    this.SelectedBranchNodeColorVariable = nodeColor;\r\n    this.SelectedSelectedLeafNodeColorVariable = this.settings['selected-color'];\r\n    this.styleTree();\r\n    const selectedColor = this.visuals.phylogenetic.commonService.GlobalSettingsModel.SelectedColorVariable;\r\n  }\r\n\r\n  updateLinkColor() {\r\n    const linkColor = this.visuals.phylogenetic.commonService.session.style.widgets['link-color'];\r\n    this.SelectedLinkColorVariable = linkColor;\r\n    this.styleTree();\r\n  }\r\n\r\n  saveImage(event) {\r\n    const thisTree = this.commonService.visuals.phylogenetic.tree;\r\n    const fileName = this.SelectedTreeImageFilenameVariable;\r\n    const treeId = 'phylocanvas';\r\n    const exportImageType = this.SelectedNetworkExportFileTypeListVariable;\r\n    const content = document.getElementById(treeId);\r\n    if (exportImageType === 'png') {\r\n      domToImage.toPng(content, {backgroundColor: '#ffffff'}).then(\r\n        dataUrl => {\r\n          saveAs(dataUrl, fileName);\r\n        });\r\n    } else if (exportImageType === 'jpeg') {\r\n      domToImage.toJpeg(content, { quality: 0.85 }).then(\r\n        dataUrl => {\r\n          saveAs(dataUrl, fileName);\r\n        });\r\n    } else if (exportImageType === 'svg') {\r\n      const svgContent = this.exportService.unparseSVG(content);\r\n      const blob = new Blob([svgContent], { type: 'image/svg+xml;charset=utf-8' });\r\n      saveAs(blob, fileName);\r\n    }\r\n    console.log('Export Success!')\r\n\r\n  }\r\n\r\n  saveNewickString(event) {\r\n    const thisTree = this.commonService.visuals.phylogenetic.tree;\r\n    const newickBlob = new Blob([thisTree.data.toNewick(false)], { type: 'text/plain;charset=utf-8' });\r\n    saveAs(newickBlob, this.SelectedNewickStringFilenameVariable);\r\n  }\r\n\r\n\r\n  getContextLeftVal = (xPos) => {\r\n    if (xPos - 175 < 0) {\r\n      return xPos + 25;\r\n    } else {\r\n      return xPos - 175;\r\n    }\r\n  }\r\n\r\n  getContextTopVal = (yPos) => {\r\n    if (yPos > (this.svg.node().clientHeight - 125)) {\r\n      return yPos - 125;\r\n    } else {\r\n      return yPos + 25;\r\n    }\r\n  }\r\n\r\n  showContextMenu = (d) => {\r\n    d3.event.preventDefault();\r\n    this.hideTooltip();\r\n    const tree = this.tree;\r\n    let [x, y] = this.getRelativeMousePosition();\r\n    const leftVal = this.getContextLeftVal(x);\r\n    const topVal = this.getContextTopVal(y);\r\n\r\n    d3.select('#phylo-context-menu')\r\n      .style('z-index', 1000)\r\n      .style('display', 'block')\r\n      .style('opacity', 1)\r\n      .style('left', `${leftVal}px`)\r\n      .style('top', `${topVal}px`);\r\n    d3.select('#reroot').on('click', c => {\r\n      tree.setData(d[0].data.reroot());\r\n      this.styleTree();\r\n      this.hideContextMenu();\r\n    });\r\n    d3.select('#rotate').on('click', c => {\r\n      tree.setData(d[0].data.rotate().getRoot());\r\n      this.styleTree();\r\n      this.hideContextMenu();\r\n    });\r\n    d3.select('#flip').on('click', c => {\r\n      tree.setData(d[0].data.flip().getRoot());\r\n      this.styleTree();\r\n      this.hideContextMenu();\r\n    });\r\n    d3.select('#phylocanvas svg').on('click', c => {\r\n      this.hideContextMenu();\r\n    });\r\n  }\r\n\r\n  hideContextMenu = () => {\r\n    $('#phylo-context-menu').animate({ opacity: 0 }, 80, () => {\r\n      $(this).css('z-index', -1);\r\n    });\r\n  }\r\n\r\n  clickHandler = (d) => {\r\n    // d is treated elsewhere as an array with [0].data.id\r\n    const leafId = d?.[0]?.data?.id ?? d?.data?.id ?? d?.id;\r\n    if (!leafId) return;\r\n  \r\n    const ctrl = (d3 as any).event?.ctrlKey === true;\r\n  \r\n    const nodes = this.commonService.session.data.nodes;\r\n    const filtered = this.commonService.session.data.nodeFilteredValues;\r\n  \r\n    const setSelected = (id: string, selected: boolean) => {\r\n      nodes.filter(n => n._id === id).forEach(n => (n.selected = selected));\r\n      filtered.filter(n => n._id === id).forEach(n => (n.selected = selected));\r\n    };\r\n  \r\n    if (ctrl) {\r\n      const current = nodes.find(n => n._id === leafId)?.selected === true;\r\n      setSelected(leafId, !current);\r\n    } else {\r\n      // single select\r\n      nodes.forEach(n => setSelected(n._id, n._id === leafId));\r\n    }\r\n  \r\n    // Broadcast to all views (Table/2D/Bubble/etc)\r\n    $(document).trigger('node-selected');\r\n  \r\n    // If you want immediate visual feedback even before the event cycles:\r\n    this.updateNodeColors();\r\n  };\r\n  \r\n\r\n  showTooltip = (d) => {\r\n    if (this.SelectedLeafTooltipShowVariable) {\r\n      let htmlValue: any = this.SelectedLeafTooltipVariable;\r\n      if (d[0].children && d[0].children.length > 0) {return}\r\n      let [X, Y] = this.getRelativeMousePosition();\r\n\r\n      // $('#tooltip').css({ top: d3.event.pageY - 28, left: d3.event.pageX + 8, position: 'absolute' });\r\n\r\n      // const leftVal = X + 8;\r\n      // const topVal = Y - 28;\r\n      let node = this.commonService.session.data.nodes.find(n => n.id === d[0].data.id);\r\n      if (node === undefined) {\r\n        node = this.commonService.session.data.nodes.find(n => n._id === d[0].data.id);\r\n        if (htmlValue === \"id\")\r\n          htmlValue = \"_id\";\r\n      }\r\n      // Pre D3\r\n      //const leftVal = (d3 as any).event.pageX - 18;\r\n      //const topVal = (d3 as any).event.pageY - 8;\r\n      d3.select('#phyloTooltip')\r\n        .html(node[htmlValue])\r\n        .style('position', 'absolute')\r\n        .style('display', 'block')\r\n        .style('left', `${X+10}px`)\r\n        .style('top', `${Y+10}px`)\r\n        .style('z-index', 1000)\r\n        .transition().duration(100)\r\n        .style('opacity', 1)\r\n        .style('color', '#333333')\r\n        .style('background', '#f5f5f5')\r\n        .style('border', '1px solid #cccccc')\r\n        .style('border-radius', '.25rem')\r\n        .style('padding', '.25rem')\r\n        ;\r\n    }\r\n  }\r\n\r\n  hideTooltip = () => {\r\n    const tooltip = d3.select('#phyloTooltip');\r\n    tooltip\r\n      .transition().duration(100)\r\n      .style('opacity', 0)\r\n      .on('end', () => tooltip.style('z-index', -1));\r\n  }\r\n\r\n  /**\r\n   * @returns an array [X, Y] of the position of mouse relative to twodcomponent. Global position (i.e. d3.event.pageX) doesn't work for a dashboard\r\n   */\r\n  getRelativeMousePosition() {\r\n    let rect = d3.select('phylogeneticcomponent').node().getBoundingClientRect();\r\n    let X = d3.event.pageX - rect.left;\r\n    let Y = d3.event.pageY - rect.top; \r\n    return [X, Y];\r\n  }\r\n\r\n  applyStyleFileSettings() {\r\n  this.settings = this.commonService.session.style.widgets;\r\n\r\n  // Layout & geometry\r\n  const layout = this.settings['tree-layout-horizontal'] ? 'horizontal'\r\n               : this.settings['tree-layout-vertical'] ? 'vertical'\r\n               : this.settings['tree-layout-circular'] ? 'circular' : null;\r\n  if (layout && layout != this.SelectedTreeLayoutVariable) {\r\n      this.SelectedTreeLayoutVariable = layout;\r\n      this.tree.setLayout(layout);\r\n  }\r\n  const mode   = this.settings['tree-mode-square'] ? 'square'\r\n               : this.settings['tree-mode-smooth'] ? 'smooth'\r\n               : this.settings['tree-mode-straight'] ? 'straight' : null;\r\n  if (mode && mode != this.SelectedTreeModeVariable) {\r\n      this.SelectedTreeModeVariable = mode;\r\n      this.tree.setMode(mode);\r\n  }\r\n\r\n  if (this.settings['tree-type'] && this.settings['tree-type'] != this.SelectedTreeTypeVariable) {\r\n    this.SelectedTreeTypeVariable = this.settings['tree-type'];\r\n    this.tree.setType(this.settings['tree-type']);\r\n  }\r\n\r\n  if (this.settings['tree-horizontal-stretch'] != this.SelectedHorizontalStretchVariable) {\r\n    this.SelectedHorizontalStretchVariable = this.settings['tree-horizontal-stretch']\r\n    this.tree.setHStretch(this.settings['tree-horizontal-stretch']);\r\n  }\r\n  if (this.settings['tree-vertical-stretch'] != this.SelectedVerticalStretchVariable) {\r\n    this.SelectedVerticalStretchVariable = this.settings['tree-vertical-stretch']\r\n    this.tree.setVStretch(this.settings['tree-vertical-stretch']);\r\n  }\r\n\r\n  // Branches\r\n  if (this.settings['tree-branch-distances-hide'] == this.SelectedBranchDistanceShowVariable) this.SelectedBranchDistanceShowVariable = !this.settings['tree-branch-distances-hide']\r\n  if (this.settings['tree-branch-distance-size'] != this.SelectedBranchDistanceSizeVariable) this.SelectedBranchDistanceSizeVariable = this.settings['tree-branch-distance-size']\r\n  if (this.settings['tree-branch-nodes-show'] != this.SelectedBranchNodeShowVariable) this.SelectedBranchNodeShowVariable = this.settings['tree-branch-nodes-show']\r\n\r\n  // Leaf Labels\r\n  if (this.settings['tree-leaf-label-show'] != this.SelectedLeafLabelShowVariable) this.SelectedLeafLabelShowVariable = this.settings['tree-leaf-label-show']\r\n  if (this.settings['tree-leaf-label-size'] != this.SelectedLeafLabelSizeVariable) this.SelectedLeafLabelSizeVariable = this.settings['tree-leaf-label-size']\r\n\r\n  // Leaf Nodes\r\n  if (this.settings['tree-leaf-node-show'] != this.SelectedLeafNodeShowVariable) this.SelectedLeafNodeShowVariable = this.settings['tree-leaf-node-show']\r\n  if (this.settings['tree-leaf-node-size'] != this.SelectedLeafNodeSize) this.SelectedLeafNodeSize = this.settings['tree-leaf-node-size']\r\n  if (this.settings['tree-leaf-node-radius-variable'] != this.SelectedLeafNodeSizeVariable) this.SelectedLeafNodeSizeVariable = this.settings['tree-leaf-node-radius-variable']\r\n\r\n  if(this.settings['tree-tooltip-show'] != this.SelectedLeafTooltipShowVariable) this.SelectedLeafTooltipShowVariable = this.settings['tree-tooltip-show']\r\n\r\n  // Colors\r\n  if (this.settings['node-color']) {\r\n    this.SelectedLeafNodeColorVariable = this.settings['node-color'];\r\n    this.SelectedBranchNodeColorVariable = this.settings['node-color'];\r\n  }\r\n  if (this.settings['selected-color']) {\r\n    this.SelectedSelectedLeafNodeColorVariable = this.settings['selected-color'];\r\n  }\r\n  if (this.settings['link-color']) {\r\n    this.SelectedLinkColorVariable = this.settings['link-color'];\r\n  }\r\n\r\n  // Final redraw\r\n  this.styleTree();\r\n  this.openCenter()\r\n}\r\n\r\n  updateVisualization() { console.warn('updatevisualization')}\r\n  onRecallSession() { console.warn('recallsession')}\r\n  onLoadNewData() { console.warn('loadnewdata')}\r\n  onFilterDataChange() { console.warn('filterdatachange')} \r\n\r\n}\r\n\r\nexport namespace PhylogeneticComponent {\r\n  export const componentTypeName = 'Phylogenetic Tree';\r\n}\r\n","import { Injector, Component, Output, EventEmitter, OnInit, ElementRef, ChangeDetectorRef, Inject, ViewChild, OnDestroy } from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { CommonService } from '@app/contactTraceCommonServices/common.service';\r\nimport * as saveAs from 'file-saver';\r\n//import * as domToImage from 'html-to-image';\r\nimport { saveSvgAsPng } from 'save-svg-as-png';\r\nimport { SelectItem } from 'primeng/api';\r\nimport { DialogSettings } from '@app/helperClasses/dialogSettings';\r\nimport * as _ from 'lodash';\r\n//import * as d3 from 'd3';\r\nimport * as d3sankey from 'd3-sankey';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\n//import { MultiSelectModule } from 'primeng/multiselect';\r\nimport type { SankeyNode, SankeyLink } from './sankey-types';\r\nimport { ExportService } from '@app/contactTraceCommonServices/export.service';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport { CommonStoreService } from '@app/contactTraceCommonServices/common-store.services';\r\n\r\n\r\n@Component({\r\n  selector: 'SankeyComponent',\r\n  templateUrl: './sankey.component.html',\r\n  styleUrls: ['./sankey.component.scss']\r\n})\r\nexport class SankeyComponent extends BaseComponentDirective implements OnInit, OnDestroy {\r\n\r\n  @Output() DisplayGlobalSettingsDialogEvent = new EventEmitter();\r\n  @ViewChild('sankeySVG') sankeySVG: ElementRef;\r\n  private destroy$ = new Subject<void>();\r\n  \r\n  viewActive: boolean = true;\r\n\r\n  draggingNode = null;\r\n  sankey = d3sankey.sankey();\r\n  ShowSankeyExportPane = false;\r\n  ShowSankeySettingsPane = false;\r\n  IsDataAvailable = false;\r\n\r\n  FieldList: SelectItem[] = [];\r\n  layerPositions: number[] = [];\r\n  layerColors: string[] = [];\r\n\r\n  tooltipData: {'key': string, 'value': string}[];\r\n  tooltipX: number;\r\n  tooltipY: number;\r\n  tooltipVisible: boolean = false;\r\n  tooltipLeft: boolean = false; // whether to use left or right when positioning tooltip\r\n\r\n  labelFontSize: number = 16;\r\n  axisFontSize: number = 24;\r\n\r\n  NetworkExportFileTypeList: object = [\r\n    { label: 'png', value: 'png' },\r\n    //{ label: 'jpeg', value: 'jpeg' },\r\n    { label: 'svg', value: 'svg' }\r\n  ];\r\n\r\n  SelectedSankeyImageFilename = 'sankey_export'\r\n  SelectedNetworkExportFileTypeListVariable = 'png';\r\n  SankeyExportScaleVariable: number = 1;\r\n\r\n  svgWidth: number = 1000;\r\n  svgHeight: number = 800;\r\n  widthOffset: number = 100;\r\n  labelHeight: number = 18.75;\r\n  CalculatedResolution: string = ((this.svgWidth * this.SankeyExportScaleVariable) + ' x ' + (\r\n    this.svgHeight * this.SankeyExportScaleVariable) + 'px');\r\n\r\n  ShowAdvancedExport = true;\r\n  SankeyFieldNames: string[] = [];\r\n  SelectedFieldName: string = \"\";\r\n\r\n  SankeyExportDialogSettings: DialogSettings = new DialogSettings('#sankey-settings-pane', false);\r\n\r\n  data: {nodes: SankeyNode[], links: SankeyLink[]} = {nodes: [], links: []}\r\n  LinkColorOptions = ['Source', 'Target', 'Uniform']\r\n  SelectedColorOption: \"Source\" | \"Target\" | \"Uniform\" = \"Source\"\r\n  SelectedColorForUniform: string = \"#aa002d\"\r\n\r\n  constructor(injector: Injector,\r\n    private eventManager: EventManager,\r\n    public commonService: CommonService,\r\n    private exportService: ExportService,\r\n    @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer, \r\n    elRef: ElementRef,\r\n    private cdref: ChangeDetectorRef,\r\n    private store: CommonStoreService,\r\n    private gtmService: GoogleTagManagerService) {\r\n\r\n    super(elRef.nativeElement);\r\n\r\n    this.layerColors = _.clone(this.commonService.session.style.nodeColors)\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.commonService.session.data['nodeFields'].map((d, i) => {\r\n      this.FieldList.push(\r\n        {\r\n          label: this.commonService.capitalize(d.replace('_', '')),\r\n          value: d\r\n        });\r\n    });\r\n\r\n   // @ts-ignore\r\n   this.goldenLayoutComponentResize()\r\n\r\n    // Set the sankey diagram properties\r\n    this.sankey\r\n      .nodeWidth(25)\r\n      .nodePadding(10)\r\n      .size([this.svgWidth-this.widthOffset, this.svgHeight-100])\r\n\r\n    this.container.on('resize', () => { this.goldenLayoutComponentResize() })\r\n    this.container.on('hide', () => { \r\n      this.viewActive = false; \r\n      this.cdref.detectChanges();\r\n    })\r\n    this.container.on('show', () => { \r\n      this.viewActive = true; \r\n      this.cdref.detectChanges();\r\n    })\r\n\r\n    // remove this after initial\r\n    //this.SankeyFieldNames = ['WHO_class', 'cluster', 'Lineage'] // can be pre-set when testing\r\n    this.updateGraph();\r\n\r\n    this.store.clusterUpdate$.pipe(takeUntil(this.destroy$)).subscribe(() => {\r\n      if (this.SankeyFieldNames.includes('cluster') && this.SankeyFieldNames.length > 1) {\r\n        this.updateGraph();\r\n        this.cdref.detectChanges();\r\n      }\r\n    })\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  /**\r\n   * Updates the size of the svg\r\n   */\r\n  goldenLayoutComponentResize() {\r\n    $('#sankey-container').height($('sankeycomponent').height() - 70);\r\n    $('#sankey-container').width($('sankeycomponent').width() - 20);\r\n\r\n    this.svgWidth = $('#sankey-container').width();\r\n    this.svgHeight = $('#sankey-container').height();\r\n    \r\n    this.sankey.size([this.svgWidth-this.widthOffset, this.svgHeight-100])\r\n\r\n    if (this.data.nodes.length > 0) this.sankeyGO();\r\n  }\r\n\r\n  /** Updates the value of widthOffset which calculated based on length of longest label in the last column. The widithOffset value\r\n   * is used to determine the width to give to the sankey package (width = this.svgWidth - this.widthOffset)\r\n   */\r\n  updateWidthOffset() {\r\n    let longestLastLabel = '';\r\n    this.data.nodes.forEach(node => {\r\n      if (node.layer+1 == this.SankeyFieldNames.length && node.name.length > longestLastLabel.length) longestLastLabel = node.name\r\n    })\r\n    \r\n    let { width, height }= this.getTextSize(longestLastLabel, this.labelFontSize)\r\n    this.widthOffset = width + 10;\r\n    this.labelHeight = height;\r\n\r\n    this.sankey.size([this.svgWidth-this.widthOffset, this.svgHeight-100])\r\n  }\r\n\r\n  getTextSize(text: string, fontSize: number): {width: number, height: number} {\r\n    const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n    svg.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\r\n    svg.setAttribute('style', 'position:absolute; top:-9999px; left:-9999px; visibility:hidden;');\r\n    document.body.appendChild(svg);\r\n\r\n    const textElem = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\r\n    textElem.setAttribute(\"font-size\", `${fontSize}px`);\r\n    textElem.setAttribute(\"font-family\", 'roboto');\r\n    textElem.textContent = text;\r\n\r\n    svg.appendChild(textElem);\r\n    const bbox = textElem.getBBox();\r\n\r\n    document.body.removeChild(svg); // cleanup\r\n    return {width: bbox.width, height: bbox.height};\r\n  }\r\n\r\n  onlabelFontSizeChange() {\r\n    if (this.SankeyFieldNames.length > 1) {\r\n      this.updateWidthOffset();\r\n      this.sankeyGO();\r\n      //console.log(this.widthOffset, this.sankey.size());\r\n    }\r\n    console.log(this.labelFontSize);\r\n  }\r\n\r\n  onaxisFontSizeChange() {\r\n    console.log(this.axisFontSize);\r\n  }\r\n\r\n  getAxisTextAnchor(i: number): 'start'|'middle'|'end' {\r\n    if (i==0) {\r\n      return 'start';\r\n    } else if (i < this.SankeyFieldNames.length-1) {\r\n      return 'middle';\r\n    } else {\r\n      let { width: lastAxisLabelWidth } = this.getTextSize(this.SankeyFieldNames[i], this.axisFontSize)\r\n      if (lastAxisLabelWidth/2 > this.widthOffset) return 'end'\r\n      else return 'middle';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param d link\r\n   * @returns Link color for the link based on this.SelectedColorOption\r\n   */\r\n  getLinkColor(d) {\r\n    if (this.SelectedColorOption == \"Source\") return d.source.color\r\n    else if (this.SelectedColorOption == \"Target\") return d.target.color\r\n    else return this.SelectedColorForUniform;\r\n  }\r\n\r\n  /**\r\n   * @returns a string representing the svg path d variable for the link\r\n   */\r\n  getLinkPathDefinition(link): string {\r\n    return d3sankey.sankeyLinkHorizontal()(link);\r\n  }\r\n\r\n  /**\r\n   * @returns text for how much to translates the rect for each node in the svg\r\n   */\r\n  getNodeTransform(node:SankeyNode): string {\r\n    return `translate(${node.x0}, ${node.y0})`\r\n  }\r\n\r\n  /**\r\n   * Updates the order of rows when they are reordered in the setting menu\r\n   */\r\n  reorderRows(event) {\r\n    let [temp] = this.layerColors.splice(event.dragIndex, 1)\r\n    this.layerColors.splice(event.dropIndex, 0, temp);\r\n\r\n    this.updateGraph();\r\n  }\r\n\r\n  /**\r\n   * Updates the color of the nodes within a column (and links if appropriate)\r\n   */\r\n  updateColors(index: number) { \r\n    this.data.nodes.filter(node => node.layer == index).forEach(node => node.color = this.layerColors[index]);\r\n  }\r\n\r\n  /**\r\n   * Updates the position of the links coming out from the node when the node is dragged.\r\n   * Adapted from d3-sankey and d3noob's sankey implementation\r\n   */\r\n  updateLinkPosition() {\r\n    this.data.nodes.forEach(function(node) {\r\n      node.sourceLinks.sort(ascendingTargetDepth);\r\n      node.targetLinks.sort(ascendingSourceDepth);\r\n    });\r\n    this.data.nodes.forEach(function(node) {\r\n      let offsetY = 0\r\n      node.sourceLinks.forEach(function(link) {\r\n        link.y0 = node.y0 + offsetY + link.width/2 \r\n        offsetY += link.width\r\n      });\r\n      offsetY = 0;\r\n      node.targetLinks.forEach(function(link) {\r\n        link.y1 = node.y0 + offsetY + link.width/2\r\n        offsetY += link.width\r\n      });\r\n    });\r\n\r\n    function ascendingSourceDepth(a, b) {\r\n      return a.source.y0 - b.source.y0;\r\n    }\r\n\r\n    function ascendingTargetDepth(a, b) {\r\n      return a.target.y1 - b.target.y1;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param nodes nodes to be repositions, usually in the same layer\r\n   * Repositions nodes in a layer so that they aren't on top of each other; based on resolveCollisions in d3-sankey package, but that function isn't publicly accessible\r\n   */\r\n  resolveColisions(nodes: SankeyNode[]) {\r\n    let py = this.sankey.nodePadding() || 10;\r\n\r\n    // first sort the nodes based on midpoints\r\n    nodes.sort((a, b) => (a.y0 + a.y1)/2 - (b.y0 + b.y1)/2);\r\n\r\n    // for each node, ensure it within the bounds of the svg then call resolveCollision helper functions\r\n    nodes.forEach((subject, i) => {\r\n      if (subject.y0 < 0) {\r\n        let h = subject.y1 - subject.y0;\r\n        subject.y0 = 0\r\n        subject.y1 = h;\r\n      }\r\n      if (subject.y1 > this.svgHeight - 70) {\r\n        let h = subject.y1 - subject.y0;\r\n        subject.y1 = this.svgHeight - 70\r\n        subject.y0 = subject.y1 - h;\r\n      }\r\n      this.resolveCollisionsBottomToTop(nodes, subject.y0 - py, i - 1, py);\r\n      this.resolveCollisionsTopToBottom(nodes, subject.y1 + py, i + 1, py);\r\n    })\r\n  }\r\n\r\n  // Push any overlapping nodes down.\r\n  resolveCollisionsTopToBottom(nodes, y, i, py) {\r\n    for (; i < nodes.length; i++) {\r\n      const node = nodes[i];\r\n      const dy = (y - node.y0);\r\n      if (dy > 1e-6) node.y0 += dy, node.y1 += dy;\r\n      y = node.y1 + py;\r\n    }\r\n  }\r\n\r\n  // Push any overlapping nodes up.\r\n  resolveCollisionsBottomToTop(nodes, y, i, py) {\r\n    for (; i >= 0; i--) {\r\n      const node = nodes[i];\r\n      const dy = (node.y1 - y);\r\n      if (dy > 1e-6) node.y0 -= dy, node.y1 -= dy;\r\n      y = node.y0 - py;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates the value of this.draggingNode for the node the currently being dragged\r\n   */\r\n  startDrag(node:SankeyNode) {\r\n    this.draggingNode = node;\r\n    //event.preventDefault();\r\n  }\r\n\r\n  /**\r\n   * Updates the position of the node (this.draggingNode) when a node is being dragged around the csv\r\n   */\r\n  move(event) {\r\n    if (this.draggingNode != null) {\r\n      let height = this.draggingNode.y1 - this.draggingNode.y0;\r\n      this.draggingNode.y0 = event.offsetY - height/2;\r\n      this.draggingNode.y1 = this.draggingNode.y0 + height;\r\n      this.updateLinkPosition();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Called when dragging is complete. Resolves any collision with the nodes, updates Link positions, and resets this.draggingNode\r\n   */\r\n  endDrag() {\r\n    if (this.draggingNode) {\r\n      this.resolveColisions(this.data.nodes.filter(node => node.layer == this.draggingNode.layer))\r\n      this.updateLinkPosition();\r\n      this.draggingNode = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates CalculatedResolution variable to string such as '1250 x 855px' based on ImageDimensions and SankeyExportScaleVariable. \r\n   * This is called anytime SankeyExportScaleVariable is updated.\r\n   */\r\n  updateCalculatedResolution() {\r\n    this.CalculatedResolution = (Math.round((this.svgWidth) * this.SankeyExportScaleVariable) + \" x \" + Math.round((this.svgHeight) * this.SankeyExportScaleVariable) + \"px\");\r\n    this.cdref.detectChanges();\r\n  }\r\n \r\n  /**\r\n   * Updates the tooltipData and shows the tooltip. Also updates the opacity of the appropriate links\r\n   */\r\n  showTooltip(event, element, elementType: 'Link' | 'Node') {\r\n    //console.log(event);\r\n    if (event.offsetX > this.svgWidth -200) {\r\n      this.tooltipLeft = false;\r\n      this.tooltipX = this.svgWidth - event.offsetX + 15;\r\n    } else {\r\n      this.tooltipLeft = true;\r\n      this.tooltipX = event.offsetX + 30;\r\n    }\r\n    this.tooltipY = event.offsetY + 40;\r\n    this.tooltipVisible = true;\r\n\r\n    if (elementType == 'Link') {\r\n      element.opacity = 0.8;\r\n      this.tooltipData = [\r\n        {'key': 'Source', 'value': element.source.name},\r\n        {'key': 'Target', 'value': element.target.name},\r\n        {'key': 'Count', 'value': element.value}\r\n      ]\r\n\r\n    } else {\r\n      element.sourceLinks.forEach(link => link.opacity = 0.8)\r\n      element.targetLinks.forEach(link => link.opacity = 0.8)\r\n      this.tooltipData = [\r\n        {'key': this.SankeyFieldNames[element.layer], 'value': element.name},\r\n        {'key': 'Count', 'value': element.value}\r\n      ]\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hides the tooltip and resets the link.opactity\r\n   */\r\n  hideTooltip() {\r\n    this.data.links.forEach(link => link.opacity = 0.5);\r\n    this.tooltipVisible = false;    \r\n  }\r\n\r\n  /**\r\n   * Updates sankey graph by update the data and then the sankey\r\n   */\r\n  updateGraph() {\r\n    if(this.SankeyFieldNames.length === 0) {\r\n      this.openSettings();\r\n    } else if (this.SankeyFieldNames.length < 2) {\r\n      this.data = {nodes: [], links: []}\r\n    } else {\r\n      this.createSankeyData(this.SankeyFieldNames);\r\n      this.updateWidthOffset();\r\n      this.sankeyGO();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Feed this.data into sankey in order to generates full sankey objects that can be used to genereate the svg. Also updates the position of the labels for each layer of the sankey\r\n   */\r\n  sankeyGO() {\r\n    this.sankey(this.data);\r\n    this.data.links.forEach(link => link.opacity = 0.5);\r\n\r\n    this.layerPositions = []\r\n    for (let i = 0; i < this.SankeyFieldNames.length; i++) {\r\n      this.layerPositions.push(i == 0 ? 0 : this.data.nodes.find(node => node.layer == i).x0+12.5)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generates this.data based on data and sankeyFields that are selected\r\n   */\r\n  createSankeyData(sankeyFields: string[]): void {\r\n    const nodes: SankeyNode[] = [];\r\n    let nodeIndex = 0;\r\n    const edges: SankeyLink[] = [];\r\n    //const order: string[][][] = [[[]]];\r\n    const variables: string[][] = [];\r\n    for(let i=0; i<sankeyFields.length; i++){\r\n      const fieldValues = this.makeVariableArray(sankeyFields[i]);\r\n      const variableCounts = this.getVariableCounts(fieldValues);\r\n      const variableValues = Object.keys(variableCounts);\r\n      variables.push(variableValues);\r\n      for(let j=0; j<variableValues.length; j++){\r\n        nodes.push({\"index\": nodeIndex, \"name\": variableValues[j], layer: i, color: this.layerColors[i]})\r\n        nodeIndex += 1;\r\n      }\r\n    }\r\n    for(let i=1; i<sankeyFields.length; i++){\r\n      const firstField = sankeyFields[i-1];\r\n      const secondField = sankeyFields[i];\r\n      for(let q=0; q<variables[i-1].length; q++){\r\n        let sourceIndex = nodes.find(node => node.layer==i-1 && node.name ==variables[i-1][q]).index\r\n        for(let r=0; r<variables[i].length; r++){\r\n          let targetIndex = nodes.find(node => node.layer==i && node.name ==variables[i][r]).index\r\n          const queryObj = {\r\n            firstField: firstField,\r\n            firstValue: variables[i-1][q],\r\n            secondField: secondField,\r\n            secondValue: variables[i][r],\r\n          }\r\n          const edgeVal: number = this.getEdgeValue(queryObj);\r\n          edges.push({source: sourceIndex, target: targetIndex, value: edgeVal});\r\n        }\r\n      }\r\n    }\r\n    // console.log(nodes);\r\n    // console.log(edges);\r\n    // @ts-ignore\r\n    this.data = {nodes: nodes, links: edges}\r\n  }\r\n\r\n  getEdgeValue(queryObj: object): number {\r\n    // console.log(`${queryObj[\"firstField\"]} ${queryObj[\"firstValue\"]} ${queryObj[\"secondField\"]} ${queryObj[\"secondValue\"]}`);\r\n    const nodeCopy: object[] = _.cloneDeep(this.commonService.session.data.nodes);\r\n    const filteredNodes = nodeCopy.filter(node => String(node[queryObj[\"firstField\"]]) === String(queryObj[\"firstValue\"]) && String(node[queryObj[\"secondField\"]]) === String(queryObj[\"secondValue\"]));\r\n    return filteredNodes.length;\r\n  }\r\n\r\n  getVariableCounts(dataColumn: string[] | number[]): object {\r\n    // @ts-ignore\r\n    const counts = dataColumn.reduce((acc, value) => {\r\n      acc[value] = (acc[value] || 0) + 1;\r\n      return acc;\r\n    }, {});\r\n    // @ts-ignore\r\n    //delete counts.null;\r\n    return counts;\r\n  }\r\n\r\n  makeVariableArray(fieldName: string): string[] | number[] {\r\n    const nodeCopy: object[] = _.cloneDeep(this.commonService.session.data.nodes);\r\n    let fieldValues: string[] | number[] = [];\r\n    for(let i=0; i<nodeCopy.length; i++) {\r\n      const item: object = nodeCopy[i];\r\n      // @ts-ignore\r\n      fieldValues.push(item[fieldName]);\r\n    }\r\n    return fieldValues;\r\n  }\r\n\r\n  addSelectedField(): void {\r\n    if (this.SelectedFieldName == null || this.SelectedFieldName == undefined || this.SelectedFieldName == '') {\r\n      return;\r\n    }\r\n    if (this.SankeyFieldNames.length < 5){\r\n      this.SankeyFieldNames.push(this.SelectedFieldName);\r\n    }\r\n    this.updateGraph();\r\n  }\r\n\r\n  fieldListFull(): boolean {\r\n    if(this.SankeyFieldNames.length < 5) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  removeField(value): void {\r\n    const index = this.SankeyFieldNames.indexOf(value);\r\n    this.SankeyFieldNames.splice(index, 1);\r\n    this.updateGraph();\r\n  }\r\n\r\n\r\n  /**\r\n   * Opens the export dialog box\r\n   */\r\n  openExport(): void {\r\n    this.ShowSankeyExportPane = true;\r\n    this.updateCalculatedResolution();\r\n    //this.visuals.microbeTrace.GlobalSettingsLinkColorDialogSettings.setStateBeforeExport();\r\n    //this.visuals.microbeTrace.GlobalSettingsNodeColorDialogSettings.setStateBeforeExport();\r\n  }\r\n\r\n\r\n  openSettings(): void {\r\n    this.SankeyExportDialogSettings.setVisibility(true);\r\n  }\r\n  openCenter(): void {}\r\n\r\n  exportVisualization(): void {\r\n    //const domId = 'sankey-container';\r\n    const exportImageType = this.SelectedNetworkExportFileTypeListVariable ;\r\n    //const content = document.getElementById(domId);\r\n    if (exportImageType === 'png') {\r\n      window.devicePixelRatio = 1;\r\n      saveSvgAsPng(this.sankeySVG.nativeElement, this.SelectedSankeyImageFilename + '.' + this.SelectedNetworkExportFileTypeListVariable, {\r\n          scale: this.SankeyExportScaleVariable,\r\n          backgroundColor: \"#ffffff\",\r\n          encoderType: 'image/' + this.SelectedNetworkExportFileTypeListVariable,\r\n      });\r\n    //   domToImage.toPng(content).then(\r\n    //     dataUrl => {\r\n    //       saveAs(dataUrl, this.SelectedSankeyImageFilename);\r\n    //   });\r\n    // } else if (exportImageType === 'jpeg') {\r\n    //     domToImage.toJpeg(content, { quality: 0.85 }).then(\r\n    //       dataUrl => {\r\n    //         saveAs(dataUrl, this.SelectedSankeyImageFilename);\r\n    //       });\r\n    } else if (exportImageType === 'svg') {\r\n        let svgContent = this.exportService.unparseSVG(this.sankeySVG.nativeElement);\r\n        const blob = new Blob([svgContent], { type: 'image/svg+xml;charset=utf-8' });\r\n        saveAs(blob, this.SelectedSankeyImageFilename);\r\n    }\r\n\r\n    this.ShowSankeyExportPane = false;\r\n  }\r\n\r\n}\r\n\r\nexport namespace SankeyComponent {\r\n  export const componentTypeName = 'Sankey';\r\n}","import {\r\n    Injector,\r\n    Component,\r\n    Output,\r\n    OnChanges,\r\n    SimpleChange,\r\n    EventEmitter,\r\n    OnInit,\r\n    ViewChild,\r\n    ChangeDetectorRef,\r\n    OnDestroy,\r\n    ElementRef,\r\n    Inject\r\n  } from '@angular/core';\r\n  import { AppComponentBase } from '@shared/common/app-component-base';\r\n  import { EventManager } from '@angular/platform-browser';\r\n  import { CommonService } from '../../contactTraceCommonServices/common.service';\r\n  import { Table } from 'primeng/table';\r\n  import { MicobeTraceNextPluginEvents } from '../../helperClasses/interfaces';\r\n  import { MicrobeTraceNextVisuals } from '../../microbe-trace-next-plugin-visuals';\r\n  import { SelectItem } from 'primeng/api';\r\n  import { BaseComponentDirective } from '@app/base-component.directive';\r\n  import { ComponentContainer } from 'golden-layout';\r\n  import * as saveAs from 'file-saver';\r\n  import { GoogleTagManagerService } from 'angular-google-tag-manager';\r\n  import { Subject, takeUntil } from 'rxjs';\r\nimport { CommonStoreService } from '@app/contactTraceCommonServices/common-store.services';\r\n  \r\n  /**\r\n   * @title Complex Example\r\n   */\r\n  @Component({\r\n    selector: 'TableComponent',\r\n    templateUrl: './table-plugin-component.html',\r\n    styleUrls: ['./table-plugin-component.less']\r\n  })\r\n  export class TableComponent\r\n    extends BaseComponentDirective\r\n    implements OnInit, OnDestroy, MicobeTraceNextPluginEvents {\r\n    @Output() DisplayGlobalSettingsDialogEvent = new EventEmitter();\r\n    private destroy$ = new Subject<void>();\r\n  \r\n    viewActive = true;\r\n    SelectedTableExportFilenameVariable = '';\r\n  \r\n    TableExportFileTypeList: any = [\r\n      { label: 'xlsx', value: 'xlsx' },\r\n      { label: 'csv', value: 'csv' }\r\n    ];\r\n    exportColumnOptions: any = [\r\n      { label: 'All', value: true },\r\n      { label: 'Current', value: false }\r\n    ];\r\n    exportAllColumns = false;\r\n  \r\n    dataSetView: SelectItem[];\r\n    dataSetViewSelected: string;\r\n  \r\n    SelectedTableExportFileTypeListVariable = 'csv';\r\n  \r\n    SelectedTextSizeVariable: any = 14;\r\n  \r\n    ShowTableExportPane = false;\r\n    ShowTableSettingsPane = false;\r\n    IsDataAvailable = false;\r\n    table: any;\r\n    meta: any = ['selected', 'visible'];\r\n    TableColumns: any[] = [];\r\n    SelectableTableColumns: any[] = [];\r\n    AvailableColumns: any[] = [];\r\n    TableDatas: TableData[] = [];\r\n    SelectedTableData: TableData;\r\n    TableDataSelection: any[] = [];\r\n    TableType: 'node' | 'link' | 'cluster' = 'node';\r\n    filterTypes: FilterType[] = [\r\n      { label: 'Contains', value: 'contains' },\r\n      { label: '=', value: 'equals' },\r\n      { label: '!=', value: 'notEquals' },\r\n      { label: 'Starts With', value: 'startsWith' },\r\n      { label: 'Ends With', value: 'endsWith' },\r\n      { label: 'In', value: 'in' },\r\n      { label: '<', value: 'lt' },\r\n      { label: '<=', value: 'lte' },\r\n      { label: '>', value: 'gt' },\r\n      { label: '>=', value: 'gte' }\r\n    ];\r\n  \r\n    selectedSize = '';\r\n    sizes = [\r\n      { name: 'Small', class: 'p-datatable-sm' },\r\n      { name: 'Normal', class: '' },\r\n      { name: 'Large', class: 'p-datatable-lg' }\r\n    ];\r\n  \r\n    scrollHeight: string;\r\n    tableStyle;\r\n    selectedRows = 10;\r\n  \r\n    private visuals: MicrobeTraceNextVisuals;\r\n  \r\n    /**\r\n     * Unique key written to every row once, capturing its firstseen position.\r\n     * This is never exposed in the column list.\r\n     */\r\n    private readonly _original_index_key = '_original_index';\r\n  \r\n    @ViewChild('dt') dataTable: Table;\r\n  \r\n    constructor(\r\n      injector: Injector,\r\n      @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken)\r\n      private container: ComponentContainer,\r\n      elRef: ElementRef,\r\n      private cdref: ChangeDetectorRef,\r\n      private eventManager: EventManager,\r\n      private commonService: CommonService,\r\n      private store: CommonStoreService,\r\n      private gtmService: GoogleTagManagerService\r\n    ) {\r\n      super(elRef.nativeElement);\r\n  \r\n      this.visuals = commonService.visuals;\r\n      this.commonService.visuals.tableComp = this;\r\n    }\r\n  \r\n    ngOnInit() {\r\n      this.gtmService.pushTag({\r\n        event: 'page_view',\r\n        page_location: '/table',\r\n        page_title: 'Table View'\r\n      });\r\n      this.dataSetView = [];\r\n      this.dataSetView.push({ label: 'Nodes', value: 'Node' });\r\n      this.dataSetView.push({ label: 'Links', value: 'Link' });\r\n      this.dataSetView.push({ label: 'Clusters', value: 'Cluster' });\r\n  \r\n      this.dataSetViewSelected = 'Node';\r\n  \r\n      this.IsDataAvailable =\r\n        this.commonService.session.data.nodes.length == 0 ? false : true;\r\n  \r\n      if (this.IsDataAvailable) {\r\n        if (!this.SelectedTableData || this.SelectedTableData.tableColumns.length == 0) {\r\n          this.createTable(this.dataSetViewSelected);\r\n        }\r\n      }\r\n  \r\n      let that = this;\r\n  \r\n      $(document).on('node-selected', function () {\r\n        if (that.viewActive) {\r\n          that.visuals.tableComp.setSelectedNodes();\r\n        }\r\n      });\r\n  \r\n      window.addEventListener('node-selected', () => {\r\n        if (\r\n          !this.visuals.microbeTrace.homepageTabs.find(\r\n            (x) => x.isActive && x.label === 'Table'\r\n          )\r\n        ) {\r\n          this.visuals.tableComp.setSelectedNodes();\r\n        }\r\n      });\r\n  \r\n      // offsets: 70 table-wrapper padding-top, 60 p-paginator, 10 table-wrapper padding-bottom\r\n      this.scrollHeight =\r\n        ($('tableComponent').height() - 70 - 60 - 10) + 'px';\r\n      let width = $('tableComponent').width() - 23 + 'px';\r\n      this.tableStyle = {\r\n        'max-width': width,\r\n        display: 'block'\r\n      };\r\n  \r\n      this.container.on('resize', () => {\r\n        this.goldenLayoutComponentResize();\r\n      });\r\n      this.container.on('hide', () => {\r\n        this.viewActive = false;\r\n        this.cdref.detectChanges();\r\n      });\r\n      this.container.on('show', () => {\r\n        this.viewActive = true;\r\n        this.setSelectedNodes();\r\n        this.cdref.detectChanges();\r\n      });\r\n\r\n    this.store.clusterUpdate$.pipe(takeUntil(this.destroy$)).subscribe(() => {\r\n        this.createTable(this.dataSetViewSelected);\r\n    })\r\n    }\r\n  \r\n    /**\r\n     * Exports table\r\n     *\r\n     * For exporting as excel file it calls this.saveAsExcelFile();\r\n     *\r\n     * For exporting as a csv it uses exportCSV() which is built into primeNG table object\r\n     */\r\n    exportVisualization() {\r\n      if (this.SelectedTableExportFileTypeListVariable == 'xlsx') {\r\n        this.saveAsExcelFile();\r\n      } else {\r\n        this.dataTable.exportFilename = this.SelectedTableExportFilenameVariable;\r\n  \r\n        if (this.exportAllColumns) {\r\n          let temp = this.SelectedTableData.tableColumns;\r\n          let temp2 = [];\r\n          this.SelectedTableData.availableColumns.forEach((column) =>\r\n            temp2.push(column.value)\r\n          );\r\n          this.dataTable.columns = temp2;\r\n          this.dataTable.exportCSV();\r\n          this.dataTable.columns = temp;\r\n        } else {\r\n          this.dataTable.exportCSV();\r\n        }\r\n      }\r\n  \r\n      this.ShowTableExportPane = !this.ShowTableExportPane;\r\n    }\r\n  \r\n    /**\r\n     * Allows users to export the table as an excel file\r\n     * @param fileName optional if not given will use this.SelectedtableExportFilenameVariable\r\n     */\r\n    saveAsExcelFile(fileName?: string): void {\r\n      if (fileName == undefined) {\r\n        fileName = this.SelectedTableExportFilenameVariable;\r\n      }\r\n      import('xlsx').then((xlsx) => {\r\n        // if a filtered is applied use filteredValue else use all values\r\n        let rowData = this.dataTable.filteredValue || this.dataTable.value;\r\n        if (this.exportAllColumns) {\r\n          // change name of data fields to header to be consistent with the other exports on this component\r\n          rowData = rowData.map((row) => {\r\n            let output = {};\r\n            this.SelectedTableData.availableColumns.forEach(\r\n              (key) => (output[key.value.header] = row[key.value.field])\r\n            );\r\n            return output;\r\n          });\r\n        } else {\r\n          // gets only the current/visible columns for export and also changes data field name to the header name\r\n          rowData = rowData.map((row) => {\r\n            let output = {};\r\n            this.SelectedTableData.tableColumns.forEach(\r\n              (key) => (output[key.header] = row[key.field])\r\n            );\r\n            return output;\r\n          });\r\n        }\r\n  \r\n        let worksheet = xlsx.utils.json_to_sheet(rowData);\r\n        const workbook = { Sheets: { data: worksheet }, SheetNames: ['data'] };\r\n        const excelBuffer: any = xlsx.write(workbook, {\r\n          bookType: 'xlsx',\r\n          type: 'array'\r\n        });\r\n        const EXCEL_TYPE =\r\n          'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8';\r\n        const EXCEL_EXTENSION = '.xlsx';\r\n        const data: Blob = new Blob([excelBuffer], { type: EXCEL_TYPE });\r\n        saveAs(data, fileName + EXCEL_EXTENSION);\r\n      });\r\n    }\r\n  \r\n    /**\r\n     * Called first when filter is applied it applys filter to this.dataTable to update this.dataTable.filterValue\r\n     * @param col\r\n     */\r\n    onTableFilter(col) {\r\n      this.dataTable.filter(col.filterValue, col.field, col.filterType);\r\n    }\r\n  \r\n    /**\r\n     * Called second when a filter is applied, it updates values sotred in commonService.session.data and this.selectedRows if needed\r\n     * @param event\r\n     */\r\n    onFilter(event) {\r\n      let filteredValues = [];\r\n      switch (this.visuals.tableComp.TableType) {\r\n        case 'node':\r\n          filteredValues =\r\n            this.visuals.tableComp.commonService.session.data.nodes.filter((x) =>\r\n              event.filteredValue.find((y) => y.index === x.index)\r\n            );\r\n          break;\r\n        case 'link':\r\n          filteredValues =\r\n            this.visuals.tableComp.commonService.session.data.links.filter((x) =>\r\n              event.filteredValue.find((y) => y.index === x.index)\r\n            );\r\n          break;\r\n        case 'cluster':\r\n          filteredValues =\r\n            this.visuals.tableComp.commonService.session.data.clusters.filter(\r\n              (x) => event.filteredValue.find((y) => y.id === x.id)\r\n            );\r\n          break;\r\n      }\r\n  \r\n      this.visuals.tableComp.SelectedTableData.filter = event.filters;\r\n  \r\n      // updates number of rows when filter is changed (without there is a visual bug when removing a filter)\r\n      if ($('.p-paginator-rpp-options span').text() == 'All') {\r\n        this.selectedRows = event.filteredValue.length;\r\n      }\r\n    }\r\n  \r\n    // XXXXX changing font size in settings pane currently calls this function\r\n    onDataChange(event) {}\r\n  \r\n    onFilterDataChange() {\r\n      //Nothing to do here\r\n    }\r\n  \r\n    /**\r\n     * Function is called when a user selects a row by clicking on it.\r\n     * It calls nodeSelect(event, true), which updates commonService.session.data.nodes/nodeFilteredValues\r\n     * to be selected for the row/node and also emits a 'node-selected' event\r\n     */\r\n    onRowSelect(event) {\r\n      this.nodeSelect(event, true);\r\n    }\r\n  \r\n    /**\r\n     * Function is called when a user unselects a row.\r\n     * It calls nodeSelect(event, false), which updates commonService.session.data.nodes/nodeFilteredValues\r\n     * to be selected for the row/node and also emits a 'node-selected' event\r\n     */\r\n    onRowUnselect(event) {\r\n      this.nodeSelect(event, false);\r\n    }\r\n  \r\n    /**\r\n     * Called when a node is selected/unselected by clicking on a row. This function updates\r\n     * commonService.session.data.nodes/nodeFilteredValues to be selected for the row/node and also emits a 'node-selected' event\r\n     */\r\n    nodeSelect(event: any, isSelect: boolean) {\r\n      if (event.data === undefined) return;\r\n  \r\n      if (this.visuals.tableComp.TableType === 'node') {\r\n        this.visuals.tableComp.commonService.session.data.nodes\r\n          .filter((x) => x.index === event.data.index)\r\n          .forEach((x) => (x.selected = isSelect));\r\n        this.visuals.tableComp.commonService.session.data.nodeFilteredValues\r\n          .filter((x) => x.index === event.data.index)\r\n          .forEach((x) => (x.selected = isSelect));\r\n      }\r\n  \r\n      $(document).trigger('node-selected');\r\n    }\r\n  \r\n    /**\r\n     * Update variables (such as TableType, selectedTableData) needed to update the contents of the table\r\n     * @param type The type of data (node, link, cluster) to create table with\r\n     */\r\n    createTable(type: any = 'node') {\r\n      type = type.toLowerCase();\r\n      this.visuals.tableComp.TableType = type;\r\n  \r\n      // checks if data for tableData exists in TableDatas, if not, creates a new TableData object and adds it to TableDatas\r\n      let tableData: TableData | undefined = this.TableDatas.find(\r\n        (x) => x.tableType === type\r\n      );\r\n      const isNewTableData: boolean = tableData == undefined;\r\n      if (isNewTableData) {\r\n        tableData = {\r\n          tableType: type,\r\n          data: [],\r\n          dataSelection: [],\r\n          tableColumns: this.visuals.tableComp.commonService.session.data[\r\n            type + 'TableColumns'\r\n          ],\r\n          availableColumns: [],\r\n          selectedTableColumns: [],\r\n          filter: this.visuals.tableComp.commonService.session.data[type + 'Filter']\r\n        };\r\n  \r\n        this.TableDatas.push(tableData);\r\n      }\r\n  \r\n      this.visuals.tableComp.TableColumns = [];\r\n  \r\n      if (this.dataTable) {\r\n        this.dataTable.reset();\r\n        this.dataTable.filters = tableData.filter;\r\n      }\r\n  \r\n      this.visuals.tableComp.commonService.session.data[type + 'Fields'].map(\r\n        (d, i) => {\r\n          if (this.visuals.tableComp.meta.includes(d)) return;\r\n  \r\n          let filterValue: string = '';\r\n          if (tableData.filter) {\r\n            const foundFilterItem = tableData.filter[d];\r\n            if (foundFilterItem) {\r\n              filterValue = foundFilterItem.value;\r\n            }\r\n          }\r\n  \r\n          const column = {\r\n            field: d,\r\n            header:\r\n              d == 'nn'\r\n                ? 'Nearest Neighbor'\r\n                : this.visuals.tableComp.capitalize(d.replace('_', '')),\r\n            filterValue: filterValue,\r\n            filterType: 'contains'\r\n          };\r\n  \r\n          const foundAvailableColumn = tableData.availableColumns.find(\r\n            (x) => x.label === column.header\r\n          );\r\n  \r\n          if (foundAvailableColumn) {\r\n            foundAvailableColumn.filterValue = column.filterValue;\r\n          } else {\r\n            tableData.availableColumns.push({\r\n              label: column.header,\r\n              value: column,\r\n              disabled: column.field === 'index'\r\n            });\r\n          }\r\n        }\r\n      );\r\n  \r\n      if (!tableData.tableColumns.length) {\r\n        tableData.tableColumns = tableData.availableColumns\r\n          .filter((curVal, index) => index <= 5)\r\n          .map((x) => x.value);\r\n      }\r\n  \r\n      tableData.tableColumns.forEach((x) => {\r\n        const c = tableData.availableColumns.find(\r\n          (y) => y.value.header === x.header\r\n        ).value.filterValue;\r\n        x.filterValue = c;\r\n      });\r\n  \r\n      tableData.data = [];\r\n      let typeData = type + 's';\r\n      this.visuals.tableComp.commonService.session.data[typeData].map((d, i) => {\r\n        if (this.visuals.tableComp.meta.includes(d)) return;\r\n  \r\n        let nrow: any = {};\r\n        tableData.availableColumns.map((e, n) => {\r\n          const field = e.value.field;\r\n  \r\n          let stringVal: String = d[field];\r\n  \r\n          if (stringVal === undefined || stringVal === null) {\r\n            nrow[field] = '';\r\n          } else {\r\n            nrow[field] =\r\n              stringVal.toString().indexOf(',') > -1\r\n                ? stringVal.toString().split(',', 100).length > 1\r\n                  ? stringVal.toString().split(',', 100).join('\\n')\r\n                  : d[field]\r\n                : d[field];\r\n          }\r\n        });\r\n  \r\n        /* -----------------------------------------------------------------\r\n         * Preserve the row's firstseen position so we can restore it later.\r\n         * This key is **never** shown as a column.\r\n         * -----------------------------------------------------------------*/\r\n        nrow[this._original_index_key] = tableData.data.length;\r\n        tableData.data.push(nrow);\r\n      });\r\n  \r\n      const foundTableData = this.TableDatas.find((x) => x.tableType === type);\r\n  \r\n      if (foundTableData) {\r\n        this.SelectedTableData = foundTableData;\r\n      }\r\n  \r\n      //set selected nodes\r\n      this.visuals.tableComp.setSelectedNodes();\r\n    }\r\n  \r\n    /**\r\n     * If this.TableType == 'node' update the node TableData.dataSelection to the nodes that are selected\r\n     * in commonService.session.data.nodes AND reorder rows so that selected nodes rise to the top.\r\n     *\r\n     * The original visual order is always preserved via a hidden `_original_index` key added\r\n     * once when the table is first built. As nodes are deselected, their rows drop back into\r\n     * their exact original positions without disturbing userapplied column sorting.\r\n     */\r\n    setSelectedNodes() {\r\n      if (this.visuals.tableComp.TableType !== 'node') return;\r\n  \r\n      const foundTableData = this.TableDatas.find((x) => x.tableType === 'node');\r\n      if (!foundTableData) return;\r\n  \r\n      /* current selection based on shared session state */\r\n      const selected_nodes =\r\n        this.visuals.tableComp.commonService.session.data.nodes.filter(\r\n          (x) => x.selected\r\n        );\r\n  \r\n      /* update highlighted selection in PrimeNG table */\r\n      foundTableData.dataSelection = this.SelectedTableData.data.filter((row) =>\r\n        selected_nodes.find((y) => y.index == row.index)\r\n      );\r\n  \r\n      /* ---------------------------------------------------------------\r\n       *  Reorder:  selected rows first (keep their mutual order),\r\n       *            then unselected rows in their stored original order.\r\n       * -------------------------------------------------------------- */\r\n      const selected_rows = [];\r\n      const unselected_rows = [];\r\n  \r\n      this.SelectedTableData.data.forEach((row) => {\r\n        if (selected_nodes.find((y) => y.index == row.index)) {\r\n          selected_rows.push(row);\r\n        } else {\r\n          unselected_rows.push(row);\r\n        }\r\n      });\r\n  \r\n      const order_by_original = (a, b) =>\r\n        a[this._original_index_key] - b[this._original_index_key];\r\n  \r\n      selected_rows.sort(order_by_original);\r\n      unselected_rows.sort(order_by_original);\r\n  \r\n      const new_data = [...selected_rows, ...unselected_rows];\r\n  \r\n      /* only mutate and trigger change detection if order actually changed */\r\n      const order_changed =\r\n        new_data.some(\r\n          (row, idx) => row !== this.SelectedTableData.data[idx]\r\n        );\r\n  \r\n      if (order_changed) {\r\n        this.SelectedTableData.data = new_data;\r\n  \r\n        /* PrimeNG v14+: assign to dataTable.value to refresh viewport */\r\n        if (this.dataTable) {\r\n          this.dataTable.value = new_data;\r\n        }\r\n  \r\n        this.cdref.detectChanges();\r\n      }\r\n  \r\n      /* autoscroll to the first selected row for convenience */\r\n      if (selected_rows.length && this.dataTable) {\r\n        const first_index = 0; // by construction, first row is selected\r\n        try {\r\n          this.dataTable.scrollToVirtualIndex(first_index);\r\n        } catch {\r\n          this.dataTable.scrollTo({ top: first_index * 25 });\r\n        }\r\n      }\r\n    }\r\n  \r\n    /**\r\n     * @param s string\r\n     * @returns s but with first letter capitatlized, if s is not string type returns empty string\r\n     */\r\n    capitalize(s): string {\r\n      if (typeof s !== 'string') return '';\r\n      return s.charAt(0).toUpperCase() + s.slice(1);\r\n    }\r\n  \r\n    // XXXXX need to revisit for changing text size in table; currently unable to change size of text and changing the setting calls onDataChange()\r\n    resetTextsize() {\r\n      let s: any = $('#table-font-size').val();\r\n      $('#table').css({\r\n        'font-size': s + 'px',\r\n        'line-height': s / 10\r\n      });\r\n    }\r\n  \r\n    reorderColumns() {\r\n      let temp = this.SelectedTableData.tableColumns[2];\r\n      this.SelectedTableData.tableColumns[2] =\r\n        this.SelectedTableData.tableColumns[3];\r\n      this.SelectedTableData.tableColumns[3] = temp;\r\n    }\r\n  \r\n    /**\r\n     * Opens settings pane for table component\r\n     */\r\n    openSettings() {\r\n      this.visuals.tableComp.ShowTableSettingsPane =\r\n        !this.visuals.tableComp.ShowTableSettingsPane;\r\n    }\r\n  \r\n    /**\r\n     * Opens export pane for table component\r\n     */\r\n    openExport() {\r\n      this.visuals.tableComp.ShowTableExportPane =\r\n        !this.visuals.tableComp.ShowTableExportPane;\r\n    }\r\n  \r\n    openCenter() {}\r\n  \r\n    openRefreshScreen() {}\r\n  \r\n    /**\r\n     * This function is called when the type of data to display in the table is changed (Nodes, Links, Cluster)\r\n     * @param e event\r\n     */\r\n    openSelectDataSetScreen(e: any) {\r\n      this.visuals.tableComp.createTable(e.value);\r\n      // after changing table type sometimes there is a visual bug that the following code fixes\r\n      if ($('.p-paginator-rpp-options span').text() == 'All') {\r\n        this.selectedRows = this.SelectedTableData.data.length;\r\n      }\r\n    }\r\n  \r\n    onLoadNewData() {\r\n      this.createTable(this.visuals.microbeTrace.dataSetViewSelected);\r\n    }\r\n  \r\n    updateNodeColors() {\r\n      //Not Relevant\r\n    }\r\n    updateVisualization() {\r\n      //Not Relevant\r\n    }\r\n  \r\n    applyStyleFileSettings() {\r\n      //this.widgets = (window as any).context.commonService.session.style.widgets;\r\n      //this.loadSettings();\r\n    }\r\n  \r\n    updateLinkColor() {\r\n      //Not Relevant\r\n    }\r\n  \r\n    onRecallSession() {}\r\n  \r\n    goldenLayoutComponentResize() {\r\n      this.scrollHeight =\r\n        ($('tableComponent').height() - 70 - 60 - 10) + 'px';\r\n      let width = $('tableComponent').width() - 23 + 'px';\r\n      this.tableStyle = {\r\n        width: width,\r\n        display: 'block'\r\n      };\r\n    }\r\n  \r\n    /**\r\n     * Called before the component is destroyed; it saves tableColumns for each node, link, and cluster in commonService.session.data\r\n     */\r\n    ngOnDestroy(): void {\r\n      let foundTableData = this.TableDatas.find((x) => x.tableType === 'node');\r\n      if (foundTableData) {\r\n        this.visuals.tableComp.commonService.session.data.nodeTableColumns =\r\n          foundTableData.tableColumns;\r\n      }\r\n  \r\n      foundTableData = this.TableDatas.find((x) => x.tableType === 'link');\r\n      if (foundTableData) {\r\n        this.visuals.tableComp.commonService.session.data.linkTableColumns =\r\n          foundTableData.tableColumns;\r\n      }\r\n  \r\n      foundTableData = this.TableDatas.find((x) => x.tableType === 'cluster');\r\n      if (foundTableData) {\r\n        this.visuals.tableComp.commonService.session.data.clusterTableColumns =\r\n          foundTableData.tableColumns;\r\n      }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n    }\r\n  }\r\n  \r\n  interface TableData {\r\n    tableType: 'node' | 'link' | 'cluster';\r\n    data: any[];\r\n    dataSelection: any[];\r\n    tableColumns: any[];\r\n    availableColumns: any[];\r\n    selectedTableColumns: any[];\r\n    filter: any;\r\n  }\r\n  \r\n  interface FilterType {\r\n    label: string;\r\n    value: string;\r\n  }\r\n  \r\n  export namespace TableComponent {\r\n    export const componentTypeName = 'Table';\r\n  }\r\n  ","import { Component, ElementRef, EventEmitter, ChangeDetectorRef, Inject, OnInit, Output, ViewChild, OnDestroy } from '@angular/core';\r\nimport { CommonService } from '../../contactTraceCommonServices/common.service';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { MicobeTraceNextPluginEvents } from '@app/helperClasses/interfaces';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport * as d3 from 'd3';\r\nimport moment from 'moment';\r\nimport { MicrobeTraceNextVisuals } from '@app/microbe-trace-next-plugin-visuals';\r\n\r\nimport * as saveAs from 'file-saver';\r\nimport { saveSvgAsPng } from 'save-svg-as-png';\r\nimport { SelectItem } from 'primeng/api';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\nimport { ExportService } from '@app/contactTraceCommonServices/export.service';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport { CommonStoreService } from '@app/contactTraceCommonServices/common-store.services';\r\n\r\n@Component({\r\n  selector: 'app-timeline-component',\r\n  templateUrl: './timeline-component.component.html',\r\n  styleUrls: ['./timeline-component.component.scss']\r\n})\r\nexport class TimelineComponent extends BaseComponentDirective implements OnInit, MicobeTraceNextPluginEvents, OnDestroy {\r\n\r\n  @Output() DisplayGlobalSettingsDialogEvent = new EventEmitter();\r\n  private destroy$ = new Subject<void>();\r\n  @ViewChild('epiCurve') epiCurveElement: ElementRef;\r\n  @ViewChild('epiCurveSVG') epiCurveSVGElement: ElementRef;\r\n  viewActive: boolean = true;\r\n\r\n  widgets: object;\r\n  private visuals: MicrobeTraceNextVisuals;\r\n\r\n  FieldList: SelectItem[] = [];\r\n  FieldListStack: SelectItem[] = [];\r\n  SelectedDateFieldVariable;\r\n  SelectedDateFieldVariable2;\r\n  SelectedDateFieldVariable3;\r\n  binSizes = ['Day', 'Week', 'Month', 'Quarter', 'Year']\r\n  tickInterval;\r\n\r\n  graphTypes = ['Single Date Field', 'Multi: Side by Side', 'Multi: Overlay']\r\n  selectedGraphType = 'Single Date Field';\r\n  legendPositionOptions = ['Hide', 'Left', 'Right', 'Bottom']\r\n\r\n  ShowEpiSettingsPane: boolean = false;\r\n  ShowEpiExportPane: boolean = false;\r\n  EpiExportFileName: string = \"\";\r\n  EpiExportFileType: string = \"png\";\r\n  SelectedNetworkExportScaleVariable: any = 1;\r\n  SelectedNetworkExportQualityVariable: any = 0.92;\r\n  CalculatedResolution: string;\r\n\r\n  private localColorMap = (x) => {}\r\n\r\n  private svg;\r\n  private margin = { top: 5, left: 45, right: 20, bottom: 50 };\r\n  private width; // Default width, adjust as necessary\r\n  private height; // Default height, adjust as necessary\r\n  private middle;\r\n  private x;\r\n  private y;\r\n  private histogram;\r\n  private brush;\r\n  private brushG;\r\n  private selection;\r\n  private timer;\r\n  private tick = 0;\r\n  private isPlaying = false;\r\n\r\n  private vnodes = []; // Replace with your actual data\r\n  private timeDomainStart;\r\n  private timeDomainEnd;\r\n\r\n  constructor(\r\n    private commonService: CommonService,\r\n    @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer,\r\n    elRef: ElementRef,\r\n    private cdref: ChangeDetectorRef,\r\n    private gtmService: GoogleTagManagerService,\r\n    private store: CommonStoreService,\r\n    private exportService: ExportService) {\r\n\r\n      super(elRef.nativeElement);\r\n      this.visuals = commonService.visuals;\r\n      this.commonService.visuals.epiCurve = this;\r\n      this.widgets = this.commonService.session.style.widgets;\r\n\r\n      this.setDefaultsWidgets();\r\n\r\n  }\r\n  ngOnInit() {\r\n\r\n    this.gtmService.pushTag({\r\n            event: \"page_view\",\r\n            page_location: \"/timeline\",\r\n            page_title: \"Timeline View\"\r\n        });\r\n    // populate this.twoD.FieldList with [None, ...nodeFields]\r\n    this.visuals.epiCurve.FieldList = [];\r\n    this.visuals.epiCurve.FieldListStack = [];\r\n    this.visuals.epiCurve.FieldList.push({ label: \"None\", value: \"None\" });\r\n    this.visuals.epiCurve.FieldListStack.push({ label: \"None\", value: 'None'}, { label: \"Node Color\", value: \"Node Color\"});\r\n    this.visuals.epiCurve.commonService.session.data['nodeFields'].map((d, i) => {\r\n        if (d != 'seq' && d != 'sequence') {\r\n            this.visuals.epiCurve.FieldList.push(\r\n                {\r\n                    label: this.visuals.epiCurve.commonService.capitalize(d.replace(\"_\", \"\")),\r\n                    value: d\r\n                });\r\n              this.visuals.epiCurve.FieldListStack.push(\r\n                {\r\n                    label: this.visuals.epiCurve.commonService.capitalize(d.replace(\"_\", \"\")),\r\n                    value: d\r\n                });\r\n        }\r\n\r\n    });\r\n\r\n    this.tickInterval = 1;\r\n    this.updateSettingsRows();    \r\n\r\n    this.store.clusterUpdate$.pipe(takeUntil(this.destroy$)).subscribe(() => {\r\n      if (this.selectedGraphType == \"Single Date Field\" && (this.widgets['epiCurve-stackColorBy'] == 'cluster' || (this.widgets['epiCurve-stackColorBy'] == 'Node Color' && this.widgets['node-color-variable'] == 'cluster'))) {\r\n        this.refresh();\r\n      }\r\n    })\r\n }\r\n  \r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  setDefaultsWidgets() {\r\n    // graphType\r\n    if (this.widgets['epiCurve-graphType'] == undefined) {\r\n      this.widgets['epiCurve-graphType'] = 'Single Date Field';\r\n    }\r\n    this.selectedGraphType = this.widgets['epiCurve-graphType'];\r\n\r\n    // date fields\r\n    if (this.widgets['epiCurve-date-fields'] == undefined) {\r\n      if (this.widgets['epi-timeline-date-field'] != undefined) {\r\n        this.widgets['epiCurve-date-fields'] = [this.widgets['epi-timeline-date-field'], 'None', 'None']\r\n      } else {\r\n        this.widgets['epiCurve-date-fields'] = ['None', 'None', 'None']\r\n      }\r\n    } else if (this.widgets['epiCurve-date-fields'].length < 3) {\r\n      while (this.widgets['epiCurve-date-fields']< 3) {\r\n        this.widgets['epiCurve-date-fields'].push('None')\r\n      }\r\n    }\r\n    this.SelectedDateFieldVariable = this.widgets['epiCurve-date-fields'][0];\r\n    this.SelectedDateFieldVariable2 = this.widgets['epiCurve-date-fields'][1];\r\n    this.SelectedDateFieldVariable3 = this.widgets['epiCurve-date-fields'][2];\r\n\r\n    // colors\r\n    if (this.widgets['epiCurve-colors'] == undefined) {\r\n      this.widgets['epiCurve-colors'] = ['#f5d742', '#f20fff', '#20ff1a'];\r\n    }\r\n\r\n    // stackColorBy field\r\n    if (this.widgets['epiCurve-stackColorBy'] == undefined) {\r\n      this.widgets['epiCurve-stackColorBy'] = 'None';\r\n    }\r\n\r\n    // binSize\r\n    if (this.widgets['epiCurve-binSize'] == undefined) {\r\n      this.widgets['epiCurve-binSize'] = 'Month'\r\n    }\r\n\r\n    //\r\n    if (this.widgets['epiCurve-cumulative'] == undefined) {\r\n      this.widgets['epiCurve-cumulative'] = false;\r\n    }\r\n\r\n    // legendPosition\r\n    if (this.widgets['epiCurve-legendPosition'] == undefined) {\r\n      this.widgets['epiCurve-legendPosition'] = 'Left';\r\n    }\r\n }\r\n\r\n ngAfterViewInit() {\r\n\r\n  // this.initializeD3Chart();\r\n  this.setupEventListeners();\r\n\r\n  if (this.widgets['epiCurve-legendPosition'] == 'Bottom') {\r\n    this.margin.bottom = 100;\r\n  } else {\r\n    this.margin.bottom = 50;\r\n  }\r\n  \r\n  this.refresh();\r\n }\r\n  \r\n/**\r\n * Clears previous histogram/epi curve and creates a new one; calls refreshMulti if needed\r\n */\r\npublic refresh(): void {\r\n  if (this.selectedGraphType=='Multi: Overlay' || this.selectedGraphType=='Multi: Side by Side') {\r\n    this.refreshMulti();\r\n    return;\r\n  } else if (this.SelectedDateFieldVariable == 'None') {\r\n    return;\r\n  }\r\n\r\n  $('#epiCurveSVG').empty()\r\n\r\n  this.updateSizes();\r\n  if (this.height < 0) {\r\n    return;\r\n  }\r\n\r\n  const field = this.SelectedDateFieldVariable;\r\n  let times = this.getTimes([field]);\r\n\r\n  // updates this.timeDomainStart and this.timeDomainInterval and returns the bin interval\r\n  let binInterval = this.calculateBinInterval(times);\r\n  if (binInterval == 0) {\r\n    return;\r\n  }\r\n\r\n  this.x = d3.scaleTime().domain([this.timeDomainStart, this.timeDomainEnd]).rangeRound([0, this.width]);\r\n  this.y = d3.scaleLinear().range([this.height, 0]);\r\n\r\n  //@ts-ignore\r\n  this.histogram = d3.histogram().value(d => d[field as string]).domain(this.x.domain()).thresholds(binInterval);\r\n\r\n  this.svg = d3.select(this.epiCurveSVGElement.nativeElement)\r\n    .attr(\"width\", this.width + this.margin.left + this.margin.right)\r\n    .attr(\"height\", this.height + this.margin.top + this.margin.bottom)\r\n    //.attr(\"transform\", `translate(0, ${this.margin.top})`);\r\n    \r\n\r\n  const epiCurve = this.svg.append(\"g\")\r\n    .classed(\"epiCurve-epi-curve\", true)\r\n    .attr(\"transform\", `translate(${this.margin.left}, 5)`);\r\n\r\n  let bins = this.histogram(this.vnodes);\r\n  \r\n  let colorVariable = this.commonService.session.style.widgets['node-color-variable'];\r\n  let nodeColorKeys;\r\n  if (colorVariable != 'None' && this.widgets['epiCurve-stackColorBy'] == 'Node Color') {\r\n    nodeColorKeys = this.commonService.session.style.nodeColorsTableKeys[colorVariable].map(value => value=='null' ? null: value);\r\n    this.localColorMap = this.commonService.temp.style.nodeColorMap;\r\n  } else if (this.widgets['epiCurve-stackColorBy'] != 'None') {\r\n    nodeColorKeys = this.updateLocalColorMap();\r\n  }\r\n\r\n  let maxCount = 0;\r\n  [maxCount, bins] = this.updateBins(bins, this.widgets['epiCurve-stackColorBy'] == 'Node Color' ? colorVariable : this.widgets['epiCurve-stackColorBy'], nodeColorKeys);\r\n  \r\n\r\n  this.y.domain([0, maxCount]).nice()//d3.max(bins, d => d.length)]);\r\n\r\n  if ((colorVariable != 'None' && this.widgets['epiCurve-stackColorBy'] == 'Node Color') || (this.widgets['epiCurve-stackColorBy'] != 'None' && this.widgets['epiCurve-stackColorBy'] != 'Node Color')) {\r\n    let nodeColors = [];\r\n\r\n    nodeColorKeys.forEach((value, ind) =>{\r\n      epiCurve.selectAll(`rect${ind}`)\r\n      .data(bins)\r\n      .enter()\r\n      .append(\"rect\")\r\n      .attr(\"transform\", d => `translate(${this.x(d.x0)}, ${this.y(d.height[ind])})`)\r\n      .attr(\"width\", d => this.x(d.x1) - this.x(d.x0))\r\n      .attr(\"height\", d => this.height - this.y(d.length2[ind]))\r\n      .attr(\"fill\", this.localColorMap(value) )\r\n\r\n      nodeColors.push(this.localColorMap(value));\r\n    })\r\n    this.generateLegend(epiCurve, nodeColors,nodeColorKeys)\r\n  } else {\r\n    let color = this.widgets['epiCurve-stackColorBy'] == 'None' ? this.widgets['epiCurve-colors'][0] : this.widgets[\"node-color\"];\r\n    epiCurve.selectAll(\"rect\")\r\n      .data(bins)\r\n      .enter()\r\n      .append(\"rect\")\r\n      .attr(\"transform\", d => `translate(${this.x(d.x0)}, ${this.y(d.length)})`)\r\n      .attr(\"width\", d => this.x(d.x1) - this.x(d.x0))\r\n      .attr(\"height\", d => this.height - this.y(d.length))\r\n      .attr(\"fill\", color);\r\n\r\n    this.generateLegend(epiCurve, [color] ,[this.SelectedDateFieldVariable])\r\n  }\r\n\r\n  this.updateAxes();\r\n} \r\n\r\n/**\r\n * Updated version of refresh that works for multiple date fields to generate the epi curve graph\r\n * Calls refresh() instead if needed\r\n */\r\nprivate refreshMulti(): void {\r\n  if (this.selectedGraphType=='Single Date Field') {\r\n    this.refresh();\r\n    return;\r\n  } else if (this.SelectedDateFieldVariable == 'None' && this.SelectedDateFieldVariable2 == 'None' && this.SelectedDateFieldVariable3 == 'None') {\r\n    return;\r\n  }\r\n\r\n  $('#epiCurveSVG').empty()\r\n\r\n  this.updateSizes();\r\n  if (this.height < 0) {\r\n    return;\r\n  }\r\n\r\n  let fields = [];\r\n  let colors = [];\r\n  [this.SelectedDateFieldVariable, this.SelectedDateFieldVariable2, this.SelectedDateFieldVariable3].forEach((dateField, ind) => {\r\n    if (dateField != 'None') {\r\n      fields.push(dateField);\r\n      colors.push(this.widgets[\"epiCurve-colors\"][ind])\r\n    }\r\n  })\r\n\r\n  if (fields.length == 0) {\r\n    return;\r\n  }\r\n  // current implementation of times is only used to calculate min and max time of all data given when setting up x axis and bins; there isn't a current need to link times by datapoint with times\r\n  let times = this.getTimes(fields);\r\n\r\n  // updates this.timeDomainStart and this.timeDomainInterval and returns the bin interval\r\n  let binInterval = this.calculateBinInterval(times);\r\n  if (binInterval == 0) {\r\n    return;\r\n  }\r\n\r\n  this.x = d3.scaleTime().domain([this.timeDomainStart, this.timeDomainEnd]).rangeRound([0, this.width]);\r\n  this.y = d3.scaleLinear().range([this.height, 0]);\r\n\r\n  //@ts-ignore\r\n  this.histogram = d3.histogram().domain(this.x.domain()).thresholds(binInterval);\r\n\r\n  this.svg = d3.select(this.epiCurveSVGElement.nativeElement)\r\n    .attr(\"width\", this.width + this.margin.left + this.margin.right)\r\n    .attr(\"height\", this.height + this.margin.top + this.margin.bottom)\r\n    .attr(\"transform\", `translate(0, ${this.margin.top})`);\r\n    \r\n\r\n  const epiCurve = this.svg.append(\"g\")\r\n    .classed(\"epiCurve-epi-curve\", true)\r\n    .attr(\"transform\", `translate(${this.margin.left}, 5)`);\r\n\r\n  let maxCount = 0;\r\n  let bins = [];\r\n  fields.forEach((field) => {\r\n    if (field != 'None') {\r\n      let currentCount = 0;\r\n      let currentbin = this.histogram(this.vnodes.map((d) => d[field]).filter(value => value != null));\r\n      [currentCount, currentbin] = this.updateBins(currentbin);\r\n      bins.push(currentbin)\r\n      if (currentCount > maxCount) maxCount = currentCount;\r\n    }\r\n  })\r\n\r\n  this.y.domain([0, maxCount]).nice();\r\n\r\n  if (this.selectedGraphType == 'Multi: Overlay') {\r\n    fields.forEach((_, ind) => {\r\n        epiCurve.selectAll(`rect${ind}`)\r\n        .data(bins[ind])\r\n        .enter()\r\n        .append(\"rect\")\r\n        .attr(\"transform\", d => `translate(${this.x(d.x0)}, ${this.y(d.length)})`)\r\n        .attr(\"width\", d => this.x(d.x1) - this.x(d.x0))\r\n        .attr(\"height\", d => this.height - this.y(d.length))\r\n        .attr(\"fill\", colors[ind])\r\n        .attr(\"opacity\", 0.6);\r\n    })\r\n\r\n  } else {\r\n    let numberOfBins = fields.length;\r\n    let width;\r\n    let xOffset = [];\r\n    if (numberOfBins == 1) {\r\n      width = (d) => this.x(d.x1)- this.x(d.x0);\r\n      xOffset = [\r\n        function(d, c) {return c.x(d.x0)}\r\n      ]\r\n    } else if (numberOfBins == 2) {\r\n      width = (d) => (this.x(d.x1)- this.x(d.x0))/2\r\n      xOffset = [\r\n        function(d, c) {return c.x(d.x0)},\r\n        function(d, c) {return c.x(d.x0)+(c.x(d.x1) - c.x(d.x0))/2}\r\n      ]\r\n    } else {\r\n      width = (d) => (this.x(d.x1)- this.x(d.x0))/3;\r\n      xOffset = [\r\n        function(d, c) { return c.x(d.x0)},\r\n        function(d, c) { return c.x(d.x0)+(c.x(d.x1) - c.x(d.x0))/3},\r\n        function(d, c) { return c.x(d.x0)+2*(c.x(d.x1) - c.x(d.x0))/3}\r\n      ]\r\n    }\r\n    \r\n    let that = this;\r\n\r\n    fields.forEach((_, ind) => {\r\n        epiCurve.selectAll(`rect${ind}`)\r\n        .data(bins[ind])\r\n        .enter()\r\n        .append(\"rect\")\r\n        .attr(\"transform\", d => `translate(${xOffset[ind](d, that)}, ${this.y(d.length)})`)\r\n        .attr(\"width\", width)\r\n        .attr(\"height\", d => this.height - this.y(d.length))\r\n        .attr(\"fill\", colors[ind]);\r\n    });\r\n  }\r\n\r\n  this.updateAxes();\r\n  this.generateLegend(epiCurve, colors, fields)\r\n} \r\n\r\n/**\r\n * Return an array of unique options for nodes[this.widgets['epiCurve-stackColorBy']] and then also used that information to update localColorMap function\r\n */\r\nupdateLocalColorMap() {\r\n  let nodeColorTableKeys = [];\r\n  this.commonService.session.data.nodes.forEach((node) => {\r\n    if (!node.visible) return;\r\n    if (!nodeColorTableKeys.some(value => value == node[this.widgets['epiCurve-stackColorBy']])) {\r\n      nodeColorTableKeys.push(node[this.widgets['epiCurve-stackColorBy']])\r\n    }\r\n  })\r\n  this.localColorMap = d3.scaleOrdinal(this.commonService.session.style.nodeColors).domain(nodeColorTableKeys);\r\n\r\n  return nodeColorTableKeys;\r\n}\r\n\r\nupdateSizes() {\r\n  const wrapper = $(this.epiCurveElement.nativeElement).parent();\r\n  $('#epiCurve').height(wrapper.height() - 50);\r\n  this.width = wrapper.width() - this.margin.left - this.margin.right;\r\n  // height represents the height of y axis\r\n  this.height = wrapper.height() - this.margin.top - this.margin.bottom - 50;\r\n  this.middle = this.height / 2;\r\n}\r\n\r\ngetTimes(fields) {\r\n  let times = [];\r\n  this.vnodes = JSON.parse(JSON.stringify(this.commonService.session.data.nodes));\r\n  this.vnodes.forEach(d => {\r\n    fields.forEach(field => {\r\n      const time = moment(d[field as string]); // Cast 'field' as string\r\n      if (time.isValid()) {\r\n        d[field as string] = time.toDate();\r\n        times.push(d[field as string]); // Cast 'field' as string\r\n      } else {\r\n        d[field as string] = null; // Cast 'field' as string\r\n      }\r\n    })\r\n  });\r\n\r\n  if (times.length < 2) {\r\n    times = [new Date(2000, 1, 1), new Date()];\r\n  }\r\n  return times;\r\n}\r\n\r\nupdateAxes() {\r\n  let [xAxis, xLabelOffset] = this.configureXAxisSettings();\r\n\r\n  this.svg.append(\"g\")\r\n    .attr(\"class\", \"axis axis--x\")\r\n    .attr(\"transform\", `translate(${this.margin.left}, ${this.height+5})`)\r\n    .call(xAxis)\r\n    .attr(\"text-anchor\", \"center\")\r\n    .selectAll(\"text\")\r\n    .attr(\"x\", xLabelOffset);\r\n\r\n  this.svg.append(\"g\")\r\n    .attr(\"class\", \"axis axis--y\")\r\n    .attr(\"transform\", `translate(${this.margin.left}, 5)`)\r\n    .call(d3.axisLeft(this.y))\r\n    .attr(\"text-anchor\", null)\r\n    .selectAll(\"text\")\r\n    .attr(\"x\", -20);\r\n\r\n  this.svg.append(\"text\")\r\n    .attr(\"class\", \"x label\")\r\n    .attr(\"text-anchor\", \"center\")\r\n    .attr(\"x\", this.width/2)\r\n    .attr(\"y\", this.height + 40)\r\n    .text(`Date (${this.widgets['epiCurve-binSize']=='Day'? 'Dai': this.widgets['epiCurve-binSize']}ly Bins)`);\r\n\r\n  this.svg.append(\"text\")\r\n    .attr(\"class\", \"y label\")\r\n    .attr(\"text-anchor\", \"center\")\r\n    .attr(\"y\", 15)\r\n    .attr(\"x\", -this.middle-this.margin.top-this.margin.bottom)\r\n    .attr(\"transform\", \"rotate(-90)\")\r\n    .text(\"Number of Cases\");\r\n\r\n  /*this.brush = d3.brushX()\r\n    .extent([[0, 0], [this.width, this.height]])\r\n    .on(\"start brush\", () => {\r\n      this.selection = d3.brushSelection(this.brushG.node());\r\n      if (!this.selection) return;\r\n      if (this.selection[0] > 0) {\r\n        this.selection[0] = 0;\r\n        this.brushG.call(this.brush.move, this.selection);\r\n      }\r\n    })\r\n    .on(\"end\", function () {\r\n      this.selection = d3.brushSelection(this.brushG.node());\r\n      if (!this.selection) return;\r\n      if (this.selection[0] > 0) {\r\n        this.selection[0] = 0;\r\n        this.brushG.call(this.brush.move, this.selection);\r\n        this.propagate();\r\n      }\r\n    });\r\n\r\n    this.brushG = this.svg\r\n    .append(\"g\")\r\n    .attr(\"class\", \"brush\")\r\n    .attr(\"transform\", \"translate(\" + this.margin.left + \",0)\")\r\n    .call(this.brush);\r\n    */\r\n\r\n}\r\n\r\ngenerateLegend(epiCurve, colors, fieldNames) {\r\n  let xOffset = 50; // default for left position\r\n  if (this.widgets['epiCurve-legendPosition'] == 'Hide') {\r\n    return;\r\n  } else if (this.widgets['epiCurve-legendPosition'] == 'Bottom') {\r\n    let prevLength = 0;\r\n    let rowCount = 0;\r\n    let y = this.height + 50;\r\n    if (this.selectedGraphType=='Single Date Field' && this.widgets['epiCurve-stackColorBy'] == 'Node Color' && this.commonService.session.style.widgets['node-color-variable'] != 'None') {\r\n      let field = this.commonService.capitalize(this.commonService.session.style.widgets['node-color-variable']);\r\n      epiCurve.append(\"text\").attr(\"x\", 70).attr(\"y\", y).text(field + ': ').style(\"font-size\", \"15px\").attr(\"alignment-baseline\",\"middle\")\r\n      prevLength += field.length + 3;\r\n    } else if (this.selectedGraphType=='Single Date Field' && this.widgets['epiCurve-stackColorBy'] != 'Node Color' && this.widgets['epiCurve-stackColorBy'] != 'None') {\r\n      epiCurve.append(\"text\").attr(\"x\", 70).attr(\"y\", y).text(this.widgets['epiCurve-stackColorBy'] + ': ').style(\"font-size\", \"15px\").attr(\"alignment-baseline\",\"middle\")\r\n      prevLength += this.widgets['epiCurve-stackColorBy'].length + 3;\r\n    }\r\n    fieldNames.forEach((name, i) => {\r\n      // this first section calculates the location for each item/name in the legend\r\n      let nLength = name==null ? 7: name.toString().length\r\n      let baseX = 70+40*(rowCount) + prevLength*7.5;\r\n      if (baseX+24+nLength*3 > this.width-70) {\r\n        rowCount = 0;\r\n        y += 30;\r\n        prevLength = 0;\r\n        baseX = 70;\r\n      }\r\n\r\n      epiCurve.append(\"circle\").attr(\"cx\", baseX).attr(\"cy\", y).attr(\"r\", 6).style(\"fill\", colors[i])\r\n      epiCurve.append(\"text\").attr(\"x\", baseX+10).attr(\"y\", y).text(this.commonService.capitalize(name==null? '(Empty)': name.toString())).style(\"font-size\", \"15px\").attr(\"alignment-baseline\",\"middle\")\r\n\r\n      prevLength += nLength;\r\n      rowCount += 1;\r\n    })\r\n    return;\r\n  } else if (this.widgets['epiCurve-legendPosition'] == 'Right') {\r\n    xOffset = this.width - 120;\r\n  }\r\n  let count = 0;\r\n  if (this.selectedGraphType=='Single Date Field' && this.widgets['epiCurve-stackColorBy'] == 'Node Color' && this.commonService.session.style.widgets['node-color-variable'] != 'None') {\r\n    let field = this.commonService.capitalize(this.commonService.session.style.widgets['node-color-variable']);\r\n    epiCurve.append(\"text\").attr(\"x\", xOffset).attr(\"y\", 30).text(field + ': ').style(\"font-size\", \"15px\").attr(\"alignment-baseline\",\"middle\")\r\n    count += 1;\r\n  } else if (this.selectedGraphType=='Single Date Field' && this.widgets['epiCurve-stackColorBy'] != 'Node Color' && this.widgets['epiCurve-stackColorBy'] != 'None') {\r\n    epiCurve.append(\"text\").attr(\"x\", xOffset).attr(\"y\", 30).text(this.widgets['epiCurve-stackColorBy'] + ': ').style(\"font-size\", \"15px\").attr(\"alignment-baseline\",\"middle\")\r\n    count += 1;\r\n  }\r\n  fieldNames.forEach((name, i) => {\r\n    epiCurve.append(\"circle\").attr(\"cx\",xOffset).attr(\"cy\",30*(count+1)).attr(\"r\", 6).style(\"fill\", colors[i])\r\n    epiCurve.append(\"text\").attr(\"x\", xOffset+20).attr(\"y\", 30*(count+1)).text(this.commonService.capitalize(name==null? '(Empty)': name.toString())).style(\"font-size\", \"15px\").attr(\"alignment-baseline\",\"middle\")\r\n    count += 1;\r\n  })\r\n}\r\n\r\nprivate setupEventListeners(): void {\r\n\r\n  $('#timeline-play').click(() => {\r\n    if (this.isPlaying) {\r\n      $('#timeline-play').html('<span class=\"oi oi-media-play\"></span>');\r\n      this.stopTimeline();\r\n    } else {\r\n      $('#timeline-play').html('<span class=\"oi oi-media-pause\"></span>');\r\n      this.startTimeline();\r\n    }\r\n  });\r\n\r\n  $(window).on('node-color-change', () => {\r\n    this.svg.selectAll(\".epiCurve-epi-curve rect\")\r\n      .attr(\"fill\", this.commonService.session.style.widgets[\"node-color-variable\"]);\r\n  });\r\n\r\n  $('#timeline-speed').on('change', () => {\r\n    this.setTimer();\r\n  });\r\n\r\n  this.container.on('resize', () => { this.goldenLayoutComponentResize() })\r\n  this.container.on('hide', () => { \r\n    this.viewActive = false; \r\n    this.cdref.detectChanges();\r\n  })\r\n  this.container.on('show', () => { \r\n    this.viewActive = true; \r\n    this.cdref.detectChanges();\r\n  })\r\n}\r\n\r\n/**\r\n * Updates this.timeDomainStart and this.timeDomainEnd based on dates and this.widgets['epiCurve-binSize'];\r\n * \r\n * @param times array of date objects\r\n * @returns return a d3 time range such as d3.timeMonth.range()\r\n */\r\ncalculateBinInterval(times) {\r\n  let minTime = Math.min(...times);\r\n  let maxTime = Math.max(...times);\r\n\r\n  if (this.widgets['epiCurve-binSize'] == 'Day') {\r\n    //@ts-ignore\r\n    this.timeDomainStart = d3.timeMonth(minTime);\r\n    //@ts-ignore\r\n    this.timeDomainEnd = d3.timeMonth.ceil(maxTime);\r\n    return d3.timeDay.range(this.timeDomainStart, this.timeDomainEnd);\r\n  } else if (this.widgets['epiCurve-binSize'] == 'Week') {\r\n    //@ts-ignore\r\n    this.timeDomainStart = d3.timeMonth(minTime);\r\n    //@ts-ignore\r\n    this.timeDomainEnd = d3.timeMonth.ceil(maxTime);\r\n    return d3.timeMonday.range(this.timeDomainStart, this.timeDomainEnd);\r\n  } else if (this.widgets['epiCurve-binSize'] == 'Month') {\r\n    //@ts-ignore\r\n    this.timeDomainStart = d3.timeMonth(minTime);\r\n    //@ts-ignore\r\n    this.timeDomainEnd = d3.timeMonth.ceil(maxTime);\r\n    return d3.timeMonth.range(this.timeDomainStart, this.timeDomainEnd);\r\n  } else if (this.widgets['epiCurve-binSize'] == 'Quarter') {\r\n    //@ts-ignore\r\n    this.timeDomainStart = d3.timeMonth(minTime, 3);\r\n    //@ts-ignore\r\n    this.timeDomainEnd = d3.timeMonth.ceil(maxTime, 3);\r\n    // for quarter we may need to update earliest month so that quarters are consistant (always start on Jan, April, July, or October)\r\n    if ([1, 2].includes(this.timeDomainStart.getMonth())){\r\n      this.timeDomainStart.setMonth(0);\r\n    } else if ([4,5].includes(this.timeDomainStart.getMonth())) {\r\n      this.timeDomainStart.setMonth(3);\r\n    } else if ([7,8].includes(this.timeDomainStart.getMonth())) {\r\n      this.timeDomainStart.setMonth(6);\r\n    } else if ([10,11].includes(this.timeDomainStart.getMonth())) {\r\n      this.timeDomainStart.setMonth(9);\r\n    }\r\n    return d3.timeMonth.range(this.timeDomainStart, this.timeDomainEnd, 3);\r\n  } else if (this.widgets['epiCurve-binSize'] == 'Year') {\r\n    //@ts-ignore\r\n    this.timeDomainStart = d3.timeYear(minTime);\r\n    //@ts-ignore\r\n    this.timeDomainEnd = d3.timeYear.ceil(maxTime);\r\n    return d3.timeYear.range(this.timeDomainStart, this.timeDomainEnd);\r\n  } else {\r\n    alert(\"Invalid bin size selected\");\r\n    return 0;\r\n  }\r\n\r\n}\r\n\r\n/**\r\n * @returns updated bins with new attributes. bin.length2 is array of height of each group (ie. 'M', 'F') needed for that bin interval, bin.height represents the offset of that group.\r\n * \r\n * Also returns maxCount which is used for setting y axis max value\r\n */\r\nupdateBins(bins, colorVariable='None', nodeColorKeys=undefined) {\r\n  let maxCount = 0;\r\n  // cumulative with multiple colors per column\r\n  if (this.widgets['epiCurve-stackColorBy'] != 'None' && this.widgets['epiCurve-cumulative'] && colorVariable != 'None') { //useNodeColors\r\n    //heights represents the size of each rect, offset represent the offset of each rect\r\n    let heights = new Array(nodeColorKeys.length).fill(0);\r\n    let offsets = new Array(nodeColorKeys.length).fill(0);\r\n    bins.forEach(bin => {\r\n      bin.length2 = [];\r\n      bin.height = [];\r\n      nodeColorKeys.forEach((value, ind) => {\r\n        let currentCount = bin.filter((obj)=> obj[colorVariable]==value).length\r\n        heights[ind] += currentCount;\r\n        bin.length2.push(heights[ind]);\r\n        offsets[ind] = bin.length2.reduce((paritalSum, a)=> paritalSum+a,0);\r\n        bin.height.push(offsets[ind]);\r\n        \r\n      })\r\n      maxCount += bin.length;\r\n    })\r\n    // noncumulative with multiple colors per column\r\n  } else if (this.widgets['epiCurve-stackColorBy'] != 'None' && colorVariable != 'None') {\r\n    bins.forEach(bin => {\r\n      bin.length2 = [];\r\n      bin.height = [];\r\n      nodeColorKeys.forEach(value => {\r\n        bin.length2.push(bin.filter((obj)=> obj[colorVariable]==value).length);\r\n        bin.height.push(bin.length2.reduce((paritalSum, a)=> paritalSum+a,0));\r\n      })\r\n      if (bin.length > maxCount) maxCount = bin.length\r\n    })\r\n  // else if (useNodeColor == False || (useNodeColor && colorVariable=='None')) and using cumulative\r\n  // cumulative with one color \r\n  } else if (this.widgets['epiCurve-cumulative']) {\r\n    bins.forEach(bin => {\r\n      maxCount += bin.length;\r\n      bin.length = maxCount;\r\n    });\r\n    // noncumulative with one color\r\n  } else {\r\n    bins.forEach(bin => {\r\n      if (bin.length > maxCount) maxCount = bin.length\r\n    })\r\n  }\r\n\r\n  return [maxCount, bins]\r\n}\r\n\r\n/**\r\n * \r\n * @return xAxis which is used to determine the interval and label for xAxis ticks and xLabelOffet which determine how much to shift each label\r\n */\r\nconfigureXAxisSettings() {\r\n  let xAxis;\r\n  let numberOfDays = d3.timeDay.count(this.timeDomainStart, this.timeDomainEnd);\r\n  let xLabelOffset = -10;\r\n  if (this.widgets['epiCurve-binSize'] == 'Year') {\r\n    xAxis = d3.axisBottom(this.x).ticks(d3.timeYear).tickFormat(d3.timeFormat(\"%Y\"));\r\n  } else if (numberOfDays<366) {\r\n    xAxis = d3.axisBottom(this.x).ticks(d3.timeMonth.every(this.tickInterval)).tickFormat(d3.timeFormat(\"%b %Y\"))\r\n    xLabelOffset = -25;\r\n  } else if (this.widgets['epiCurve-binSize'] == 'Quarter') {\r\n    xAxis = d3.axisBottom(this.x)\r\n      .ticks(d3.timeMonth.every(this.tickInterval < 3 ? this.tickInterval * 3 : 12))\r\n      .tickFormat((d: Date) => d <= d3.timeYear(d) ? d.getFullYear().toString() : null);\r\n  } else {\r\n    xAxis = d3.axisBottom(this.x)\r\n      .ticks(d3.timeMonth.every(this.tickInterval))\r\n      .tickFormat((d: Date) => d <= d3.timeYear(d) ? d.getFullYear().toString() : null);\r\n  }\r\n  return [xAxis, xLabelOffset]\r\n}\r\n\r\ngoldenLayoutComponentResize() {\r\n  this.refresh();\r\n  if (this.ShowEpiExportPane && this.EpiExportFileType!='svg') {\r\n    this.setCalculatedResolution();\r\n  }\r\n}\r\n\r\n// Handle the change event of the date field\r\nonDateFieldChange(index: number) {\r\n  if (index == 0) {\r\n    this.widgets[\"epiCurve-date-fields\"][index] = this.SelectedDateFieldVariable;\r\n  } else if (index == 1) {\r\n    this.widgets[\"epiCurve-date-fields\"][index] = this.SelectedDateFieldVariable2;\r\n  } else if (index == 2) {\r\n    this.widgets[\"epiCurve-date-fields\"][index] = this.SelectedDateFieldVariable3;\r\n  }\r\n\r\n  this.refresh();\r\n}\r\n\r\nonBinSizeChange() {\r\n  if (this.widgets['epiCurve-binSize'] == 'Year') {\r\n    $('#epi-tick-size').slideUp();\r\n  } else {\r\n    if (this.widgets['epiCurve-binSize'] == 'Quarter') {\r\n      this.tickInterval = 1;\r\n    }\r\n    $('#epi-tick-size').slideDown();\r\n  }\r\n  this.refresh();\r\n}\r\n\r\nupdateSettingsRows() {\r\n  this.ShowEpiSettingsPane = true;\r\n  setTimeout(() => {\r\n    if (this.selectedGraphType == 'Multi: Overlay' || this.selectedGraphType == 'Multi: Side by Side') {\r\n      $('#useNodeColorRow').slideUp();\r\n      $('.additionalDateField').slideDown();\r\n      //$('#epi-color-select').slideUp();\r\n    } else {\r\n      $('.additionalDateField').slideUp();\r\n      $('#useNodeColorRow').slideDown();\r\n      if (this.widgets['epiCurve-stackColorBy'] == 'None') {\r\n        $('#epi-color-select').slideDown();\r\n      }\r\n    }\r\n    //this.ShowEpiSettingsPane = false;\r\n  }, 0)\r\n}\r\n\r\nonGraphTypeChange(refresh=true) {\r\n  this.updateSettingsRows();\r\n\r\n  this.widgets['epiCurve-graphType'] = this.selectedGraphType;\r\n  if (refresh) this.refresh();\r\n}\r\n\r\nonUseNodeColorChange() {\r\n  if (this.widgets['epiCurve-stackColorBy'] == 'None') {\r\n    $('#epi-color-select').slideDown();\r\n  } else {\r\n    $('#epi-color-select').slideUp();\r\n  }\r\n  this.refresh();\r\n}\r\n\r\nonTickIntevalChange() {\r\n  this.refresh()\r\n}\r\n\r\nonNodeColorChanged() {\r\n  this.refresh();\r\n}\r\n\r\nonLegendPositionChange() {\r\n  if (this.widgets['epiCurve-legendPosition'] == 'Bottom') {\r\n    this.margin.bottom = 100;\r\n  } else {\r\n    this.margin.bottom = 50;\r\n  }\r\n  this.refresh();\r\n}\r\n\r\nopenSettings() {\r\n  this.visuals.epiCurve.ShowEpiSettingsPane = !this.visuals.epiCurve.ShowEpiSettingsPane;\r\n}\r\n\r\nsetCumulative(value: boolean): void {\r\n  this.widgets['epiCurve-cumulative'] = value;\r\n\r\n  this.refresh();\r\n}\r\n\r\n\r\n/**\r\n * Sets CalculatedResolution variable to string such as '1250 x 855px'. Only called when export is first opened\r\n */\r\nsetCalculatedResolution() {\r\n  let [width, height] = this.getImageDimensions();\r\n  this.CalculatedResolution = (Math.round(width * this.SelectedNetworkExportScaleVariable) + \" x \" + Math.round(height * this.SelectedNetworkExportScaleVariable) + \"px\");\r\n}\r\n\r\n  /**\r\n   * Updates CalculatedResolution variable to string such as '1250 x 855px' based on ImageDimensions and SelectedNetworkExportScaleVariable. \r\n   * This is called anytime SelectedNetworkExportScaleVariable is updated.\r\n   */\r\n  updateCalculatedResolution() {\r\n    let [width, height] = this.getImageDimensions();\r\n    this.CalculatedResolution = (Math.round(width * this.SelectedNetworkExportScaleVariable) + \" x \" + Math.round(height * this.SelectedNetworkExportScaleVariable) + \"px\");\r\n    this.cdref.detectChanges();\r\n}\r\n\r\n/**\r\n * @returns an array [width, height] of the svg image\r\n */\r\n  getImageDimensions() {\r\n    let parent = this.svg.node();\r\n    return [parent.clientWidth, parent.clientHeight] \r\n  }\r\n\r\nprivate startTimeline(): void {\r\n  this.isPlaying = true;\r\n  this.setTimer();\r\n}\r\n\r\nprivate stopTimeline(): void {\r\n  this.isPlaying = false;\r\n  if (this.timer) {\r\n    this.timer.stop();\r\n  }\r\n}\r\n\r\nprivate setTimer(): void {\r\n  if (this.timer) {\r\n    this.timer.stop();\r\n    d3.timerFlush();\r\n  }\r\n  this.timer = d3.interval(() => {\r\n    const selection = d3.brushSelection(this.brushG.node());\r\n    if (!selection) return this.timer.stop(); // Ignore empty selections\r\n    if (selection[1] >= this.width) {\r\n      this.startTimeline();\r\n      return;\r\n    }\r\n    this.brushG.call(this.brush.move, selection.map(s => s + 1));\r\n    if (++this.tick % 5 == 0) this.propagate();\r\n  }, 110 - parseInt($(\"#timeline-speed\").val() as string));\r\n  if (!this.isPlaying) this.timer.stop();\r\n}\r\n\r\nprivate propagate(): void {\r\n  this.commonService.session.state.timeStart = this.x.invert(this.selection[0]);\r\n  this.commonService.session.state.timeEnd = this.x.invert(this.selection[1]);\r\n  this.commonService.setNodeVisibility(true);\r\n  this.commonService.setLinkVisibility(true);\r\n  this.commonService.tagClusters().then(() => {\r\n    [\"node\", \"link\"].forEach((thing: string) => {\r\n      (window as any).trigger(thing + \"-visibility\");\r\n    });\r\n  });\r\n}\r\n\r\n// private initializeD3Chart(): void {\r\n//   this.clearSvg();\r\n//   this.setupDimensions();\r\n//   this.setupScales();\r\n//   this.createSvg();\r\n//   this.populateData();\r\n//   this.drawHistogram();\r\n//   this.setupBrush();\r\n// }\r\n\r\n// private clearSvg(): void {\r\n//   d3.select(this.timelineElement.nativeElement).selectAll(\"*\").remove();\r\n// }\r\n\r\n// private setupDimensions(): void {\r\n//   const wrapper = this.timelineElement.nativeElement;\r\n//   this.width = wrapper.clientWidth - this.margin.left - this.margin.right;\r\n//   this.height = wrapper.clientHeight - this.margin.top - this.margin.bottom;\r\n// }\r\n\r\n// private setupScales(): void {\r\n//   this.x = d3.scaleTime().range([0, this.width]);\r\n//   this.y = d3.scaleLinear().range([this.height, 0]);\r\n// }\r\n\r\n// private createSvg(): void {\r\n//   this.svg = d3.select(this.timelineElement.nativeElement)\r\n//     .append(\"svg\")\r\n//     .attr(\"width\", this.width + this.margin.left + this.margin.right)\r\n//     .attr(\"height\", this.height + this.margin.top + this.margin.bottom)\r\n//     .append(\"g\")\r\n//     .attr(\"transform\", `translate(${this.margin.left},${this.margin.top})`);\r\n// }\r\n\r\n// private populateData(): void {\r\n//   // Transform your data here\r\n//   this.vnodes.forEach(d => {\r\n//     const time = moment(d.date); // Replace 'date' with your actual date field\r\n//     if (time.isValid()) {\r\n//       d.date = time.toDate();\r\n//     } else {\r\n//       d.date = null;\r\n//     }\r\n//   });\r\n\r\n//   this.timeDomainStart = d3.min(this.vnodes, d => d.date);\r\n//   this.timeDomainEnd = d3.max(this.vnodes, d => d.date);\r\n//   this.x.domain([this.timeDomainStart, this.timeDomainEnd]);\r\n// }\r\n\r\n// private drawHistogram(): void {\r\n//   // Draw your histogram here\r\n//   this.histogram = d3.histogram()\r\n//     .value(d => d.date) // Replace 'date' with your actual date field\r\n//     .domain(this.x.domain())\r\n//     .thresholds(d3.thresholdScott);\r\n\r\n//   const bins = this.histogram(this.vnodes);\r\n\r\n//   if (this.cumulative) {\r\n//     let sum = 0;\r\n//     bins.forEach(bin => {\r\n//       sum += bin.length;\r\n//       bin.length = sum;\r\n//     });\r\n//   }\r\n\r\n//   this.y.domain([0, d3.max(bins, d => d.length)]);\r\n\r\n//   this.svg.selectAll(\"rect\")\r\n//     .data(bins)\r\n//     .enter()\r\n//     .append(\"rect\")\r\n//     .attr(\"x\", d => this.x(d.x0))\r\n//     .attr(\"y\", d => this.y(d.length))\r\n//     .attr(\"width\", d => this.x(d.x1) - this.x(d.x0))\r\n//     .attr(\"height\", d => this.height - this.y(d.length))\r\n//     .attr(\"fill\", \"steelblue\"); // Change fill as necessary\r\n// }\r\n\r\n// private setupBrush(): void {\r\n//   this.brush = d3.brushX()\r\n//     .extent([[0, 0], [this.width, this.height]])\r\n//     .on(\"end\", () => this.onBrushEnd());\r\n\r\n//   this.brushG = this.svg.append(\"g\")\r\n//     .attr(\"class\", \"brush\")\r\n//     .call(this.brush);\r\n// }\r\n\r\n// private onBrushEnd(): void {\r\n//   this.selection = d3.brushSelection(this.brushG.node());\r\n//   if (this.selection) {\r\n//     // Handle brush selection change\r\n//   }\r\n// }\r\n\r\n// playPauseTimeline(): void {\r\n//   if (this.isPlaying) {\r\n//     this.stopTimeline();\r\n//   } else {\r\n//     this.startTimeline();\r\n//   }\r\n// }\r\n\r\n// startTimeline(): void {\r\n//   this.isPlaying = true;\r\n//   this.setTimer();\r\n// }\r\n\r\n// stopTimeline(): void {\r\n//   this.isPlaying = false;\r\n//   if (this.timer) {\r\n//     this.timer.stop();\r\n//   }\r\n// }\r\n\r\n// setTimer(): void {\r\n//   if (this.timer) {\r\n//     this.timer.stop();\r\n//   }\r\n//   this.timer = d3.interval(() => {\r\n//     // Timer logic for updating the timeline\r\n//     // this.updateTimeline();\r\n//   }, 100); // Adjust interval as needed\r\n// }\r\n\r\nupdateNodeColors() {\r\n  this.refresh();\r\n}\r\nupdateVisualization() {\r\n  //Not Relevant\r\n}\r\n\r\napplyStyleFileSettings() {\r\n  this.widgets = (window as any).context.commonService.session.style.widgets;\r\n  this.setDefaultsWidgets();\r\n  \r\n  this.updateSettingsRows()\r\n  this.onLegendPositionChange()\r\n}\r\n\r\nupdateLinkColor() {\r\n  //Not Relevant\r\n}\r\n\r\nonRecallSession() {\r\n}\r\n\r\nopenExport() {\r\n  this.setCalculatedResolution();\r\n  this.ShowEpiExportPane = !this.ShowEpiExportPane;\r\n}\r\n\r\nexportVisualization() {\r\n  if (this.EpiExportFileType == 'svg') {\r\n      let content = this.exportService.unparseSVG(this.epiCurveSVGElement.nativeElement);\r\n      let blob = new Blob([content], { type: 'image/svg+xml;charset=utf-8' });\r\n      saveAs(blob, this.EpiExportFileName + '.' + this.EpiExportFileType);\r\n  } else {\r\n      saveSvgAsPng(this.epiCurveSVGElement.nativeElement, this.EpiExportFileName + '.' + this.EpiExportFileType, {\r\n          scale: this.SelectedNetworkExportScaleVariable,\r\n          backgroundColor: \"#ffffff\",\r\n          encoderType: 'image/' + this.EpiExportFileType,\r\n          //encoderOptions: this.SelectedNetworkExportQualityVariable\r\n      });\r\n  }\r\n  this.ShowEpiExportPane = false;\r\n}\r\n\r\nopenRefreshScreen() {\r\n\r\n}\r\n\r\nonLoadNewData() {\r\n  throw new Error('Method not implemented.');\r\n}\r\nonFilterDataChange() {\r\n  throw new Error('Method not implemented.');\r\n}\r\n\r\n\r\n}\r\n\r\n\r\n\r\nexport namespace TimelineComponent {\r\n  export const componentTypeName = 'Epi Curve';\r\n}","import { Injector, Component, Output, OnChanges, SimpleChange, EventEmitter, OnInit, ViewChild, ElementRef, ChangeDetectorRef, OnDestroy, Inject, ChangeDetectionStrategy } from '@angular/core';\r\nimport { AppComponentBase } from '@shared/common/app-component-base';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { CommonService } from '../../contactTraceCommonServices/common.service';\r\nimport * as d3 from 'd3';\r\nimport { Clipboard } from '@angular/cdk/clipboard';\r\nimport { SelectItem } from 'primeng/api';\r\nimport { DialogSettings } from '../../helperClasses/dialogSettings';\r\nimport { MicobeTraceNextPluginEvents } from '../../helperClasses/interfaces';\r\nimport * as _ from 'lodash';\r\nimport { CustomShapes } from '@app/helperClasses/customShapes';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { saveSvgAsPng } from 'save-svg-as-png';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\nimport { GraphData } from './data';\r\nimport cytoscape, { Core, Style } from 'cytoscape';\r\nimport svg from 'cytoscape-svg';\r\nimport { Subject, Subscription, takeUntil } from 'rxjs';\r\n//import fcose from 'cytoscape-fcose';\r\nimport * as d3f from 'd3-force';\r\nimport { CommonStoreService } from '@app/contactTraceCommonServices/common-store.services';\r\nimport { ExportService, ExportOptions } from '@app/contactTraceCommonServices/export.service';\r\nimport { NgZone } from '@angular/core'; \r\n\r\n\r\n@Component({\r\n    selector: 'TwoDComponent',\r\n    templateUrl: './twoD-plugin.component.html',\r\n    styleUrls: ['./twoD-plugin.component.scss'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class TwoDComponent extends BaseComponentDirective implements OnInit, MicobeTraceNextPluginEvents, OnDestroy {\r\n\r\n    @Output() DisplayGlobalSettingsDialogEvent = new EventEmitter();\r\n\r\n    // Reference to the Cytoscape container\r\n    @ViewChild('cy', { static: false }) cyContainer: ElementRef;\r\n    @ViewChild('exportContainer') exportContainer: ElementRef;\r\n    @ViewChild('nodeSymbolTable') nodeSymbolTable!: ElementRef;\r\n    @ViewChild('polygonColorTable') polygonColorTable!: ElementRef;\r\n    @ViewChild('networkStats') networkStatisticsTable!: ElementRef;\r\n\r\n    // Cytoscape core instance\r\n    cy: Core;\r\n    vizLoaded = true;\r\n    nodePositions: Map<string, { x: number; y: number }> = new Map();\r\n    data;\r\n    rerenderTimeout: any;\r\n    layoutParallelNodesPerColumn = 4;\r\n    debugMode = false;\r\n    overideTransparency = false;\r\n    containerHeight = 800; // or any other number you want\r\n    graphData: GraphData = {\r\n        nodes: [],\r\n        links: []\r\n    };\r\n    selectedNodeId = undefined;\r\n    selectedNodeShape: string = 'ellipse'; // Default shapeDF\r\n    symbolMapping: { key: string, value: string, name:string }[] = [\r\n        { key: 'ellipse', value: '\\u2b24', name:' (Circle) ' }, \r\n        { key: \"triangle\", value: '\\u25b2', name: ' (Triangle)' },\r\n        { key: \"rectangle\", value: '\\u25fc', name: ' (Square)' },\r\n        { key: \"rhomboid\", value: '\\u25b0', name: ' (Rhombus)' },\r\n        { key: \"diamond\", value: '\\u25c6', name: ' (Diamond)' },\r\n        { key: \"heptagon\", value: '\\u2b23', name: ' (Heptagon)' },\r\n        { key: \"pentagon\", value: '\\u2b1f', name: ' (Pentagon)' },\r\n        { key: \"hexagon\", value: '\\u2b22', name: ' (Hexagon)' },\r\n        { key: \"barrel\", value: '', name: ' (Barrel)' },\r\n        { key: \"octagon\", value: '\\u2bc3', name: ' (Octagon)' },\r\n        { key: \"star\", value: '\\u2605', name: ' (Star)' },\r\n        { key: \"tag\", value: '\\u2617', name: ' (Tag)' },\r\n        { key: \"vee\", value: 'V', name: ' (Vee)' },\r\n    ];\r\n    shapeAggregates: { key: string, count: Number, frequency: Number }[] = [];\r\n    shapeSort: { key: string, assending: boolean} = { key: 'count', assending: true};\r\n\r\n    linkMin: number = 3;\r\n    linkMax: number = 27;\r\n    linkScale: any;\r\n    visLinks: any;\r\n    linkMid: number = 1\r\n\r\n    nodeMin: number = 3;\r\n    nodeMax: number = 27;\r\n    nodeScale: d3.ScaleLinear<number, number> = d3.scaleLinear().domain([0, 1]).range([0, 1]);    \r\n    visNodes: any;\r\n    nodeMid: number = 1;\r\n\r\n    // TODO determine if this is needed anymore after transition to cytoscape\r\n    autoFit: boolean = true;\r\n\r\n    ShowNetworkAttributes: boolean = false;\r\n    ShowStatistics: boolean = true;\r\n    Show2DExportPane: boolean = false;\r\n    Show2DSettingsPane: boolean = false;\r\n    IsDataAvailable: boolean = false;\r\n\r\n    widgets: object;\r\n    halfWidth: any = null;\r\n    halfHeight: any = null;\r\n    transform: any = null;\r\n    force: any = null;\r\n    radToDeg: any = (180 / Math.PI);\r\n    selected: any = null;\r\n    zoom: any = null;\r\n    FieldList: SelectItem[] = [];\r\n    ToolTipFieldList: SelectItem[] = [];\r\n    LinkToolTipList: SelectItem[] = [];\r\n\r\n    ctrlPressed: boolean = false;\r\n    dragging: boolean = false;\r\n\r\n    isLoading: boolean = true;\r\n    viewActive: boolean = true;\r\n\r\n    //Polygon Tab\r\n    SelectedPolygonLabelVariable: string = \"None\";\r\n    SelectedPolygonColorVariable: string = \"None\";\r\n    SelectedPolygonLabelOrientationVariable: 'top' | 'bottom' | 'center' = \"top\";\r\n    SelectedPolygonLabelSizeVariable: number = 0.0;\r\n    SelectedPolygonGatherValue: number = 0.0;\r\n    CenterPolygonVariable: string = \"None\";\r\n    SelectedPolygonLabelShowVariable: string = \"Hide\";\r\n    SelectedPolygonColorShowVariable: string = \"Hide\";\r\n    SelectedPolygonColorTableShowVariable: string = \"Hide\";\r\n\r\n\r\n    // Node Tab    \r\n    SelectedNodeLabelOrientationVariable: 'Right' | 'Left' | 'Top' | 'Bottom' | 'Middle' = 'Right';\r\n    SelectedNodeLabelVariable: string = \"None\";\r\n    SelectedNodeTooltipVariable: any = \"None\";\r\n    SelectedNodeSymbolVariable: string = \"None\";\r\n    SelectedNodeShapeVariable: string = \"ellipse\";\r\n    SelectedNodeRadiusVariable: string = \"None\";\r\n    SelectedNodeRadiusSizeVariable: number = 50;\r\n\r\n    TableTypes: any = [\r\n        { label: 'Show', value: 'Show' },\r\n        { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedNetworkTableTypeVariable: string = \"Hide\";\r\n\r\n    // Link Tab\r\n    SelectedLinkTooltipVariable: any = \"None\";\r\n    SelectedLinkLabelVariable: string = \"None\";\r\n    SelectedLinkDecimalVariable: number = 3;\r\n    SelectedLinkTransparencyVariable: any = 0;\r\n    SelectedLinkWidthByVariable: string = \"None\";\r\n    SelectedLinkWidthMax: number = 27;\r\n    SelectedLinkWidthMin: number = 3;\r\n\r\n    ReciprocalTypes: any = [\r\n        { label: 'Reciprocal', value: 'Reciprocal' },\r\n        { label: 'Non-Reciprocal', value: 'Non-Reciprocal' }\r\n    ];\r\n    SelectedLinkReciprocalTypeVariable: string = \"Reciprocal\";\r\n\r\n    SelectedLinkWidthVariable: any = 0;\r\n    SelectedLinkLengthVariable: any = 50;\r\n    ArrowTypes: any = [\r\n        { label: 'Hide', value: 'Hide' },\r\n        { label: 'Show', value: 'Show' }\r\n    ];\r\n\r\n    hideShowOptions: any = [\r\n        { label: 'Hide', value: false },\r\n        { label: 'Show', value: true }\r\n    ];\r\n\r\n    bidirectionalOptions: any = [\r\n        { label: 'Hide', value: 'Hide' },\r\n        { label: 'Show', value: 'Show' }\r\n    ];\r\n    SelectedLinkArrowTypeVariable: string = \"Hide\";\r\n\r\n    SelectedLinkBidirectionalTypeVariable: string = \"Hide\";\r\n\r\n    // Network \r\n    NeighborTypes: any = [\r\n        { label: 'Normal', value: 'Normal' },\r\n        { label: 'Highlighted', value: 'Highlighted' }\r\n    ];\r\n    SelectedNetworkNeighborTypeVariable: string = \"Normal\";\r\n\r\n    GridLineTypes: any = [\r\n        { label: 'Hide', value: 'Hide' },\r\n        { label: 'Show', value: 'Show' }\r\n    ];\r\n    SelectedNetworkGridLineTypeVariable: string = \"Hide\";\r\n\r\n    SelecetedNetworkLinkStrengthVariable: any = 0.123;\r\n    SelectedNetworkExportFilenameVariable: string = \"\";\r\n\r\n    NetworkExportFileTypeList: any = [\r\n        { label: 'png', value: 'png' },\r\n        { label: 'jpeg', value: 'jpeg' },\r\n        { label: 'webp', value: 'webp' },\r\n        { label: 'svg', value: 'svg' }\r\n    ];\r\n\r\n    rerenderOnActive: boolean = false;\r\n\r\n    SelectedNetworkExportFileTypeListVariable: string = \"png\";\r\n    SelectedNetworkExportScaleVariable: any = 1;\r\n    SelectedNetworkExportQualityVariable: any = 0.92;\r\n    CalculatedResolution: string;\r\n\r\n    SelectedNodeLabelSizeVariable: any = 16;\r\n\r\n    public nodeBorderWidth = 2.0;\r\n\r\n    ShowNodeSymbolWrapper: boolean = false;\r\n    ShowNodeSymbolTable: boolean = false;\r\n    ShowPolygonColorTable: boolean = false;\r\n    ShowAdvancedExport: boolean = true;\r\n\r\n    NodeSymbolTableWrapperDialogSettings: DialogSettings = new DialogSettings('#node-symbol-table-wrapper', false);\r\n    PolygonColorTableWrapperDialogSettings: DialogSettings = new DialogSettings('#polygon-color-table-wrapper', false);\r\n\r\n    Node2DNetworkExportDialogSettings: DialogSettings = new DialogSettings('#network-settings-pane', false);\r\n\r\n    ContextSelectedNodeAttributes: { attribute: string, value: string }[] = [];\r\n\r\n    // TODO see if needed after transition to cytoscape\r\n    // zoomScaleExtent: [number, number] = [0.005, 5]; // Minimum zoom of 0.1 and maximum zoom of 2\r\n\r\n    private customShapes: CustomShapes = new CustomShapes();\r\n    private symbolTableWrapper: HTMLElement | null = null;\r\n    private linkColorTableWrapper: HTMLElement | null = null;\r\n    private nodeColorTableWrapper: HTMLElement | null = null;\r\n\r\n    private isExportClosed: boolean = false;\r\n    /* XXXXXnot sure if this boolean is necessary; Related to exportWork, and bottom-table s (ie. node-symbol-table-bottom)\r\n     currently exportWork2 is used which don't make use of isExporting and bottom-table s XXXXX */\r\n    public isExporting: boolean = false;\r\n\r\n    isMac: boolean = navigator.userAgent.toUpperCase().indexOf('MAC') >= 0;\r\n    thresholdSubscription: any;\r\n    threshold: number;\r\n    networkUpdatedSubscription: any;\r\n    settingsLoadedSubscription: any;\r\n    private styleFileSub: any;\r\n    constructor(injector: Injector,\r\n        private eventManager: EventManager,\r\n        public commonService: CommonService,\r\n        @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer,\r\n        elRef: ElementRef,\r\n        private cdref: ChangeDetectorRef,\r\n        private clipboard: Clipboard,\r\n        private gtmService: GoogleTagManagerService,\r\n        private store: CommonStoreService,\r\n        private exportService: ExportService,\r\n        private zone: NgZone \r\n    ) {\r\n\r\n        super(elRef.nativeElement);\r\n\r\n        // this.setExpanded(this.mainSite);\r\n\r\n        this.widgets = this.commonService.session.style.widgets;\r\n\r\n\r\n        this.container.on('resize', () => { this.fit()})\r\n        this.container.on('hide', () => { \r\n            this.viewActive = false; \r\n            this.cdref.detectChanges();\r\n        })\r\n        this.container.on('show', () => { \r\n            this.viewActive = true; \r\n            this.cdref.detectChanges();\r\n            setTimeout(() => {\r\n                if (this.rerenderOnActive) {\r\n                    this._rerender()\r\n                    this.rerenderOnActive = false;\r\n                }\r\n                this.fit()\r\n                this.commonService.onStatisticsChanged(\"Show\");\r\n            }, 50)\r\n        })\r\n\r\n            // Initialize the selectedNodeShape from the settings\r\n        this.widgets['node-symbol'] = this.mapPreviousShapeNameToCurrent(this.widgets['node-symbol']);\r\n        this.selectedNodeShape = this.widgets['node-symbol'];\r\n\r\n        cytoscape.use(svg);\r\n\r\n    }\r\n\r\n    private destroy$ = new Subject<void>();\r\n\r\n\r\n    ngOnInit() {\r\n        \r\n        // Console log this out to see what the window objetc has like temp\r\n        // const windowKeys = Reflect.ownKeys(window);\r\n\r\n        // this.commonService.updateNetwork();\r\n\r\n        console.log('--- TwoD ngOnInit called');\r\n\r\n        console.log(this.cyContainer);\r\n        this.networkUpdatedSubscription = this.store.networkUpdated$\r\n        .pipe(takeUntil(this.destroy$))\r\n        .subscribe(newPruned => {\r\n            console.log('--- TwoD DATA network updated', newPruned);\r\n            if (this.data && this.store.settingsLoadedValue && newPruned) {\r\n                console.log(`TwoD view to be rerendered.  ${this.viewActive ? 'Updating Now' : 'Updating when view is active'}`);\r\n                if (this.viewActive){\r\n                    this._rerender(false);\r\n                } else {\r\n                    this.rerenderOnActive = true;\r\n                }\r\n                //this.loadSettings();\r\n            }\r\n        });\r\n\r\n        this.store.clusterUpdate$.pipe(takeUntil(this.destroy$)).subscribe(() => {\r\n            if (this.widgets['node-symbol-variable'] == 'cluster') {\r\n                this.generateNodeSymbolSelectionTable(\"#node-symbol-table\", this.widgets['node-symbol-variable']);\r\n                this.cdref.detectChanges();\r\n            }\r\n        })\r\n\r\n        this.settingsLoadedSubscription = this.store.settingsLoaded$\r\n        .pipe(takeUntil(this.destroy$))\r\n        .subscribe(loaded => {\r\n            if(loaded && this.commonService.activeTab === '2D Network') {\r\n\r\n                 this._rerender();\r\n\r\n            }\r\n        });\r\n\r\n    this.thresholdSubscription = this.store.linkThreshold$\r\n        .pipe(takeUntil(this.destroy$))\r\n        .subscribe(newThreshold => {\r\n            if (!this.commonService.session.network.isFullyLoaded) return;\r\n\r\n            if(this.commonService.activeTab === '2D Network') {\r\n                if (this.threshold !== newThreshold) {\r\n                    console.log('--- TwoD partial threshold changed', newThreshold);\r\n                    this._partialUpdate();\r\n                }\r\n            }\r\n        });\r\n        this.InitView();\r\n\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        console.log('--- TwoD ngAfterViewInit called');\r\n      \r\n      }\r\n\r\n  mapDataToCytoscapeElements(data: any, timelineTick=false): cytoscape.ElementsDefinition {\r\n\r\n    console.log('--- TwoD mapDataToCytoscapeElements called');\r\n        // Create a set to track unique parent nodes\r\n    const parentNodes = new Set();\r\n\r\n    const edges = data.links.flatMap((link: any) => {\r\n        if ((this.widgets['link-color-variable'] == 'Origin' || this.widgets['link-color-variable'] == 'origin') && link.origin.length > 1) {\r\n            return link.origin.map((originItem: any, index) => ({\r\n                data: {\r\n                    // Include any additional edge-specific data properties\r\n                    ...link,\r\n                    id: index > 0 ? `${link.id}-2`: link.id,\r\n                    source: link.source,\r\n                    target: link.target,\r\n                    lineSelectedColor: this.widgets['selected-color'],\r\n                    label: this.getLinkLabel(link).text, // Existing link label\r\n                    lineColor: this.getLinkColor({origin: originItem}).color, // Default to black if not specified\r\n                    lineOpacity: this.getLinkColor({origin: originItem}).opacity, // Default to fully opaque if not specified\r\n                    width: this.getLinkWidth(link),\r\n                    origin: [originItem],\r\n                    secondLink: index > 0 ? true: false\r\n                }\r\n            }));\r\n        }\r\n        return [{ data: {\r\n            // Include any additional edge-specific data properties\r\n            ...link,\r\n            id: link.id,\r\n            source: link.source,\r\n            target: link.target,\r\n            lineSelectedColor: this.widgets['selected-color'],\r\n            label: this.getLinkLabel(link).text, // Existing link label\r\n            lineColor: this.getLinkColor(link).color, // Default to black if not specified\r\n            lineOpacity: this.getLinkColor(link).opacity, // Default to fully opaque if not specified\r\n            width: this.getLinkWidth(link),\r\n            secondLink: false,\r\n        }}]\r\n    });\r\n\r\n    console.log('--- TwoD mapDataToCytoscapeElements Links Done');\r\n\r\n\r\n    const nodes = data.nodes.map((node: any) => {\r\n         // If the node has a parentId, add it to the parentNodes set\r\n        if (node.group && this.widgets['polygons-show']) {\r\n            parentNodes.add(node.group);\r\n        }\r\n\r\n        if (timelineTick) {\r\n            // otherwise data: label gets overridden to be undefined\r\n            node.label = this.getNodeLabel(node);\r\n            node.nodeSize = Number(this.getNodeSize(node));\r\n            [node.nodeColor, node.bgOpacity] = this.getNodeColor(node);\r\n            return {\r\n                data: {\r\n                    id: node.id,\r\n                    parent: (node.group && this.widgets['polygons-show']) || undefined, // Assign parent if exists\r\n                    //nodeColor: this.getNodeColor(node), // <-- Added for dynamic node color\r\n                    selectedBorderColor: this.widgets['selected-color'],\r\n                    fontSize: this.getNodeFontSize(node), // <-- Added for dynamic label size\r\n                    shape: this.getNodeShape(node),\r\n                    // Include any additional node-specific data properties\r\n                    ...node\r\n                },\r\n                position: { \r\n                    x:node.x || this.nodePositions.get(node.id)?.x || Math.random() * 500,\r\n                    y:node.y || this.nodePositions.get(node.id)?.y || Math.random() * 500\r\n                }\r\n            }\r\n        } else {\r\n            node.label = this.getNodeLabel(node);\r\n            node.nodeSize = Number(this.getNodeSize(node));\r\n            [node.nodeColor, node.bgOpacity] = this.getNodeColor(node); // <-- Added for dynamic node color\r\n            return {\r\n                data: {\r\n                    id: node.id,\r\n                    //label: (this.widgets['node-label-variable'] === 'None' || !node.label) ? '' : node.label,\r\n                    parent: (node.group && this.widgets['polygons-show']) || undefined, // Assign parent if exists\r\n                    //nodeSize: Number(this.getNodeSize(node)), // Existing node size\r\n                    //nodeColor: this.getNodeColor(node), // <-- Added for dynamic node color\r\n                    borderWidth: this.getNodeBorderWidth(node), // <-- Added for dynamic border width\r\n                    selectedBorderColor: this.widgets['selected-color'],\r\n                    fontSize: this.getNodeFontSize(node), // <-- Added for dynamic label size\r\n                    shape: this.getNodeShape(node),\r\n                    // Include any additional node-specific data properties\r\n                    ...node\r\n                },\r\n                position: {\r\n                    x: node.x || this.nodePositions.get(node.id)?.x || Math.random() * 500,\r\n                    y: node.y || this.nodePositions.get(node.id)?.y || Math.random() * 500\r\n                  }\r\n                  \r\n            };\r\n        }\r\n    });\r\n\r\n    console.log('--- TwoD mapDataToCytoscapeElements nodes done');\r\n\r\n\r\n    return {\r\n        edges: edges,\r\n        nodes: nodes\r\n        };\r\n    }\r\n\r\n    getCytoscapeStyles(): cytoscape.StylesheetCSS[] {\r\n        return [\r\n            {\r\n                selector: 'node',\r\n                css: {\r\n                    'background-color': 'data(nodeColor)', // Use dynamic node color\r\n                    // 'width': 'mapData(nodeSize, 0, 100, 10, 50)', // Existing dynamic sizing\r\n                    // 'height': 'mapData(nodeSize, 0, 100, 10, 50)',\r\n                    'border-width': 'data(borderWidth)', // Use dynamic border width\r\n                    // 'border-color': '#000',\r\n                    'text-valign': (() => {\r\n                        const o = (this.widgets && this.widgets['node-label-orientation']) ? this.widgets['node-label-orientation'].toLowerCase() : 'right';\r\n                        if (o === 'top') return 'top';\r\n                        if (o === 'bottom') return 'bottom';\r\n                        return 'center';\r\n                    })(),\r\n                    'text-halign': (() => {\r\n                        const o = (this.widgets && this.widgets['node-label-orientation']) ? this.widgets['node-label-orientation'].toLowerCase() : 'right';\r\n                        if (o === 'left') return 'left';\r\n                        if (o === 'right') return 'right';\r\n                        return 'center';\r\n                    })(),\r\n                    'color': 'black',\r\n                    // @ts-ignore\r\n                    'shape': 'data(shape)',\r\n                    'z-index': 10, // Not a standard Cytoscape property, but kept for clarity\r\n                    // 'font-size': 'data(fontSize)' // Ensure this line is included\r\n                }\r\n            },\r\n            {\r\n                selector: 'node[label]',\r\n                css: {\r\n                  'label': 'data(label)' \r\n                }\r\n              },\r\n              {\r\n                selector: 'node[!label]',\r\n                css: {\r\n                  'label': '' // or omit entirely\r\n                }\r\n              },\r\n              // Apply styles only to nodes with nodeSize defined\r\n            {\r\n                selector: 'node[nodeSize]',\r\n                css: {\r\n                    'width': 'mapData(nodeSize, 0, 100, 10, 50)',\r\n                    'height': 'mapData(nodeSize, 0, 100, 10, 50)'\r\n                }\r\n            },\r\n            {\r\n                selector: 'node[bgOpacity]',\r\n                css: {\r\n                    // @ts-ignore\r\n                    'background-opacity': 'data(bgOpacity)',\r\n                }\r\n            },\r\n                {\r\n                    selector: '.hidden',\r\n                    css: {\r\n                        display: 'none'\r\n                    }\r\n                },\r\n            // Apply styles only to nodes with nodeColor defined\r\n            {\r\n                selector: 'node[nodeColor]',\r\n                css: {\r\n                    'background-color': 'data(nodeColor)'\r\n                }\r\n            },\r\n            // Apply styles only to nodes with fontSize defined\r\n            {\r\n                selector: 'node[fontSize]',\r\n                css: {\r\n                    'font-size': 'data(fontSize)'\r\n                }\r\n            },\r\n            {\r\n                selector: 'node[shape]',\r\n                css: {\r\n                    // @ts-ignore\r\n                    'shape': 'data(shape)'\r\n                }\r\n            },\r\n            {\r\n                selector: 'node.parent',\r\n                css: {\r\n                    'z-index': 20, // Not a standard Cytoscape property, but kept for clarity\r\n                    // We also need to ensure that it uses data(...) for color & alpha:\r\n                    'background-color': 'data(nodeColor)', \r\n                    'border-width': 'data(borderWidth)'   \r\n                    // The critical addition (can also be 'opacity' but that will fade the label, border, etc.):\r\n                    // 'z-compound-depth': 'back',  // ensures parent is behind children\r\n                }\r\n            },\r\n            {\r\n                selector: 'node.parent[bgOpacity]',\r\n                css: {\r\n                    // @ts-ignore\r\n                    'background-opacity': 'data(bgOpacity)',\r\n                }\r\n            },\r\n            {\r\n                selector: 'edge',\r\n                css: {\r\n                    'width': 'data(width)', // Existing dynamic edge width\r\n                    'line-color': 'data(lineColor)', // Maps 'lineColor' data attribute to 'line-color' style\r\n                    // @ts-ignore\r\n                    'line-opacity': 'data(lineOpacity)', // Explicitly control link transparency\r\n\r\n                    'label' : 'data(label)',                   \r\n                    // 'target-arrow-color': '#ccc',\r\n                    // 'target-arrow-shape': 'triangle',\r\n                    'curve-style': 'straight'\r\n                    // 'opacity': 'data(opacity)' // Existing opacity\r\n                }\r\n            },\r\n            {\r\n                selector: 'edge[secondLink]',\r\n                css: {\r\n                    'line-style': 'dashed',\r\n                    'line-dash-pattern': [10, 10],\r\n                    'line-dash-offset': 5,\r\n                }\r\n            },\r\n            {\r\n                selector: 'edge[!secondLink]',\r\n                css: {\r\n                    'line-style': 'solid',\r\n                }\r\n            },\r\n            {\r\n                selector: 'node:selected',\r\n                css: {\r\n                    'background-color': 'data(nodeColor)',\r\n                    'border-color': 'data(selectedBorderColor)',\r\n                    'border-width': 3\r\n                }\r\n            },\r\n            {\r\n                selector: 'edge:selected',\r\n                css: {\r\n                    // 'line-color': '#f00',\r\n                    // 'target-arrow-color': '#f00',\r\n                    'width': 3\r\n                }\r\n            },\r\n            {\r\n                selector: 'edge.highlighted',\r\n                css: {\r\n                    'line-color': 'data(lineSelectedColor)', // Highlight color\r\n                    'width': '3px',\r\n                    'opacity': 1,\r\n                }\r\n            }\r\n        ];\r\n    }\r\n\r\n    attachCytoscapeEvents() {\r\n        console.log('--- TwoD attachCytoscapeEvents called');\r\n\r\n        // Debounced function to sync Cytoscape selections with the common service.\r\n        const syncCySelectionToService = _.debounce(() => {\r\n            const selectedNodes = this.cy.nodes(':selected');\r\n            const selectedIds = new Set(selectedNodes.map(node => node.id()));\r\n\r\n            let selectionChanged = false;\r\n            // Sync with the main nodes array\r\n            this.commonService.session.data.nodes.forEach(n => {\r\n                const shouldBeSelected = selectedIds.has(n._id || n.id);\r\n                if (n.selected !== shouldBeSelected) {\r\n                    n.selected = shouldBeSelected;\r\n                    selectionChanged = true;\r\n                }\r\n            });\r\n\r\n            // Sync with the filtered nodes array\r\n            this.commonService.session.data.nodeFilteredValues.forEach(n => {\r\n                const shouldBeSelected = selectedIds.has(n._id || n.id);\r\n                if (n.selected !== shouldBeSelected) {\r\n                    n.selected = shouldBeSelected;\r\n                }\r\n            });\r\n\r\n            // If the selection state was changed, notify other components.\r\n            if (selectionChanged) {\r\n                $(document).trigger('node-selected');\r\n            }\r\n        }, 100); // Debounce for 100ms to handle rapid events efficiently.\r\n\r\n        // Listen for all selection events to trigger the sync.\r\n        this.cy.on('select unselect', 'node', syncCySelectionToService);\r\n        \r\n        this.cy.on('tap', 'node', (evt) => {\r\n            const node = evt.target;\r\n            console.log('Selected node:', node.data());\r\n    \r\n            // Update selectedNodeId and trigger change detection or re-render if necessary\r\n            this.selectedNodeId = node.id();\r\n\r\n            // Update with selected color set in global settings\r\n            node.data('selectedBorderColor', this.widgets['selected-color']);\r\n\r\n            this.cy.style().update();\r\n    \r\n        });\r\n    \r\n        this.cy.on('mouseover', 'node', (evt) => {\r\n            // Run UI updates inside Angular's zone\r\n            this.zone.run(() => {\r\n                const node = evt.target;\r\n                this.showNodeTooltip(node.data(), evt.originalEvent);\r\n                $('html,body').css('cursor', 'grab');\r\n    \r\n                if (this.widgets['node-highlight']) {\r\n                    node.connectedEdges().addClass('highlighted');\r\n                }\r\n            });\r\n        });\r\n    \r\n        this.cy.on('mouseout', 'node', (evt) => {\r\n            // Run UI updates inside Angular's zone\r\n            this.zone.run(() => {\r\n                const node = evt.target;\r\n                this.hideTooltip();\r\n                $('html,body').css('cursor', 'default');\r\n    \r\n                if (this.widgets['node-highlight']) {\r\n                    node.connectedEdges().removeClass('highlighted');\r\n                }\r\n            });\r\n        });\r\n    \r\n        // Edge events\r\n        this.cy.on('mouseover', 'edge', (evt) => {\r\n            this.zone.run(() => {\r\n                const edge = evt.target;\r\n                this.showLinkTooltip(edge.data(), evt.originalEvent);\r\n            });\r\n        });\r\n    \r\n        this.cy.on('mouseout', 'edge', () => {\r\n            this.zone.run(() => {\r\n                this.hideTooltip();\r\n            });  \r\n        });\r\n    \r\n        this.cy.on('dragfree', 'node', (evt) => {\r\n            const node = evt.target;\r\n            let skip = (node.children().length > 0 || node.classes().includes('hidden')) // no need to update position of parent or hidden nodes\r\n\r\n            if (!skip) {\r\n                this.updateNodePos(node);\r\n            }\r\n\r\n            // Handle node drag logic\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Used to gather nodes within a group and separate them from other groups\r\n     * @param initial - if true runs iterations of gather force first, then run second simulation that both gathers nodes within a group and separates them from other groups\r\n     * @returns \r\n     */\r\n    async gatherGroups(initial: boolean = true): Promise<{ nodes: any[]; links: any[] }> { \r\n        if (this.commonService.session.network.allPinned) {\r\n            // If nodes are pinned, skip running the force simulation\r\n            return { nodes: [], links: []};\r\n        }\r\n        let visNodes = this.commonService.getVisibleNodes();\r\n        if (initial) {\r\n            const { nodes: laidOutNodes, links: laidOutLinks} = await this.applyGatherForce(10);\r\n            \r\n            this.cy.nodes().forEach(node => {\r\n                if (laidOutNodes.map(n => n.id).includes(node.id())) {\r\n                    let cNode = laidOutNodes.find(n => n.id === node.id());\r\n                    node.position({ x: cNode.x, y: cNode.y });\r\n                }\r\n            });\r\n\r\n            // second iteration leads to better layout, skip if number of nodes > 500\r\n            if (this.commonService.session.data.nodeFilteredValues.length < 500) {\r\n                const { nodes: laidOutNodes3, links: laidOutLinks3} = await this.applyGatherForce(10);\r\n                \r\n                this.cy.nodes().forEach(node => {\r\n                    if (laidOutNodes3.map(n => n.id).includes(node.id())) {\r\n                        let cNode = laidOutNodes3.find(n => n.id === node.id());\r\n                        node.position({ x: cNode.x, y: cNode.y });\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        \r\n        const { nodes: laidOutNodes2, links: laidOutLinks2, parentNodes: pNodes2 } = await this.applySeparationForce();\r\n\r\n        // moves individual (child and independent) nodes\r\n        laidOutNodes2.forEach(node => {\r\n            let cyNode = this.cy.nodes().toArray().find(n => n.id() === node.id);\r\n            if (cyNode) {\r\n                cyNode.position({ x: node.x, y: node.y });\r\n            }\r\n        })\r\n\r\n        // moves parent (parent and indepent) nodes\r\n        if (this.widgets['polygons-foci'] != 'None') {\r\n            pNodes2.forEach(node => {\r\n                let cyNode = this.cy.nodes().toArray().find(n => n.id() === node.id);\r\n                if (cyNode) {\r\n                    cyNode.position({ x: node.x, y: node.y });\r\n                }\r\n            })\r\n        }\r\n\r\n        // updates node position values (x, y) stored in commonService \r\n        visNodes.forEach(node => {\r\n            let currentNode = this.cy.nodes().toArray().find(n => n.id() == node.id)\r\n            if (currentNode) {\r\n                node.x = currentNode.position('x');\r\n                node.y = currentNode.position('y');\r\n            }\r\n        })\r\n\r\n        this.fit();\r\n\r\n        return { nodes: [], links: [] };\r\n\r\n    }\r\n\r\n    /**\r\n     * Applies force to gather nodes within a group\r\n     * @param ticks - number of ticks to run the simulation for\r\n     */\r\n    async applyGatherForce(ticks: number = 10): Promise<{ nodes: any[]; links: any[] }> {\r\n                //let nodes = this.commonService.getVisibleNodes()\r\n        let links = this.commonService.getVisibleLinks().map(link =>{ return {'source': link.source, 'target': link.target} });\r\n        \r\n        let tickCount = 0;\r\n        \r\n        let childNodes: {id: string, parentX: any, parentY: any,  x: number, y: number, vx?:number, vy?:number, size: number}[] = [];\r\n\r\n        this.cy.nodes().forEach(node => {\r\n            if (node.children().length > 0) {\r\n                return;\r\n            } else if (node.parent().length > 0) {\r\n                childNodes.push({ \r\n                    id: node.id(),\r\n                    parentX: node.parent()[0].position('x'),\r\n                    parentY: node.parent()[0].position('y'),\r\n                    x: node.position('x'),\r\n                    y: node.position('y'),\r\n                    size: node.width(),\r\n                })\r\n            } else {\r\n                childNodes.push({\r\n                    id: node.id(),\r\n                    parentX: 0,\r\n                    parentY: 0,\r\n                    x: node.position('x'),\r\n                    y: node.position('y'),\r\n                    size: node.width(),\r\n                })\r\n\r\n            }\r\n        })\r\n\r\n        let gatherSimulation = d3.forceSimulation(childNodes)\r\n            .force('charge', d3.forceManyBody().strength(-10))\r\n            .force('link', d3.forceLink(links).id((d: any) => d.id).distance(30))\r\n            .force('center', d3.forceCenter(0, 0))\r\n            .force('collide', d3.forceCollide().radius(d => d.size)) // don't need to use mapNodeSize here since we are using the size of the node from cytoscape instead of from nodeSize\r\n            .force('x', d3.forceX(d => d.parentX).strength(d => d.parentX == 0 ? .005 : .35))\r\n            .force('y', d3.forceY(d => d.parentY).strength(d => d.parentY == 0 ? .005 : .35))\r\n            .stop();\r\n      \r\n        return new Promise((resolve) => {\r\n          function tick() {\r\n            \r\n            gatherSimulation.tick();\r\n  \r\n            tickCount++;\r\n\r\n            if (tickCount < ticks) {\r\n              // Use setTimeout to yield control to the browser between ticks\r\n              setTimeout(tick, 0);\r\n            } else {\r\n              // After all ticks, resolve the promise with the updated nodes and links.\r\n              resolve({ nodes: childNodes, links});\r\n            }\r\n          }\r\n          tick();\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * Applies force to gather nodes within a group and separate them from other groups\r\n     */\r\n    async applySeparationForce(): Promise<{ nodes: any[]; links: any[], parentNodes: any[] }> {\r\n        let links = this.commonService.getVisibleLinks().map(link =>{ return {'source': link.source, 'target': link.target} });\r\n        let ticks = 20;\r\n        let tickCount = 0;\r\n\r\n        let parentNodes: {id: string, max_dim: number, x: number, y: number, vx?:number, vy?:number, group: boolean}[] = [];\r\n        let childNodes: {id: string, parent: any, x: number, y: number, vx?:number, vy?:number, size: number}[] = [];\r\n\r\n        this.cy.nodes().forEach(node => {\r\n            if (node.children().length > 0) {\r\n                //console.log(node);\r\n                parentNodes.push({\r\n                    id: node.id(),\r\n                    max_dim: Math.max(node.boundingBox().w, node.boundingBox().h),\r\n                    x: node.position('x'),\r\n                    y: node.position('y'),\r\n                    group: true,\r\n                })\r\n            } else if (node.parent().length > 0) {\r\n                childNodes.push({ \r\n                    id: node.id(),\r\n                    parent: node.parent()[0].data('id'),\r\n                    x: node.position('x'),\r\n                    y: node.position('y'),\r\n                    size: node.width(),\r\n                })\r\n            } else {\r\n                parentNodes.push({\r\n                    id: node.id(),\r\n                    max_dim: 35,\r\n                    x: node.position('x'),\r\n                    y: node.position('y'),\r\n                    group: false,\r\n                })\r\n                childNodes.push({\r\n                    id: node.id(),\r\n                    parent: null,\r\n                    x: node.position('x'),\r\n                    y: node.position('y'),\r\n                    size: node.width(),\r\n                })\r\n\r\n            }\r\n\r\n        })\r\n        if (this.commonService.session.network.allPinned) {\r\n            // If nodes are pinned, skip running the force simulation\r\n            return { nodes: childNodes, links, parentNodes };\r\n        }\r\n        let separationSimulation = await d3.forceSimulation(parentNodes)\r\n            .force('charge', d3.forceManyBody().strength(-30))\r\n            .force('collide', d3.forceCollide().radius(d => d.max_dim/1.5))\r\n            .force('x', d3.forceX().strength(.005))\r\n            .force('y', d3.forceY().strength(.005))\r\n            .stop();\r\n                \r\n        let gatherSimulation = d3.forceSimulation(childNodes)\r\n            .force('charge', d3.forceManyBody().strength(-30))\r\n            .force('link', d3.forceLink(links).id((d: any) => d.id).distance(this.SelectedLinkLengthVariable))\r\n            .force('center', d3.forceCenter(0, 0))\r\n            .force('collide', d3.forceCollide().radius(d => d.size)) // don't need to use mapNodeSize here since we are using the size of the node from cytoscape instead of from nodeSize\r\n            .force('x', d3.forceX(d => d.parent == null ? 0 : parentNodes.find(p => p.id == d.parent).x).strength(d => d.parent == null ? .005 : .1))\r\n            .force('y', d3.forceY(d => d.parent == null ? 0 : parentNodes.find(p => p.id == d.parent).y).strength(d => d.parent == null ? .005 : .1))\r\n            .stop(); \r\n      \r\n        return new Promise((resolve) => {\r\n          function tick() {\r\n            gatherSimulation.tick();\r\n            separationSimulation.tick();\r\n                        \r\n            tickCount++;\r\n            if (tickCount == ticks) {\r\n                separationSimulation.tick();\r\n            }\r\n\r\n            if (tickCount < ticks) {\r\n              // Use setTimeout to yield control to the browser between ticks\r\n              setTimeout(tick, 0);\r\n            } else {\r\n              // After all ticks, resolve the promise with the updated nodes and links.\r\n              resolve({ nodes: childNodes, links, parentNodes});\r\n            }\r\n          }\r\n          tick();\r\n        });\r\n    }\r\n\r\n    async precomputePositionsWithD3(nodes: any[], links: any[], ticks:number = 300, initial: boolean = true): Promise<{ nodes: any[]; links: any[] }> {\r\n        if (this.commonService.session.network.allPinned) {\r\n            // If nodes are pinned, skip running the force simulation\r\n            return { nodes, links };\r\n        }\r\n        let simulation;\r\n        if (initial) {\r\n            simulation = d3.forceSimulation(nodes)\r\n                .force('charge', d3.forceManyBody().strength(-30))\r\n                .force('link', d3.forceLink(links).id((d: any) => d.id).distance(this.SelectedLinkLengthVariable))\r\n                .force('center', d3.forceCenter(0, 0))\r\n                .stop(); // Stop auto-stepping so we can control the ticks manually\r\n        } else {\r\n            simulation = d3.forceSimulation(nodes)\r\n                .force('charge', d3.forceManyBody().strength(-30))\r\n                .force('link', d3.forceLink(links).id((d: any) => d.id).distance(this.SelectedLinkLengthVariable))\r\n                .force('center', d3.forceCenter(0, 0))\r\n                .force('collide', d3.forceCollide().radius(d => this.mapNodeSize(d.nodeSize ? d.nodeSize : this.widgets['node-radius'])))\r\n                .force('x', d3.forceX().strength(.005))\r\n                .force('y', d3.forceY().strength(.005))\r\n                .stop(); \r\n        } \r\n        let tickCount = 0;\r\n      \r\n        return new Promise((resolve) => {\r\n          function tick() {\r\n            simulation.tick();\r\n            tickCount++;\r\n            if (tickCount < ticks) {\r\n              // Use setTimeout to yield control to the browser between ticks\r\n              setTimeout(tick, 0);\r\n            } else {\r\n              // After all ticks, resolve the promise with the updated nodes and links.\r\n              resolve({ nodes, links });\r\n            }\r\n          }\r\n          tick();\r\n        });\r\n      }\r\n\r\n      /**\r\n       * Replicates the mapData function from cytoscape so that I can use it outside of cytoscape to know the size of the node\r\n       */\r\n      mapNodeSize(size: number): number {\r\n        // mapData(nodeSize, 0, 100, 10, 50)\r\n        let out = size / 100 * 40 + 10;\r\n        return out;\r\n    }\r\n\r\n    /**\r\n     * Updates the saved postion of a node when it is dragged by the user\r\n     * @param node\r\n     */\r\n    // updateNodePos(node) {\r\n    //   let globalNode = this.commonService.getVisibleNodes().find(x => x._id == node.data('id')) // need to update so it works with grouped nodes/polygons\r\n    //   globalNode['x'] = node.position().x;\r\n    //   globalNode['y'] = node.position().y;\r\n\r\n    // }\r\n\r\n    updateNodePos(node: cytoscape.NodeSingular): void {\r\n        const nodeId = node.id();\r\n        // This is for REAL user events. It reads the now-updated position from Cytoscape.\r\n        const newPosition = node.position(); \r\n        this.commonService.updateNodePosition(nodeId, newPosition);\r\n    }\r\n    /** Initializes the view.\r\n     * \r\n     * Defines the structure of the svg of twoD network and adds functionalities such as click, zoom, forces, etc...\r\n     * \r\n     * Populates various lists for Fieldlist (options for node-label-variable, node-symbol-variable, node-radius-variable, polygon-foci), \r\n     * ToolTipFieldList (options for link-width-variable, link-label-variable), and LinkToolTipList (link-toolitp-variable)\r\n     * \r\n     */\r\n    InitView() {\r\n\r\n        console.log('--- TwoD InitView called');\r\n\r\n        this.gtmService.pushTag({\r\n            event: \"page_view\",\r\n            page_location: \"/2d_network\",\r\n            page_title: \"2D Network View\"\r\n        });\r\n        this.IsDataAvailable = (this.commonService.session.data.nodes.length === 0 ? false : true);\r\n        if (!this.widgets['default-distance-metric']) {\r\n            this.widgets['default-distance-metric'] =\r\n                this.commonService.GlobalSettingsModel.SelectedDistanceMetricVariable;\r\n            this.widgets['link-threshold'] =\r\n                this.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable;\r\n        }\r\n\r\n        // Subscribe to style file applied event\r\n        this.styleFileSub = this.store.styleFileApplied$.subscribe(() => {\r\n            console.log('--- TwoD InitView stylefile sub');\r\n\r\n            this.applyStyleFileSettings();\r\n        });\r\n\r\n\r\n        // Use this method to prepare your variables before they're used in the template\r\n        this.commonService.session.style.widgets['node-tooltip-variable'] = this.ensureArray(this.commonService.session.style.widgets['node-tooltip-variable']);\r\n        this.commonService.session.style.widgets['link-tooltip-variable'] = this.ensureArray(this.commonService.session.style.widgets['link-tooltip-variable']);\r\n        let that = this;\r\n\r\n        if (this.IsDataAvailable === true && this.zoom === null) {\r\n\r\n            console.log('--- TwoD InitView IsDataAvailable true');\r\n            // populate this.twoD.FieldList with [None, ...nodeFields]\r\n            this.FieldList = [];\r\n            this.FieldList.push({ label: \"None\", value: \"None\" });\r\n            this.commonService.session.data['nodeFields'].map((d, i) => {\r\n                if (d != 'seq' && d != 'sequence') {\r\n                    this.FieldList.push(\r\n                        {\r\n                            label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n                            value: d\r\n                        });\r\n                }\r\n\r\n            });\r\n\r\n            // populate this.ToolTipFieldList and this.LinkToolTipList\r\n            this.ToolTipFieldList = [];\r\n            this.LinkToolTipList = [];\r\n            this.ToolTipFieldList.push({ label: \"None\", value: \"None\" });\r\n            this.commonService.session.data['linkFields'].map((d, i) => {\r\n                if (d == 'source') {\r\n                    let data = [\r\n                        {\r\n                            label: 'Source ID',\r\n                            value: 'source_id'\r\n                        },\r\n                        // {\r\n                        //     label: 'Source Index',\r\n                        //     value: 'source_index'\r\n                        // }\r\n                    ]\r\n                    this.ToolTipFieldList = this.ToolTipFieldList.concat(data);\r\n                    this.LinkToolTipList = this.LinkToolTipList.concat(data)\r\n                } else if (d == 'target') {\r\n                    let data = [\r\n                        {\r\n                            label: 'Target ID',\r\n                            value: 'target_id'\r\n                        },\r\n                        // {\r\n                        //     label: 'Target Index',\r\n                        //     value: 'target_index'\r\n                        // }\r\n                    ]\r\n                    this.ToolTipFieldList = this.ToolTipFieldList.concat(data);\r\n                    this.LinkToolTipList = this.LinkToolTipList.concat(data)\r\n                } else {\r\n                    this.LinkToolTipList.push(\r\n                        {\r\n                            label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n                            value: d\r\n                        });\r\n                    this.ToolTipFieldList.push(\r\n                        {\r\n                            label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n                            value: d\r\n                        });\r\n                }\r\n            });\r\n\r\n\r\n            this.halfWidth = $('#network').parent().width() / 2;\r\n            this.halfHeight = $('#network').parent().parent().parent().height() / 2;\r\n\r\n            // let networkData = {\r\n            //     nodes: this.commonService.getVisibleNodes(),\r\n            //     links: this.commonService.getVisibleLinks()\r\n            // }\r\n\r\n            // this.data = this.commonService.convertToGraphDataArray(networkData);\r\n\r\n            // if (this.debugMode) {\r\n            //     console.log('data: ', this.data);\r\n            // }\r\n\r\n            // this._rerender();\r\n\r\n            // Used for timeline mode, TODO: update to use an RxJS Observable\r\n            $(document).on(\"node-visibility\", function () {\r\n                console.log('node-visibility called');\r\n                that._rerender(true);\r\n            });\r\n\r\n            // $(document).on(\"link-visibility\", async function () {\r\n\r\n            // });\r\n\r\n            // $(document).on(\"cluster-visibility\", function () {\r\n\r\n            // });\r\n\r\n            // TODO move this to a subscribed event than use document jquery\r\n            $(document).on(\"node-selected\", function () {\r\n                 const mtSelectedNodes = that.commonService.getVisibleNodes().filter(n => n.selected);\r\n                 const mtSelectedNodeIds = mtSelectedNodes.map(n => n._id || n.id);\r\n                \r\n                 // Deselect all nodes first in cytoscape\r\n                 that.cy.elements().unselect();\r\n                \r\n                 // Select the nodes that are marked as selected in the common service\r\n                 if (mtSelectedNodeIds.length > 0) {\r\n                     const selector = mtSelectedNodeIds.map(id => `#${id}`).join(', ');\r\n                 that.cy.nodes(selector).select();\r\n                 }\r\n                \r\n                if (mtSelectedNodeIds.length > 0) {\r\n                 that.selectedNodeId = mtSelectedNodeIds[mtSelectedNodeIds.length - 1];\r\n                 } else {\r\n                 that.selectedNodeId = undefined;\r\n                 }\r\n                \r\n                 if (that.debugMode) {\r\n                    console.log('node-selected in 2d: ', that.selectedNodeId);\r\n                    console.log('node-selected in data: ', that.data.nodes.find(node => node.id == that.selectedNodeId));\r\n                }\r\n\r\n                    // Deselect all nodes first\r\n                    that.cy.elements().unselect();\r\n\r\n                    // Select the newly selected node\r\n                    if (that.selectedNodeId) {\r\n                        const node = that.cy.getElementById(that.selectedNodeId);\r\n                        if (node) {\r\n                            node.select();\r\n                        }\r\n                    }\r\n\r\n                    console.log('node-selected in 2d: ', that.selectedNodeId);\r\n\r\n                    // that.debouncedRerender();\r\n                    if (that.debugMode) {\r\n                        console.log('node-selected in 2d: ', that.selectedNodeId);\r\n                        console.log('node-selected in data: ', that.data.nodes.find(node => node.id == that.selectedNodeId));\r\n                    }\r\n            });\r\n\r\n\r\n            if (this.commonService.session.files.length > 1) $('#link-color-variable').val('origin').change();\r\n            if (this.widgets['background-color']) $('#cy').css('background-color', this.widgets['background-color']);\r\n            \r\n            console.log('--- TwoD InitView onStatisticsChanged');\r\n            this.commonService.onStatisticsChanged();\r\n\r\n            console.log('--- TwoD InitView loadSettings');\r\n            this.loadSettings();\r\n\r\n            if (this.widgets['node-symbol-variable'] !== 'None') {\r\n                $('#node-symbol-variable').change(); //.trigger('change');\r\n            }\r\n\r\n            console.log('--- TwoD InitView End');\r\n        } else {\r\n            console.log('--- TwoD InitView DATA NOTE AVAILABLE');\r\n        }\r\n\r\n\r\n    }\r\n\r\n    // Method to ensure the value is an array\r\n    ensureArray(value: any): any[] {\r\n        if (Array.isArray(value)) {\r\n            return value; // It's already an array, return as is\r\n        } else if (value !== null && value !== undefined) {\r\n            return [value]; // Not an array, but has a value, wrap it in an array\r\n        } else {\r\n            return []; // No value, return an empty array\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @returns an array [X, Y] of the position of mouse relative to twodcomponent. Global position (i.e. d3.event.pageX) doesn't work for a dashboard\r\n     */\r\n    getRelativeMousePosition(event) {\r\n        // Get position based on container\r\n        let rect =  document.getElementById('cy').getBoundingClientRect();\r\n        const X = event['clientX'] - rect.left;\r\n        const Y = event['clientY'] - rect.top;\r\n        return [X, Y];\r\n    }\r\n\r\n\r\n    /**\r\n     * Updates calculated resolution based on scale\r\n     * @param event Event from scale input\r\n     */\r\n    updateCalculatedResolution(): void {\r\n        let height = Math.floor(this.cyContainer.nativeElement.offsetHeight * this.SelectedNetworkExportScaleVariable);\r\n        let width  = Math.floor(this.cyContainer.nativeElement.offsetWidth  * this.SelectedNetworkExportScaleVariable);\r\n\r\n        this.CalculatedResolution = `${width} x ${height}`;\r\n    }\r\n\r\n    /**\r\n     * Opens Global Setting Dialog\r\n     */\r\n    showGlobalSettings() {\r\n        //console.log(\"threshold: \",  this.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable);\r\n        this.DisplayGlobalSettingsDialogEvent.emit(\"Styling\");\r\n    }\r\n\r\n\r\n    /**\r\n     * Debounced version of the _rerender function.\r\n     * Delays the execution until after 1000ms have elapsed since the last call.\r\n     */\r\n    debouncedRerender() {\r\n        const debounceDelay = 1000; // 1 second\r\n    \r\n        if (this.rerenderTimeout) {\r\n            clearTimeout(this.rerenderTimeout);\r\n        }\r\n    \r\n        this.rerenderTimeout = setTimeout(() => {\r\n            this._rerender(); // Call the actual rerender method\r\n            this.rerenderTimeout = null; // Clear the timeout reference\r\n        }, debounceDelay);\r\n    }\r\n\r\n    /**\r\n     * Hides export pane, sets isExporting variable to true and calls exportWork2 to export the twoD network image\r\n     */\r\n    exportVisualization(event) {\r\n\r\n        // Prepare export options\r\n        const exportOptions: ExportOptions = {\r\n            filename: this.SelectedNetworkExportFilenameVariable,\r\n            filetype: this.SelectedNetworkExportFileTypeListVariable,\r\n            scale: this.SelectedNetworkExportScaleVariable,\r\n            quality: this.SelectedNetworkExportQualityVariable,\r\n        };\r\n    \r\n        // Set export options in the service\r\n        this.exportService.setExportOptions(exportOptions);\r\n\r\n        if (this.SelectedNetworkExportFileTypeListVariable == 'svg') {\r\n\r\n            let options = { scale: 1, full: true, bg: this.commonService.session.style.widgets['background-color'] || '#ffffff'};\r\n            let content = (this.cy as any).svg(options);\r\n\r\n            // Add 10px of padding around network\r\n            const parser = new DOMParser();\r\n            const doc = parser.parseFromString(content, 'image/svg+xml');\r\n            const svg1 = doc.documentElement;          \r\n            svg1.setAttribute('height', (parseFloat(svg1.getAttribute('height'))+20).toString());\r\n            svg1.setAttribute('width', (parseFloat(svg1.getAttribute('width'))+20).toString());\r\n            let svgString = new XMLSerializer().serializeToString(svg1);\r\n            content = svgString.replace('<g>', `<g transform=\"translate(10, 10)\">`)\r\n\r\n            let elementsToExport: HTMLTableElement[] = [];\r\n            if (this.widgets['node-symbol-table-visible'] != 'Hide') {\r\n                elementsToExport.push(this.nodeSymbolTable.nativeElement)\r\n            }\r\n            if (this.widgets[\"polygon-color-table-visible\"]) {\r\n                elementsToExport.push(this.polygonColorTable.nativeElement);\r\n            }\r\n            if (window.getComputedStyle(this.networkStatisticsTable.nativeElement.parentElement).display == 'block') {\r\n                elementsToExport.push(this.networkStatisticsTable.nativeElement)\r\n            }\r\n            this.exportService.requestSVGExport(elementsToExport, content, true, true); \r\n\r\n        } else {\r\n            // Request export\r\n            let elementsToExport: HTMLDivElement[] = [this.exportContainer.nativeElement];\r\n            if (this.widgets['node-symbol-table-visible'] != 'Hide') {\r\n                elementsToExport.push(this.nodeSymbolTable.nativeElement)\r\n            }\r\n            if (this.widgets[\"polygon-color-table-visible\"]) {\r\n                elementsToExport.push(this.polygonColorTable.nativeElement);\r\n            }\r\n            if (window.getComputedStyle(this.networkStatisticsTable.nativeElement.parentElement).display == 'block') {\r\n                elementsToExport.push(this.networkStatisticsTable.nativeElement);\r\n            }\r\n            this.exportService.requestExport(elementsToExport, true, true);\r\n        }\r\n    \r\n        // Optionally, close the export modal after initiating the export\r\n        this.Show2DExportPane = false;\r\n    }\r\n\r\n    /**\r\n     * Sets this.isExportClosed to true\r\n     */\r\n    onCloseExport() {\r\n        this.isExportClosed = true;\r\n    }\r\n\r\n    /**\r\n     * Handles file type change\r\n     * @param event New file type value\r\n     */\r\n    onNetworkExportFiletypeChange(event: any): void {\r\n        this.SelectedNetworkExportFileTypeListVariable = event;\r\n\r\n        if (event == \"svg\") {\r\n                this.ShowAdvancedExport = false;\r\n            }\r\n            else {\r\n                this.ShowAdvancedExport = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Toggles advanced export options visibility\r\n     */\r\n    toggleAdvancedExport(): void {\r\n        this.ShowAdvancedExport = !this.ShowAdvancedExport;\r\n    }\r\n\r\n    /**\r\n     * Handles filename change\r\n     * @param event New filename value\r\n     */\r\n    onDataChange(event: any): void {\r\n        this.SelectedNetworkExportFilenameVariable = event;\r\n    }\r\n\r\n    /**\r\n     * When the svg is clicked, this function is called and it removes color transparency slider that appears when updating color transparency in node/link color tables\r\n     */\r\n    networkWhitespaceClicked(): void {\r\n\r\n        // The color transparency slider should dissapear if clicked out\r\n        $(\"#color-transparency-wrapper\").css({\r\n            display: \"none\"\r\n        });\r\n\r\n        this.commonService.session.network.nodes.forEach(node => {\r\n            node.selected = false;\r\n        });\r\n    }\r\n\r\n  \r\n    /**\r\n     * Generates Polygon Color Selection Table, updates polygonColorMap and polygonAlphaMap functions, and then calls render to show/update network\r\n     * \r\n     */\r\n    updatePolygonColors() {\r\n\r\n        let polygonColorTable = $(\"#polygon-color-table\")\r\n            .empty()\r\n            .append(            \r\n                \"<tr>\" +\r\n                \"<th class='p-1 table-header-row'><div class='header-content'><span contenteditable>Group \" + this.commonService.titleize(this.widgets['polygons-foci']) + \"</span><a class='sort-button sortName' style='cursor: pointer'></a></div></th>\" +\r\n                `<th class='table-header-row tableCount' ${ this.widgets['polygon-color-table-counts'] ? \"\" : \"style='display: none'\"}><div class='header-content'><span contenteditable>Count</span><a class='sort-button sortCount' style='cursor: pointer'></a></div></th>` +\r\n                `<th class='table-header-row tableFrequency' ${ this.widgets['polygon-color-table-frequencies'] ? \"\": \"style='display: none'\"}><div class='header-content'><span contenteditable>Frequency</span><a class='sort-button sortCount' style='cursor: pointer'></a></div></th>` +\r\n                \"<th>Color</th>\" +\r\n                \"</tr>\");\r\n            //.append(polygonHeader)\r\n            // .append(countHeader)\r\n            // .append((this.widgets[\"polygon-color-table-frequencies\"] ? \"<th>Frequency</th>\" : \"\"))\r\n            // .append(\"<th>Color</th>\");\r\n        \r\n        if (!this.commonService.session.style['polygonValueNames']) this.commonService.session.style['polygonValueNames'] = {};\r\n        let aggregates = this.commonService.createPolygonColorMap().reduce((acc, item) => {\r\n            acc[item.key] = item.values.length;\r\n            return acc;\r\n        }, {} as Record<string, number>)\r\n        let values = Object.keys(aggregates);\r\n\r\n        // By default both are set to \"DESC\", if one changed the other is set to \"\"; Default sort is by counts DESC\r\n        if (this.widgets[\"polygon-color-table-counts-sort\"] == \"ASC\") {\r\n            values.sort(function (a, b) { return aggregates[a] - aggregates[b] });\r\n        } else if (this.widgets[\"polygon-color-table-name-sort\"] == \"ASC\") {\r\n            values.sort(function (a, b) { return a as any - (b as any) });\r\n        } else if (this.widgets[\"polygon-color-table-counts-sort\"] == \"DESC\") {\r\n            values.sort(function (a, b) { return aggregates[b] - aggregates[a] });\r\n        } else { // if (this.widgets[\"polygon-color-table-name-sort\"] == \"DESC\")\r\n            values.sort(function (a, b) { return b as any - (a as any) });\r\n        }\r\n\r\n        let total = 0;\r\n        values.forEach(d => total += aggregates[d]);\r\n\r\n        let that = this;\r\n\r\n        values.forEach((value, i) => {\r\n            let colorinput = $('<input type=\"color\" value=\"' + that.commonService.temp.style.polygonColorMap(value) + '\" style=\"opacity:' + that.commonService.temp.style.polygonAlphaMap(value) +'; border:none\">')\r\n                .on(\"change\", function (e) {\r\n                    let locInPolygonColors = that.commonService.temp.polygonGroups.find(x => x.key == value).index\r\n                    // need to update the value in the dom which is used when exportings\r\n                    e.currentTarget.attributes[1].value = e.target['value'];\r\n                    e.currentTarget.style['opacity'] = that.commonService.temp.style.polygonAlphaMap(value);\r\n\r\n                    that.commonService.session.style['polygonColors'].splice(locInPolygonColors, 1, $(this).val() as string);\r\n                    that.commonService.createPolygonColorMap()\r\n                    that.updateGroupNodeColors();\r\n                });\r\n            let alphainput = $(\"<a class='transparency-symbol'></a>\").on(\"click\", e => {\r\n                $(\"#color-transparency-wrapper\").css({\r\n                    top: e.clientY + 129,\r\n                    left: e.clientX,\r\n                    display: \"block\"\r\n                });\r\n                $(\"#color-transparency\")\r\n                    .off(\"change\")\r\n                    .val(that.commonService.temp.style.polygonAlphaMap(value))\r\n                    .one(\"change\", function () {\r\n                        let locInPolygonAlphas = that.commonService.temp.polygonGroups.find(x => x.key == value).index\r\n                        that.commonService.session.style['polygonAlphas'].splice(locInPolygonAlphas, 1, parseFloat($(this).val() as string));\r\n                        that.commonService.temp.style.polygonAlphaMap = d3\r\n                            .scaleOrdinal(that.commonService.session.style['polygonAlphas'])\r\n                            .domain(that.commonService.temp.polygonGroups.map(d => d.key));\r\n                        $(\"#color-transparency-wrapper\").fadeOut();\r\n                        colorinput.trigger('change', that.commonService.temp.style.polygonColorMap(value))\r\n                    });\r\n            });\r\n            let cell = $(\"<td></td>\")\r\n                .append(colorinput)\r\n                .append(alphainput);\r\n\r\n            let row = $(\r\n                \"<tr>\" +\r\n                \"<td data-value='\" + value + \"'>\" +\r\n                (that.commonService.session.style['polygonValueNames'][value] ? that.commonService.session.style['polygonValueNames'][value] : that.commonService.titleize(\"\" + value)) +\r\n                \"</td>\" +\r\n                `<td class='tableCount' ${that.widgets[\"polygon-color-table-counts\"] ? \"\" : \"style='display: none'\"}>${aggregates[value]}</td>` + \r\n                `<td class='tableFrequency' ${that.widgets[\"polygon-color-table-frequencies\"] ? \"\" : \"style='display: none'\"}>${(aggregates[value] / total).toLocaleString()}</td>` +\r\n                \"</tr>\"\r\n            ).append(cell);\r\n\r\n            polygonColorTable.append(row);\r\n        });\r\n\r\n        // PRE D3\r\n        // this.commonService.temp.style.polygonColorMap = d3\r\n        //   .scaleOrdinal(this.commonService.session.style['polygonColors'])\r\n        //   .domain(values);\r\n        //   this.commonService.temp.style.polygonAlphaMap = d3\r\n        //   .scaleOrdinal(this.commonService.session.style['polygonAlphas'])\r\n        //   .domain(values);\r\n\r\n        polygonColorTable\r\n            .find(\"td\")\r\n            .on(\"dblclick\", function () {\r\n                $(this).attr(\"contenteditable\", \"true\").focus();\r\n            })\r\n            .on(\"focusout\", function () {\r\n                let $this = $(this);\r\n                $this.attr(\"contenteditable\", \"false\");\r\n                that.commonService.session.style['polygonValueNames'][$this.data(\"value\")] = $this.text();\r\n            });\r\n\r\n        polygonColorTable\r\n            .find(\".p-1\")\r\n            .on(\"focusout\", function () {\r\n                that.commonService.session.style['overwrite']['polygonColorHeaderVariable'] = that.widgets[\"polygons-foci\"];\r\n                that.commonService.session.style['overwrite']['polygonColorHeaderTitle'] = $($(this).contents()[0]).text();\r\n            });\r\n\r\n\r\n        // The sorting functionality is added here\r\n        $('#polygon-color-table').off('click', 'th .sort-button').on('click', 'th .sort-button', function (e) {\r\n            let isAscending: boolean;\r\n            let index: number;\r\n            if (e.currentTarget.classList.value.includes('sortName')) {\r\n                index = 0;\r\n                isAscending = that.widgets[\"polygon-color-table-name-sort\"] == \"DESC\" ? true : false;\r\n                that.widgets[\"polygon-color-table-name-sort\"] = isAscending ? \"ASC\" : \"DESC\";\r\n                that.widgets[\"polygon-color-table-counts-sort\"] = \"\";\r\n            } else {\r\n                index = 1;\r\n                isAscending = that.widgets[\"polygon-color-table-counts-sort\"] == \"DESC\" ? true : false;\r\n                that.widgets[\"polygon-color-table-counts-sort\"] = isAscending ? \"ASC\" : \"DESC\";\r\n                that.widgets[\"polygon-color-table-name-sort\"] = \"\";\r\n            }\r\n            let table = $(this).parents('table').eq(0);\r\n            let rows = table.find('tr:gt(0)').toArray().sort(comparer(index));\r\n            if (!isAscending) { rows = rows.reverse(); }\r\n            for (let i = 0; i < rows.length; i++) { table.append(rows[i]); }\r\n        });\r\n\r\n        function comparer(index) {\r\n            return function (a, b) {\r\n                let valA = getCellValue(a, index), valB = getCellValue(b, index);\r\n                console.log(`Comparing: ${valA} and ${valB}`);  // New line\r\n                return !isNaN(Number(valA)) && !isNaN(Number(valB)) ? Number(valA) - Number(valB) : valA.toString().localeCompare(valB);\r\n            }\r\n        }\r\n\r\n        function getCellValue(row, index) {\r\n            return $(row).children('td').eq(index).text();\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * This function is called when polygon-show widget is updated from the template.\r\n     * That widget controls whether polygons are shown or not\r\n     * \r\n     */\r\n    polygonsToggle(flag: boolean) {\r\n\r\n        this.widgets['polygons-show'] = flag;\r\n\r\n        this.updateNodeGrouping(flag);\r\n\r\n        if (flag) {\r\n            // Ensure the label orientation is updated when polygons are turned on\r\n            this.onPolygonLabelOrientationChange(this.widgets['polygon-label-orientation']);\r\n        } else {\r\n            $(\".polygons-settings-row\").slideUp();\r\n            //$('.polygons-label-row').slideUp();\r\n            $(\"#polygon-color-table-row\").slideUp();\r\n            $(\"#polygon-color-value-row\").slideUp();\r\n            $(\"#polygon-color-table\").empty();\r\n\r\n            this.PolygonColorTableWrapperDialogSettings.setVisibility(false);\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * Updates node grouping based on the polygons-show flag.\r\n     * @param flag boolean indicating whether to show polygons/groups\r\n     */\r\n    private updateNodeGrouping(flag: boolean): void {\r\n        if (!this.cy) {\r\n            return;\r\n        }\r\n\r\n        const cy = this.cy; // Reference to Cytoscape instance\r\n\r\n        cy.batch(() => {\r\n            if (flag) {\r\n                this.addParentNodesAndGroupChildren(cy);\r\n            } else {\r\n                this.removeParentNodesAndUngroupChildren(cy);\r\n            }\r\n        });\r\n\r\n        // Trigger layout after grouping\r\n        // this.applyLayout();\r\n    }\r\n\r\n    /**\r\n     * Adds parent nodes for each group and assigns child nodes to these parents.\r\n     * @param cy Cytoscape instance\r\n     */\r\n    private addParentNodesAndGroupChildren(cy: cytoscape.Core): void {\r\n        const groupMap: Map<string, cytoscape.NodeSingular[]> = new Map();\r\n        let foci = this.commonService.session.style.widgets['polygons-foci'];\r\n        cy.nodes().forEach(node => {\r\n            const group = node.data(foci);\r\n            if (group || group==0) {\r\n                if (!groupMap.has(group)) {\r\n                    groupMap.set(group, []);\r\n                }\r\n                groupMap.get(group)?.push(node);\r\n            }\r\n        });\r\n\r\n        const polygonGroups = Array.from(groupMap.entries()).map(([key, values], index) => ({\r\n            key,\r\n            index,\r\n            values: values.map(node => node.data('id'))\r\n        }));\r\n\r\n        this.commonService.temp.polygonGroups = polygonGroups;\r\n\r\n        groupMap.forEach((nodesInGroup, group) => {\r\n            const parentId = `${group}`;\r\n            if (cy.getElementById(parentId).length === 0) {\r\n                let color = this.commonService.session.style.widgets['polygons-color-show'] ? this.commonService.temp.style.polygonColorMap(group) : this.commonService.session.style.widgets['polygon-color'];\r\n                const alphaVal = this.commonService.temp.style.polygonAlphaMap(group) ?? 1;\r\n                cy.add({\r\n                    group: 'nodes',\r\n                    data: { \r\n                        id: parentId, \r\n                        label: parentId,\r\n                        isParent: true, \r\n                        nodeColor: color,\r\n                        borderWidth: 1,\r\n                        shape: 'rectangle', \r\n                        bgOpacity: alphaVal,\r\n                    },\r\n                    classes: 'parent' // Assigning the 'parent' class\r\n                });\r\n            }\r\n        });\r\n\r\n        cy.nodes().forEach(node => {\r\n            const group = node.data(foci);\r\n            if (group || group==0) {\r\n                const parentId = `${group}`;\r\n                node.move({ parent: parentId });\r\n            }\r\n        });\r\n\r\n          // **Step 6:** Create and Assign the `groups` Object for polygonGroups\r\n          const groups = Array.from(groupMap.entries()).map(([key, values], index) => ({\r\n            key,\r\n            index,\r\n            values: values.map(node => node.data('id'))\r\n        }));\r\n\r\n\r\n        // Assign the groups to polygonGroups in commonService.temp\r\n        this.commonService.temp.polygonGroups = groups;\r\n    }\r\n    /**\r\n     * Removes all parent (group) nodes and unassigns child nodes from any parents.\r\n     * @param cy Cytoscape instance\r\n     */\r\n    private removeParentNodesAndUngroupChildren(cy: cytoscape.Core): void {\r\n        // Identify all parent nodes by class\r\n        const parentNodes = cy.nodes('.parent');\r\n\r\n        // Unassign child nodes from parents\r\n        parentNodes.forEach(parent => {\r\n            cy.nodes(`[parent = \"${parent.id()}\"]`).forEach(child => {\r\n                child.move({ parent: null });\r\n            });\r\n        });\r\n\r\n        // Remove parent nodes\r\n        cy.remove(parentNodes);\r\n    }\r\n\r\n    private updateGroupNodeColors(): void {\r\n        const cy = this.cy;\r\n        if (!cy) {\r\n            console.error('Cytoscape instance is not initialized.');\r\n            return;\r\n        }\r\n\r\n        cy.nodes('.parent').forEach(parentNode => {\r\n            const groupName = parentNode.data('label'); // Assuming 'label' holds the group name\r\n            let color = this.commonService.session.style.widgets['polygons-color-show'] ? this.commonService.temp.style.polygonColorMap(groupName) : this.commonService.session.style.widgets['polygon-color'];\r\n            // Determine the new color based on the groupColorMap\r\n            const newColor = color || '#000'; // Default to black\r\n            const alphaVal = this.commonService.temp.style.polygonAlphaMap(groupName) ?? 1;  // fallback = 1\r\n\r\n            // Update the nodeColor data attribute\r\n            parentNode.data('nodeColor', newColor);\r\n            parentNode.data('bgOpacity', alphaVal);  // <--- The crucial piece!\r\n\r\n            // Optionally, update the node's color style if not data-driven\r\n            // parentNode.style('background-color', newColor);\r\n        });\r\n\r\n        // Refresh Cytoscape styles to apply changes\r\n        cy.style().update();\r\n\r\n        console.log('Group node colors updated.');\r\n    }\r\n    /**\r\n     * This function is called when polygon-color-show widget is updated from the template.\r\n     * This widget controls whether polygon should be colored the same or different.\r\n     */\r\n    polygonColorsToggle(e) {\r\n\r\n        console.log('polygonColorsToggle: ', e);\r\n\r\n        if (e) {\r\n            this.widgets['polygons-color-show'] = true;\r\n            $(\"#polygon-color-value-row\").slideUp();\r\n            $(\"#polygon-color-table-row\").slideDown();\r\n            this.PolygonColorTableWrapperDialogSettings.setVisibility(true);\r\n\r\n            //setTimeout(() => {\r\n                //this.updatePolygonColors();\r\n                //this.updateGroupNodeColors();\r\n            //}, 200);\r\n\r\n        }\r\n        else {\r\n            this.widgets['polygons-color-show'] = false;\r\n            $(\"#polygon-color-value-row\").slideDown();\r\n            $(\"#polygon-color-table-row\").slideUp();\r\n            $(\"#polygon-color-table\").empty();\r\n            this.PolygonColorTableWrapperDialogSettings.setVisibility(false);\r\n            setTimeout(() => {\r\n                // first removes polygons, if needed second call add them back\r\n                this.updateNodeGrouping(false);\r\n                if (this.commonService.session.style.widgets['polygons-show']) this.updateNodeGrouping(true);\r\n            }, 200);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This function is called when polygon-color widget is updated from the template. \r\n     * It is only available when polygon-color-show is false/hide\r\n     * This widget control polygon color when they are all colored the same.\r\n     * \r\n     * XXXXX I think this function wasn't updated with the move to Angular. \r\n     * Evaluate whether function can be reduce/eliminated. XXXXX\r\n     */\r\n    onPolygonColorChanged(e) {\r\n        this.widgets[\"polygon-color\"] = e;\r\n        this.updateGroupNodeColors();\r\n    }\r\n\r\n    /**\r\n     * This function is called when polygon-color-table-visible widget is updated from the template. \r\n     * It is only available when polygon-color-show is true/show\r\n     * This widget controls whether the polygon color table is visible.\r\n     * \r\n     */\r\n    polygonColorsTableToggle(e) {\r\n\r\n        console.log('polygonColorsTableToggle: ', e);\r\n\r\n        this.SelectedNetworkTableTypeVariable = e == true ? 'Show' : 'Hide';\r\n        this.PolygonColorTableWrapperDialogSettings.setVisibility(e);        \r\n    }\r\n\r\n\r\n    /**\r\n     * Gets a list of all visible links objects; Similar to getLlinks(), and commonService.getVisibleLinks()\r\n     * \r\n     * Each link object has a single origin, so any links that have more than one origin are stored as separed link objects\r\n     * \r\n     * Each link's source and target are node object\r\n     * @returns a array of link objects; each link's source and target are node object\r\n     */\r\n    getVLinks() {\r\n        let vlinks = this.commonService.getVisibleLinks(true);\r\n        let output = [];\r\n        let n = vlinks.length;\r\n        let nodes = this.commonService.session.network.nodes;\r\n        for (let i = 0; i < n; i++) {\r\n            if (vlinks[i].origin) {\r\n                if (typeof vlinks[i].origin === 'object') {\r\n                    if (vlinks[i].origin.length > 0) {\r\n                        // 0 = current, j = index, l = array\r\n                        vlinks[i].origin.forEach((o, j, l) => {\r\n                            const holder = Object.assign({}, vlinks[i], {\r\n                                origin: o,\r\n                                oNum: j,\r\n                                origins: l.length,\r\n                                source: nodes.find(d => d._id === vlinks[i].source || d.id === vlinks[i].source),\r\n                                target: nodes.find(d => d._id === vlinks[i].target || d.id === vlinks[i].target)\r\n                            });\r\n                            output.push(holder);\r\n                        });\r\n                    } else {\r\n                        const holder = Object.assign({}, vlinks[i], {\r\n                            oNum: 0,\r\n                            origins: 1,\r\n                            source: nodes.find(d => d._id === vlinks[i].source || d.id === vlinks[i].source),\r\n                            target: nodes.find(d => d._id === vlinks[i].target || d.id === vlinks[i].target)\r\n                        });\r\n                        output.push(holder);\r\n                    }\r\n                } else {\r\n                    const holder = Object.assign({}, vlinks[i], {\r\n                        oNum: 0,\r\n                        origins: 1,\r\n                        source: nodes.find(d => d._id === vlinks[i].source || d.id === vlinks[i].source),\r\n                        target: nodes.find(d => d._id === vlinks[i].target || d.id === vlinks[i].target)\r\n                    });\r\n                    //console.log(holder);\r\n                    output.push(holder);\r\n                }\r\n            } else {\r\n                const holder = Object.assign({}, vlinks[i], {\r\n                    origin: 'Unknown',\r\n                    oNum: 0,\r\n                    origins: 1,\r\n                    source: nodes.find(d => d._id === vlinks[i].source || d.id === vlinks[i].source),\r\n                    target: nodes.find(d => d._id === vlinks[i].target || d.id === vlinks[i].target)\r\n                });\r\n                output.push(holder);\r\n            }\r\n        }\r\n\r\n        output = output.filter(x => x.source != undefined && x.target != undefined);\r\n        return output;\r\n    };\r\n\r\n    /**\r\n     * Gets a list of all visible links objects; Similar to getVlinks(), and commonService.getVisibleLinks()\r\n     * \r\n     * A link that has multiple origins is stored as a single object\r\n     * \r\n     * Each link's source and target are node object\r\n     * @returns a array of link objects; each link's source and target are node object\r\n     */\r\n    getLLinks() {\r\n        let vlinks = this.commonService.getVisibleLinks(true);\r\n        let n = vlinks.length;\r\n        for (let i = 0; i < n; i++) {\r\n            vlinks[i].source = this.commonService.session.network.nodes.find(d => d._id == vlinks[i].source);\r\n            vlinks[i].target = this.commonService.session.network.nodes.find(d => d._id == vlinks[i].target);\r\n        }\r\n        return vlinks;\r\n    };\r\n\r\n    /**\r\n     * Used to calculate the angle between two nodes. It is used when setting link label\r\n     * @param source source node\r\n     * @param target target node\r\n     */\r\n    calcAngle(source, target) {\r\n        return Math.atan((source.y - target.y) / (source.x - target.x)) * this.radToDeg;\r\n    };\r\n\r\n\r\n    copyID() {\r\n        let id = $('#copyID').attr('data-clipboard-text')\r\n        this.clipboard.copy(id);\r\n        this.hideContextMenu();\r\n    }\r\n\r\n    /**\r\n     * Used from Context Menu and copy node's sequence to the user's clipboard\r\n     */\r\n    copySeq() {\r\n        let seq = $('#copySeq').attr('data-clipboard-text')\r\n        this.clipboard.copy(seq);\r\n        this.hideContextMenu()\r\n    }\r\n\r\n    /**\r\n     * Upon right clicking a node, d, the context menu will appear, which allows the user to option to pin node, copy id, copy sequence, or view attributes\r\n     * @param d the node right clicked\r\n     */\r\n    showContextMenu(d) {\r\n\r\n    };\r\n\r\n    /**\r\n     * Hides the Context Menu\r\n     */\r\n    hideContextMenu() {\r\n        $('#context-menu').animate({ 'opacity': 0 }, 80, function () {\r\n            $(this).css('z-index', -1);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This function capitalizes the first letter of each word in a string.\r\n     * @param str input string\r\n     * @returns input string with first letter capitalized\r\n     */\r\n    titleize(str: string) {\r\n        return str.replace(/\\b\\w/g, l => l.toUpperCase());\r\n    }\r\n\r\n    /**\r\n     * Generate a tabular HTML string from the data array\r\n     * @param data [ [Col1, ...], ...] - An Array of arrays where arrays within outer array represent different rows and\r\n     *  values within inner array represent the cells within that row\r\n     * @returns an HTML string with a table representation of the data\r\n     */\r\n    tabulate(data: any[]) {\r\n\r\n        let tableHtml = `\r\n            <style>\r\n            div:has(> table#tooltip-table) {\r\n              padding: 0px;\r\n            }\r\n\r\n            #tooltip-table {\r\n                border-spacing: 0;\r\n                width: 100%;\r\n                border: 1px solid #ddd;\r\n                z-index: 1000;\r\n            }\r\n            \r\n            #tooltip-table td, #tooltip-table th {\r\n                text-align: left;\r\n                padding: 10px;\r\n                border: 1px solid #ddd;\r\n            }\r\n            \r\n            #tooltip-table tr:nth-child(even) {\r\n                background-color: #f2f2f2;\r\n            }\r\n            \r\n            #tooltip-table tr:nth-child(odd) {\r\n                background-color: #fff;\r\n            }\r\n            </style>\r\n            <table id=\"tooltip-table\"><tbody>`;\r\n\r\n        for (let row of data) {\r\n            tableHtml += '<tr>';\r\n            for (let cell of row) {\r\n                tableHtml += '<td>' + cell + '</td>';\r\n            }\r\n            tableHtml += '</tr>';\r\n        }\r\n        tableHtml += '</tbody></table>';\r\n\r\n        return tableHtml;\r\n    }\r\n\r\n    /**\r\n     * Gets data from current node needed for tooltip and displays it in the tooltip also hightlights neighbors if that option is selected\r\n     * @param d a node\r\n     */\r\n    showNodeTooltip(d, event) {\r\n\r\n        // Only show tooltip for nodes, not parent/group nodes\r\n        if(d.isParent) {\r\n            return;\r\n        }\r\n\r\n        if (this.widgets['node-highlight']) {\r\n          this.selectedNodeId = d.id;\r\n        }\r\n\r\n        let tt_var_len = this.widgets['node-tooltip-variable'].length\r\n        let tooltipHtml: string;\r\n\r\n        if (tt_var_len == 0) {\r\n          return null;\r\n        } else if (tt_var_len == 1) {\r\n         tooltipHtml =  `${d[this.widgets['node-tooltip-variable'][0]]}`\r\n        } else {\r\n          tooltipHtml =  this.tabulate(this.widgets['node-tooltip-variable'].map(variable => [this.titleize(variable), d[variable]]))\r\n        }\r\n\r\n        let [X, Y] = this.getRelativeMousePosition(event);\r\n        d3.select('#tooltip')\r\n            .html(tooltipHtml)\r\n            .style('position', 'absolute')\r\n            .style('left', (X+ 10) + 'px')\r\n            .style('top', (Y - 10) + 'px')\r\n            .style('z-index', 1000)\r\n            .transition().duration(100)\r\n            .style('opacity', 1);\r\n    }\r\n\r\n    /**\r\n     * Gets data from current link needed for tooltip and displays it in the tooltip\r\n     * @param d link\r\n     */\r\n    showLinkTooltip(d, event) {\r\n        let v: any = this.SelectedLinkTooltipVariable;\r\n\r\n        if (v == 'None') return;\r\n\r\n\r\n        // Tooltip variables can be a single string or an array\r\n        let tooltipVariables = this.SelectedLinkTooltipVariable;\r\n        if (!Array.isArray(tooltipVariables)) {\r\n            tooltipVariables = [tooltipVariables];\r\n            this.SelectedLinkTooltipVariable = tooltipVariables;  // Update SelectedLinkTooltipVariable to be an array\r\n        }\r\n\r\n        // If no tooltip variable is selected, we shouldn't show a tooltip\r\n        if (tooltipVariables.length > 0 && tooltipVariables[0] == 'None')\r\n            return;\r\n\r\n        /**\r\n         * @param data link\r\n         * @param varName name of variable\r\n         * @returns the value of the link for the variable\r\n         */\r\n        let getData = (data, varName) => {\r\n            if (varName == 'source_id') {\r\n                return data['source']//._id\r\n            // } else if (varName == 'source_index') {\r\n            //     return data['source'].index\r\n            } else if (varName == 'target_id') {\r\n                return data['target']//._id\r\n            // } else if (varName == 'target_index') {\r\n            //     return data['target'].index\r\n            } else if (varName == 'distance') {\r\n                if (data.hasDistance && data.distanceOrigin.includes(data.origin)) return data['distance']\r\n                else return 'N/A'\r\n            } else {\r\n                return data[varName];\r\n            }\r\n        }\r\n\r\n        // Generate the HTML for the tooltip\r\n        let tooltipHtml = '';\r\n        if (tooltipVariables.length > 1) {\r\n            tooltipHtml = this.tabulate(tooltipVariables.map(variable => [this.titleize(variable), getData(d, variable)]));\r\n        } else {\r\n            tooltipHtml = getData(d, tooltipVariables[0])\r\n        }\r\n\r\n        let [X, Y] = this.getRelativeMousePosition(event);\r\n        d3.select('#tooltip')\r\n            .html(tooltipHtml)\r\n            .style('position', 'absolute')\r\n            .style('left', (X + 10) + 'px')\r\n            .style('top', (Y - 10) + 'px')\r\n            .style('z-index', 1000)\r\n            .transition().duration(100)\r\n            .style('opacity', 1);\r\n    };\r\n\r\n    /**\r\n     * Hides the Tooltip\r\n     */\r\n    hideTooltip() {\r\n        if (this.widgets['node-highlight']) {\r\n            this.selectedNodeId = undefined;\r\n        }\r\n        let tooltip = d3.select('#tooltip');\r\n        tooltip\r\n            .transition().duration(100)\r\n            .style('opacity', 0)\r\n            .on('end', () => tooltip.style('z-index', -1));\r\n    };\r\n\r\n\r\n    /**\r\n     * @returns {boolean} if a is a number\r\n     */\r\n    isNumber(a): boolean {\r\n        return typeof a == \"number\";\r\n    };\r\n\r\n\r\n    /**\r\n     * This is called when the variable used to grouped by/created polygons is changed\r\n     * \r\n     */\r\n    async centerPolygons(e, updateLayout: boolean = true) {\r\n\r\n        this.widgets['polygons-foci'] = e;\r\n        if (this.widgets['polygons-color-show'] == true) {\r\n            console.log('centerPolygons: show ');\r\n            $(\"#polygon-color-table\").empty();\r\n            this.updateGroupAssignments(e);\r\n            this.updatePolygonColors();\r\n            this.updateGroupNodeColors();\r\n        // Just update group assignments since not showing different colors\r\n        } else {\r\n            this.updateGroupAssignments(e);\r\n        }\r\n        if (updateLayout) await this.updateLayout();\r\n    }\r\n\r\n    pinNodes() {\r\n        this.commonService.session.network.allPinned = !this.commonService.session.network.allPinned;\r\n    }\r\n\r\n    updateLayout() {\r\n        if (this.commonService.session.style.widgets['polygons-show'] == false || this.commonService.session.style.widgets['polygons-foci'] == 'None') {\r\n            this._partialUpdate();\r\n        } else {\r\n            this.gatherGroups();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param foci \r\n     * @param change boolean, representing if foci has change (timeline mode foci doesn't change). If true, updates commonService.temp.polyggonGroups\r\n     * @returns \r\n     */\r\n    updateGroupAssignments(foci: string, change: boolean=true): void {\r\n        const cy = this.cy; // Reference to Cytoscape instance\r\n        if (!cy) {\r\n            console.error('Cytoscape instance is not initialized.');\r\n            return;\r\n        }\r\n    \r\n        cy.batch(() => {\r\n            // Identify existing parent nodes and remove them if necessary\r\n            const existingParents = cy.nodes('.parent');\r\n            console.log('Removing existing parent nodes:', existingParents.map(p => p.id()));\r\n            existingParents.forEach(parent => {\r\n                // **Step 1:** Ungroup child nodes by setting their parent to null\r\n                parent.children().forEach(child => {\r\n                    child.move({ parent: null });\r\n                });\r\n    \r\n                // **Step 2:** Remove the parent node without affecting child nodes\r\n                cy.remove(parent);\r\n            });\r\n    \r\n            // Determine new groups based on foci\r\n            const groupMap: Map<string, cytoscape.NodeSingular[]> = new Map();\r\n    \r\n            cy.nodes().forEach(node => {\r\n                // if(node.data('id') === '30578_KF773488_D99cl05') {\r\n                //     console.log('nodeee1: ', node.data());\r\n                //     console.log('nodeee2: ', node.data(foci));\r\n                // }\r\n                \r\n                const rawGroup = node.data(foci); // Assuming foci corresponds to a data attribute\r\n                const group = Array.isArray(rawGroup) ? rawGroup[0] : rawGroup; // Use first element if array\r\n                \r\n                if (group !== undefined && group !== null && group !== 'None') {\r\n                    if (!groupMap.has(group)) {\r\n                        groupMap.set(group, []);\r\n                    }\r\n                    groupMap.get(group)?.push(node);\r\n                }\r\n            });\r\n\r\n            // Create new parent nodes and assign child nodes\r\n            groupMap.forEach((nodesInGroup, groupName) => {\r\n                const parentId = `group-${groupName}`;\r\n                let color = this.commonService.session.style.widgets['polygons-color-show'] ? this.commonService.temp.style.polygonColorMap(groupName) : this.commonService.session.style.widgets['polygon-color'];\r\n                const alphaVal = this.commonService.temp.style.polygonAlphaMap(groupName) ?? 1;  // fallback = 1\r\n                // Add a new parent node\r\n                const parentNode = cy.add({\r\n                    group: 'nodes',\r\n                    data: {\r\n                        id: parentId,\r\n                        label: `${groupName}`, // Use group name as label\r\n                        isParent: true,\r\n                        nodeColor: color|| '#000', // Default to black if not found\r\n                        borderWidth: 1,\r\n                        shape: 'rectangle',\r\n                        bgOpacity: alphaVal, // Use the alpha value for background opacity\r\n                    },\r\n                    classes: 'parent' // Assigning the 'parent' class\r\n                });\r\n        \r\n                // Assign child nodes to the new parent\r\n                nodesInGroup.forEach(childNode => {\r\n                    childNode.move({ parent: parentId });\r\n                });\r\n            });\r\n    \r\n            // Handle nodes without a group (optional)\r\n            cy.nodes().forEach(node => {\r\n                if (!node.parent().length && node.data(foci) !== 'None') {\r\n                    node.move({ parent: null });\r\n                }\r\n            });\r\n\r\n            if (  this.commonService.session.style.widgets['polygons-label-show'] == false) {\r\n                cy.style()\r\n                .selector('node.parent')\r\n                .style({\r\n                    'label': '',\r\n                })\r\n                .update();\r\n            } else {\r\n                // Refresh Cytoscape styles to apply changes\r\n                cy.style().update();\r\n            }\r\n\r\n             // **Step 6:** Create and Assign the `groups` Object for polygonGroups\r\n             if (change) {\r\n                const groups = Array.from(groupMap.entries()).map(([key, values], index) => ({\r\n                    key,\r\n                    index,\r\n                    values: values.map(node => node.data('id'))\r\n                }));\r\n\r\n                // Assign the groups to polygonGroups in commonService.temp\r\n                this.commonService.temp.polygonGroups = groups;\r\n            }\r\n        });\r\n    \r\n    }\r\n\r\n    /**\r\n     * Calls setPolygonLabelSize to update polygon-label-size widget and then redraws polygon labels\r\n     */\r\n    onPolygonLabelSizeChange(e) {\r\n        this.widgets['polygons-label-size'] = parseFloat(e);\r\n        // Update the font size of parent/group node labels in Cytoscape\r\n        if (this.cy) {\r\n            this.cy.style()\r\n                .selector('node.parent')\r\n                .style({\r\n                    'font-size': `${this.widgets['polygons-label-size']}px`\r\n                })\r\n                .update();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates polygon-label-orientation widget and then redraws polygon labels\r\n     */\r\n    onPolygonLabelOrientationChange(e) {\r\n        this.widgets['polygon-label-orientation'] = e;\r\n        // Adjust the orientation of the parent/group node labels in Cytoscape\r\n        if (this.cy) {\r\n          \r\n            // Define specific types for text alignment to satisfy TypeScript\r\n            type TextAlignment = 'left' | 'center' | 'right';\r\n            type VerticalAlignment = 'top' | 'bottom' | 'center';\r\n\r\n            let textValign: VerticalAlignment;\r\n            let textHalign: TextAlignment = 'center'; // Default horizontal alignment\r\n\r\n            // Determine vertical alignment based on the selected orientation\r\n            switch (e.toLowerCase()) {\r\n                case 'top':\r\n                    textValign = 'top';\r\n                    break;\r\n                case 'bottom':\r\n                    textValign = 'bottom';\r\n                    break;\r\n                case 'middle':\r\n                default:\r\n                    textValign = 'center';\r\n                    break;\r\n            }\r\n\r\n            this.cy.style()\r\n                .selector('node.parent')\r\n                .style({\r\n                    'text-valign': textValign,\r\n                    'text-halign': textHalign\r\n                })\r\n                .update();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates polygons-label-show widget and the renders the network again\r\n     */\r\n    onPolygonLabelShowChange(e) {\r\n        if (e) {\r\n            this.widgets['polygons-label-show'] = true;\r\n        }\r\n        else {\r\n            this.widgets['polygons-label-show'] = false;\r\n        }\r\n\r\n         // Update the parent/group nodes' labels in Cytoscape\r\n    if (this.cy) {\r\n        if (e) {\r\n            // Show labels: Set the label to the group name\r\n            this.cy.style()\r\n                .selector('node.parent')\r\n                .style({\r\n                    'label': 'data(label)', // Assumes parent nodes have a 'label' data field\r\n                    'text-valign': this.SelectedPolygonLabelOrientationVariable,\r\n                    'text-halign': 'center',\r\n                    'font-size': `${this.commonService.session.style.widgets['polygons-label-size']}px`, // Adjust as needed\r\n                    //'text-background-color': '#ffffff',\r\n                    //'text-background-opacity': 1,\r\n                    //'text-background-padding': '2px',\r\n                    // We also need to ensure that it uses data(...) for color & alpha:\r\n                    'background-color': 'data(nodeColor)',    \r\n                    // The critical addition (can also be 'opacity' but that will fade the label, border, etc.):\r\n                    // @ts-ignore\r\n                    'background-opacity': 'data(bgOpacity)',\r\n                })\r\n                .update();\r\n        } else {\r\n            // Hide labels: Remove the label by setting it to an empty string\r\n            this.cy.style()\r\n                .selector('node.parent')\r\n                .style({\r\n                    'label': '',\r\n                    'text-background-opacity': 0\r\n                })\r\n                .update();\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n\r\n    /**\r\n     * XXXXX reevaluate if need to be combined with polygonColorsTableToggle; when called from polygonColorsTableToggle e is 'Show'/'Hide' when called\r\n     * from template e is true/false XXXXX\r\n     */\r\n    onPolygonColorTableChange(e) {\r\n        console.log('onPolygonColorTableChange: ', e);\r\n\r\n        this.widgets[\"polygon-color-table-visible\"] = e;\r\n\r\n        if (e) {\r\n            this.SelectedNetworkTableTypeVariable = 'Show';\r\n            setTimeout(() => {\r\n                this.updatePolygonColors();\r\n                this.updateGroupNodeColors()\r\n            }, 0);\r\n         } else {\r\n            this.SelectedNetworkTableTypeVariable = 'Hide';\r\n        }\r\n    }\r\n\r\n\r\n    /*/\r\n        Node Events\r\n    /*/\r\n\r\n    /**\r\n     * updates the value of the appropriate widget, add/removes rows from dialog menu, and calls redrawLabels to update labels on svg/view\r\n     * @param e the name of variable to change labels to\r\n     */\r\n    onNodeLabelVaribleChange(e) {\r\n\r\n        this.widgets['node-label-variable'] = e;\r\n        if (e == 'None') {\r\n            $('.node-label-row').slideUp();\r\n        } else {\r\n            $('.node-label-row').css('display', 'flex');\r\n        }\r\n\r\n        this.updateNodeLabels();\r\n        \r\n    }\r\n\r\n    mapPreviousShapeNameToCurrent(name: string): string {\r\n        if (this.symbolMapping.some(x => x.key === name)) {\r\n            return name;\r\n        }\r\n        switch (name) {\r\n            case 'symbolCircle':\r\n                return 'ellipse';\r\n            case \"symbolTriangle\":\r\n            case \"symbolTriangleDown\":\r\n                return 'triangle';\r\n            case \"symbolSquare\":\r\n            case \"square\":\r\n                return 'rectangle';\r\n            case \"symbolDiamond\":\r\n            case \"symbolDiamondAlt\":\r\n                return 'rhomboid';\r\n            case \"symbolDiamondSquare\":\r\n                return 'diamond';\r\n            case \"symbolOctagonAlt\":\r\n            case \"symbolHexagonAlt\":\r\n                return 'heptagon';\r\n            case \"symbolPentagon\":\r\n                return 'pentagon';\r\n            case \"symbolHexagon\":\r\n                return 'hexagon';\r\n            case \"symbolCross\":\r\n                return 'barrel';\r\n            case \"symbolOctagon\":\r\n                return 'octagon';\r\n            case \"symbolStar\":\r\n                return 'star';\r\n            case \"symbolTriangleLeft\":\r\n            case \"symbolTriangleRight\":\r\n                return 'tag';\r\n            case \"symbolX\":\r\n            case \"symbolWye\":\r\n                return 'vee';\r\n            default:\r\n                return 'ellipse';\r\n        }\r\n    }\r\n\r\n    onNodeShapeSort(sortBy: string) {\r\n        if (sortBy == this.shapeSort.key) {\r\n            this.shapeSort.assending = !this.shapeSort.assending;\r\n        } else {\r\n            this.shapeSort.key = sortBy;\r\n            this.shapeSort.assending = true;\r\n        }\r\n\r\n        if (sortBy == 'key' && this.shapeSort.assending) {\r\n            this.shapeAggregates.sort((a, b) => {\r\n                let aKey : string = a.key == 'null' ? '(Empty)' : a.key.toString()\r\n                let bKey : string = b.key == 'null' ? '(Empty)' : b.key.toString()\r\n                return bKey.localeCompare(aKey)\r\n            });\r\n        } else if (sortBy == 'key') {\r\n            this.shapeAggregates.sort((a, b) => {\r\n                let aKey : string = a.key == 'null' ? '(Empty)' : a.key.toString()\r\n                let bKey : string = b.key == 'null' ? '(Empty)' : b.key.toString()\r\n                return aKey.localeCompare(bKey)\r\n            });\r\n        } else if (this.shapeSort.assending) {\r\n            this.shapeAggregates.sort((a, b) => Number(b[this.shapeSort.key]) - Number(a[this.shapeSort.key]));\r\n        } else {\r\n            this.shapeAggregates.sort((a, b) => Number(a[this.shapeSort.key]) - Number(b[this.shapeSort.key]));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * updates the value of the nodeSymbolMap and updates the nodes on the 2D network. Called from node shape table dropdown\r\n     * @param newShape a string of node shape (see this.symbolMapping.key)\r\n     * @param group a string of the group to change\r\n     */\r\n    onNodeShapeTableChange(newShape: string, group: string) {\r\n        let i = this.commonService.session.style.nodeSymbolsTableKeys[this.widgets['node-symbol-variable']].findIndex(x => x+'' == group) // sometimes x is null or a number\r\n        this.commonService.session.style.nodeSymbolsTable[this.widgets['node-symbol-variable']][i] = newShape;\r\n        let values = this.commonService.session.style.nodeSymbolsTableKeys[this.widgets['node-symbol-variable']];\r\n        this.commonService.temp.style.nodeSymbolMap = d3.scaleOrdinal(this.commonService.session.style.nodeSymbolsTable[this.widgets['node-symbol-variable']]).domain(values);\r\n        this.updateNodeShapes();\r\n    }\r\n\r\n    // Method to handle shape change from the dropdown\r\n    onNodeShapeChange(newShape: string) {\r\n        this.selectedNodeShape = newShape;\r\n        this.widgets[\"node-symbol\"] = newShape;\r\n        this.updateNodeShapes();\r\n    }\r\n\r\n    getNodeSize(node: any) {\r\n\r\n        let sizeVariable = this.widgets['node-radius-variable'];\r\n\r\n        if (sizeVariable == 'None') {\r\n            return Number(this.widgets['node-radius']);\r\n        } else {\r\n\r\n            let v = node[sizeVariable];\r\n\r\n            if (!this.isNumber(v)) v = this.nodeMid;\r\n\r\n            // Check the type of v before calling linkScale\r\n\r\n            // Ensure v is a number before using linkScale\r\n            if (typeof v === 'number') {\r\n                let scaleValue = this.nodeScale(v);\r\n                if (this.debugMode) {\r\n                    console.log('link scale', scaleValue);\r\n                }\r\n                return scaleValue;\r\n            } else {\r\n                if (this.debugMode) {\r\n                    console.error('v is not a number:', v);\r\n                }\r\n                return this.nodeScale; // Default to scalar if v is not a number\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    getNodeColor(node: any): [string, number] {\r\n        // If this node is a parent (polygon/group), keep using polygonColorMap\r\n        if (node.isParent) {\r\n            if (!this.commonService.session.style.widgets['polygons-color-show']) {\r\n                return [this.commonService.session.style.widgets['polygon-color'], 0.5]\r\n            } else {\r\n                return [this.commonService.temp.style.polygonColorMap(node.label), this.commonService.temp.style.polygonAlphaMap(node.label)];\r\n            }\r\n        }\r\n      \r\n        // Otherwise, use nodeColorMap or a single color from the widget\r\n        const variable = this.widgets['node-color-variable'];\r\n        if (variable === 'None') {\r\n          return [this.widgets['node-color'], 1-this.widgets['node-opacity']];\r\n        }\r\n        return [this.commonService.temp.style.nodeColorMap(node[variable]), this.commonService.temp.style.nodeAlphaMap(node[variable])];\r\n      }\r\n\r\n    getLinkWidth(link: any) {\r\n        let scalar = this.widgets['link-width'];\r\n        let variable = this.widgets['link-width-variable'];\r\n\r\n        // console.log('--- TwoD getLinkWidth link1: ', scalar, variable);\r\n        if (variable == 'None') return scalar;\r\n\r\n        else {\r\n            let mid = (this.linkMax - this.linkMin) / 2 + this.linkMin;\r\n            let v = link[variable];\r\n\r\n\r\n            if (!this.isNumber(v)) v = mid;\r\n\r\n            // Ensure v is a number before using linkScale\r\n            if (typeof v === 'number') {\r\n                let scaleValue = this.linkScale(v);\r\n\r\n                return scaleValue;\r\n            } else {\r\n\r\n                return scalar; // Default to scalar if v is not a number\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    getLinkColor(link: any) {\r\n        let variable = this.widgets['link-color-variable'];\r\n        let color = this.widgets['link-color'];\r\n        let finalColor;\r\n        let alphaValue;\r\n\r\n        //if ((variable == 'Origin' || variable == 'origin') && link.origin.length > 1) {\r\n            //finalColor = this.commonService.temp.style.linkColorMap(\"Duo-Link\");\r\n            //alphaValue = this.commonService.temp.style.linkAlphaMap(\"Duo-Link\");\r\n        //} else {\r\n        finalColor = (variable == 'None') ? color : this.commonService.temp.style.linkColorMap(link[variable]);\r\n        alphaValue = this.commonService.temp.style.linkAlphaMap(link[variable])\r\n        //}\r\n\r\n        if (this.overideTransparency) {\r\n            alphaValue = this.widgets['link-opacity'];\r\n        }\r\n\r\n        return {\r\n            color: finalColor,\r\n            opacity: alphaValue\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * Gets the label for a node based on node label variable\r\n     * @param node the node retrieve to get the value of the variable\r\n     */\r\n    getNodeLabel(node: any) {\r\n\r\n        // If no label variable then should be none\r\n        return (this.widgets['node-label-variable'] == 'None') ? '' : (String(node[this.widgets['node-label-variable']]) || '');\r\n\r\n    }\r\n\r\n    /**\r\n     * Gets the label for a link based on link label variable\r\n     * @param link the link we retrieve to get the value of the variable\r\n     */\r\n    getLinkLabel(link: any) {\r\n\r\n        // console.log('link variable: ',this.widgets['link-label-variable'] );\r\n        let labelVariable = this.widgets['link-label-variable'];\r\n        // If no label variable then should be none\r\n        if (labelVariable == 'None') {\r\n            return { text: '' };\r\n        } else {\r\n            // console.log('link variable2: ',this.commonService.session.data.links[index]);\r\n\r\n            if (labelVariable == 'source_id') {\r\n                return { text: link['source'] }\r\n            } else if (labelVariable == 'source_index') {\r\n                return { text: link['source'] } // currently doesn't work; previous link.source and link.target were object now they are just a string of the id\r\n                //return link['source']['index']\r\n            } else if (labelVariable == 'target_id') {\r\n                return { text: link['target'] }\r\n            } else if (labelVariable == 'target_index') { // currently doesn't work; previous link.source and link.target were object now they are just a string of the id\r\n                return { text: link['target'] }\r\n                //return link['target']['index']\r\n            } else if (labelVariable != 'distance') {\r\n                return { text: `${link[labelVariable]}`  || '' };\r\n            }\r\n            if (this.debugMode) {\r\n                console.log('cluster link: ', link);\r\n            }\r\n            const labelValue = link[labelVariable];\r\n            // check if link has a distance origin and if the distance origin is included in the link.origin array, if not then the label should be 0\r\n            if (link.distanceOrigin && !link.origin.includes(link.distanceOrigin)) {\r\n                return { text: '' };\r\n            } else if (!link.hasDistance) {\r\n                return { text: '' }\r\n            }\r\n\r\n            if (typeof labelValue === 'number' || !isNaN(parseFloat(labelValue))) {\r\n                // console.log('is number');\r\n                if (this.widgets['default-distance-metric'] == 'snps') {\r\n                    return { text: Math.round(parseFloat(labelValue)) };\r\n                } else {\r\n                    return (labelValue != 0) ? { text: parseFloat(labelValue).toFixed(this.widgets['link-label-decimal-length']) } : { text: '' };\r\n                }\r\n            } else {\r\n\r\n                return { text: labelValue };\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Calls setNodeLabelSize to update label-size and redraw labels\r\n     */\r\n    onNodeLabelSizeChange(e) {\r\n        this.setNodeLabelSize(e.target.value);\r\n    }\r\n\r\n    /**\r\n     * Updates node-label-size and then redraws labels\r\n     */\r\n    setNodeLabelSize(size) {\r\n        this.widgets['node-label-size'] = parseFloat(size);\r\n        this.updateNodeLabelSizes(); // Update label sizes without rerendering the entire network\r\n        // document.documentElement.style.setProperty('--vis-graph-node-label-font-size', `${this.SelectedNodeLabelSizeVariable}pt`);\r\n    }\r\n\r\n\r\n    /**\r\n     * Updates node-label-orientation and then redraws labels\r\n     * @param e orientation such as Right, Left, Top, Bottom, Middle\r\n     */\r\n    onNodeLabelOrientationChange(e) {\r\n        this.widgets['node-label-orientation'] = e;\r\n        if (this.cy) {\r\n            type TextAlignment = 'left' | 'center' | 'right';\r\n            type VerticalAlignment = 'top' | 'bottom' | 'center';\r\n\r\n            let textValign: VerticalAlignment = 'center';\r\n            let textHalign: TextAlignment = 'center';\r\n\r\n            switch (e.toLowerCase()) {\r\n                case 'top':\r\n                    textValign = 'top';\r\n                    break;\r\n                case 'bottom':\r\n                    textValign = 'bottom';\r\n                    break;\r\n                case 'left':\r\n                    textHalign = 'left';\r\n                    break;\r\n                case 'right':\r\n                    textHalign = 'right';\r\n                    break;\r\n                case 'middle':\r\n                case 'center':\r\n                default:\r\n                    textValign = 'center';\r\n                    textHalign = 'center';\r\n                    break;\r\n            }\r\n\r\n            this.cy.style()\r\n                .selector('node')\r\n                .style({\r\n                    'text-valign': textValign,\r\n                    'text-halign': textHalign\r\n                })\r\n                .update();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * updates node-tooltip-variable\r\n     */\r\n    onNodeTooltipVariableChange(e) {\r\n\r\n        let selectedValue = e;\r\n\r\n        if (!Array.isArray(selectedValue)) {\r\n            selectedValue = [selectedValue];\r\n        }\r\n\r\n        this.widgets['node-tooltip-variable'] = selectedValue;\r\n\r\n    }\r\n\r\n    onNodeSymbolVariableChange(e, setVisibility = true) {\r\n\r\n        console.log('sumbol variable: ', this.widgets['node-symbol-variable']);\r\n        console.log('selected node symbol variable: ', this.SelectedNodeSymbolVariable);\r\n        this.widgets['node-symbol-variable'] = this.SelectedNodeSymbolVariable;\r\n\r\n\r\n        if (setVisibility) {\r\n            this.NodeSymbolTableWrapperDialogSettings.setVisibility(true);\r\n            this.SelectedNetworkTableTypeVariable = \"Show\";\r\n\r\n            if (this.SelectedNodeSymbolVariable !== 'None') {\r\n\r\n                $('#node-symbol-row').slideUp();\r\n\r\n                //If hidden by default, unhide to perform slide up and down\r\n                if (!this.ShowNodeSymbolTable) {\r\n                    this.ShowNodeSymbolTable = true;\r\n                } else {\r\n                    $('#node-symbol-table-row').slideDown();\r\n                }\r\n\r\n                if (!this.ShowNodeSymbolWrapper) {\r\n                    this.ShowNodeSymbolWrapper = true;\r\n                }\r\n                // No shape by variable selected\r\n                // show shape, hide table \r\n            } else {\r\n\r\n                $('#node-symbol-row').slideDown();\r\n                $('#node-symbol-table-row').slideUp();\r\n                if (this.ShowNodeSymbolWrapper) {\r\n                    this.ShowNodeSymbolWrapper = false;\r\n                }\r\n                this.onNodeSymbolTableChange('Hide');\r\n                this.onNodeShapeChange(this.selectedNodeShape);\r\n            }\r\n\r\n        }\r\n\r\n        this.generateNodeSymbolSelectionTable(\"#node-symbol-table\", e);\r\n    }\r\n\r\n    svgDefs = `\r\n    <path id=\"blob\" d=\"M 19.415 1.0564 C 20.585 2.47 20.225 5.89 21.665 8.2612 C 23.06 10.678 26.345 12.046 28.325 14.554 C 30.305 17.1076 31.025 20.8012 28.865 21.9412 C 26.75 23.1268 21.755 21.7588 18.605 23.3092 C 15.455 24.8596 14.105 29.3284 12.485 29.8756 C 10.865 30.3772 8.93 27.0028 6.41 25.042 C 3.89 23.1268 0.83 22.6708 0.38 20.9836 C -0.07 19.2964 2.135 16.378 2.54 13.642 C 2.945 10.9516 1.55 8.4892 2.135 7.03 C 2.72 5.5708 5.285 5.1148 7.355 4.294 C 9.47 3.4276 11.135 2.1964 13.34 1.2388 C 15.545 0.3268 18.245 -0.3116 19.415 1.0564 Z\"/>\r\n    <path id=\"cloud\" d=\"M 14 -1 A 9 9 90 0 0 5 8 A 9 9 90 0 0 5.1055 9.3125 A 6 6 90 0 0 1 15 A 6 6 90 0 0 7 21 L 22 21 A 7 7 90 0 0 29 14 A 7 7 90 0 0 22.9414 7.0703 A 9 9 90 0 0 14 -1 z\"/>\r\n    <polygon id=\"diamond\" points=\"0,15 15,0 30,15 15,30\"/>\r\n    <polygon id=\"house\" points=\"4,18 4,30 13,30 13,24 17,24 17,30 26,30 26,18 30,18 15,0 0,18\"/>\r\n    `;\r\n\r\n    public generateNodeSymbolSelectionTable(tableId: string, variable: string, isEditable: boolean = true) {\r\n        this.commonService.onTableCleared(tableId);\r\n\r\n        this.widgets['node-symbol-variable'] = variable;\r\n\r\n        if (variable === 'None' && !isEditable) return;\r\n        if (variable == 'None') return;\r\n\r\n        let values = this.commonService.session.style.nodeSymbolsTableKeys[variable] ?? [];\r\n        let aggregates = {};\r\n        let nodes = this.commonService.session.data.nodes;\r\n        let n = nodes.length;\r\n        let vnodes = 0;\r\n\r\n        // So aggrate to get since just one symbol\r\n        if(variable !== 'None'){\r\n            for (let i = 0; i < n; i++) {\r\n                let d = nodes[i];\r\n                if (!d || typeof d !== 'object') continue; // guard against null/undefined\r\n                if (!d.visible) continue;\r\n                vnodes++;\r\n                let dv = d[variable];\r\n                // Optionally, if you expect the value to be defined:\r\n                if (dv === undefined) {\r\n                    console.warn(`Node at index ${i} does not have property \"${variable}\"`);\r\n                    continue;\r\n                }\r\n                if (values.indexOf(dv) === -1) values.push(dv);\r\n                if (dv in aggregates) {\r\n                    aggregates[dv]++;\r\n                } else {\r\n                    aggregates[dv] = 1;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.shapeAggregates = [];\r\n        this.shapeAggregates = Object.keys(aggregates).map((key) => ({ 'key': key, 'count': aggregates[key], 'frequency': parseFloat((aggregates[key] / vnodes).toFixed(3)) }));\r\n        this.shapeAggregates.sort((a, b) => Number(b.count) - Number(a.count));\r\n\r\n        let symbols = this.commonService.session.style.nodeSymbolsTable[variable] ?? [];\r\n        if (values.length > symbols.length) {\r\n            let m = Math.ceil((values.length - symbols.length)/ this.commonService.session.style.nodeSymbols.length);;\r\n            while (m-- > 0) {\r\n                symbols = symbols.concat(this.commonService.session.style.nodeSymbols);\r\n            }\r\n            //console.log('node symbols: ', symbols);\r\n        }\r\n\r\n        values.sort((a, b) => {\r\n            return aggregates[b] - aggregates[a];\r\n        });\r\n\r\n        this.commonService.temp.style.nodeSymbolMap = d3.scaleOrdinal(symbols).domain(values);\r\n\r\n        this.commonService.session.style.nodeSymbolsTable[variable] = symbols\r\n        this.commonService.session.style.nodeSymbolsTableKeys[variable] = values\r\n        this.updateNodeShapes();\r\n    }\r\n\r\n    public onNodeRadiusVariableChange(e) {\r\n\r\n        this.widgets['node-radius-variable'] = e;\r\n\r\n        if (e == 'None') {\r\n            $('#node-max-radius-row').slideUp();\r\n            $('#node-min-radius-row').slideUp();\r\n            $('#node-radius-row').slideDown();\r\n        } else {\r\n            this.updateMinMaxNode()\r\n            $('#node-max-radius-row').css('display', 'flex');\r\n            $('#node-min-radius-row').css('display', 'flex');\r\n            $('#node-radius-row').slideUp();\r\n        }\r\n\r\n        this.updateNodeSizes();\r\n        \r\n\r\n    }\r\n\r\n    closeSettingsPane(id: string) {\r\n        //$('#nodeShapeTableSettings').on('mouseleave', () => { console.log('abc'); \r\n        $(`#${id}`).delay(500).css('display', 'none')\r\n    }\r\n\r\n    /**\r\n     * Updates node-radius-max widget and redraws nodes\r\n     */\r\n    public onNodeRadiusMaxChange(e) {\r\n        //this.widgets['node-radius-max'] = e;\r\n        this.updateMinMaxNode();\r\n        this.updateNodeSizes();\r\n        \r\n    }\r\n\r\n    /**\r\n     * Updates node-radius-min widget and redraws nodes\r\n     */\r\n    public onNodeRadiusMinChange(e) {\r\n        //this.widgets['node-radius-min'] = e;\r\n        this.updateMinMaxNode();\r\n        this.updateNodeSizes();\r\n        \r\n    }\r\n\r\n    /**\r\n     * Updates node-border-width widget and redraws nodes\r\n     */\r\n    public onNodeBorderWidthChange(e) {\r\n        this.widgets['node-border-width'] = e;\r\n        this.updateMinMaxNode()\r\n        this.updateNodeBorders(); // Update border widths without rerendering the entire network\r\n    }\r\n\r\n    /**\r\n     * Updates node-radius widget and redraws nodes\r\n     */\r\n    public onNodeRadiusChange(e) {\r\n\r\n        this.widgets['node-radius'] = this.SelectedNodeRadiusSizeVariable;\r\n        this.updateNodeSizes(); // Update node sizes without rerendering the entire network\r\n\r\n    }\r\n\r\n    /**\r\n     * Rerenders whole data set by resetting data object\r\n     */\r\n    private async _rerender(timelineTick=false) {\r\n\r\n        console.log('--- TwoD DATA network rerender');\r\n\r\n        if (!timelineTick) {\r\n            // If the network is in the middle of rendering, don't rerender\r\n            if(this.commonService.session.network.rendering) return;\r\n\r\n            // Set rendering to true to prevent actions during rerendering\r\n            this.commonService.session.network.rendering = true;\r\n\r\n            // Set rendered to false so to prevent other changes.  Needed to check to differentiate network has rendered for the first time vs checking if rendering is false\r\n            this.store.setNetworkRendered(false);\r\n        }\r\n\r\n        let networkData;\r\n        if (timelineTick) {\r\n\r\n            if (this.data === undefined) {\r\n                return;\r\n            }\r\n            let nodes = this.commonService.getVisibleNodes();\r\n            if (nodes.length == this.data.nodes.length) { \r\n                return;\r\n            }\r\n            let links = this.commonService.getVisibleLinks(true);\r\n            let visLinks = [];\r\n            links.forEach((d) => {\r\n                if (!d.visible) return;\r\n                var source = nodes.find(node => node._id == d.source && node.visible);\r\n                var target = nodes.find(node => node._id == d.target && node.visible);\r\n        \r\n                if (source && target) {\r\n                    visLinks.push(d);\r\n                }\r\n            })\r\n            networkData = { \r\n                nodes : nodes, \r\n                links : visLinks\r\n            }\r\n        } else {\r\n            networkData = {\r\n                nodes: this.commonService.getVisibleNodes(),\r\n                links: this.commonService.getVisibleLinks(true)\r\n            };\r\n\r\n        }\r\n\r\n       \r\n        // Need to convert source and target to string ids for cytoscape\r\n        networkData.links.forEach((link) => {\r\n            // If link.source is an object, grab its _id and convert to string\r\n            if (typeof link.source === 'object') {\r\n            link.source = link.source._id.toString();\r\n            }\r\n\r\n            // Same for link.target\r\n            if (typeof link.target === 'object') {\r\n            link.target = link.target._id.toString();\r\n            }\r\n        });\r\n\r\n        const nodeIds = new Set(networkData.nodes.map(n => n.id));\r\n\r\n\r\n       // Instead of calling synchronously, await the precomputation:\r\n       if (!this.cy) {\r\n        const { nodes: laidOutNodes, links: laidOutLinks } =\r\n        await this.precomputePositionsWithD3(networkData.nodes, networkData.links, 300).then(({nodes: n, links: l}) => {\r\n            return this.precomputePositionsWithD3(n, l, 5, false);\r\n        });\r\n\r\n        console.log('--- TwoD networkData after precompute0: ', _.cloneDeep(networkData.links));\r\n        \r\n        // Update networkData with the precomputed positions\r\n        networkData.nodes = laidOutNodes;\r\n        networkData.links = laidOutLinks;\r\n\r\n\r\n        networkData.links.forEach((link, i) => {\r\n            // If link.source is an object, grab its _id and convert to string\r\n            if (typeof link.source === 'object') {\r\n            link.source = link.source._id.toString();\r\n            }\r\n        \r\n            // Same for link.target\r\n            if (typeof link.target === 'object') {\r\n            link.target = link.target._id.toString();\r\n            }\r\n        });\r\n\r\n\r\n        networkData.links.forEach(link => {\r\n            if (!nodeIds.has(link.source)) {\r\n                console.warn('Link source not found in nodes:', link.source, link);\r\n            }\r\n            if (!nodeIds.has(link.target)) {\r\n                console.warn('Link target not found in nodes:', link.target, link);\r\n            }\r\n        });\r\n       }\r\n\r\n\r\n        // Update Cytoscape visualization if it exists\r\n        if (this.cy && !timelineTick) {\r\n        \r\n            this._partialUpdate().then(() => this.ensurePolygon());\r\n\r\n        } else if (this.cy && timelineTick) {\r\n            this.data = this.commonService.convertToGraphDataArray(networkData);\r\n\r\n            // Add new nodes and edges\r\n            this.cy.elements().remove();\r\n            const newElements = this.mapDataToCytoscapeElements(this.data, true);\r\n            this.cy.add(newElements);\r\n\r\n            // Apply the Cose layout to arrange the nodes\r\n            // const layout = this.cy.layout({\r\n            //     name: 'preset',\r\n            //     fit: true, // Fit the graph within the viewport\r\n            //     padding: 30, // Padding around the graph\r\n                \r\n            // });\r\n\r\n            // layout.run();\r\n            if (this.commonService.session.style.widgets['polygons-show']) {\r\n                this.updateGroupAssignments(this.widgets['polygons-foci'], false);\r\n            }\r\n\r\n\r\n        } else{\r\n            this.data = this.commonService.convertToGraphDataArray(networkData);\r\n\r\n            // 1) Log raw incoming data\r\n            console.log(\" Debug: raw networkData links:\", networkData.links);\r\n            console.log(\" Debug: raw networkData nodes:\", networkData.nodes);\r\n            \r\n            // 2) Log the converted data\r\n            console.log(\" Debug: data from convertToGraphDataArray:\", this.data);\r\n            \r\n            // Destroy old instance if any\r\n            if (this.cy) {\r\n              this.cy.destroy();\r\n            }\r\n            \r\n            // 3) Build Cytoscape elements\r\n            const el = this.mapDataToCytoscapeElements(this.data);\r\n            console.log(\" Debug: mapDataToCytoscapeElements output:\", _.cloneDeep(el));\r\n            \r\n            // Optional: check for duplicates & invalid references\r\n            const seenIds = new Set();\r\n            el.edges.forEach(edge => {\r\n              const { id, source, target } = edge.data;\r\n            \r\n              // 3A) Check for duplicate edge IDs\r\n              if (seenIds.has(id)) {\r\n                console.warn(\" Duplicate edge ID:\", id, edge);\r\n              } else {\r\n                seenIds.add(id);\r\n              }\r\n            \r\n              // 3B) Check for missing node references\r\n              const hasSource = el.nodes.some(n => n.data.id === source);\r\n              const hasTarget = el.nodes.some(n => n.data.id === target);\r\n              if (!hasSource || !hasTarget) {\r\n                console.warn(\" Edge references invalid node:\", edge.data);\r\n              }\r\n            });\r\n            \r\n            // 4) Actually create Cytoscape\r\n            let startTime: number;\r\n            console.log(this.cyContainer);\r\n            this.cy = cytoscape({\r\n              container: this.cyContainer.nativeElement,\r\n              elements: el,\r\n              style: this.getCytoscapeStyles(),\r\n              layout: {\r\n                name: 'preset',\r\n                fit: true,\r\n                padding: 100\r\n              },\r\n              zoomingEnabled: true,\r\n              userZoomingEnabled: true,\r\n              panningEnabled: true,\r\n              userPanningEnabled: true\r\n            });\r\n            \r\n            if ((window as any).Cypress) {\r\n       (window as any).cytoscapeInstance = this.cy;\r\n       \r\n       // Create a dedicated namespace for all test functions\r\n       (window as any).Cypress.test = {\r\n        // Interaction helpers\r\n       dragNodeDelta: (nodeId: string, dx: number, dy: number) => {\r\n                    return this.zone.run(() => {\r\n                    const node = this.cy.getElementById(nodeId);\r\n                    if (!node || node.empty()) {\r\n                        console.warn('[Cypress.dragNodeDelta] node not found', nodeId);\r\n                        return null;\r\n                    }\r\n\r\n                    if (node.locked && node.locked()) {\r\n                        node.unlock();\r\n                    }\r\n\r\n                    const current = node.position();\r\n                    const newPos = {\r\n                        x: current.x + dx,\r\n                        y: current.y + dy\r\n                    };\r\n\r\n                    node.position(newPos);\r\n\r\n                    //  keep app model in sync, like a real dragfree event\r\n                    this.updateNodePos(node);\r\n\r\n                    return newPos;  // so the test can assert directly\r\n                    });\r\n                },\r\n                        tooltip: (action: 'show' | 'hide', nodeId: string) => {\r\n          this.zone.run(() => {\r\n            const node = this.cy.getElementById(nodeId);\r\n            if (node) {\r\n              if (action === 'show') {\r\n                const mockEvent = { clientX: 100, clientY: 100 };\r\n                this.showNodeTooltip(node.data(), mockEvent);\r\n              } else {\r\n                this.hideTooltip();\r\n              }\r\n            }\r\n          });\r\n        },\r\n        linkTooltip: (action: 'show' | 'hide', edgeId: string) => {\r\n           this.zone.run(() => {\r\n            const edge = this.cy.getElementById(edgeId);\r\n            if (edge) {\r\n              if (action === 'show') {\r\n                const mockEvent = { clientX: 300, clientY: 300 };\r\n                this.showLinkTooltip(edge.data(), mockEvent);\r\n              } else {\r\n                this.hideTooltip();\r\n              }\r\n            }\r\n          });\r\n        },\r\n  \r\n        // New settings helpers\r\n        setNodeSize: (size: number) => {\r\n          this.zone.run(() => {\r\n            this.SelectedNodeRadiusSizeVariable = size;\r\n            this.onNodeRadiusChange(size);\r\n          });\r\n        },\r\n        setLinkWidth: (width: number) => {\r\n          this.zone.run(() => {\r\n            this.SelectedLinkWidthVariable = width;\r\n            this.onLinkWidthChange(width);\r\n          });\r\n        },\r\n        togglePolygons: (show: boolean) => {\r\n          this.zone.run(() => this.polygonsToggle(show));\r\n        },\r\n        setNodeLabel: (variable: string) => {\r\n          this.zone.run(() => {\r\n            this.SelectedNodeLabelVariable = variable;\r\n            this.onNodeLabelVaribleChange(variable);\r\n          });\r\n        },\r\n        setNodeBorderWidth: (width: number) => {\r\n          this.zone.run(() => {\r\n            this.nodeBorderWidth = width;\r\n            this.onNodeBorderWidthChange(width);\r\n          });\r\n        },\r\n        toggleLinkArrows: (show: boolean) => {\r\n          this.zone.run(() => {\r\n            const value = show ? 'Show' : 'Hide';\r\n            this.SelectedLinkArrowTypeVariable = value;\r\n            this.onLinkDirectedUndirectedChange(value);\r\n          });\r\n        },\r\n        toggleGridlines: (show: boolean) => {\r\n           this.zone.run(() => {\r\n            const value = show ? 'Show' : 'Hide';\r\n            this.SelectedNetworkGridLineTypeVariable = value;\r\n            this.onNetworkGridlinesShowHideChange(value);\r\n          });\r\n        },\r\n        setNodeLabelSizeAndOrientation: (size: number, orientation: string) => {\r\n          this.zone.run(() => {\r\n            this.SelectedNodeLabelSizeVariable = size;\r\n            this.setNodeLabelSize(size);\r\n            this.SelectedNodeLabelOrientationVariable = orientation as any;\r\n            this.onNodeLabelOrientationChange(orientation);\r\n          });\r\n        },\r\n        setNodeSizeByVariable: (variable: string) => {\r\n          this.zone.run(() => {\r\n            this.SelectedNodeRadiusVariable = variable;\r\n            this.onNodeRadiusVariableChange(variable);\r\n          });\r\n        },\r\n        setLinkOpacity: (opacity: number) => {\r\n          this.zone.run(() => {\r\n            this.SelectedLinkTransparencyVariable = opacity;\r\n            this.onLinkOpacityChange(opacity);\r\n          });\r\n        },\r\n        toggleGroupLabels: (show: boolean) => {\r\n          this.zone.run(() => {\r\n            this.widgets['polygons-label-show'] = show;\r\n            this.onPolygonLabelShowChange(show);\r\n          });\r\n        },\r\n        setLinkWidthByVariable: (variable: string) => {\r\n          this.zone.run(() => {\r\n            this.SelectedLinkWidthByVariable = variable;\r\n            this.onLinkWidthVariableChange(variable);\r\n          });\r\n        },\r\n        setLinkLength: (length: number) => {\r\n          this.zone.run(() => {\r\n            this.SelectedLinkLengthVariable = length;\r\n            this.onLinkLengthChange(length);\r\n          });\r\n        },\r\n        toggleNeighborHighlighting: (highlight: boolean) => {\r\n          this.zone.run(() => {\r\n            const value = highlight ? 'Highlighted' : 'Normal';\r\n            this.SelectedNetworkNeighborTypeVariable = value;\r\n            this.onDontHighlightNeighborsHighlightNeighborsChange(value);\r\n          });\r\n        },\r\n        setGroupByVariable: (variable: string) => {\r\n          this.zone.run(() => {\r\n             this.centerPolygons(variable);\r\n          });\r\n        },\r\n        setGroupLabelSizeAndOrientation: (size: number, orientation: string) => {\r\n           this.zone.run(() => {\r\n            this.SelectedPolygonLabelSizeVariable = size;\r\n            this.onPolygonLabelSizeChange(size);\r\n            this.SelectedPolygonLabelOrientationVariable = orientation as any;\r\n            this.onPolygonLabelOrientationChange(orientation);\r\n          });\r\n        }\r\n       };\r\n            }\r\n            // Attach events\r\n            this.attachCytoscapeEvents();\r\n            \r\n            // 5) Debug layout start & stop\r\n            this.cy.one('layoutstart', () => {\r\n              startTime = performance.now();\r\n              console.log(` Cytoscape layout started at: ${startTime.toFixed(2)}ms`);\r\n            });\r\n            \r\n            this.cy.one('layoutstop', () => {\r\n              const endTime = performance.now();\r\n              console.log(` Cytoscape layout done in ${(endTime - startTime).toFixed(2)}ms`);\r\n            \r\n              console.log('twod 1 polygons show: ', this.widgets['polygons-show']);\r\n              // Update polygons to show if they should be\r\n              if (this.commonService.session.style.widgets['polygons-show']) {\r\n                console.log('twod 2323 polygons color show: ', this.commonService.session.style.widgets['polygons-color-show']);\r\n\r\n                this.polygonsToggle(true)\r\n                this.centerPolygons(this.commonService.session.style.widgets['polygons-foci']);\r\n                console.log('twod 11 polygons color show: ', this.commonService.session.style.widgets['polygons-color-show']);\r\n\r\n                if (this.commonService.session.style.widgets['polygons-color-show']) {\r\n                    this.commonService.session.style.widgets['polygon-color-table-visible'] = true;\r\n                    this.onPolygonColorTableChange(true);\r\n                    // this.polygonColorsToggle(this.widgets['polygon-color-table-visible'])\r\n                    // this.updateGroupNodeColors();\r\n                    console.log('twod 2polygons show: ', this.commonService.session.style.widgets['polygon-color-table-visible']);\r\n                }\r\n               }\r\n\r\n              // Mark as rendered\r\n              this.store.setNetworkRendered(true);\r\n              this.store.setNetworkUpdated(false);\r\n              this.commonService.session.network.rendering = false;\r\n              this.commonService.demoNetworkRendered = true;\r\n            });\r\n            \r\n            // Run the layout\r\n            // @ts-ignore\r\n            this.cy.layout({ name: 'preset', animate: 'end' }).run();\r\n            \r\n\r\n         }\r\n            console.log('--- TwoD DATA network rerender complete');\r\n    }\r\n\r\n    ensurePolygon(updateLayout: boolean = true) {          \r\n            \r\n        if (this.commonService.session.style.widgets['polygons-show']) {\r\n\r\n            this.polygonsToggle(true)\r\n            this.centerPolygons(this.commonService.session.style.widgets['polygons-foci'], updateLayout);\r\n            this.cy.nodes().forEach(node => {\r\n                if (node.classes().includes('parent')) {\r\n                    let numVisibleChildren = node.children().filter(child => child.visible()).length;\r\n                    if (numVisibleChildren === 0) {\r\n                        node.addClass('hidden'); // Hide parent nodes if needed\r\n                    } \r\n                }\r\n            });\r\n\r\n            this.openCenter();\r\n        }\r\n    }\r\n\r\n    public getNodeShape(node: any) {\r\n\r\n        //* Shapes:\r\n        let symbolVariable = this.widgets['node-symbol-variable'];\r\n\r\n        if (symbolVariable == \"None\") {\r\n            // console.log('node symbol: ', this.selectedNodeShape);\r\n            return this.selectedNodeShape;\r\n            // return this.widgets['node-symbol-variable'];\r\n        } else {\r\n\r\n            let type = this.commonService.temp.style.nodeSymbolMap(node[symbolVariable]);\r\n\r\n            return type;\r\n\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates the appropriate widget value and then updates the 'polygon-color' or 'node-shape' table\r\n     * @param table 'polygon-color' or 'node-shape'\r\n     * @param column 'tableCouts' or 'tableFreq' \r\n    */\r\n    toggleTableColumns(table: string, column: string) {\r\n        if (table == 'node-shape' && column == 'tableCounts') {\r\n            this.widgets['node-symbol-table-counts'] = !this.widgets['node-symbol-table-counts'];\r\n        } else if (table == 'node-shape' && column == 'tableFreq') {\r\n            this.widgets['node-symbol-table-frequencies'] = !this.widgets['node-symbol-table-frequencies'];\r\n        } else if (table == 'polygon-color' && column == 'tableCounts') {\r\n            this.widgets['polygon-color-table-counts'] = !this.widgets['polygon-color-table-counts']\r\n        } else if (table == 'polygon-color' && column == 'tableFreq') {\r\n            this.widgets['polygon-color-table-frequencies'] = !this.widgets['polygon-color-table-frequencies']\r\n        } else {\r\n            return;\r\n        }\r\n        if (table == 'polygon-color') {\r\n            this.updateCountFreqTable(table);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Toggles the setting menu for polygon-color or node-shape table. This menu allow users to show/hide counts and/or frequencies\r\n     * @param tableName 'polygon-color' or 'node-shape'\r\n     */\r\n    toggleColorTableSettings(tableName: string) {\r\n        let settingsPane;\r\n        if (tableName == 'node-shape') {\r\n            settingsPane = $('#nodeShapeTableSettings')\r\n        } else if (tableName == 'polygon-color') {\r\n            settingsPane = $('#polygonColorTableSettings')\r\n        } else {\r\n            return;\r\n        }\r\n        \r\n        if (settingsPane.css('display') == 'none') {\r\n            settingsPane.css('display', 'block')\r\n        } else {\r\n            settingsPane.css('display', 'none')\r\n        }\r\n    }\r\n\r\n        /**\r\n     * Updates the polygon-color-table based on value of widgets; it doesn't recalculate anything; just shows/hide columns (No longer need for node shape table)\r\n     * @param tableName 'polygon-color'\r\n     */\r\n    updateCountFreqTable(tableName) {\r\n        let tableReferenceName, showCount, showFreq;\r\n        if (tableName == 'polygon-color') {\r\n            tableReferenceName = '#polygon-color-table-wrapper';\r\n            showCount = this.widgets['polygon-color-table-counts'];\r\n            showFreq = this.widgets['polygon-color-table-frequencies'];\r\n        }\r\n        const countColumn = $(tableReferenceName + ' .tableCount');\r\n        const freqColumn = $(tableReferenceName + ' .tableFrequency');\r\n        console.log(showCount, showFreq, countColumn, freqColumn);\r\n        (showCount) ? countColumn.slideDown() : countColumn.slideUp();\r\n        (showFreq) ? freqColumn.slideDown() : freqColumn.slideUp();\r\n    }\r\n\r\n    /**\r\n     * Updates node-symbol widget and redraws nodes\r\n     */\r\n    onNodeSymbolChange(e) {\r\n        this.widgets['node-symbol'] = e;\r\n        \r\n    }\r\n\r\n    /**\r\n     * Sets whether node symbol table is visible or not\r\n     * @param e 'Show' or 'Hide'\r\n     */\r\n    onNodeSymbolTableChange(e) {\r\n        this.SelectedNetworkTableTypeVariable = e;\r\n        this.widgets[\"node-symbol-table-visible\"] = this.SelectedNetworkTableTypeVariable;\r\n        if (this.SelectedNetworkTableTypeVariable == \"Show\") {\r\n            this.NodeSymbolTableWrapperDialogSettings.setVisibility(true);\r\n        }\r\n        else {\r\n            this.NodeSymbolTableWrapperDialogSettings.setVisibility(false);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates link-tooltip-variable and SelectedLinkTooltipVariable to update what tooltip displays for links\r\n     */\r\n    onLinkTooltipVariableChange(e) {\r\n        if (!Array.isArray(e)) {\r\n            e = [e];\r\n        }\r\n        e = e.filter(item => item !== 'None')\r\n\r\n        this.widgets['link-tooltip-variable'] = e;\r\n        this.SelectedLinkTooltipVariable = this.widgets['link-tooltip-variable'];\r\n    }\r\n\r\n    /**\r\n     * Updates link-label-variable widget and link labels\r\n     */\r\n    onLinkLabelVariableChange(e) {\r\n        let label: any = e;\r\n        this.widgets['link-label-variable'] = label;\r\n        if (!this.cy) return;\r\n        this.cy.edges().forEach(edge => {\r\n            const newLabel = this.getLinkLabel(edge.data()).text;\r\n            edge.data('label', newLabel);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Updates link-label-decimal-length widget and updates label with updated number of decimal points\r\n     */\r\n    onLinkDecimalVariableChange(e) {\r\n        this.widgets['link-label-decimal-length'] = e;\r\n        if (!this.cy) return;\r\n        this.cy.edges().forEach(edge => {\r\n            const newLabel = this.getLinkLabel(edge.data()).text;\r\n            edge.data('label', newLabel);\r\n        });\r\n        \r\n    }\r\n\r\n    /**\r\n     * Updates link-opacity widget and the opacity for all links\r\n     */\r\n    onLinkOpacityChange(e) {\r\n        this.widgets['link-opacity'] = e;\r\n        this.overideTransparency = true;\r\n        this.updateLinkColor();\r\n        this.overideTransparency = false;\r\n        \r\n    }\r\n\r\n    updateLinkWidthRows(e) {\r\n        if (e == 'None') {\r\n            setTimeout(() => {\r\n                $('#link-reciprocalthickness-row').slideUp();\r\n                $('#link-max-width-row').slideUp();\r\n                $('#link-min-width-row').slideUp();\r\n                $('#link-width-row').slideDown();\r\n            }, 5)\r\n        } else {\r\n            setTimeout(() => {\r\n                $('#link-reciprocalthickness-row').css('display', 'flex');\r\n                $('#link-max-width-row').css('display', 'flex');\r\n                $('#link-min-width-row').css('display', 'flex');\r\n                $('#link-width-row').slideUp();\r\n            }, 5)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates link-width-variable widget and updates link width; Also cause min, max and reciprocal link width row to appear/disappear\r\n     */\r\n    onLinkWidthVariableChange(e) {\r\n        this.updateLinkWidthRows(e);\r\n        this.widgets['link-width-variable'] = e;\r\n        this.updateMinMaxLink();\r\n        this.scaleLinkWidth();\r\n        \r\n    }\r\n\r\n    /**\r\n     * Updates the values for this.nodeMin, this.nodeMax, this.nodeMid and uses that info to update this.nodeScale() to set the size of the nodes\r\n     */\r\n    updateMinMaxNode() {\r\n        this.visNodes = this.commonService.getVisibleNodes();\r\n        let n = this.visNodes.length;\r\n        let sizeVariable = this.widgets['node-radius-variable'];\r\n    \r\n        this.nodeMin = Number.MAX_VALUE;\r\n        this.nodeMax = Number.MIN_VALUE;\r\n        for (let i = 0; i < n; i++) {\r\n            let size = this.visNodes[i][sizeVariable];\r\n            if (typeof size == 'undefined') continue;\r\n            if (size < this.nodeMin) this.nodeMin = size;\r\n            if (size > this.nodeMax) this.nodeMax = size;\r\n        }\r\n    \r\n        // Normalize legacy values to fit within 0-100 range\r\n        if (this.widgets['node-radius-max'] > 100 || this.widgets['node-radius-min'] > 100) {\r\n            // Calculate the ratio between the current range and desired range\r\n            const currentRange = this.widgets['node-radius-max'] - this.widgets['node-radius-min'];\r\n            const targetRange = 100;\r\n            const scaleFactor = targetRange / currentRange;\r\n\r\n            // Scale the values proportionally\r\n            this.widgets['node-radius-max'] = Math.round(this.widgets['node-radius-max'] * scaleFactor);\r\n            this.widgets['node-radius-min'] = Math.round(this.widgets['node-radius-min'] * scaleFactor);\r\n\r\n            // Ensure values stay within bounds\r\n            this.widgets['node-radius-max'] = Math.min(100, this.widgets['node-radius-max']);\r\n            this.widgets['node-radius-min'] = Math.max(0, this.widgets['node-radius-min']);\r\n        }\r\n\r\n        // console.log('nodeMin: ', this.nodeMin);\r\n        // console.log('nodeMax: ', this.nodeMax);\r\n        // console.log('noderad Max: ', this.widgets['node-radius-max']);\r\n        // console.log('noderad Min ', this.widgets['node-radius-min']);\r\n\r\n        let maxWidth = this.widgets['node-radius-max'];\r\n        let minWidth = this.widgets['node-radius-min'];\r\n    \r\n        this.nodeMid = (this.nodeMax - this.nodeMin) / 2;\r\n    \r\n        this.nodeScale = d3.scaleLinear()\r\n            .domain([this.nodeMin, this.nodeMax])\r\n            .range([minWidth, maxWidth]);\r\n    }\r\n\r\n    updateMinMaxLink() {\r\n        let maxWidth = this.widgets['link-width-max'];\r\n        if (maxWidth == 'None') {\r\n            this.widgets['link-width-max'] = 15;\r\n            maxWidth = 15;\r\n        }\r\n        let minWidth = this.widgets['link-width-min'];\r\n        if (minWidth == 'None') {\r\n            this.widgets['link-width-min'] = 0;\r\n            minWidth = 0;\r\n        }\r\n        let variable = this.widgets['link-width-variable'];\r\n\r\n        this.visLinks = this.getVLinks();\r\n        let n = this.visLinks.length;\r\n        this.linkMax = -Infinity;\r\n        this.linkMin = Infinity;\r\n        for (let i = 0; i < n; i++) {\r\n            const link = this.visLinks[i];\r\n          \r\n            // Check if the link has a distanceOrigin and if it's not included in origin array\r\n            let value = 0;\r\n            if (link.distanceOrigin && link.origin.includes(link.distanceOrigin)) {\r\n              value = link[variable];\r\n            }\r\n          \r\n            // Skip if value is not a number\r\n            if (!this.isNumber(value)) continue;\r\n          \r\n            // Update min and max\r\n            if (value > this.linkMax) this.linkMax = value;\r\n            if (value < this.linkMin) this.linkMin = value;\r\n          }\r\n        this.linkScale = d3.scaleLinear()\r\n            .domain([this.linkMin, this.linkMax])\r\n            .range([minWidth, maxWidth]);\r\n\r\n    }\r\n\r\n    /**\r\n     * Updates link-width-reciprocal widget and updates link width\r\n     * This widget controls whether to set width smallest -> largest or largest -> smallest\r\n     */\r\n    onLinkWidthReciprocalNonReciprocalChange(e) {\r\n        if (e == \"Reciprocal\") {\r\n            this.widgets['link-width-reciprocal'] = true;\r\n            this.scaleLinkWidth();\r\n        }\r\n        else {\r\n            this.widgets['link-width-reciprocal'] = false;\r\n            this.scaleLinkWidth();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates link-width widget and link width\r\n     */\r\n    onLinkWidthChange(e) {\r\n        this.widgets['link-width'] = e;\r\n        this.scaleLinkWidth();        \r\n    }\r\n\r\n    /**\r\n     * Updates link-width-max widget and link width\r\n     */\r\n    onLinkWidthMaxChange(e) {\r\n        this.widgets['link-width-max'] = e;\r\n        this.updateMinMaxLink();\r\n        this.scaleLinkWidth();\r\n\r\n        \r\n    }\r\n\r\n    /**\r\n     * Updates link-width-min widget and link width\r\n     */\r\n    onLinkWidthMinChange(e) {\r\n        this.widgets['link-width-min'] = e;\r\n        this.updateMinMaxLink();\r\n        this.scaleLinkWidth();\r\n        \r\n    }\r\n\r\n    /**\r\n     * Updates link-length widget and link force distance\r\n     */\r\n    onLinkLengthChange(e) {\r\n        if (this.commonService.session.network.allPinned) {\r\n            // updating link length results in recaculcating node positions, if nodes are pinned prevent this\r\n            this.SelectedLinkLengthVariable = this.widgets['link-length'];\r\n            return;\r\n        }\r\n        this.widgets['link-length'] = this.SelectedLinkLengthVariable;\r\n        this.updateLayout();\r\n    }\r\n\r\n    /**\r\n  * Applies arrow styling to edges based on current widget settings and edge data.\r\n  * Arrows are shown only for links that have distance and its within the threshold\r\n  */\r\n    private updateArrowStyles() {\r\n        if (!this.cy) return;\r\n\r\n        this.cy.style()\r\n            .selector('edge')\r\n            .style({\r\n                'target-arrow-shape': (ele) => {\r\n                    const data = ele.data();\r\n                    console.log('data: ', data, 'has distance', data.hasDistance, 'origin', data.origin)\r\n                    if (this.widgets['link-directed'] && (!data.hasDistance || (data.origin[0] !== data.distanceOrigin ))) {\r\n                        return 'triangle';\r\n                    }\r\n                    return 'none';\r\n                },\r\n                'source-arrow-shape': (ele) => {\r\n                    const data = ele.data();\r\n                    if (this.widgets['link-directed'] && (!data.hasDistance || (data.origin[0] !== data.distanceOrigin ))) {\r\n                        return 'triangle';\r\n                    }\r\n                    return 'none';\r\n                },\r\n                'curve-style': this.widgets['link-directed'] ? 'unbundled-bezier' : 'straight'\r\n            })\r\n            .update();\r\n    }\r\n\r\n\r\n    /**\r\n     * Updates link-directed widget. When directed, links have an arrow added; when undirected, links have no arrow\r\n     */\r\n    onLinkDirectedUndirectedChange(e) {\r\n        if (e === \"Show\") {\r\n            $('#link-bidirectional-row').slideDown().css('display', 'flex');\r\n            this.widgets['link-directed'] = true;\r\n        } else {\r\n            this.widgets['link-directed'] = false;\r\n            $(\"#link-bidirectional-row\").slideUp();\r\n        }\r\n\r\n        this.updateArrowStyles();\r\n    }\r\n\r\n\r\n\r\n    onLinkBidirectionalChange(e) {\r\n        // Update the widget state\r\n        this.widgets['link-bidirectional'] = (e === \"Show\");\r\n\r\n        this.updateArrowStyles();\r\n    }\r\n\r\n    /**\r\n     * Updates node-highlight widget. When true and a node is mouseoved current node, all it of links, and neighbor nodes will be highlighted\r\n     */\r\n    onDontHighlightNeighborsHighlightNeighborsChange(e) {\r\n        if (e == \"Normal\") {\r\n            this.widgets['node-highlight'] = false;\r\n        }\r\n        else {\r\n            this.widgets['node-highlight'] = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Calculates the minimum and maximum values for the selected link-width variable.\r\n     */\r\n    calculateLinkWidthScale() {\r\n        const variable = this.widgets['link-width-variable'];\r\n        if (variable === 'None') {\r\n            // No scaling needed\r\n            return null;\r\n        }\r\n\r\n        const vlinks = this.commonService.getVisibleLinks(true).filter(link => {\r\n            console.log(\"link\", link);\r\n            console.log(\"variable\", variable);\r\n            console.log(\"value\", link[variable]);\r\n            const value = link[variable];\r\n            if (variable == 'distance' && link.distanceOrigin && !link.origin.includes(link.distanceOrigin)) {\r\n                return false;\r\n            }\r\n            return this.isNumber(value) || (!this.isNumber(value) && !isNaN(Number(value)));\r\n        });        \r\n        \r\n        if (vlinks.length === 0) {\r\n            console.warn('No valid link-width data available for scaling.');\r\n            return null;\r\n        }\r\n\r\n        const values = vlinks.map(link => link[variable]);\r\n        const min = Math.min(...values);\r\n        const max = Math.max(...values);\r\n\r\n        return { min, max };\r\n    }\r\n\r\n    /**\r\n     * Creates a linear scale based on the widget settings and data range.\r\n     * @param value The value to scale.\r\n     * @param dataMin Minimum value of the data.\r\n     * @param dataMax Maximum value of the data.\r\n     * @param minWidth Minimum width for links.\r\n     * @param maxWidth Maximum width for links.\r\n     * @param reciprocal Whether to invert the scale.\r\n     * @returns The scaled width.\r\n     */\r\n    linearScale(value: number, dataMin: number, dataMax: number, minWidth: number, maxWidth: number, reciprocal: boolean): number {\r\n        if (dataMax === dataMin) {\r\n            // Avoid division by zero; return average width\r\n            return (minWidth + maxWidth) / 2;\r\n        }\r\n        let scaledValue = (value - dataMin) / (dataMax - dataMin);\r\n        if (reciprocal) {\r\n            scaledValue = 1 - scaledValue;\r\n        }\r\n        return scaledValue * (maxWidth - minWidth) + minWidth;\r\n    }\r\n\r\n    /**\r\n     * Take input from 2D Networks settings dialog box from template and update the widget and show/hides gridlines\r\n     * @param e string either 'Show' or 'Hide'\r\n     */\r\n    onNetworkGridlinesShowHideChange(e: string): void {\r\n        if (e === \"Show\") {\r\n            this.widgets['network-gridlines-show'] = true;\r\n        } else {\r\n            this.widgets['network-gridlines-show'] = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Changes value of charge force (d3.many-body-force). Sets charge to -e meaning each node will repell every other node\r\n     * @param {number} e value from 0-400\r\n     */\r\n    onNodeChargeChange(e: number) {\r\n\r\n        // this.force.force('charge').strength(-e);\r\n        // this.force.alpha(0.3).alphaTarget(0).restart();\r\n        this.widgets['node-charge'] = e;\r\n    }\r\n\r\n    /**\r\n     * Changes value of gravity force (d3-force-attract) which pulls nodes to the center. Sets strength e\r\n     * @param {number} e value from 0.025-1\r\n     */\r\n    onNetworkGravityChange(e: number) {\r\n\r\n        // this.force.force('gravity').strength(e);\r\n        // this.force.alpha(0.3).alphaTarget(0).restart();\r\n        this.widgets['network-gravity'] = e;\r\n    }\r\n\r\n    /**\r\n     * Changes value of velocityDecay (d3 velocityDecay). Sets too low causing network to oscillate\r\n     * @param {number} e value from 0-1 (default 0.4)\r\n     */\r\n    onNetworkFrictionChange(e) {\r\n\r\n        // this.force.velocityDecay(e);\r\n        // this.force.alpha(0.3).alphaTarget(0).restart();\r\n        this.widgets['network-friction'] = e;\r\n    }\r\n\r\n    /**\r\n     * Changes value of network-link-strength (d3.forceLink) which pulls the pair of nodes together\r\n     * @param {number} e value from 0-1 (default 0.4)\r\n     */\r\n    onNetworkLinkStrengthVariableChange(e) {\r\n\r\n        //console.log('st change: ', e);\r\n        let v = parseFloat(e);\r\n        // this.force.force('link').strength(v);\r\n        // this.force.alpha(0.3).alphaTarget(0).restart();\r\n        this.widgets['network-link-strength'] = e;\r\n    }\r\n\r\n    /**\r\n     * Updates the color of nodes and transparency based on node-color-variable, the value from nodeColorMap and nodeAlphaMap, and whether the node is selected\r\n     */\r\n    updateNodeColors() {\r\n\r\n        if(!this.cy) return;\r\n\r\n\r\n        let variable = this.widgets['node-color-variable'];\r\n        let color = this.widgets['node-color']\r\n\r\n        let stroke = this.widgets['selected-node-stroke-color'];\r\n        let stroke_width = parseInt(this.widgets['selected-node-stroke-width']);\r\n\r\n        if (variable == 'None') {\r\n\r\n            this.data.nodes.forEach(x => {\r\n\r\n                x.color = color;\r\n\r\n            })\r\n\r\n        } else {\r\n\r\n            this.data.nodes.forEach((x, index) => {\r\n\r\n                x.color = this.commonService.temp.style.nodeColorMap(this.commonService.session.data.nodes[index][variable]);\r\n\r\n            })\r\n        }\r\n\r\n        this.cy.nodes().forEach(node => {\r\n            const [newColor, opacity] = this.getNodeColor(node.data());\r\n            node.data('nodeColor', newColor);\r\n            node.data('bgOpacity', opacity);\r\n            node.data('borderColor', newColor);\r\n        });\r\n        this.cy.style().update(); // Refresh Cytoscape styles to apply changes\r\n\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Updates the width of the links using link-width, link-width-variable, link-width-max, link-width-min, and link-width-reciprocal\r\n     */\r\n    /**\r\n * Scales link widths based on the selected variable and updates Cytoscape styles.\r\n */\r\nscaleLinkWidth() {\r\n    const variable = this.widgets['link-width-variable'];\r\n    if (!this.cy) return;\r\n    if (variable === 'None') {\r\n        // Apply a default width to all links\r\n        this.cy.style().selector('edge').style({\r\n            'width': this.widgets['link-width']\r\n        }).update();\r\n        return;\r\n    }\r\n\r\n    const scaleValues = this.calculateLinkWidthScale();\r\n    if (!scaleValues) {\r\n        // If scaling isn't applicable, set a default width\r\n        this.cy.style().selector('edge').style({\r\n            'width': this.widgets['link-width']\r\n        }).update();\r\n        return;\r\n    }\r\n\r\n    const { min, max } = scaleValues;\r\n\r\n    //     let vlinks = this.getVLinks();\r\n    //     if (variable == 'None') return  scalar;\r\n    //     let n = vlinks.length;\r\n    const maxWidth = this.widgets['link-width-max'];\r\n    const minWidth = this.widgets['link-width-min'];\r\n    const reciprocal = this.widgets['link-width-reciprocal'];\r\n\r\n    // Iterate over each edge and set the scaled width\r\n    this.cy.edges().forEach(edge => {\r\n        let dataValue = edge.data(variable) as unknown as number;\r\n        if (variable == 'distance' && edge.data('distanceOrigin') && !edge.data('origin').includes(edge.data('distanceOrigin'))) {\r\n            dataValue = 0;\r\n        }\r\n        if (this.isNumber(dataValue)) {\r\n            const scaledWidth = this.linearScale(dataValue, min, max, minWidth, maxWidth, reciprocal);\r\n            edge.data('scaledWidth', scaledWidth);\r\n        } else {\r\n            // Handle non-numeric values if necessary\r\n            edge.data('scaledWidth', minWidth);\r\n        }\r\n    });\r\n\r\n    // Update Cytoscape stylesheet to use the scaledWidth data\r\n    this.cy.style().selector('edge').style({\r\n        'width': 'data(scaledWidth)'\r\n    }).update();\r\n}\r\n    /**\r\n     * centers the view\r\n     */\r\n    fit() {\r\n        if (this.cy) this.cy.fit(this.cy.nodes(), 30);\r\n    };\r\n\r\n    /**\r\n     * XXXXX Function is never called; Review if necessary XXXXX\r\n     * @param nodeData \r\n     * @returns \r\n     */\r\n    isFiltered(nodeData: any): boolean {\r\n        if (nodeData) {\r\n            return this.commonService.session.data.nodeFilteredValues.find(x => x.index === nodeData.index) !== undefined;\r\n        }\r\n        return true\r\n    }\r\n\r\n    /**\r\n     * On click of settings button, show/hide settings dialog\r\n     */\r\n    openSettings() {\r\n        (this.Node2DNetworkExportDialogSettings.isVisible) ? this.Node2DNetworkExportDialogSettings.setVisibility(false) : this.Node2DNetworkExportDialogSettings.setVisibility(true);\r\n        this.ShowStatistics = !this.Show2DSettingsPane;\r\n        this.updateLinkWidthRows(this.SelectedLinkWidthByVariable);\r\n    }\r\n\r\n    /**\r\n     * Updates ShowStatistics variables to opposite of current value\r\n     * \r\n     * XXXXX Not currently executed; reevaluate if this function is needed XXXXX\r\n     */\r\n    enableSettings() {\r\n        this.ShowStatistics = !this.ShowStatistics;\r\n        this.cdref.detectChanges();\r\n    }\r\n\r\n    /**\r\n     * On click of export button, show export dialog\r\n     */\r\n    openExport() {\r\n        this.isExportClosed = false;\r\n        this.Show2DExportPane = true;\r\n        this.updateCalculatedResolution();\r\n    }\r\n\r\n    /**\r\n     * On click of center button, show centers the view\r\n     */\r\n    openCenter() {\r\n        if (this.cy) {\r\n            this.cy.fit(this.cy.nodes(), 30);\r\n        } else {\r\n            console.error('Cytoscape instance is not initialized.');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * XXXXX empty function; may be added later XXXXX\r\n     */\r\n    onRecallSession() {\r\n        //this.loadSettings();\r\n    }\r\n\r\n    openRefreshScreen() {\r\n        this.loadSettings();\r\n        setTimeout(this.fit, 2000);\r\n    }\r\n\r\n    /**\r\n     * renders the network\r\n     */\r\n    updateVisualization() {\r\n        console.log('updateVisualization');\r\n        this._rerender();\r\n        \r\n        if (this.SelectedNodeLabelVariable != 'None') { this.updateNodeLabels(); }\r\n    }\r\n\r\n    /**\r\n * Synchronizes current Cytoscape instance with new data (adds/removes/updates\r\n * nodes and links) instead of completely rerendering.\r\n */\r\nprivate async _partialUpdate() {\r\n    console.log('--- TwoD _partialUpdate called');\r\n    if (!this.cy) {\r\n      console.error('Cytoscape instance not initialized; cannot update partially.');\r\n      return;\r\n    }\r\n\r\n    // Cache positions BEFORE making changes to the graph\r\n    if (!this.nodePositions) {\r\n        this.nodePositions = new Map<string, { x: number; y: number }>();\r\n    }\r\n    this.cy.nodes().forEach(node => {\r\n        const currentPosition = node.position();\r\n        if (!this.nodePositions.has(node.id())) {\r\n            this.nodePositions.set(node.id(), currentPosition); // Cache position\r\n        }\r\n    });\r\n\r\n    // Retrieve fresh node/link data\r\n    const networkData = {\r\n        nodes: this.commonService.getVisibleNodes(),\r\n        links: this.commonService.getVisibleLinks(true)\r\n    };\r\n\r\n    // Add nodeSize to each node so that infomration can be used with calcuating node position\r\n    if (this.SelectedNodeRadiusVariable == 'None') {\r\n        networkData.nodes.forEach(node => {\r\n            node.nodeSize = Number(this.widgets['node-radius']);\r\n        })\r\n    } else {\r\n        networkData.nodes.forEach(node => {\r\n            node.nodeSize = Number(this.cy.nodes().getElementById(node._id).data('nodeSize'));\r\n        })\r\n    }\r\n    const { nodes: laidOutNodes, links: laidOutLinks } = await this.precomputePositionsWithD3(networkData.nodes, networkData.links, 30, false);\r\n    networkData.nodes = laidOutNodes;\r\n    networkData.links = laidOutLinks;\r\n\r\n    // Use batch mode to disable auto-panning during updates\r\n    this.cy.batch(() => {\r\n\r\n        networkData.nodes.forEach(node => {\r\n            node.id = node._id.toString();\r\n        });\r\n        networkData.links.forEach((link, i) => {\r\n            // Set a unique link id if desired\r\n            //link.id =  i.toString();  // or link.index.toString()\r\n            // If link.source is an object, grab its _id and convert to string\r\n            if (typeof link.source === 'object') {\r\n                link.source = link.source._id.toString();\r\n            }\r\n\r\n            // Same for link.target\r\n            if (typeof link.target === 'object') {\r\n            link.target = link.target._id.toString();\r\n            }\r\n        });\r\n\r\n        const nodeIds = new Set(networkData.nodes.map(n => n.id));\r\n\r\n        networkData.links.forEach(link => {\r\n        if (!nodeIds.has(link.source)) {\r\n            console.warn('Link source not found in nodes:', link.source, link);\r\n        }\r\n        if (!nodeIds.has(link.target)) {\r\n            console.warn('Link target not found in nodes:', link.target, link);\r\n        }\r\n        });\r\n\r\n        console.log('--- TwoDComponent _partialUpdate called:  ', networkData.links);\r\n\r\n        this.data = this.commonService.convertToGraphDataArray(networkData);\r\n        const newElements = this.mapDataToCytoscapeElements(this.data);\r\n\r\n        // Collect new IDs for membership checks\r\n        const newNodeIds = new Set(newElements.nodes.map(n => n.data.id));\r\n        // @ts-ignore\r\n        const newLinkIds = new Set(newElements.edges.map(l => l.data.id));\r\n\r\n        let cyNodeCount = 0;\r\n        // Update node visibility and restore positions\r\n        this.cy.nodes().forEach(node => {\r\n            if (!node.hasClass('parent')) { cyNodeCount += 1;}\r\n            if (!newNodeIds.has(node.id()) && !node.hasClass('parent')) {\r\n                // Hide node but keep its cached position\r\n                node.addClass('hidden');\r\n            } else {\r\n                // Ensure node is visible\r\n                node.removeClass('hidden');\r\n\r\n                // Restore position from cache\r\n                const newNode = newElements.nodes.find(n => n.data.id === node.id());\r\n                if (newNode) {\r\n                    node.data({ ...node.data(), ...newNode.data, });\r\n                    node.position({x: newNode.data.x, y: newNode.data.y}); // Restore position\r\n                }\r\n            }\r\n        });\r\n\r\n        // some series of operations (ie. min-cluster size set to 2, then playing timeline, then setting min-cluster size back to) led to nodes being removed from\r\n        // this.cy.nodes, this checks and adds them back\r\n        if (cyNodeCount < newElements.nodes.length) {\r\n            let countd = 0;\r\n            newElements.nodes.forEach(n => {\r\n                const cyNode = this.cy.getElementById(n.data.id);\r\n                if (!cyNode || !cyNode.length) {\r\n                    countd += 1;\r\n                    this.cy.add(n); // Add node\r\n                } else {\r\n                    return\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n        // Remove old edges\r\n        this.cy.edges().forEach(edge => {\r\n            if (!newLinkIds.has(edge.id())) {\r\n                this.cy.remove(edge);\r\n            }\r\n        });\r\n\r\n        const linkMap = new Map(networkData.links.map(l => [l.id, l]));\r\n\r\n\r\n        // Add/Update new edges\r\n        newElements.edges.forEach(e => {\r\n            const cyEdge = this.cy.getElementById(e.data.id);\r\n            if (!cyEdge || !cyEdge.length) {\r\n                this.cy.add(e); // Add edge\r\n            } else {\r\n                cyEdge.data({ ...cyEdge.data(), ...e.data }); // Update edge data\r\n            }\r\n\r\n            // Ensure label is updated based on filtered link data\r\n            const data = linkMap.get(cyEdge.id());\r\n            if (data == undefined) return;\r\n            const labelVal = this.getLinkLabel(data).text;\r\n            cyEdge.data('label', labelVal ?? \"\");\r\n\r\n        });\r\n\r\n        console.log('----DUo Edge2: ', newElements.edges.filter(edge => (edge.data.source === 'MZ745515' && edge.data.target === 'MZ712879') || (edge.data.source === 'MZ712879' && edge.data.target === 'MZ745515')));\r\n\r\n        // console.log('----newedges: ', _.cloneDeep(newElements.edges));\r\n\r\n    });\r\n\r\n\r\n        // Restore positions for all visible nodes explicitly\r\n        // this.cy.nodes(':visible').forEach(node => {\r\n        //     const position = this.nodePositions.get(node.id());\r\n        //     if (position) {\r\n        //         node.position({x: position.x, y: position.y });\r\n        //     }\r\n        // });\r\n\r\n        this.fit();\r\n\r\n           // Set rendered to true now that network has rendered\r\n           this.store.setNetworkRendered(true); \r\n           // Now we can set network update to false after its been updated fully\r\n           this.store.setNetworkUpdated(false); \r\n           this.commonService.session.network.rendering = false;\r\n\r\n}\r\n\r\n    applyStyleFileSettings() {\r\n        this.widgets = this.commonService.session.style.widgets;\r\n        this.loadSettings();\r\n        this._partialUpdate(); \r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n\r\n        console.log(\"calling destroy\");\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n\r\n        this.styleFileSub.unsubscribe();\r\n\r\n        this.settingsLoadedSubscription.unsubscribe();\r\n\r\n        if (this.cy){\r\n            this.cy.removeAllListeners();\r\n            this.cy.destroy();\r\n        }\r\n        this.cyContainer = null;\r\n\r\n\r\n    }\r\n\r\n    /**\r\n     * renders the network\r\n     */\r\n    onLoadNewData() {\r\n        if (this.debugMode) {\r\n            console.log('render new data');\r\n        }\r\n\r\n        console.log('onLoadNewData');\r\n        // this.debouncedRerender();\r\n    }\r\n\r\n    /**\r\n     * renders the network;\r\n     */\r\n    onFilterDataChange() {\r\n        if (this.debugMode) {\r\n            console.log('render filter change');\r\n        }\r\n\r\n        console.log('onFilterDataChange');\r\n        // render doesn't do anything unless this.isLoading == true; so need to ensure that before call render\r\n        this.debouncedRerender();\r\n    }\r\n\r\n    /**\r\n     * Sets twoD component variable based on the value in the appropriate widget and then calls appropriate function to update the view\r\n     * \r\n     * XXXXX this function should probably be reevaluated/refacted as well because sections of code are being evaluated multiple times \r\n     * (ie. onPolygonLabelVariableChange, onPolygonLabelVariableChange, onPolygonLabelOrientationChange all call redrawPolygonLabels) XXXXX\r\n     */\r\n    loadSettings() {\r\n\r\n        //Polygons|Label Size\r\n        this.SelectedPolygonLabelSizeVariable = this.widgets['polygons-label-size'];\r\n        this.onPolygonLabelSizeChange(this.SelectedPolygonLabelSizeVariable);\r\n\r\n        //Node|Orientation\r\n        this.SelectedPolygonLabelOrientationVariable = this.widgets['polygon-label-orientation'];\r\n        this.onPolygonLabelOrientationChange(this.SelectedPolygonLabelOrientationVariable);\r\n\r\n        this.polygonsToggle(this.widgets['polygons-show']);\r\n        if (this.commonService.session.style.widgets['polygons-show']) {\r\n            this.updatePolygonColors();\r\n            this.polygonColorsToggle(this.commonService.session.style.widgets['polygon-color-table-visible'])\r\n            this.updateGroupNodeColors();\r\n        }\r\n\r\n        //Nodes|Label\r\n        this.SelectedNodeLabelVariable = this.widgets['node-label-variable'];\r\n        console.log('----TWOD SelectedNodeLabelVariable: ', this.SelectedNodeLabelVariable);\r\n        this.onNodeLabelVaribleChange(this.SelectedNodeLabelVariable);\r\n\r\n        //Node|Orientation\r\n        this.SelectedNodeLabelOrientationVariable = this.widgets['node-label-orientation'];\r\n        this.onNodeLabelOrientationChange(this.SelectedNodeLabelOrientationVariable);\r\n\r\n        //Node|Label Size\r\n        this.SelectedNodeLabelSizeVariable = this.widgets['node-label-size'];\r\n        this.setNodeLabelSize(this.SelectedNodeLabelSizeVariable);\r\n\r\n        if (!Array.isArray(this.widgets['node-tooltip-variable'])) {\r\n            this.widgets['node-tooltip-variable'] = [this.widgets['node-tooltip-variable']];\r\n        }\r\n        this.SelectedNodeTooltipVariable = this.widgets['node-tooltip-variable'];\r\n        this.onNodeTooltipVariableChange(this.SelectedNodeTooltipVariable);\r\n\r\n        //Nodes|Shape By Table\r\n        if (this.widgets['node-symbol-variable'] != undefined && this.widgets['node-symbol-variable'] != 'None') {\r\n            this.widgets[\"node-symbol-table-visible\"] = 'Show';\r\n        }\r\n        this.SelectedNetworkTableTypeVariable = this.widgets[\"node-symbol-table-visible\"];\r\n        this.onNodeSymbolTableChange(this.SelectedNetworkTableTypeVariable);\r\n\r\n        //Nodes|Shape By\r\n        this.SelectedNodeSymbolVariable = this.widgets['node-symbol-variable'];\r\n        this.onNodeSymbolVariableChange(this.widgets['node-symbol-variable'], this.SelectedNetworkTableTypeVariable === \"Show\");\r\n\r\n\r\n        //Nodes|Shape\r\n        this.widgets['node-symbol'] = this.mapPreviousShapeNameToCurrent(this.widgets['node-symbol']);\r\n        this.commonService.session.style.nodeSymbols = this.commonService.session.style.nodeSymbols.map(name => this.mapPreviousShapeNameToCurrent(name));\r\n        Object.keys(this.commonService.session.style.nodeSymbolsTable).forEach(key => {\r\n            if (Array.isArray(this.commonService.session.style.nodeSymbolsTable[key])) {\r\n                let newArr = [];\r\n                this.commonService.session.style.nodeSymbolsTable[key].forEach(symbol => {\r\n                    newArr.push(this.mapPreviousShapeNameToCurrent(symbol));\r\n                })\r\n                this.commonService.session.style.nodeSymbolsTable[key] = newArr;\r\n            } else {\r\n                this.commonService.session.style.nodeSymbolsTable[key] = this.mapPreviousShapeNameToCurrent(this.commonService.session.style.nodeSymbolsTable[key]);\r\n            }\r\n        });\r\n        if (this.widgets['node-symbol-variable'] != 'None') {\r\n            let values = this.commonService.session.style.nodeSymbolsTableKeys[this.widgets['node-symbol-variable']];\r\n            this.commonService.temp.style.nodeSymbolMap = d3.scaleOrdinal(this.commonService.session.style.nodeSymbolsTable[this.widgets['node-symbol-variable']]).domain(values);\r\n        }\r\n        this.SelectedNodeShapeVariable = this.widgets['node-symbol'];\r\n        this.onNodeSymbolChange(this.SelectedNodeShapeVariable);\r\n\r\n        //Nodes|Size By\r\n        this.SelectedNodeRadiusVariable = this.widgets['node-radius-variable'];\r\n        this.onNodeRadiusVariableChange(this.SelectedNodeRadiusVariable);\r\n\r\n        //Nodes|Size\r\n        if (Number(this.widgets['node-radius']) > 100 || Number(this.widgets['node-radius']) < 0) {\r\n            this.widgets['node-radius'] = 20;\r\n        }\r\n        this.SelectedNodeRadiusSizeVariable = Number(this.widgets['node-radius']);\r\n        this.onNodeRadiusChange(this.SelectedNodeRadiusSizeVariable);\r\n\r\n        this.nodeBorderWidth = this.widgets['node-border-width']\r\n\r\n        //Links|Tooltip\r\n        this.SelectedLinkTooltipVariable = this.widgets['link-tooltip-variable'];\r\n        this.onLinkTooltipVariableChange(this.SelectedLinkTooltipVariable);\r\n\r\n        //Links|Label\r\n        this.SelectedLinkLabelVariable = this.widgets['link-label-variable'];\r\n        this.onLinkLabelVariableChange(this.SelectedLinkLabelVariable);\r\n\r\n        //Links|Decimal Length\r\n        this.SelectedLinkDecimalVariable = this.widgets['link-label-decimal-length'];\r\n        this.onLinkDecimalVariableChange(this.SelectedLinkDecimalVariable);\r\n\r\n        //Links|Transparency\r\n        this.SelectedLinkTransparencyVariable = this.widgets['link-opacity'];\r\n        this.onLinkOpacityChange(this.SelectedLinkTransparencyVariable);\r\n\r\n        //Links|Width By\r\n        this.SelectedLinkWidthByVariable = this.widgets['link-width-variable'];\r\n        this.onLinkWidthVariableChange(this.SelectedLinkWidthByVariable);\r\n\r\n        //Links|Reciprical\r\n        this.SelectedLinkReciprocalTypeVariable = this.widgets['link-width-reciprocal'] ? \"Reciprocal\" : \"Non-Reciprocal\"\r\n        this.onLinkWidthReciprocalNonReciprocalChange(this.SelectedLinkReciprocalTypeVariable);\r\n\r\n        //Links|Width\r\n        this.SelectedLinkWidthVariable = this.widgets['link-width'];\r\n        this.onLinkWidthChange(this.SelectedLinkWidthVariable);\r\n\r\n        //Links|Width Max\r\n        this.SelectedLinkWidthMax = this.widgets['link-width-max'];\r\n        this.onLinkWidthMaxChange(this.SelectedLinkWidthMax);\r\n\r\n        //Links|Width Min\r\n        this.SelectedLinkWidthMin = this.widgets['link-width-min'];\r\n        this.onLinkWidthMinChange(this.SelectedLinkWidthMin);\r\n\r\n        //Links|Length\r\n        if (this.widgets['link-length'] < 1) {\r\n            this.widgets['link-length'] = 50;\r\n        }\r\n        this.SelectedLinkLengthVariable = this.widgets['link-length'];\r\n        this.onLinkLengthChange(this.SelectedLinkLengthVariable);\r\n\r\n        //Links|Arrows\r\n        this.SelectedLinkArrowTypeVariable = this.widgets['link-directed'] ? \"Show\" : \"Hide\";\r\n        this.onLinkDirectedUndirectedChange(this.SelectedLinkArrowTypeVariable);\r\n\r\n\r\n        //Network|Neighbors\r\n        this.SelectedNetworkNeighborTypeVariable = this.widgets['node-highlight'] ? \"Highlighted\" : \"Normal\";\r\n        this.onDontHighlightNeighborsHighlightNeighborsChange(this.SelectedNetworkNeighborTypeVariable);\r\n\r\n        //Network|Gridlines\r\n        this.SelectedNetworkGridLineTypeVariable = this.widgets['network-gridlines-show'] ? \"Show\" : \"Hide\";\r\n        this.onNetworkGridlinesShowHideChange(this.SelectedNetworkGridLineTypeVariable);\r\n\r\n        //Network|Link Strength\r\n        this.SelecetedNetworkLinkStrengthVariable = this.widgets['network-link-strength'];\r\n        this.onNetworkFrictionChange(this.SelecetedNetworkLinkStrengthVariable);\r\n\r\n        // Ensure proper orientation is set\r\n        if (this.widgets['polygon-label-orientation'] !== 'top' || this.widgets['polygon-label-orientation'] !== 'bottom' || this.widgets['polygon-label-orientation'] !== 'middle') {\r\n            this.widgets['polygon-label-orientation'] = 'top';\r\n        }\r\n\r\n        //Network|Polygon Orientation\r\n        this.SelectedPolygonLabelOrientationVariable = this.widgets['polygon-label-orientation'];\r\n        this.onPolygonLabelOrientationChange(this.SelectedPolygonLabelOrientationVariable);\r\n    }\r\n\r\n    /**\r\n     * Updates the sizes of all nodes based on the current widget settings.\r\n     */\r\n    updateLinkColor() {\r\n        console.log('----TWOD updateLinkColor called');\r\n        if (!this.cy) return;\r\n        this.cy.edges().forEach(link => {\r\n            const { color, opacity } = this.getLinkColor(link.data());\r\n            link.data('lineColor', color);\r\n            link.data('lineOpacity', opacity); // Ensure transparency is explicitly set\r\n          });\r\n        // this.cy.style().update(); // Refresh Cytoscape styles to apply changes\r\n    }\r\n\r\n    /**\r\n     * Updates the sizes of all nodes based on the current widget settings.\r\n     */\r\n    updateNodeSizes() {\r\n        if (!this.cy) return;\r\n        this.cy.nodes().forEach(node => {\r\n            const newSize = Number(this.getNodeSize(node.data()));\r\n            node.data('nodeSize', newSize);\r\n        });\r\n        this.cy.style().update(); // Refresh Cytoscape styles to apply changes\r\n    }\r\n\r\n     /**\r\n     * Updates the border widths of all nodes based on the current widget settings.\r\n     */\r\n     updateNodeBorders() {\r\n        if (!this.cy) return;\r\n        this.cy.nodes().forEach(node => {\r\n            const newBorderWidth = this.getNodeBorderWidth(node.data());\r\n            node.data('borderWidth', newBorderWidth);\r\n        });\r\n        this.cy.style().update(); // Refresh Cytoscape styles to apply changes\r\n    }\r\n\r\n    /**\r\n     * Updates the labels of all nodes based on the current widget settings.\r\n     */\r\n    updateNodeLabels() {\r\n        console.log('----TWOD updateNodeLabels called');\r\n        if (!this.cy) return;\r\n        this.cy.nodes().forEach(node => {\r\n            if (node.children().length > 0) return; // Skip parent nodes\r\n                const newLabel = this.getNodeLabel(node.data());\r\n                node.data('label', newLabel);\r\n        });\r\n\r\n        console.log('--- TwoDComponent updateNodeLabels ended ');\r\n\r\n        this.cy.style().update(); // Refresh Cytoscape styles to apply changes\r\n    }\r\n\r\n\r\n    /**\r\n     * Updates the labels of all nodes based on the current widget settings.\r\n     */\r\n    updateLinkWidths() {\r\n        this.cy.edges().forEach(edge => {\r\n            const newWidth = this.getLinkWidth(edge.data());\r\n            edge.data('width', newWidth);\r\n        });\r\n        // this.cy.style().update(); // Refresh Cytoscape styles to apply changes\r\n    }\r\n\r\n\r\n    /**\r\n     * Updates the font sizes of all node labels based on the current widget settings.\r\n     */\r\n    updateNodeLabelSizes() {\r\n        if (!this.cy) return;\r\n        this.cy.nodes().forEach(node => {\r\n            const newFontSize = this.getNodeFontSize(node.data());\r\n            node.data('fontSize', newFontSize);\r\n        });\r\n        this.cy.style().update(); // Refresh Cytoscape styles to apply changes\r\n    }\r\n\r\n    updateNodeShapes() {\r\n        if (!this.cy) return;\r\n        this.cy.nodes().forEach(node => {\r\n            const newShape = this.getNodeShape(node.data());\r\n            node.data('shape', newShape);\r\n        });\r\n        this.cy.style().update(); // Refresh Cytoscape styles to apply changes\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * Handles changes to the node label widget.\r\n     * @param e New label value from the widget.\r\n     */\r\n    onNodeLabelChange(e: string) {\r\n        this.widgets['node-label'] = e;\r\n        this.updateNodeLabels(); // Update labels without rerendering the entire network\r\n    }\r\n\r\n    /**\r\n     * Handles changes to the node color widget.\r\n     * @param e New color value from the widget.\r\n     */\r\n    onNodeColorChange(e: string) {\r\n        console.log('node color changeddd');\r\n        this.widgets['node-color'] = e;\r\n        this.updateNodeColors(); // Update node colors without rerendering the entire network\r\n    }\r\n\r\n    /**\r\n     * Retrieves the border width for a node based on current widget settings.\r\n     * @param node The node data object.\r\n     * @returns The border width.\r\n     */\r\n    getNodeBorderWidth(node: any): number {\r\n        return this.widgets['node-border-width'] || 2; // Default to 2 if not set\r\n    }\r\n\r\n\r\n    /**\r\n     * Retrieves the font size for a node label based on current widget settings.\r\n     * @param node The node data object.\r\n     * @returns The font size in pixels.\r\n     */\r\n    getNodeFontSize(node: any): number {\r\n        return this.widgets['node-label-size'] || 12; // Default to 12px if not set\r\n    }\r\n\r\n}\r\n\r\nexport namespace TwoDComponent {\r\n    export const componentTypeName = '2D Network';\r\n}","import { Component, OnInit, ViewChild, ElementRef, ChangeDetectorRef, Inject, AfterViewInit, OnDestroy } from '@angular/core';\r\nimport { Table } from 'primeng/table';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\n\r\nimport { CommonService } from '../../contactTraceCommonServices/common.service';\r\nimport { MicobeTraceNextPluginEvents } from '../../helperClasses/interfaces';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport { CommonStoreService } from '@app/contactTraceCommonServices/common-store.services';\r\n\r\n@Component({\r\n  selector: 'app-waterfall-component',\r\n  templateUrl: './waterfall.component.html',\r\n  styleUrls: ['./waterfall.component.scss']\r\n})\r\nexport class WaterfallComponent extends BaseComponentDirective implements OnInit, AfterViewInit, MicobeTraceNextPluginEvents, OnDestroy {\r\n\r\n  @ViewChild('clusterTable') clusterTable: Table;\r\n  @ViewChild('nodeTable') nodeTable: Table;\r\n  @ViewChild('linkTable') linkTable: Table;\r\n\r\n  clusterTableData: any;\r\n  nodeTableData: any;\r\n  linkTableData: any;\r\n\r\n  clusterTableWidth: any;\r\n  nodeTableWidth: number;\r\n  linkTableWidth: any;\r\n\r\n  scrollHeight= '800px';\r\n  IsDataAvailable =  true;\r\n\r\n  metaDataToSkip = ['index', 'id', 'visible', 'degree', 'seq', 'cluster', 'directed', 'source', 'target', 'x', 'y', 'vx', 'vy', 'nodeSize']\r\n\r\n  selectedClusterRow: any;\r\n  selectedNodeRow: any;\r\n  selectedLinkRow: any;\r\n\r\n  expandedClusterRowData: any = [];\r\n  expandedNodeRowData: any = [];\r\n  expandedLinkRowData: any = [];\r\n\r\n  private destroy$ = new Subject<void>();\r\n\r\n  constructor(\r\n    @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer, \r\n    elRef: ElementRef,\r\n    private commonService: CommonService,\r\n    private cdref: ChangeDetectorRef,\r\n    private store: CommonStoreService,\r\n    private gtmService: GoogleTagManagerService\r\n    ) {\r\n\r\n    super(elRef.nativeElement);\r\n    this.commonService.visuals.waterfall = this;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.gtmService.pushTag({\r\n      event: \"page_view\",\r\n      page_location: \"/waterfall\",\r\n      page_title: \"Waterfall View\"\r\n    });\r\n\r\n    this.clusterTableData = [];\r\n    this.nodeTableData = [];\r\n    this.linkTableData = [];\r\n\r\n    this.commonService.session.data.clusters.forEach((cl) => {\r\n      this.clusterTableData.push({'id': cl.id, 'nodeCount': cl.nodes})\r\n    })\r\n\r\n    this.container.on('resize', () => { \r\n      this.goldenLayoutComponentResize()\r\n    })\r\n\r\n    this.store.clusterUpdate$.pipe(takeUntil(this.destroy$)).subscribe(() => {\r\n      this.clusterTableData = [];\r\n      this.nodeTableData = [];\r\n      this.linkTableData = [];\r\n\r\n      this.commonService.session.data.clusters.forEach((cl) => {\r\n        this.clusterTableData.push({'id': cl.id, 'nodeCount': cl.nodes})\r\n      })\r\n\r\n      this.clearClusterTableSelection();      \r\n    })\r\n\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.goldenLayoutComponentResize();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  goldenLayoutComponentResize() {\r\n    this.clusterTableWidth = (this.clusterTable as any)._totalTableWidth().reduce((total, current ) => total += current, 0) - 28;\r\n    this.nodeTableWidth = (this.nodeTable as any)._totalTableWidth().reduce((total, current ) => total += current, 0) - 28;\r\n    this.linkTableWidth = (this.linkTable as any)._totalTableWidth().reduce((total, current ) => total += current, 0) - 28;\r\n\r\n    let height = this.container.height - 50;\r\n    this.scrollHeight = `${height}px`\r\n  }\r\n\r\n  onClusterRowSelect(e) {\r\n    let clusterID = e.data.id;\r\n    this.nodeTableData = [];\r\n    // why are these different and why is session.data.nodes and nodeFilteredValues wrong for degree? session.network.nodes might be correct for a different distance and isn't updated?\r\n    // TODO: XXX need to update how degree is calculated so it's correct centrally instead of calculating here\r\n    this.commonService.session.data.nodeFilteredValues.forEach(node => {\r\n    //this.commonService.session.network.nodes.forEach(node => {\r\n      if (node.cluster == clusterID) {\r\n        let degreeCount =  this.commonService.session.data.links.filter(link => { return link.visible && (link.source == node._id|| link.target == node._id)}).length;\r\n        if (node.index == 0) { console.log('here: ', node, degreeCount)}\r\n        this.nodeTableData.push({'id': node._id, 'degree': degreeCount})\r\n      }\r\n    })\r\n\r\n    let cluster = this.commonService.session.data.clusters.find(cl => cl.id == clusterID)\r\n    this.expandedClusterRowData = [];\r\n    Object.keys(cluster).filter(k => !(this.metaDataToSkip.includes(k) || k.charAt(0) == '_' || typeof cluster[k] == 'object')).forEach(k => {\r\n      let prop = this.commonService.titleize(k)\r\n      this.expandedClusterRowData.push({'key': prop, 'value': cluster[k]});\r\n    })\r\n\r\n    this.selectedNodeRow = null;\r\n    this.selectedLinkRow = null;\r\n    this.linkTableData = [];\r\n    this.expandedNodeRowData = [];\r\n    this.expandedLinkRowData = [];\r\n  }\r\n\r\n  onClusterRowUnselect() {\r\n    this.selectedNodeRow = null;\r\n    this.selectedLinkRow = null;\r\n    this.nodeTableData = [];\r\n    this.linkTableData = [];\r\n\r\n    this.expandedClusterRowData = [];\r\n    this.expandedNodeRowData = [];\r\n    this.expandedLinkRowData = [];\r\n  }\r\n\r\n  clearClusterTableSelection() {\r\n    this.clusterTable.selection = null;\r\n    this.clusterTable.selectionChange.emit(null);\r\n    this.clusterTable.expandedRowKeys = {};\r\n    this.clusterTable.onRowCollapse.emit(null);\r\n  }\r\n\r\n  onNodeRowSelect(e) {\r\n    let node = e.data.id;\r\n    this.linkTableData = []\r\n    this.commonService.session.data.links.forEach(link => {\r\n      if (link.visible) {\r\n        if (node)\r\n        if (link.source == node) {\r\n          this.linkTableData.push({'id': link.target, 'distance': link.distance, 'index': link.index})\r\n        } else if (link.target == node) {\r\n          this.linkTableData.push({'id': link.source, 'distance': link.distance, 'index': link.index})\r\n        }\r\n      }\r\n    })\r\n\r\n    let nodeData = this.commonService.getVisibleNodes().find(n => n._id == node); \r\n    this.expandedNodeRowData = []\r\n    Object.keys(nodeData).filter(k => !(this.metaDataToSkip.includes(k) || k.charAt(0) == '_' || typeof nodeData[k] == 'object')).forEach(k => {\r\n      let prop = this.commonService.titleize(k)\r\n      this.expandedNodeRowData.push({'key': prop, 'value':nodeData[k]});\r\n    })\r\n\r\n    this.selectedLinkRow = null;\r\n    this.expandedLinkRowData = [];\r\n  }\r\n\r\n  onNodeRowUnselect() {\r\n    this.linkTableData = [];\r\n    this.selectedLinkRow = null;\r\n    this.expandedNodeRowData = [];\r\n    this.expandedLinkRowData = [];\r\n  }\r\n\r\n  onLinkRowSelect(e) {\r\n    let linkIndex = e.data.index;\r\n    let linkData = this.commonService.session.data.links.find(l => l.index == linkIndex)\r\n    this.expandedLinkRowData = [];\r\n    Object.keys(linkData).filter(k => !(this.metaDataToSkip.includes(k) || k.charAt(0) == '_' || typeof linkData[k] == 'object')).forEach(k => {\r\n      let prop = this.commonService.titleize(k)\r\n      this.expandedLinkRowData.push({'key': prop, 'value': linkData[k]});\r\n    })\r\n\r\n  }\r\n\r\n  onLinkRowUnselect() {\r\n    this.expandedLinkRowData = [];\r\n  }\r\n\r\n  updateNodeColors() {}\r\n  updateVisualization() {}\r\n  applyStyleFileSettings() {}\r\n  updateLinkColor() {}\r\n  openRefreshScreen() {}\r\n  openExport() {}\r\n  onFilterDataChange() {}\r\n  onRecallSession() {}\r\n  onLoadNewData() {}\r\n}\r\n\r\nexport namespace WaterfallComponent {\r\n  export const componentTypeName = 'Waterfall';\r\n}","import { OnInit, NgModule, Injectable } from '@angular/core';\r\nimport { InlineWorker } from '../helperClasses/inlineWorker';\r\nimport Papa from 'papaparse';\r\nimport * as bioseq from 'bioseq';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WorkerModule implements OnInit {\r\n\r\n  // This one is still a traditional worker.\r\n  public compute_parse_csv_matrixWorker: Worker;\r\n\r\n  constructor() {\r\n    this.compute_parse_csv_matrixWorker = new Worker('assets/parse-csv-matrix.js');\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  // Factory method for align worker\r\n  public getAlignWorker(): InlineWorker {\r\n    return new InlineWorker(() => {\r\n      const compute_align_sw = (e): any => {\r\n        let start = Date.now();\r\n        let subset = e.nodes;\r\n        let reference = e.reference;\r\n        let n = subset.length;\r\n        for (let i = 0; i < n; i++) {\r\n          let node = subset[i];\r\n          let rst = bioseq.align(reference, node.seq, false, e.match, e.gap);\r\n          let fmt = bioseq.cigar2gaps(reference, node.seq, rst.position, rst.CIGAR, true);\r\n          node._score = rst.score;\r\n          node._padding = rst.position;\r\n          node._cigar = rst.CIGAR;\r\n          node._seq = fmt[1];\r\n        }\r\n        console.log(\"Alignment time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n        start = Date.now();\r\n        let encoder = new TextEncoder();\r\n        let output = encoder.encode(JSON.stringify(subset)).buffer;\r\n        const response = { data: output, start: start };\r\n        postMessage(response, null, null);\r\n      };\r\n      onmessage = (evt) => {\r\n        compute_align_sw(evt.data);\r\n      };\r\n    });\r\n  }\r\n\r\n  // Factory method for consensus worker\r\n  public getConsensusWorker(): InlineWorker {\r\n    return new InlineWorker(() => {\r\n      const compute_consensus = (e): any => {\r\n        let start = Date.now();\r\n        let subset = (e.data !== undefined ? e.data : e);\r\n        let n = subset.length;\r\n        let output = [];\r\n        for (let i = 0; i < n; i++) {\r\n          let seq = subset[i].seq.toUpperCase();\r\n          for (let j = 0; j < seq.length; j++) {\r\n            if (!output[j]) output.push({ A: 0, C: 0, G: 0, T: 0, '-': 0 });\r\n            output[j][seq[j]]++;\r\n          }\r\n        }\r\n        let consensus: any = \"\";\r\n        let m = output.length;\r\n        let entry, maxKey, maxVal;\r\n        for (let k = 0; k < m; k++) {\r\n          entry = output[k];\r\n          maxKey = 'A';\r\n          maxVal = entry[maxKey];\r\n          Object.keys(entry).forEach(char => {\r\n            if (maxVal <= entry[char]) {\r\n              maxVal = entry[char];\r\n              maxKey = char;\r\n            }\r\n          });\r\n          consensus += maxKey;\r\n        }\r\n        console.log('Consensus Compute time: ', (Date.now() - start).toLocaleString(), 'ms');\r\n        start = Date.now();\r\n        let encoder = new TextEncoder();\r\n        consensus = encoder.encode(consensus).buffer;\r\n        let response = { consensus: consensus, start: start, data: consensus };\r\n        postMessage(response, null, null);\r\n      };\r\n      onmessage = (evt) => {\r\n        compute_consensus(evt.data);\r\n      };\r\n    });\r\n  }\r\n\r\n  // Factory method for ambiguity counts worker\r\n  public getAmbiguityCountsWorker(): InlineWorker {\r\n    return new InlineWorker(() => {\r\n      const compute_ambiguity_counts = (e): any => {\r\n        const start = Date.now();\r\n        const subset = (e.data !== undefined ? e.data : e);\r\n        const n = subset.length;\r\n        let output = new Float32Array(n);\r\n        for (let i = 0; i < n; i++) {\r\n          const sequence = subset[i][\"_seqInt\"];\r\n          const sequenceLength = sequence.length;\r\n          let count = 0;\r\n          for (let j = 0; j < sequenceLength; j++) {\r\n            count += (sequence[j] > 3 ? 1 : 0);\r\n          }\r\n          output[i] = count / sequenceLength;\r\n        }\r\n        console.log(\"Ambiguity Count time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n        let response = { counts: output.buffer, start: Date.now(), data: output.buffer };\r\n        postMessage(response, null, null);\r\n      };\r\n      onmessage = (evt) => {\r\n        compute_ambiguity_counts(evt.data);\r\n      };\r\n    });\r\n  }\r\n\r\n  // Factory method for links worker\r\n  public getLinksWorker(): InlineWorker {\r\n    return new InlineWorker(() => {\r\n      const compute_links = (e): any => {\r\n        const snps = (s1, s2) => {\r\n          let n = Math.min(s1.length, s2.length);\r\n          let sum = 0;\r\n          for (let i = 0; i < n; i++) {\r\n            let c1 = s1[i];\r\n            let c2 = s2[i];\r\n            sum += ((c1 !== c2) && (c1 !== 17) && (c2 !== 17) ? 1 : 0);\r\n          }\r\n          return sum;\r\n        };\r\n        let start = Date.now(), t = 0, output;\r\n        const subset = e.nodes,\r\n              n = subset.length,\r\n              threshold = parseFloat(e.threshold),\r\n              strategy = e.strategy.toUpperCase(),\r\n              metric = e.metric;\r\n        if (metric === 'snps') {\r\n          output = new Uint16Array((n * n - n) / 2);\r\n          for (let i = 0; i < n; i++) {\r\n            let source = subset[i];\r\n            for (let j = 0; j < i; j++) {\r\n              output[t++] = snps(source['_seqInt'], subset[j]['_seqInt']);\r\n            }\r\n          }\r\n        } else {\r\n          output = new Float32Array((n * n - n) / 2);\r\n          if (strategy !== \"HIVTRACE-G\") {\r\n            for (let i = 0; i < n; i++) {\r\n              let source = subset[i]['_seqInt'];\r\n              for (let j = 0; j < i; j++) {\r\n                // @ts-ignore\r\n                output[t++] = tn93.onInts(source, subset[j]['_seqInt'], strategy);\r\n              }\r\n            }\r\n          } else {\r\n            for (let i = 0; i < n; i++) {\r\n              let source = subset[i];\r\n              let sourceInThreshold = source['_ambiguity'] < threshold;\r\n              let sourceSeq = source['_seqInt'];\r\n              for (let j = 0; j < i; j++) {\r\n                let target = subset[j];\r\n                // @ts-ignore\r\n                output[t++] = tn93.onInts(sourceSeq, target['_seqInt'], (sourceInThreshold && target['_ambiguity'] < threshold ? \"RESOLVE\" : \"AVERAGE\"));\r\n              }\r\n            }\r\n          }\r\n        }\r\n        console.log('Links Compute time: ', (Date.now() - start).toLocaleString(), 'ms');\r\n        start = Date.now();\r\n        let response = { links: output.buffer, start, data: output.buffer };\r\n        postMessage(response, null, null);\r\n      };\r\n      onmessage = (evt) => {\r\n        compute_links(evt.data);\r\n      };\r\n    });\r\n  }\r\n\r\n  // Factory method for tree worker\r\n  public getTreeWorker(): InlineWorker {\r\n    return new InlineWorker((patristic, tn93) => {\r\n      const compute_tree = (e): any => {\r\n        let start = Date.now();\r\n        const matrix = e.matrix;\r\n        console.log('parsingggg');\r\n        let output;\r\n        try {\r\n          console.log('matrix', matrix);\r\n          console.log('labels', e.labels);\r\n          // @ts-ignore\r\n          const RNJ = parseMatrix(matrix, e.labels);\r\n          console.log('RNJ', RNJ);\r\n          console.log('Tree Compute time: ', (Date.now() - start).toLocaleString(), 'ms');\r\n          start = Date.now();\r\n          const encoder = new TextEncoder();\r\n          output = encoder.encode(JSON.stringify(RNJ.toObject())).buffer;\r\n        } catch {\r\n          console.log('unable to compute tree');\r\n          const encoder = new TextEncoder();\r\n          output = encoder.encode(JSON.stringify({})).buffer;\r\n        }\r\n        let response = { tree: output, start: start, data: output };\r\n        postMessage(response, null, null);\r\n      };\r\n      onmessage = (evt) => {\r\n        compute_tree(evt.data);\r\n      };\r\n    });\r\n  }\r\n\r\n  // Factory method for directionality worker\r\n  public getDirectionalityWorker(): InlineWorker {\r\n    return new InlineWorker(() => {\r\n      const compute_directionality = (e): any => {\r\n        const start = Date.now();\r\n        const links = e.links;\r\n        const n = links.length;\r\n        // @ts-ignore\r\n        const tree = parseJSON(e.tree);\r\n        let flips = new Uint8Array(n);\r\n        for (let i = 0; i < n; i++) {\r\n          const link = links[i];\r\n          const source = tree.getDescendant(link.source);\r\n          const target = tree.getDescendant(link.target);\r\n          // @ts-ignore\r\n          if (source instanceof Branch && target instanceof Branch) {\r\n            if (target.sources(source)) {\r\n              flips[i] = 1;\r\n            }\r\n          }\r\n        }\r\n        console.log('Directionality Inference time: ', (Date.now() - start).toLocaleString(), 'ms');\r\n        let response = { output: flips.buffer, start: Date.now(), data: flips.buffer };\r\n        postMessage(response, null, null);\r\n      };\r\n      onmessage = (evt) => {\r\n        compute_directionality(evt.data);\r\n      };\r\n    });\r\n  }\r\n\r\n  // Factory method for MST worker\r\n  public getMSTWorker(): InlineWorker {\r\n    return new InlineWorker(() => {\r\n      const compute_mst = (e): any => {\r\n        const start = Date.now();\r\n        const links = e.links;\r\n        const found = links.find(l => \r\n          (l.source === \"MZ712879\" && l.target === \"MZ745515\") ||\r\n          (l.source === \"MZ745515\" && l.target === \"MZ712879\")\r\n        );\r\n        console.log(\"Found link in links array?\", found);\r\n        \r\n        const dm = e.matrix;\r\n        const labels = Object.keys(dm);\r\n        const epsilon = Math.pow(10, e.epsilon);\r\n        const metric = e.metric;\r\n        const n = labels.length;\r\n        const m = links.length;\r\n        let output = new Uint8Array(m);\r\n        let matrix = [];\r\n        let map: string[] = [];\r\n        for (let i = 0; i < n; i++) {\r\n          let minDist = Number.MAX_VALUE;\r\n          let targets = [];\r\n          const nodeid = labels[i];\r\n          const row = dm[nodeid];\r\n          for (let j = 0; j < n; j++) {\r\n            let cell = row[labels[j]];\r\n            if (!cell) {\r\n              targets.push(0);\r\n              continue;\r\n            }\r\n            let value = cell[metric];\r\n            targets.push(value);           \r\n          }\r\n          matrix.push(targets);\r\n          map.push(nodeid);\r\n        }\r\n\r\n        const minKey = (key, mstSet, V) => {\r\n          let min = Number.MAX_VALUE;\r\n          let min_index = -1;\r\n          for (let v = 0; v < V; v++) {\r\n            if (!mstSet[v] && key[v] < min) {\r\n              min = key[v];\r\n              min_index = v;\r\n            }\r\n          }\r\n          return min_index;\r\n        };\r\n        const primMST = (graph) => {\r\n          const V = graph.length;\r\n          let parent = [];\r\n          let key = [];\r\n          let mstSet = [];\r\n          for (let i = 0; i < V; i++) {\r\n            key[i] = Number.MAX_VALUE;\r\n            mstSet[i] = false;\r\n          }\r\n          key[0] = 0.0;\r\n          parent[0] = -1;\r\n          for (let count = 0; count < V - 1; count++) {\r\n            let u = minKey(key, mstSet, V);\r\n            if (u < 0) continue;\r\n            mstSet[u] = true;\r\n            if (graph[u].reduce((a, b) => a + b, 0) === 0 && u !== 0) continue;\r\n            for (let v = 0; v < V; v++) {\r\n              if (graph[u][v] >= 0 && !mstSet[v] && graph[u][v] < key[v]) {\r\n                parent[v] = u;\r\n                key[v] = graph[u][v];\r\n              }\r\n            }\r\n          }\r\n          return parent;\r\n        };\r\n        const nearest_neighbour_graph = (graph, mst_parents, epsilon) => {\r\n          const V = graph.length;\r\n          let mst = [];\r\n          for (let i = 0; i < V; ++i) {\r\n            mst.push([]);\r\n          }\r\n          for (let i = 1; i < V; ++i) {\r\n            mst[i].push(mst_parents[i]);\r\n            mst[mst_parents[i]].push(i);\r\n          }\r\n          let nng = [];\r\n          let longest_edge = [];\r\n          for (let i = 0; i < V; ++i) {\r\n            nng.push([]);\r\n            longest_edge.push([]);\r\n            for (let j = 0; j < V; ++j) {\r\n              longest_edge[i][j] = 0;\r\n            }\r\n          }\r\n          for (let i = 0; i < V; ++i) {\r\n            bfs_update_matrix(mst, matrix, i, longest_edge);\r\n          }\r\n          for (let i = 0; i < V; ++i) {\r\n            for (let j = 0; j < V; ++j) {\r\n              if (graph[i][j] > 0 && graph[i][j] <= (longest_edge[i][j] * (1.0 + epsilon))) {\r\n                nng[i].push(j);\r\n                nng[j].push(i);\r\n              }\r\n            }\r\n          }\r\n          return nng;\r\n        };\r\n        const bfs_update_matrix = (mst, weights, root, longest_edge) => {\r\n          let visited = [];\r\n          let queue = [];\r\n          queue.push(root);\r\n          while (queue.length) {\r\n            let v = queue.shift();\r\n            visited[v] = true;\r\n            mst[v].forEach((u) => {\r\n              if (visited[u]) return;\r\n              queue.push(u);\r\n              const value = Math.max(weights[v][u], Math.max(longest_edge[root][u], longest_edge[root][v]));\r\n               // LOG if root=19 or 9, or if (v,u) = (19,0)/(0,9)/(9,0)/(0,19)\r\n              if (root === 19 || root === 9 || v === 19 || v === 9 || u === 19 || u === 9) {\r\n                console.log(\r\n                  `BFS root=${root}, v=${v}, u=${u}`,\r\n                  'weights[v][u]=', weights[v][u],\r\n                  'longest_edge[root][v]=', longest_edge[root][v],\r\n                  'longest_edge[root][u]=', longest_edge[root][u],\r\n                  '=> new value=', value\r\n                );\r\n              }\r\n              longest_edge[root][u] = value;\r\n              longest_edge[u][root] = value;\r\n            });\r\n          }\r\n        };\r\n\r\n          // Right before or after building `map` in compute_mst:\r\n          console.log('Index of MZ712879:', map.indexOf('MZ712879'));\r\n          console.log('Index of MZ745515:', map.indexOf('MZ745515'));\r\n          // Right after building 'matrix'\r\n          const idxA = map.indexOf('MZ712879');\r\n          const idxB = map.indexOf('MZ745515');\r\n          if (idxA >= 0 && idxB >= 0) {\r\n            console.log(\r\n              'Distance from MZ712879 -> MZ745515:',\r\n              matrix[idxA][idxB],\r\n              'Distance from MZ745515 -> MZ712879:',\r\n              matrix[idxB][idxA]\r\n            );\r\n          }\r\n     \r\n        const mst = primMST(matrix);\r\n        \r\n        const nng = nearest_neighbour_graph(matrix, mst, epsilon);\r\n\r\n        \r\n        // After `const mst = primMST(matrix);`\r\n        console.log('Parent array from MST:', mst);\r\n\r\n        // Then specifically:\r\n        console.log(\r\n          'Parent of MZ712879 (idxA):', mst[idxA],\r\n          'Parent of MZ745515 (idxB):', mst[idxB]\r\n        );\r\n\r\n       \r\n        for (let i = 0; i < n; i++) {\r\n          const source = map[i];\r\n          nng[i].push(mst[i]);\r\n          Array.from(new Set(nng[i])).forEach((u) => {\r\n            const target = map[parseInt(u as string)];\r\n            for (let k = 0; k < m; k++) {\r\n              let l = links[k];\r\n              \r\n              if ((l.source === source && l.target === target) || (l.source === target && l.target === source)) {\r\n                output[k] = 1;\r\n              }\r\n            }\r\n          });\r\n          if (source === \"MZ712879\" || source === \"MZ745515\") {\r\n            console.log(\"nng[i] for\", source, nng[i]);\r\n            console.log(\"MST parent for\", source, mst[i]);\r\n          }\r\n        }\r\n        console.log('MST Compute time: ', (Date.now() - start).toLocaleString(), 'ms');\r\n        let response = { links: output.buffer, start: Date.now(), data: output.buffer };\r\n        postMessage(response);\r\n      };\r\n      onmessage = (evt) => {\r\n        compute_mst(evt.data);\r\n      };\r\n    });\r\n  }\r\n\r\n  // Factory method for NN worker\r\n  public getNNWorker(): InlineWorker {\r\n    return new InlineWorker(() => {\r\n      const compute_nn = (e): any => {\r\n        const includes = (container: any, value: any) => {\r\n          return container.indexOf(value) >= 0;\r\n        };\r\n        const start = Date.now();\r\n        const links = e.links, dm = e.matrix, labels = Object.keys(dm),\r\n              epsilon = Math.pow(10, e.epsilon), metric = e.metric;\r\n        const n = labels.length, m = links.length;\r\n        let output = new Uint8Array(m);\r\n        for (let i = 0; i < n; i++) {\r\n          let minDist = Number.MAX_VALUE;\r\n          let targets = [];\r\n          const nodeid = labels[i];\r\n          const row = dm[nodeid];\r\n          for (let j = 0; j < i; j++) {\r\n            let cell = row[labels[j]];\r\n            if (!cell) continue;\r\n            let value = cell[metric];\r\n            if (typeof value !== 'number' || isNaN(value)) continue;\r\n            if (value < minDist) minDist = value;\r\n          }\r\n          for (let h = 0; h < i; h++) {\r\n            let node = labels[h];\r\n            let cell = row[node];\r\n            if (!cell) continue;\r\n            let value = cell[metric];\r\n            if (typeof value !== 'number' || isNaN(value)) continue;\r\n            if (Math.abs(value - minDist) < epsilon) {\r\n              targets.push(node);\r\n            }\r\n          }\r\n          for (let k = 0; k < m; k++) {\r\n            let l = links[k];\r\n            if ((l.source === nodeid && includes(targets, l.target)) ||\r\n                (l.target === nodeid && includes(targets, l.source))) {\r\n              output[k] = 1;\r\n            }\r\n          }\r\n        }\r\n        console.log('NN Compute time: ', (Date.now() - start).toLocaleString(), 'ms');\r\n        let response = { links: output.buffer, start: Date.now(), data: output.buffer };\r\n        postMessage(response, null, null);\r\n      };\r\n      onmessage = (evt) => {\r\n        compute_nn(evt.data);\r\n      };\r\n    });\r\n  }\r\n\r\n  // Factory method for triangulation worker\r\n  public getTriangulationWorker(): InlineWorker {\r\n    return new InlineWorker(() => {\r\n      const compute_triangulation = (e): any => {\r\n        let start = Date.now();\r\n        let m = e.matrix;\r\n        let n = m.length;\r\n        for (let i = 0; i < n; i++) {\r\n          for (let j = 0; j < i; j++) {\r\n            let missingCell = m[i][j];\r\n            if (typeof missingCell === 'number') continue;\r\n            let minRange = Infinity, min = Infinity;\r\n            for (let k = 0; k < i; k++) {\r\n              let companionA = m[i][k];\r\n              if (typeof companionA !== 'number') continue;\r\n              for (let l = j + 1; l < n; l++) {\r\n                let companionB = m[l][j];\r\n                if (typeof companionB !== 'number') continue;\r\n                let diff = Math.abs(companionA - companionB);\r\n                if (minRange > diff) {\r\n                  minRange = diff;\r\n                  min = Math.min(companionA, companionB);\r\n                }\r\n              }\r\n            }\r\n            if (minRange < Infinity) {\r\n              let newVal = min + minRange / 2;\r\n              m[i][j] = newVal;\r\n              m[j][i] = newVal;\r\n            }\r\n          }\r\n        }\r\n        console.log('Triangulation Compute time: ', (Date.now() - start).toLocaleString(), 'ms');\r\n        start = Date.now();\r\n        let encoder = new TextEncoder();\r\n        let output = encoder.encode(JSON.stringify(m)).buffer;\r\n        let response = { matrix: output, start: start, data: output };\r\n        postMessage(response, null, null);\r\n      };\r\n      onmessage = (evt) => {\r\n        compute_triangulation(evt.data);\r\n      };\r\n    });\r\n  }\r\n\r\n  // Factory method for parse FASTA worker\r\n  // Factory method for parse FASTA worker\r\npublic getParseFastaWorker(): InlineWorker {\r\n  return new InlineWorker(() => {\r\n    const compute_parse_fasta = (e): any => {\r\n      let start = Date.now();\r\n      // Check if e.data is an object with a \"data\" property; otherwise, use e.data directly.\r\n      let text = (typeof e.data === 'object' && e.data.data) ? e.data.data : e.data;\r\n      if (!text || text.length === 0) return [];\r\n      \r\n      let seqs: any = [];\r\n      let currentSeq: any = {};\r\n      let lines = text.split(/[\\r\\n]+/g);\r\n      let n = lines.length;\r\n      let isblank = /^\\s*$/;\r\n      for (let i = 0; i < n; i++) {\r\n        let line = lines[i];\r\n        if (isblank.test(line) || line[0] === ';') continue;\r\n        if (line[0] === '>') {\r\n          if (i > 0) seqs.push(currentSeq);\r\n          currentSeq = { id: line.slice(1), seq: '' };\r\n        } else {\r\n          currentSeq.seq += line.toUpperCase();\r\n        }\r\n      }\r\n      seqs.push(currentSeq);\r\n      console.log('FASTA Parse time: ', (Date.now() - start).toLocaleString(), 'ms');\r\n      start = Date.now();\r\n      let encoder = new TextEncoder();\r\n      let output = encoder.encode(JSON.stringify(seqs)).buffer;\r\n      let response = { nodes: output, start: start, data: output };\r\n      postMessage(response, null, null);\r\n    };\r\n\r\n    onmessage = (evt) => {\r\n      compute_parse_fasta(evt);\r\n    };\r\n  });\r\n}\r\n\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MenuAsideDirective } from './directives/menu-aside.directive';\r\nimport { MenuAsideOffcanvasDirective } from './directives/menu-aside-offcanvas.directive';\r\nimport { MenuHorizontalOffcanvasDirective } from './directives/menu-horizontal-offcanvas.directive';\r\nimport { MenuHorizontalDirective } from './directives/menu-horizontal.directive';\r\n\r\nimport { MenuAsideToggleDirective } from './directives/menu-aside-toggle.directive';\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    declarations: [\r\n        // directives\r\n        MenuAsideDirective,\r\n        MenuAsideOffcanvasDirective,\r\n        MenuHorizontalOffcanvasDirective,\r\n        MenuHorizontalDirective,\r\n        MenuAsideToggleDirective\r\n    ],\r\n    exports: [\r\n        // directives\r\n        MenuAsideDirective,\r\n        MenuAsideOffcanvasDirective,\r\n        MenuHorizontalOffcanvasDirective,\r\n        MenuHorizontalDirective,\r\n        MenuAsideToggleDirective\r\n    ],\r\n    providers: []\r\n})\r\nexport class CoreModule { }\r\n","import { Directive, AfterViewInit, ElementRef } from '@angular/core';\r\nimport { filter } from 'rxjs/operators';\r\nimport { NavigationEnd, Router } from '@angular/router';\r\n\r\n@Directive({\r\n    selector: '[mMenuAsideOffcanvas]'\r\n})\r\nexport class MenuAsideOffcanvasDirective implements AfterViewInit {\r\n    menuOffcanvas: any;\r\n\r\n    constructor(\r\n        private el: ElementRef,\r\n        private router: Router\r\n    ) {\r\n\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        const offcanvasClass = mUtil.hasClass(this.el.nativeElement, 'm-aside-left--offcanvas-default') ? 'm-aside-left--offcanvas-default' : 'm-aside-left';\r\n\r\n        this.menuOffcanvas = new mOffcanvas(this.el.nativeElement, {\r\n            baseClass: offcanvasClass,\r\n            overlay: true,\r\n            closeBy: 'm_aside_left_close_btn',\r\n            toggleBy: [{\r\n                target: 'm_aside_left_offcanvas_toggle',\r\n                state: 'm-brand__toggler--active'\r\n            },\r\n            {\r\n                target: 'm_aside_left_offcanvas_mobile_toggle',\r\n                state: 'm-brand__toggler--active'\r\n            }]\r\n        });\r\n\r\n        this.router.events\r\n            .pipe(filter(event => event instanceof NavigationEnd))\r\n            .subscribe(event => {\r\n                if (mUtil.isMobileDevice()) {\r\n                    this.menuOffcanvas.hide();\r\n                }\r\n            });\r\n    }\r\n}\r\n","import { Directive, ElementRef, AfterViewInit } from '@angular/core';\r\n\r\n@Directive({\r\n    selector: '[mMenuAsideToggle]'\r\n})\r\nexport class MenuAsideToggleDirective implements AfterViewInit {\r\n    toggle: any;\r\n    constructor(private el: ElementRef) { }\r\n\r\n    ngAfterViewInit(): void {\r\n        this.toggle = new mToggle(this.el.nativeElement, {\r\n            target: 'body',\r\n            targetState: 'm-brand--minimize m-aside-left--minimize',\r\n            togglerState: 'm-brand__toggler--active'\r\n        });\r\n    }\r\n}\r\n","import { Directive, ElementRef } from '@angular/core';\r\nimport { LayoutConfigService } from '../services/layout-config.service';\r\nimport * as objectPath from 'object-path';\r\nimport { LayoutRefService } from '../services/layout/layout-ref.service';\r\nimport { mergeMap } from 'rxjs/operators';\r\n\r\n@Directive({\r\n    selector: '[mMenuAside]'\r\n})\r\nexport class MenuAsideDirective {\r\n    menu: any;\r\n    layout: any;\r\n\r\n    constructor(\r\n        private el: ElementRef,\r\n        private layoutConfigService: LayoutConfigService,\r\n        private layoutRefService: LayoutRefService\r\n    ) {\r\n        this.layoutConfigService.onLayoutConfigUpdated$\r\n            .pipe(\r\n                mergeMap(() => {\r\n                    return this.layoutRefService.layoutRefs$;\r\n                })\r\n            )\r\n            .subscribe(layout => {\r\n                this.layout = layout;\r\n                this.initMenu();\r\n            });\r\n    }\r\n\r\n    initMenu(): any {\r\n        if (!this.layout.hasOwnProperty('header')) {\r\n            return;\r\n        }\r\n\r\n        let scroll;\r\n        if (mUtil.attr(this.el.nativeElement, 'm-menu-scrollable') === '1') {\r\n            const headerHeight = parseInt(window.getComputedStyle(objectPath.get(this.layout, 'header'))['height'], null);\r\n            scroll = {\r\n                height() {\r\n                    return mUtil.getViewPort().height - headerHeight;\r\n                }\r\n            };\r\n        }\r\n\r\n        const options = {\r\n            // vertical scroll\r\n            scroll: scroll,\r\n            // submenu setup\r\n            submenu: {\r\n                desktop: {\r\n                    // by default the menu mode set to accordion in desktop mode\r\n                    default: 'accordion',\r\n                    // whenever body has this class switch the menu mode to dropdown\r\n                    state: {\r\n                        body: 'm-aside-left--minimize',\r\n                        mode: 'dropdown'\r\n                    }\r\n                },\r\n                tablet: 'accordion', // menu set to accordion in tablet mode\r\n                mobile: 'accordion' // menu set to accordion in mobile mode\r\n            },\r\n            // accordion setup\r\n            accordion: {\r\n                autoScroll: false,\r\n                expandAll: false\r\n            }\r\n        };\r\n\r\n        // init the mMenu plugin\r\n        if (this.menu instanceof mMenu) {\r\n            this.menu.update(options);\r\n        } else {\r\n            this.menu = new mMenu(this.el.nativeElement, options);\r\n        }\r\n    }\r\n}\r\n","import { Directive, AfterViewInit, ElementRef } from '@angular/core';\r\nimport { filter } from 'rxjs/operators';\r\nimport { NavigationEnd, Router } from '@angular/router';\r\n\r\n@Directive({\r\n    selector: '[mMenuHorizontalOffcanvas]'\r\n})\r\nexport class MenuHorizontalOffcanvasDirective implements AfterViewInit {\r\n    menuOffcanvas: any;\r\n\r\n    constructor(private el: ElementRef,\r\n        private router: Router) { }\r\n\r\n    ngAfterViewInit(): void {\r\n        // init the mOffcanvas plugin\r\n        this.menuOffcanvas = new mOffcanvas(this.el.nativeElement, {\r\n            overlay: true,\r\n            baseClass: 'm-aside-header-menu-mobile',\r\n            closeBy: 'm_aside_header_menu_mobile_close_btn',\r\n            toggleBy: {\r\n                target: 'm_aside_header_menu_mobile_toggle',\r\n                state: 'm-brand__toggler--active'\r\n            }\r\n        });\r\n\r\n        this.router.events\r\n            .pipe(filter(event => event instanceof NavigationEnd))\r\n            .subscribe(event => {\r\n                if (mUtil.isMobileDevice()) {\r\n                    this.menuOffcanvas.hide();\r\n                }\r\n            });\r\n    }\r\n}\r\n","import { Directive, AfterViewInit, ElementRef } from '@angular/core';\r\n\r\n@Directive({\r\n    selector: '[mMenuHorizontal]'\r\n})\r\nexport class MenuHorizontalDirective implements AfterViewInit {\r\n    menu: any;\r\n\r\n    constructor(private el: ElementRef) {\r\n\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        // init the mMenu plugin\r\n        this.menu = new mMenu(this.el.nativeElement, {\r\n            submenu: {\r\n                desktop: 'dropdown',\r\n                tablet: 'accordion',\r\n                mobile: 'accordion'\r\n            },\r\n            accordion: {\r\n                slideSpeed: 200, // accordion toggle slide speed in milliseconds\r\n                autoScroll: true, // enable auto scrolling(focus) to the clicked menu item\r\n                expandAll: false // allow having multiple expanded accordions in the menu\r\n            }\r\n        });\r\n    }\r\n}\r\n","import { BehaviorSubject } from 'rxjs';\r\nimport { Injectable } from '@angular/core';\r\nimport { tap, filter, mergeMap } from 'rxjs/operators';\r\nimport { Router, NavigationEnd } from '@angular/router';\r\nimport { UtilsService } from './utils.service';\r\n\r\n@Injectable()\r\nexport class LayoutConfigService {\r\n\r\n    public onLayoutConfigUpdated$: BehaviorSubject<any>;\r\n\r\n    constructor(\r\n        private router: Router,\r\n        private utils: UtilsService\r\n    ) {\r\n        // register on config changed event and set default config\r\n        this.onLayoutConfigUpdated$ = new BehaviorSubject(null);\r\n\r\n        this.router.events\r\n            .pipe(\r\n                filter(event => event instanceof NavigationEnd)\r\n            )\r\n            .subscribe(() => {\r\n                this.onLayoutConfigUpdated$.next(null);\r\n            });\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class LayoutRefService {\r\n    layoutRefs$: BehaviorSubject<any> = new BehaviorSubject<any>({});\r\n    layoutRefs: any = {};\r\n\r\n    addElement(name, element) {\r\n        const obj = {};\r\n        obj[name] = element;\r\n        this.layoutRefs$.next(Object.assign(this.layoutRefs, obj));\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpParams, HttpHeaders } from '@angular/common/http';\r\n\r\n@Injectable()\r\nexport class UtilsService {\r\n    constructor() { }\r\n\r\n    /**\r\n\t * Build url parameters key and value pairs from array or object\r\n\t * @param obj\r\n\t */\r\n    urlParam(obj: any): string {\r\n        return Object.keys(obj)\r\n            .map(k => k + '=' + encodeURIComponent(obj[k]))\r\n            .join('&');\r\n    }\r\n\r\n    /**\r\n\t * Simple object check.\r\n\t * @param item\r\n\t * @returns {boolean}\r\n\t */\r\n    isObject(item) {\r\n        return item && typeof item === 'object' && !Array.isArray(item);\r\n    }\r\n\r\n    /**\r\n\t * Deep merge two objects.\r\n\t * @param target\r\n\t * @param ...sources\r\n\t * @see https://stackoverflow.com/a/34749873/1316921\r\n\t */\r\n    mergeDeep(target, ...sources) {\r\n        if (!sources.length) {\r\n            return target;\r\n        }\r\n        const source = sources.shift();\r\n\r\n        if (this.isObject(target) && this.isObject(source)) {\r\n            for (const key in source) {\r\n                if (this.isObject(source[key])) {\r\n                    if (!target[key]) {\r\n                        Object.assign(target, { [key]: {} });\r\n                    }\r\n                    this.mergeDeep(target[key], source[key]);\r\n                } else {\r\n                    Object.assign(target, { [key]: source[key] });\r\n                }\r\n            }\r\n        }\r\n\r\n        return this.mergeDeep(target, ...sources);\r\n    }\r\n\r\n    getPath(obj, val, path?) {\r\n        path = path || '';\r\n        let fullpath = '';\r\n        for (const b in obj) {\r\n            if (obj[b] === val) {\r\n                return path + '/' + b;\r\n            } else if (typeof obj[b] === 'object') {\r\n                fullpath =\r\n                    this.getPath(obj[b], val, path + '/' + b) || fullpath;\r\n            }\r\n        }\r\n        return fullpath;\r\n    }\r\n\r\n    getFindHTTPParams(queryParams): HttpParams {\r\n        const params = new HttpParams()\r\n            .set('lastNamefilter', queryParams.filter)\r\n            .set('sortOrder', queryParams.sortOrder)\r\n            .set('sortField', queryParams.sortField)\r\n            .set('pageNumber', queryParams.pageNumber.toString())\r\n            .set('pageSize', queryParams.pageSize.toString());\r\n\r\n        return params;\r\n    }\r\n\r\n    getHTTPHeader() {\r\n        return {\r\n            headers: new HttpHeaders({ 'Content-Type': 'application/json' })\r\n        };\r\n    }\r\n}\r\n\r\n\r\nexport function isInteger(value: any): value is number {\r\n    return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\r\n}\r\n\r\n\r\nexport function isString(value: any): value is string {\r\n    return typeof value === 'string';\r\n}\r\n","export const environment = {\r\n  production: true\r\n};\r\n","export const version = '2.0.0';\nexport const buildDate = '2026-01-13T15:49:22.198Z';\nexport const commitHash = '1c6a15e6';","import 'hammerjs';\r\nimport { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n","export class AppConsts {\r\n\r\n    static readonly tenancyNamePlaceHolderInUrl = '{TENANCY_NAME}';\r\n\r\n    static remoteServiceBaseUrl: string;\r\n    static remoteServiceBaseUrlFormat: string;\r\n    static appBaseUrl: string;\r\n    static appBaseHref: string; // returns angular's base-href parameter value if used during the publish\r\n    static appBaseUrlFormat: string;\r\n    static recaptchaSiteKey: string;\r\n    static subscriptionExpireNootifyDayCount: number;\r\n\r\n    static localeMappings: any = [];\r\n\r\n    static readonly userManagement = {\r\n        defaultAdminUserName: 'admin'\r\n    };\r\n\r\n    static readonly localization = {\r\n        defaultLocalizationSourceName: 'BPAASDashboard'\r\n    };\r\n\r\n    static readonly authorization = {\r\n        encrptedAuthTokenName: 'enc_auth_token'\r\n    };\r\n\r\n    static readonly grid = {\r\n        defaultPageSize: 10\r\n    };\r\n}\r\n","// import { PermissionCheckerService } from '@abp/auth/permission-checker.service';\r\n// import { FeatureCheckerService } from '@abp/features/feature-checker.service';\r\n// import { LocalizationService } from '@abp/localization/localization.service';\r\n// import { MessageService } from '@abp/message/message.service';\r\n// import { AbpMultiTenancyService } from '@abp/multi-tenancy/abp-multi-tenancy.service';\r\n// import { NotifyService } from '@abp/notify/notify.service';\r\n// import { SettingService } from '@abp/settings/setting.service';\r\nimport { Injector } from '@angular/core';\r\nimport { AppConsts } from '@shared/app.constants';\r\nimport { AppUrlService } from '@shared/common/nav/app-url.service';\r\nimport { AppSessionService } from '@shared/common/session/app-session.service';\r\nimport { AppUiCustomizationService } from '@shared/common/ui/app-ui-customization.service';\r\nimport { PrimengTableHelper } from '@shared/helpers/PrimengTableHelper';\r\n// import { UiCustomizationSettingsDto } from '@shared/service-proxies/service-proxies';\r\n\r\nexport abstract class AppComponentBase {\r\n\r\n    localizationSourceName = AppConsts.localization.defaultLocalizationSourceName;\r\n\r\n    // localization: LocalizationService;\r\n    // permission: PermissionCheckerService;\r\n    // feature: FeatureCheckerService;\r\n    // notify: NotifyService;\r\n    // setting: SettingService;\r\n    // message: MessageService;\r\n    // multiTenancy: AbpMultiTenancyService;\r\n    localization: any;\r\n    permission: any;\r\n    feature: any;\r\n    notify: any;\r\n    setting: any;\r\n    message: any;\r\n    multiTenancy: any;\r\n    appSession: AppSessionService;\r\n    primengTableHelper: PrimengTableHelper;\r\n    ui: AppUiCustomizationService;\r\n    appUrlService: AppUrlService;\r\n\r\n    constructor(injector: Injector\r\n        ) {\r\n        // this.localization = injector.get(LocalizationService);\r\n        // this.permission = injector.get(PermissionCheckerService);\r\n        // this.feature = injector.get(FeatureCheckerService);\r\n        // this.notify = injector.get(NotifyService);\r\n        // this.setting = injector.get(SettingService);\r\n        // this.message = injector.get(MessageService);\r\n        // this.multiTenancy = injector.get(AbpMultiTenancyService);\r\n        this.appSession = injector.get(AppSessionService);\r\n        this.ui = injector.get(AppUiCustomizationService);\r\n        this.appUrlService = injector.get(AppUrlService);\r\n        this.primengTableHelper = new PrimengTableHelper();\r\n    }\r\n\r\n    flattenDeep(array) {\r\n        return array.reduce((acc, val) =>\r\n            Array.isArray(val) ?\r\n            acc.concat(this.flattenDeep(val)) :\r\n            acc.concat(val),\r\n            []);\r\n    }\r\n\r\n    l(key: string, ...args: any[]): string {\r\n        args.unshift(key);\r\n        args.unshift(this.localizationSourceName);\r\n        return this.ls.apply(this, args);\r\n    }\r\n\r\n    ls(sourcename: string, key: string, ...args: any[]): string {\r\n        let localizedText = this.localization.localize(key, sourcename);\r\n\r\n        if (!localizedText) {\r\n            localizedText = key;\r\n        }\r\n\r\n        if (!args || !args.length) {\r\n            return localizedText;\r\n        }\r\n\r\n        args.unshift(localizedText);\r\n        return localizedText;\r\n        // return abp.utils.formatString.apply(this, this.flattenDeep(args));\r\n    }\r\n\r\n    isGranted(permissionName: string): boolean {\r\n        return this.permission.isGranted(permissionName);\r\n    }\r\n\r\n    isGrantedAny(...permissions: string[]): boolean {\r\n        if (!permissions) {\r\n            return false;\r\n        }\r\n\r\n        for (const permission of permissions) {\r\n            if (this.isGranted(permission)) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    s(key: string): string {\r\n        return key;\r\n        // return abp.setting.get(key);\r\n    }\r\n\r\n    appRootUrl(): string {\r\n        return this.appUrlService.appRootUrl;\r\n    }\r\n\r\n    // get currentTheme(): UiCustomizationSettingsDto {\r\n    //     // return this.appSession.theme;\r\n    // }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AppConsts } from '@shared/app.constants';\r\nimport { AppSessionService } from '@shared/common/session/app-session.service';\r\n\r\n@Injectable()\r\nexport class AppUrlService {\r\n\r\n    static tenancyNamePlaceHolder = '{TENANCY_NAME}';\r\n\r\n    constructor(\r\n        private readonly _appSessionService: AppSessionService\r\n    ) {\r\n\r\n    }\r\n\r\n    get appRootUrl(): string {\r\n        // if (this._appSessionService.tenant) {\r\n        //     return this.getAppRootUrlOfTenant(this._appSessionService.tenant.tenancyName);\r\n        // } else {\r\n        //     return this.getAppRootUrlOfTenant(null);\r\n        // }\r\n        return \"\";\r\n    }\r\n\r\n    /**\r\n     * Returning url ends with '/'.\r\n     */\r\n    getAppRootUrlOfTenant(tenancyName?: string): string {\r\n        if(!tenancyName) return undefined;\r\n        \r\n        let baseUrl = this.ensureEndsWith(AppConsts.appBaseUrlFormat, '/');\r\n\r\n        //Add base href if it is not configured in appconfig.json\r\n        if (baseUrl.indexOf(AppConsts.appBaseHref) < 0) {\r\n            baseUrl = baseUrl + this.removeFromStart(AppConsts.appBaseHref, '/');\r\n        }\r\n\r\n        if (baseUrl.indexOf(AppUrlService.tenancyNamePlaceHolder) < 0) {\r\n            return baseUrl;\r\n        }\r\n\r\n        if (baseUrl.indexOf(AppUrlService.tenancyNamePlaceHolder + '.') >= 0) {\r\n            baseUrl = baseUrl.replace(AppUrlService.tenancyNamePlaceHolder + '.', AppUrlService.tenancyNamePlaceHolder);\r\n            if (tenancyName) {\r\n                tenancyName = tenancyName + '.';\r\n            }\r\n        }\r\n\r\n        if (!tenancyName) {\r\n            return baseUrl.replace(AppUrlService.tenancyNamePlaceHolder, '');\r\n        }\r\n\r\n        return baseUrl.replace(AppUrlService.tenancyNamePlaceHolder, tenancyName);\r\n    }\r\n\r\n    private ensureEndsWith(str: string, c: string) {\r\n        if (str && str.charAt(str.length - 1) !== c) {\r\n            str = str + c;\r\n        }\r\n\r\n        return str;\r\n    }\r\n\r\n    private removeFromEnd(str: string, c: string) {\r\n        if (str && str.charAt(str.length - 1) === c) {\r\n            str = str.substr(0, str.length - 1);\r\n        }\r\n\r\n        return str;\r\n    }\r\n\r\n    private removeFromStart(str: string, c: string) {\r\n        if (str && str.charAt(0) === c) {\r\n            str = str.substr(1, str.length - 1);\r\n        }\r\n\r\n        return str;\r\n    }\r\n}\r\n","import { Injector, Pipe, PipeTransform } from '@angular/core';\r\nimport { AppConsts } from '@shared/app.constants';\r\n// import { LocalizationService } from '@abp/localization/localization.service';\r\n\r\n@Pipe({\r\n    name: 'localize'\r\n})\r\nexport class LocalizePipe implements PipeTransform {\r\n\r\n    localizationSourceName = AppConsts.localization.defaultLocalizationSourceName;\r\n\r\n    // localization: LocalizationService;\r\n\r\n    constructor(injector: Injector) {\r\n        // this.localization = injector.get(LocalizationService);\r\n    }\r\n\r\n    l(key: string, ...args: any[]): string {\r\n        args.unshift(key);\r\n        args.unshift(this.localizationSourceName);\r\n        return this.ls.apply(this, args);\r\n    }\r\n\r\n    ls(sourcename: string, key: string, ...args: any[]): string {\r\n        return key;\r\n\r\n        // let localizedText = this.localization.localize(key, sourcename);\r\n\r\n        // if (!localizedText) {\r\n        //     localizedText = key;\r\n        // }\r\n\r\n        // if (!args || !args.length) {\r\n        //     return localizedText;\r\n        // }\r\n\r\n        // args.unshift(localizedText);\r\n        // return this.localizedText;\r\n        // return abp.utils.formatString.apply(this, this.flattenDeep(args));\r\n    }\r\n\r\n    transform(key: string, ...args: any[]): string {\r\n        return this.l(key, args);\r\n    }\r\n\r\n    flattenDeep(array) {\r\n        return array.reduce((acc, val) =>\r\n            Array.isArray(val) ?\r\n                acc.concat(this.flattenDeep(val)) :\r\n                acc.concat(val),\r\n            []);\r\n    }\r\n}\r\n","// import { AbpMultiTenancyService } from '@abp/multi-tenancy/abp-multi-tenancy.service';\r\nimport { Injectable } from '@angular/core';\r\n// import { ApplicationInfoDto, GetCurrentLoginInformationsOutput, SessionServiceProxy, TenantLoginInfoDto, UserLoginInfoDto, UiCustomizationSettingsDto } from '@shared/service-proxies/service-proxies';\r\n\r\n@Injectable()\r\nexport class AppSessionService {\r\n\r\n    // private _user: UserLoginInfoDto;\r\n    // private _tenant: TenantLoginInfoDto;\r\n    // private _application: ApplicationInfoDto;\r\n    // private _theme: UiCustomizationSettingsDto;\r\n\r\n    // constructor(\r\n    //     private _sessionService: SessionServiceProxy,\r\n    //     private _abpMultiTenancyService: AbpMultiTenancyService) {\r\n    // }\r\n\r\n    // get application(): ApplicationInfoDto {\r\n    //     return this._application;\r\n    // }\r\n\r\n    // set application(val: ApplicationInfoDto) {\r\n    //     this._application = val;\r\n    // }\r\n\r\n    // get user(): UserLoginInfoDto {\r\n    //     return this._user;\r\n    // }\r\n\r\n    // get userId(): number {\r\n    //     return this.user ? this.user.id : null;\r\n    // }\r\n\r\n    // get tenant(): TenantLoginInfoDto {\r\n    //     return this._tenant;\r\n    // }\r\n\r\n    // get tenancyName(): string {\r\n    //     return this._tenant ? this.tenant.tenancyName : '';\r\n    // }\r\n\r\n    // get tenantId(): number {\r\n    //     return this.tenant ? this.tenant.id : null;\r\n    // }\r\n\r\n    // getShownLoginName(): string {\r\n    //     const userName = this._user.userName;\r\n    //     if (!this._abpMultiTenancyService.isEnabled) {\r\n    //         return userName;\r\n    //     }\r\n\r\n    //     return (this._tenant ? this._tenant.tenancyName : '.') + '\\\\' + userName;\r\n    // }\r\n\r\n    // get theme(): UiCustomizationSettingsDto {\r\n    //     return this._theme;\r\n    // }\r\n\r\n    // set theme(val: UiCustomizationSettingsDto) {\r\n    //     this._theme = val;\r\n    // }\r\n\r\n    // init(): Promise<UiCustomizationSettingsDto> {\r\n    //     return new Promise<UiCustomizationSettingsDto>((resolve, reject) => {\r\n    //         this._sessionService.getCurrentLoginInformations().toPromise().then((result: GetCurrentLoginInformationsOutput) => {\r\n    //             this._application = result.application;\r\n    //             this._user = result.user;\r\n    //             this._tenant = result.tenant;\r\n    //             this._theme = result.theme;\r\n\r\n    //             resolve(result.theme);\r\n    //         }, (err) => {\r\n    //             reject(err);\r\n    //         });\r\n    //     });\r\n    // }\r\n\r\n    // changeTenantIfNeeded(tenantId?: number): boolean {\r\n    //     if (this.isCurrentTenant(tenantId)) {\r\n    //         return false;\r\n    //     }\r\n\r\n    //     abp.multiTenancy.setTenantIdCookie(tenantId);\r\n    //     location.reload();\r\n    //     return true;\r\n    // }\r\n\r\n    // private isCurrentTenant(tenantId?: number) {\r\n    //     let isTenant = tenantId > 0;\r\n\r\n    //     if (!isTenant && !this.tenant) { // this is host\r\n    //         return true;\r\n    //     }\r\n\r\n    //     if (!tenantId && this.tenant) {\r\n    //         return false;\r\n    //     } else if (tenantId && (!this.tenant || this.tenant.id !== tenantId)) {\r\n    //         return false;\r\n    //     }\r\n\r\n    //     return true;\r\n    // }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n// import { UiCustomizationSettingsDto } from '@shared/service-proxies/service-proxies';\r\n\r\n@Injectable()\r\nexport class AppUiCustomizationService {\r\n\r\n    // private _theme: UiCustomizationSettingsDto;\r\n    private _theme: any;\r\n\r\n\r\n    // init(theme: UiCustomizationSettingsDto): void {\r\n    //     this._theme = theme;\r\n    // }\r\n\r\n    init(): void {\r\n    }\r\n\r\n    getContainerClass() {\r\n        if (this._theme.baseSettings.layout.layoutType === 'fluid') {\r\n            return 'm-container--fluid';\r\n        }\r\n\r\n        return 'm-container--responsive m-container--xxl';\r\n    }\r\n\r\n    private isLeftMenuUsed(): boolean {\r\n        return this._theme.baseSettings.menu.position === 'left';\r\n    }\r\n\r\n    getAppModuleBodyClass(): string {\r\n        let topMenuUsed = this._theme.baseSettings.menu.position === 'top';\r\n\r\n        return 'm-page--' + this._theme.baseSettings.layout.layoutType + ' m--skin-' + this._theme.baseSettings.layout.contentSkin + ' ' +\r\n            (this._theme.baseSettings.layout.contentSkin !== '' ? ('m-content--skin-' + this._theme.baseSettings.layout.contentSkin) : '') + ' ' +\r\n            'm-header--' + (this._theme.baseSettings.header.desktopFixedHeader ? 'fixed' : 'static') + ' ' +\r\n            (this._theme.baseSettings.header.mobileFixedHeader ? 'm-header--fixed-mobile' : '') + ' ' +\r\n            ((this._theme.baseSettings.menu.fixedAside && !topMenuUsed ? 'm-aside-left--fixed' : '')) + ' ' +\r\n            (this._theme.baseSettings.menu.defaultMinimizedAside ? 'm-aside-left--minimize m-brand--minimize' : '') + ' ' +\r\n            (this._theme.baseSettings.menu.defaultHiddenAside || this._theme.baseSettings.menu.position === 'top' ? 'm-aside-left--hide' : '') + ' ' +\r\n            (this.isLeftMenuUsed() ? 'm-aside-left--enabled' : '') + ' ' +\r\n            'm-aside-left--skin-' + this._theme.baseSettings.menu.asideSkin + ' ' +\r\n            'm-aside-left--offcanvas' + ' ' +\r\n            (this._theme.baseSettings.footer.fixedFooter && this._theme.baseSettings.layout.layoutType !== 'boxed' ? 'm-footer--fixed' : '') + ' ' +\r\n            (this._theme.baseSettings.layout.fixedBody ? 'm-body--fixed' : '') + ' ' +\r\n            (this._theme.baseSettings.layout.mobileFixedBody ? 'm-body--mobile-fixed' : '');\r\n    }\r\n\r\n    getAccountModuleBodyClass() {\r\n        return 'm--skin- m-header--fixed m-header--fixed-mobile ' + (this.isLeftMenuUsed() ? ' m-aside-left--enabled' : '') + ' m-aside-left--skin-dark m-aside-left--offcanvas m-footer--push m-aside--offcanvas-default';\r\n    }\r\n\r\n    getSelectEditionBodyClass() {\r\n        return 'm--skin-';\r\n    }\r\n\r\n    getSideBarMenuClass(): string {\r\n        let menuCssClass = 'm-aside-menu m-aside-menu--skin-' + this._theme.baseSettings.menu.asideSkin;\r\n\r\n        menuCssClass += ' m-aside-menu--submenu-skin-';\r\n        menuCssClass += this._theme.baseSettings.menu.asideSkin;\r\n\r\n        if (!this._theme.baseSettings.menu.fixedAside && this._theme.baseSettings.menu.submenuToggle === 'Dropdown') {\r\n            menuCssClass += ' m-aside-menu--dropdown';\r\n        }\r\n\r\n        return menuCssClass;\r\n    }\r\n\r\n    getMenuListClass(): string {\r\n        return 'm-menu__nav--dropdown-submenu-arrow';\r\n    }\r\n\r\n    getTopBarMenuContainerClass(): string {\r\n        let menuCssClass = 'm-header__bottom m-header-menu--skin-' + this._theme.baseSettings.menu.asideSkin + ' m-container m-container--full-height m-container--responsive';\r\n        if (this._theme.baseSettings.layout.layoutType === 'boxed') {\r\n            return menuCssClass + ' m-container--xxl';\r\n        }\r\n\r\n        return menuCssClass;\r\n    }\r\n\r\n    getIsMenuScrollable(): boolean {\r\n        return this._theme.allowMenuScroll && this._theme.baseSettings.menu.fixedAside;\r\n    }\r\n\r\n    getSideBarMenuItemClass(item, isMenuActive) {\r\n        let menuCssClass = 'm-menu__item';\r\n\r\n        if (item.items.length) {\r\n            menuCssClass += ' m-menu__item--submenu';\r\n        }\r\n\r\n        if (isMenuActive) {\r\n            menuCssClass += ' m-menu__item--open m-menu__item--expanded m-menu__item--active';\r\n        }\r\n\r\n        return menuCssClass;\r\n    }\r\n}\r\n","import { \r\n  Directive,\r\n  Output,\r\n  EventEmitter,\r\n  HostBinding,\r\n  HostListener } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[appDnd]'\r\n})\r\nexport class DndDirective {\r\n\r\n  @HostBinding('class.fileover') fileOver: boolean;\r\n  @Output() fileDropped = new EventEmitter<any>();\r\n\r\n  // Dragover listener\r\n  @HostListener('dragover', ['$event']) onDragOver(evt) {\r\n    evt.preventDefault();\r\n    evt.stopPropagation();\r\n    this.fileOver = true;\r\n  }\r\n\r\n  // Dragleave listener\r\n  @HostListener('dragleave', ['$event']) public onDragLeave(evt) {\r\n    evt.preventDefault();\r\n    evt.stopPropagation();\r\n    this.fileOver = false;\r\n  }\r\n\r\n  // Drop listener\r\n  @HostListener('drop', ['$event']) public ondrop(evt) {\r\n    evt.preventDefault();\r\n    evt.stopPropagation();\r\n    this.fileOver = false;\r\n    let files = evt.dataTransfer.files;\r\n    if (files.length > 0) {\r\n      this.fileDropped.emit(files);\r\n    }\r\n  }\r\n\r\n}\r\n","import { LazyLoadEvent } from 'primeng/api';\r\nimport { Paginator } from 'primeng/paginator';\r\nimport { Table } from 'primeng/table';\r\n\r\nexport class PrimengTableHelper {\r\n    predefinedRecordsCountPerPage = [5, 10, 25, 50, 100, 250, 500];\r\n\r\n    defaultRecordsCountPerPage = 10;\r\n\r\n    isResponsive = true;\r\n\r\n    resizableColumns: false;\r\n\r\n    totalRecordsCount = 0;\r\n\r\n    records: any[];\r\n\r\n    isLoading = false;\r\n\r\n    showLoadingIndicator(): void {\r\n        setTimeout(() => {\r\n            this.isLoading = true;\r\n        }, 0);\r\n    }\r\n\r\n    hideLoadingIndicator(): void {\r\n        setTimeout(() => {\r\n            this.isLoading = false;\r\n        }, 0);\r\n    }\r\n\r\n    getSorting(table: Table): string {\r\n        let sorting;\r\n        if (table.sortField) {\r\n            sorting = table.sortField;\r\n            if (table.sortOrder === 1) {\r\n                sorting += ' ASC';\r\n            } else if (table.sortOrder === -1) {\r\n                sorting += ' DESC';\r\n            }\r\n        }\r\n\r\n        return sorting;\r\n    }\r\n\r\n    getMaxResultCount(paginator: Paginator, event: LazyLoadEvent): number {\r\n        if (paginator.rows) {\r\n            return paginator.rows;\r\n        }\r\n\r\n        if (!event) {\r\n            return 0;\r\n        }\r\n\r\n        return event.rows;\r\n    }\r\n\r\n    getSkipCount(paginator: Paginator, event: LazyLoadEvent): number {\r\n        if (paginator.first) {\r\n            return paginator.first;\r\n        }\r\n\r\n        if (!event) {\r\n            return 0;\r\n        }\r\n\r\n        return event.first;\r\n    }\r\n\r\n    shouldResetPaging(event: LazyLoadEvent): boolean {\r\n        if (!event /*|| event.sortField*/) { // if you want to reset after sorting, comment out parameter\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n","import { Injectable, EventEmitter } from '@angular/core';    \r\nimport { Subscription } from 'rxjs/internal/Subscription';    \r\n    \r\n@Injectable({    \r\n  providedIn: 'root'    \r\n})    \r\nexport class EventEmitterService {    \r\n    \r\n  invokeFirstComponentFunction = new EventEmitter();    \r\n  subsVar: Subscription = new Subscription;    \r\n    \r\n  constructor() { }    \r\n    \r\n  onFirstComponentButtonClick() {    \r\n    this.invokeFirstComponentFunction.emit();    \r\n  }    \r\n}  ","import { Injectable } from '@angular/core';\r\nimport * as localForage from 'localforage';\r\n\r\n@Injectable()\r\nexport class LocalStorageService {\r\n\r\n    getItem(key: string, callback: any): void {\r\n        if (!localForage) {\r\n            return;\r\n        }\r\n\r\n        localForage.getItem(key, callback);\r\n    }\r\n\r\n\r\n    setItem(key: string, value: string | null | undefined): void {\r\n        if (!localForage) {\r\n            return;\r\n        }\r\n\r\n        if (value === null) {\r\n            value = undefined;\r\n        }\r\n\r\n        localForage.setItem(key, value);\r\n    }\r\n\r\n    removeItem(key: string, value: ((err: any) => void) | null | undefined): void {\r\n        if (!localForage) {\r\n            return;\r\n        }\r\n\r\n        if (value === null) {\r\n            value = undefined;\r\n        }\r\n\r\n        localForage.removeItem(key, value);\r\n    }\r\n\r\n    keys() {\r\n\r\n        if (!localForage) {\r\n            return;\r\n        }\r\n\r\n        return localForage.keys();\r\n    }\r\n\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\n//import { ButtonBusyDirective } from './button-busy.directive';\r\n// import { FriendProfilePictureComponent } from './friend-profile-picture.component';\r\nimport { LocalStorageService } from './local-storage.service';\r\nimport { LocalizePipe } from '@shared/common/pipes/localize.pipe';\r\nimport { EventEmitterService } from './event-emitter.service';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule\r\n    ],\r\n    providers: [\r\n        EventEmitterService,\r\n        LocalStorageService,\r\n    ],\r\n    declarations: [\r\n\r\n        // FriendProfilePictureComponent,\r\n\r\n        //ValidationMessagesComponent,\r\n        LocalizePipe\r\n    ],\r\n    exports: [\r\n        // EqualValidator,\r\n        // FriendProfilePictureComponent,\r\n\r\n        //ValidationMessagesComponent,\r\n        LocalizePipe\r\n    ]\r\n})\r\nexport class UtilsModule { }\r\n","import * as patristic from 'patristic';\r\nimport * as d3 from 'd3';\r\n// import \"patristic\";\r\n// import \"d3\";\r\n\r\n/**\r\n * This class function creates a TidyTree object.\r\n * @param {String} newick A valid newick string\r\n * @param {Object} options A Javascript object containing options to set up the tree\r\n */\r\nexport default function TidyTree(data, options, events) {\r\n  let defaults = {\r\n    layout: \"vertical\",\r\n    type: \"tree\",\r\n    mode: \"smooth\",\r\n    colorOptions: { nodeColorMode: \"none\" },\r\n    leafNodes: true,\r\n    leafLabels: false,\r\n    equidistantLeaves: false,\r\n    branchNodes: false,\r\n    branchLabels: false,\r\n    branchDistances: false,\r\n    hStretch: 1,\r\n    vStretch: 1,\r\n    rotation: 0,\r\n    ruler: true,\r\n    animation: 500,\r\n    margin: [50, 50, 50, 50] //CSS order: top, right, bottom, left\r\n  };\r\n  if (!options) options = {};\r\n  Object.assign(this, defaults, options, {\r\n    events: {\r\n      draw: [],\r\n      showtooltip: [],\r\n      hidetooltip: [],\r\n      contextmenu: [],\r\n      search: [],\r\n      select: []\r\n    }\r\n  });\r\n\r\n  if(events) Object.keys(events).forEach(e => this.events[e].push(events[e]));\r\n\r\n  if (this.parent) this.draw(this.parent);\r\n\r\n  if (data instanceof patristic.Branch) {\r\n    this.setData(data);\r\n  } else {\r\n    this.setTree(data);\r\n  }\r\n\r\n  if (this.parent) this.recenter();\r\n}\r\n\r\n/**\r\n * Update the TidyTree's underlying data structure\r\n * There are two contexts in which you should call this:\r\n * \t1. You wish to replace the tree with a completely different tree, given by a different newick string\r\n * \t2. Your underlying tree data has changed (e.g. the tree has been re-rooted)\r\n * @param  {Object} data A patristic.Branch object\r\n * @return {Object}        the TidyTree object\r\n */\r\nTidyTree.prototype.setData = function (data) {\r\n  if (!data) throw Error(\"Invalid Data\");\r\n  this.data = data;\r\n  this.range = [Number.MAX_SAFE_INTEGER, Number.MIN_SAFE_INTEGER];\r\n  this.hierarchy = d3\r\n    .hierarchy(this.data, d => d.children)\r\n    .eachBefore(d => {\r\n      d.value =\r\n        (d.parent ? d.parent.value : 0) + (d.data.length ? Math.abs(d.data.length) : 0);\r\n      if (d.value < this.range[0]) this.range[0] = d.value;\r\n      if (d.value > this.range[1]) this.range[1] = d.value;\r\n    })\r\n    .each(d => (d.value /= this.range[1]));\r\n  if (this.parent) return this.redraw();\r\n  return this;\r\n};\r\n\r\n/**\r\n * Update the TidyTree's underlying data structure\r\n * There are two contexts in which you should call this:\r\n * \t1. You wish to replace the tree with a completely different tree, given by a different newick string\r\n * \t2. Your underlying tree data has changed (e.g. the tree has been re-rooted)\r\n * @param  {String} newick A valid newick string\r\n * @return {Object}        the TidyTree object\r\n */\r\nTidyTree.prototype.setTree = function (newick) {\r\n  if (!newick) throw Error(\"Invalid Newick String\");\r\n  return this.setData(patristic.parseNewick(newick));\r\n};\r\n\r\n/**\r\n * The available layouts for rendering trees.\r\n * @type {Array}\r\n */\r\nTidyTree.validLayouts = [\"horizontal\", \"vertical\", \"circular\"];\r\n\r\n/**\r\n * The available types for rendering branches.\r\n * @type {Array}\r\n */\r\nTidyTree.validTypes = [\"tree\", \"weighted\", \"dendrogram\"];\r\n\r\n/**\r\n * The available modes for rendering branches.\r\n * @type {Array}\r\n */\r\nTidyTree.validModes = [\"smooth\", \"square\", \"straight\"];\r\n\r\n/**\r\n * The available color modes for rendering nodes.\r\n * @type {Array}\r\n */\r\nTidyTree.validNodeColorModes = [\"none\", \"list\"]; // later, highlight on hover, or maybe color by annotation on a node/ search\r\n\r\n/**\r\n * The available color modes for rendering branches.\r\n * @type {Array}\r\n */\r\nTidyTree.validBranchColorModes = [\"none\", \"monophyletic\"]; // later, toRoot? \r\n\r\n/**\r\n * Draws a Phylogenetic on the element referred to by selector\r\n * @param  {String} selector A CSS selector\r\n * @return {TidyTree}           the TidyTree object\r\n */\r\nTidyTree.prototype.draw = function (selector) {\r\n  if (!selector && !this.parent) {\r\n    throw Error(\"No valid target for drawing given! Where should the tree go?\");\r\n  }\r\n  let parent = (this.parent = d3.select(selector ? selector : this.parent));\r\n\r\n  this.width =\r\n    parseFloat(parent.style(\"width\")) - this.margin[1] - this.margin[3];\r\n  this.height =\r\n    parseFloat(parent.style(\"height\")) - this.margin[0] - this.margin[2] - 25;\r\n\r\n  let tree = d3.tree();\r\n\r\n  let svg = parent\r\n    .html(null)\r\n    .append(\"svg\")\r\n    .attr(\"width\", \"100%\")\r\n    .attr(\"height\", \"100%\");\r\n\r\n  let g = svg.append(\"g\");\r\n\r\n  svg\r\n    .append(\"g\")\r\n    .attr(\"class\", \"tidytree-ruler\")\r\n    .append(\"rect\")\r\n    .attr(\"y\", -5)\r\n    .attr(\"fill\", \"white\");\r\n\r\n  this.zoom = d3.zoom().on(\"zoom\", () => {\r\n    let transform = (this.transform = d3.event.transform);\r\n    g.attr(\r\n      \"transform\",\r\n      `translate(${transform.x},${transform.y}) scale(${transform.k}) rotate(${\r\n        this.rotation\r\n      },${this.layout === \"circular\" ? 0 : this.width / 2},${\r\n        this.layout === \"circular\" ? 0 : this.height / 2\r\n      })`\r\n    );\r\n    updateRuler.call(this, transform);\r\n  });\r\n  svg.call(this.zoom);\r\n\r\n  g.append(\"g\").attr(\"class\", \"tidytree-links\");\r\n  g.append(\"g\").attr(\"class\", \"tidytree-nodes\");\r\n\r\n  if (this.events.draw.length) this.events.draw.forEach(c => c());\r\n\r\n  return this;\r\n};\r\n\r\nconst getX = d => d.x,\r\n  getY = d => d.y,\r\n  getLength = d => d.weight;\r\n\r\nlet linkTransformers = {\r\n  tree: {\r\n    smooth: {\r\n      horizontal: d3\r\n        .linkHorizontal()\r\n        .x(getY)\r\n        .y(getX),\r\n      vertical: d3\r\n        .linkVertical()\r\n        .x(getX)\r\n        .y(getY),\r\n      circular: d3\r\n        .linkRadial()\r\n        .angle(getX)\r\n        .radius(getY)\r\n    },\r\n    straight: {\r\n      horizontal: d =>\r\n        `M${d.source.y} ${d.source.x} L ${d.target.y} ${d.target.x}`,\r\n      vertical: d =>\r\n        `M${d.source.x} ${d.source.y} L ${d.target.x} ${d.target.y}`,\r\n      circular: d => {\r\n        const startAngle = d.source.x - Math.PI / 2,\r\n          startRadius = d.source.y,\r\n          endAngle = d.target.x - Math.PI / 2,\r\n          endRadius = d.target.y;\r\n        const x0 = Math.cos(startAngle),\r\n          y0 = Math.sin(startAngle),\r\n          x1 = Math.cos(endAngle),\r\n          y1 = Math.sin(endAngle);\r\n        return (\r\n          \"M\" +\r\n          startRadius * x0 +\r\n          \",\" +\r\n          startRadius * y0 +\r\n          \"L\" +\r\n          endRadius * x1 +\r\n          \",\" +\r\n          endRadius * y1\r\n        );\r\n      }\r\n    },\r\n    square: {\r\n      horizontal: d =>\r\n        `M${d.source.y} ${d.source.x} V ${d.target.x} H ${d.target.y}`,\r\n      vertical: d =>\r\n        `M${d.source.x} ${d.source.y} H ${d.target.x} V ${d.target.y}`,\r\n      circular: d => {\r\n        const startAngle = d.source.x - Math.PI / 2,\r\n          startRadius = d.source.y,\r\n          endAngle = d.target.x - Math.PI / 2,\r\n          endRadius = d.target.y;\r\n        const x0 = Math.cos(startAngle),\r\n          y0 = Math.sin(startAngle),\r\n          x1 = Math.cos(endAngle),\r\n          y1 = Math.sin(endAngle);\r\n        return (\r\n          \"M\" +\r\n          startRadius * x0 +\r\n          \",\" +\r\n          startRadius * y0 +\r\n          (endAngle === startAngle\r\n            ? \"\"\r\n            : \"A\" +\r\n              startRadius +\r\n              \",\" +\r\n              startRadius +\r\n              \" 0 0 \" +\r\n              (endAngle > startAngle ? 1 : 0) +\r\n              \" \" +\r\n              startRadius * x1 +\r\n              \",\" +\r\n              startRadius * y1) +\r\n          \"L\" +\r\n          endRadius * x1 +\r\n          \",\" +\r\n          endRadius * y1\r\n        );\r\n      }\r\n    }\r\n  },\r\n  weighted: {\r\n    smooth: {\r\n      horizontal: d3\r\n        .linkHorizontal()\r\n        .x(getLength)\r\n        .y(getX),\r\n      vertical: d3\r\n        .linkVertical()\r\n        .x(getX)\r\n        .y(getLength),\r\n      circular: d3\r\n        .linkRadial()\r\n        .angle(getX)\r\n        .radius(getLength)\r\n    },\r\n    straight: {\r\n      horizontal: d =>\r\n        `M${d.source.weight} ${d.source.x} L ${d.target.weight} ${d.target.x}`,\r\n      vertical: d =>\r\n        `M${d.source.x} ${d.source.weight} L ${d.target.x} ${d.target.weight}`,\r\n      circular: d => {\r\n        const startAngle = d.source.x - Math.PI / 2,\r\n          startRadius = d.source.weight,\r\n          endAngle = d.target.x - Math.PI / 2,\r\n          endRadius = d.target.weight;\r\n        const x0 = Math.cos(startAngle),\r\n          y0 = Math.sin(startAngle),\r\n          x1 = Math.cos(endAngle),\r\n          y1 = Math.sin(endAngle);\r\n        return (\r\n          \"M\" +\r\n          startRadius * x0 +\r\n          \",\" +\r\n          startRadius * y0 +\r\n          \"L\" +\r\n          endRadius * x1 +\r\n          \",\" +\r\n          endRadius * y1\r\n        );\r\n      }\r\n    },\r\n    square: {\r\n      horizontal: d =>\r\n        `M${d.source.weight} ${d.source.x} V ${d.target.x} H ${\r\n          d.target.weight\r\n        }`,\r\n      vertical: d =>\r\n        `M${d.source.x} ${d.source.weight} H ${d.target.x} V ${\r\n          d.target.weight\r\n        }`,\r\n      circular: d => {\r\n        const startAngle = d.source.x - Math.PI / 2,\r\n          startRadius = d.source.weight,\r\n          endAngle = d.target.x - Math.PI / 2,\r\n          endRadius = d.target.weight;\r\n        const x0 = Math.cos(startAngle),\r\n          y0 = Math.sin(startAngle),\r\n          x1 = Math.cos(endAngle),\r\n          y1 = Math.sin(endAngle);\r\n        return (\r\n          \"M\" +\r\n          startRadius * x0 +\r\n          \",\" +\r\n          startRadius * y0 +\r\n          (endAngle === startAngle\r\n            ? \"\"\r\n            : \"A\" +\r\n              startRadius +\r\n              \",\" +\r\n              startRadius +\r\n              \" 0 0 \" +\r\n              (endAngle > startAngle ? 1 : 0) +\r\n              \" \" +\r\n              startRadius * x1 +\r\n              \",\" +\r\n              startRadius * y1) +\r\n          \"L\" +\r\n          endRadius * x1 +\r\n          \",\" +\r\n          endRadius * y1\r\n        );\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nlinkTransformers.dendrogram = linkTransformers.tree;\r\n\r\n/**\r\n * Calculate the coordinates of a point transformed onto a circle.\r\n *\r\n * @param {number} x - The x-coordinate of the center of the point.\r\n * @param {number} y - The y-coordinate of the center of the point.\r\n * @return {Array<number>} The new x and y coordinates of the point on the circle.\r\n */\r\nfunction circularPoint(x, y) {\r\n  return [(y = +y) * Math.cos((x -= Math.PI / 2)), y * Math.sin(x)];\r\n}\r\n\r\nlet nodeTransformers = {\r\n  tree: {\r\n    horizontal: d => `translate(${d.y}, ${d.x})`,\r\n    vertical: d => `translate(${d.x}, ${d.y})`,\r\n    circular: d => `translate(${circularPoint(d.x, d.y)})`\r\n  },\r\n  weighted: {\r\n    horizontal: d => `translate(${d.weight}, ${d.x})`,\r\n    vertical: d => `translate(${d.x}, ${d.weight})`,\r\n    circular: d => `translate(${circularPoint(d.x, d.weight)})`\r\n  }\r\n};\r\n\r\nnodeTransformers.dendrogram = nodeTransformers.tree;\r\n\r\n/**\r\n * Finds the color of a given node based on the color options provided.\r\n *\r\n * @param {Object} node - The node for which to find the color.\r\n * @param {Object} colorOptions - The color options object containing the color mode, node list, default color, and highlight color.\r\n * @return {string} The color of the node.\r\n */\r\nfunction findNodeColor(node, colorOptions) {\r\n  if (colorOptions.nodeColorMode === \"none\") {\r\n    // steelblue\r\n    return colorOptions.defaultNodeColor ?? \"#4682B4\";\r\n  }\r\n \r\n  let nodeList = colorOptions.nodeList;\r\n\r\n  if (nodeList && nodeList.includes(node.data._guid)) {\r\n    // yellowish\r\n    return colorOptions.highlightColor ?? \"#feb640\";\r\n  } else {\r\n    // charcoal\r\n    return colorOptions.defaultNodeColor ?? \"#243127\";\r\n  }\r\n}\r\n\r\n/**\r\n * Find the color of a given link based on the provided color options.\r\n *\r\n * @param {string} link - The link for which to find the color.\r\n * @param {object} colorOptions - The options for different link colors.\r\n * @return {string} The color of the link.\r\n */\r\nfunction findBranchColor(link, colorOptions) {\r\n  if (colorOptions.branchColorMode === \"none\") {\r\n    // light gray\r\n    return colorOptions.defaultBranchColor ?? \"#cccccc\";\r\n  }\r\n  \r\n  let source = link.source;\r\n  let childLeafNodes = getAllLeaves(source);\r\n  \r\n  let allChildLeafNodesInNodeList = childLeafNodes.every(child =>\r\n    colorOptions.nodeList?.includes(child.data._guid)\r\n  );\r\n \r\n  if (allChildLeafNodesInNodeList) {\r\n    // yellowish\r\n    return colorOptions.highlightColor ?? \"#feb640\";\r\n  }\r\n\r\n  return colorOptions.defaultBranchColor ?? \"#cccccc\";\r\n}\r\n\r\n/**\r\n * Returns an array of all the child leaf nodes of the given node in a tree.\r\n *\r\n * @param {Object} node - A node of the tree.\r\n * @param {boolean} includeSelf - Whether to include the given node itself as a leaf node. Defaults to false.\r\n * @return {Array} An array of leaf nodes.\r\n */\r\nfunction getAllLeaves(node, includeSelf) {\r\n  includeSelf = includeSelf ?? false;\r\n  let leaves = [];\r\n\r\n  if (includeSelf && node.height === 0) {\r\n    leaves.push(node);\r\n  } else {\r\n    node.children.forEach(child => {\r\n      leaves.push(...getAllLeaves(child, true));\r\n    });\r\n  }\r\n\r\n  return leaves;\r\n}\r\n\r\nconst radToDeg = 180 / Math.PI;\r\n\r\nlet labelTransformers = {\r\n  tree: {\r\n    straight: {\r\n      horizontal: l =>\r\n        `translate(${(l.source.y + l.target.y) / 2}, ${(l.source.x +\r\n          l.target.x) /\r\n          2}) rotate(${Math.atan(\r\n          (l.target.x - l.source.x) / (l.target.y - l.source.y)\r\n        ) * radToDeg})`,\r\n      vertical: l =>\r\n        `translate(${(l.source.x + l.target.x) / 2}, ${(l.source.y +\r\n          l.target.y) /\r\n          2}) rotate(${Math.atan(\r\n          (l.source.y - l.target.y) / (l.source.x - l.target.x)\r\n        ) * radToDeg})`,\r\n      circular: l => {\r\n        let s = circularPoint(l.source.x, l.source.y),\r\n          t = circularPoint(l.target.x, l.target.y);\r\n        return `translate(${(s[0] + t[0]) / 2}, ${(s[1] + t[1]) /\r\n          2}) rotate(${Math.atan((s[1] - t[1]) / (s[0] - t[0])) * radToDeg})`;\r\n      }\r\n    },\r\n    square: {\r\n      horizontal: l =>\r\n        `translate(${(l.source.y + l.target.y) / 2}, ${l.target.x})`,\r\n      vertical: l =>\r\n        `translate(${l.target.x}, ${(l.source.y + l.target.y) / 2}) rotate(90)`,\r\n      circular: l => {\r\n        let u = circularPoint(l.target.x, (l.source.y + l.target.y) / 2);\r\n        return `translate(${u[0]}, ${u[1]}) rotate(${((l.target.x * radToDeg) %\r\n          180) -\r\n          90})`;\r\n      }\r\n    }\r\n  },\r\n  weighted: {\r\n    straight: {\r\n      horizontal: l =>\r\n        `translate(${(l.source.weight + l.target.weight) / 2}, ${(l.source.x +\r\n          l.target.x) /\r\n          2}) rotate(${Math.atan(\r\n          (l.target.x - l.source.x) / (l.target.weight - l.source.weight)\r\n        ) * radToDeg})`,\r\n      vertical: l =>\r\n        `translate(${(l.source.x + l.target.x) / 2}, ${(l.source.weight +\r\n          l.target.weight) /\r\n          2}) rotate(${Math.atan(\r\n          (l.source.weight - l.target.weight) / (l.source.x - l.target.x)\r\n        ) * radToDeg})`,\r\n      circular: l => {\r\n        let s = circularPoint(l.source.x, l.source.weight),\r\n          t = circularPoint(l.target.x, l.target.weight);\r\n        return `translate(${(s[0] + t[0]) / 2}, ${(s[1] + t[1]) /\r\n          2}) rotate(${Math.atan((s[1] - t[1]) / (s[0] - t[0])) * radToDeg})`;\r\n      }\r\n    },\r\n    square: {\r\n      horizontal: l => `\r\n        translate(${(l.source.weight + l.target.weight) / 2}, ${l.target.x})\r\n      `,\r\n      vertical: l => `\r\n        translate(${l.target.x}, ${(l.source.weight + l.target.weight) / 2})\r\n        rotate(90)\r\n      `,\r\n      circular: l => {\r\n        let u = circularPoint(\r\n          l.target.x,\r\n          (l.source.weight + l.target.weight) / 2\r\n        );\r\n        return `\r\n          translate(${u[0]}, ${u[1]})\r\n          rotate(${((l.target.x * radToDeg) % 180) - 90})\r\n        `;\r\n      }\r\n    }\r\n  }\r\n};\r\nlabelTransformers.tree.smooth = labelTransformers.tree.straight;\r\nlabelTransformers.weighted.smooth = labelTransformers.weighted.straight;\r\nlabelTransformers.dendrogram = labelTransformers.tree;\r\n\r\nfunction labeler(d) {\r\n  if (!d.target.data.length) return \"0.000\";\r\n  return d.target.data.length.toFixed(3);\r\n}\r\n\r\n/**\r\n * Redraws the links and relocates the nodes accordingly\r\n * @return {TidyTree} The TidyTree Object\r\n */\r\nTidyTree.prototype.redraw = function () {\r\n  let parent = this.parent;\r\n\r\n  this.width  = (parseFloat(parent.style(\"width\" )) - this.margin[1] - this.margin[3]     ) * this.hStretch;\r\n  this.height = (parseFloat(parent.style(\"height\")) - this.margin[0] - this.margin[2] - 25) * this.vStretch;\r\n\r\n  this.scalar =\r\n    this.layout === \"horizontal\" ? this.width :\r\n    this.layout === \"vertical\" ? this.height :\r\n    Math.min(this.width, this.height) / 2;\r\n\r\n  this.hierarchy.each(d => (d.weight = this.scalar * d.value));\r\n\r\n  let g = parent.select(\"svg g\");\r\n\r\n  let source = (this.type === \"tree\" ? d3.tree() : d3.cluster()).size(\r\n    this.layout === \"circular\"   ? [2 * Math.PI, Math.min(this.height, this.width) / 2] :\r\n    this.layout === \"horizontal\" ? [this.height, this.width] :\r\n    [this.width, this.height]\r\n  );\r\n\r\n  if (this.equidistantLeaves) {\r\n    if (this.layout === \"circular\") {\r\n      source.separation((a,b) => 1 / a.depth);\r\n    } else {\r\n      source.separation((a,b) => 1);\r\n    }\r\n  } else {\r\n    if (this.layout === \"circular\")\r\n      source.separation((a, b) => (a.parent == b.parent ? 1 : 2) / a.depth);\r\n  }\r\n  \r\n  //Note: You must render links prior to nodes in order to get correct placement!\r\n  let links = g\r\n    .select(\"g.tidytree-links\")\r\n    .selectAll(\"g.tidytree-link\")\r\n    .data(source(this.hierarchy).links(), l => l.source.data._guid + ':' + l.target.data._guid);\r\n\r\n  links.join(\r\n    enter => {\r\n      let newLinks = enter.append(\"g\").attr(\"class\", \"tidytree-link\");\r\n\r\n      let linkTransformer = linkTransformers[this.type][this.mode][this.layout];\r\n      console.log(linkTransformer);\r\n      console.log(newLinks);\r\n      newLinks\r\n        .append(\"path\")\r\n        .attr(\"fill\", \"none\")\r\n        .attr(\"stroke\", d => findBranchColor(d, this.colorOptions))\r\n        .attr(\"d\", linkTransformer)\r\n        .transition()\r\n        .duration(this.animation)\r\n        .attr(\"opacity\", 1);\r\n\r\n      let labelTransformer = labelTransformers[this.type][this.mode][this.layout];\r\n      newLinks\r\n        .append(\"text\")\r\n        .attr(\"y\", 2)\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .style(\"font-size\", \"12px\")\r\n        .text(labeler)\r\n        .attr(\"transform\", labelTransformer)\r\n        .transition()\r\n        .duration(this.animation)\r\n        .style(\"opacity\", this.branchDistances ? 1 : 0);\r\n    },\r\n    update => {\r\n      let linkTransformer = linkTransformers[this.type][this.mode][this.layout];\r\n      let paths = update.select(\"path\");\r\n      if (!this.animation > 0) {\r\n        paths\r\n        .attr(\"d\", linkTransformer)\r\n        .attr(\"stroke\", d => findBranchColor(d, this.colorOptions));\r\n      } else {\r\n        paths\r\n          .transition()\r\n          .duration(this.animation / 2)\r\n          .attr(\"stroke\", d => findBranchColor(d, this.colorOptions))\r\n          .attr(\"opacity\", 0)\r\n          .end()\r\n          .then(() => {\r\n            paths\r\n              .attr(\"d\", linkTransformer)\r\n              .transition()\r\n              .duration(this.animation / 2)\r\n              .attr(\"opacity\", 1);\r\n          });\r\n      }\r\n\r\n      let labelTransformer =\r\n        labelTransformers[this.type][this.mode][this.layout];\r\n      let labels = update.select(\"text\");\r\n      if (this.animation) {\r\n        labels\r\n          .transition()\r\n          .duration(this.animation / 2)\r\n          .style(\"opacity\", 0)\r\n          .end()\r\n          .then(() => {\r\n            labels.text(labeler).attr(\"transform\", labelTransformer);\r\n            if (this.branchDistances) {\r\n            labels\r\n              .transition()\r\n              .duration(this.animation / 2)\r\n              .style(\"opacity\", this.branchDistances ? 1 : 0);\r\n            }\r\n          });\r\n      } else {\r\n        labels.text(labeler).attr(\"transform\", labelTransformer);\r\n      }\r\n    },\r\n    exit =>\r\n      exit\r\n        .transition()\r\n        .duration(this.animation)\r\n        .attr(\"opacity\", 0)\r\n        .remove()\r\n  );\r\n\r\n  let nodes = g\r\n    .select(\"g.tidytree-nodes\")\r\n    .selectAll(\"g.tidytree-node\")\r\n    .data(this.hierarchy.descendants(), d => d.data._guid);\r\n  nodes.join(\r\n    enter => {\r\n      let nt = nodeTransformers[this.type][this.layout];\r\n      let newNodes = enter\r\n        .append(\"g\")\r\n        .attr(\"class\", \"tidytree-node\")\r\n        .classed(\"tidytree-node-internal\", d => d.children)\r\n        .classed(\"tidytree-node-leaf\", d => !d.children)\r\n        .attr(\"transform\", nt);\r\n\r\n      newNodes\r\n        .append(\"circle\")\r\n        .attr(\"title\", d => d.data.id)\r\n        .style(\"opacity\", d =>\r\n          (d.children && this.branchNodes) ||\r\n          (!d.children && this.leafNodes) ? 1 : 0\r\n        )\r\n        .style(\"fill\", d => findNodeColor(d, this.colorOptions))\r\n        .on(\"mouseenter focusin\", d => this.trigger(\"showtooltip\", d))\r\n        .on(\"mouseout focusout\", d => this.trigger(\"hidetooltip\", d))\r\n        .on(\"contextmenu\", d => this.trigger(\"contextmenu\", d))\r\n        .on(\"click\", d => this.trigger(\"select\", d))\r\n        .attr(\"r\", 2.5);\r\n\r\n      let nodeLabels = newNodes\r\n        .append(\"text\")\r\n        .text(d => d.data.id)\r\n        .style(\"font-size\", \"12px\")\r\n        .attr(\"y\", 2)\r\n        .style(\"opacity\", d =>\r\n          ( d.children && this.branchLabels) ||\r\n          (!d.children && this.leafLabels) ? 1 : 0\r\n        );\r\n\r\n      if (this.layout === \"vertical\") {\r\n        nodeLabels\r\n          .attr(\"text-anchor\", \"start\")\r\n          .attr(\"x\", 5)\r\n          .transition()\r\n          .duration(this.animation)\r\n          .attr(\"transform\", \"rotate(90)\");\r\n      } else if (this.layout === \"horizontal\") {\r\n        nodeLabels\r\n          .attr(\"text-anchor\", \"start\")\r\n          .attr(\"x\", 5)\r\n          .transition()\r\n          .duration(this.animation)\r\n          .attr(\"transform\", \"rotate(0)\");\r\n      } else {\r\n        nodeLabels\r\n          .transition()\r\n          .duration(this.animation)\r\n          .attr(\"transform\", l => `rotate(${(((l.x / Math.PI) * 180) % 180) - 90})`)\r\n          .attr(\"text-anchor\", l => l.x % (2 * Math.PI) > Math.PI ? \"end\" : \"start\")\r\n          .attr(\"x\", l => (l.x % (2 * Math.PI) > Math.PI ? -5 : 5));\r\n      }\r\n\r\n      newNodes\r\n        .transition()\r\n        .duration(this.animation)\r\n        .attr(\"opacity\", 1);\r\n    },\r\n    update => {\r\n      let nodeTransformer = nodeTransformers[this.type][this.layout];\r\n      update\r\n        .transition()\r\n        .duration(this.animation)\r\n        .attr(\"transform\", nodeTransformer);\r\n\r\n      let nodeGlyphs = update.select(\"circle\");\r\n      nodeGlyphs.style(\"fill\", d => findNodeColor(d, this.colorOptions));      \r\n\r\n      let nodeLabels = update.select(\"text\");\r\n      if (this.layout === \"vertical\") {\r\n        nodeLabels\r\n          .attr(\"text-anchor\", \"start\")\r\n          .attr(\"x\", 5)\r\n          .transition()\r\n          .duration(this.animation)\r\n          .attr(\"transform\", \"rotate(90)\");\r\n      } else if (this.layout === \"horizontal\") {\r\n        nodeLabels\r\n          .attr(\"text-anchor\", \"start\")\r\n          .attr(\"x\", 5)\r\n          .transition()\r\n          .duration(this.animation)\r\n          .attr(\"transform\", \"rotate(0)\");\r\n      } else {\r\n        nodeLabels\r\n          .transition()\r\n          .duration(this.animation)\r\n          .attr(\"transform\", l => `rotate(${(((l.x / Math.PI) * 180) % 180) - 90})`)\r\n          .attr(\"text-anchor\", l => l.x % (2 * Math.PI) > Math.PI ? \"end\" : \"start\")\r\n          .attr(\"x\", l => (l.x % (2 * Math.PI) > Math.PI ? -5 : 5));\r\n      }\r\n    },\r\n    exit =>\r\n      exit\r\n        .transition()\r\n        .duration(this.animation)\r\n        .attr(\"opacity\", 0)\r\n        .remove()\r\n  );\r\n\r\n  updateRuler.call(this);\r\n\r\n  return this;\r\n};\r\n\r\nfunction updateRuler(transform) {\r\n  if (!transform) transform = { k: 1 };\r\n  let height = parseFloat(this.parent.style(\"height\")) - this.margin[2] - 5;\r\n  let ruler = this.parent.select(\"g.tidytree-ruler\");\r\n  let bg = ruler.select(\"rect\");\r\n  if (this.ruler) {\r\n    if (this.layout == \"horizontal\") {\r\n      ruler.attr(\"transform\", `translate(${this.margin[3]}, ${height})`);\r\n      bg\r\n        .attr(\"width\", `calc(100% - ${this.margin[1] + this.margin[3] - 15}px)`)\r\n        .attr(\"height\", \"25px\")\r\n        .attr(\"x\", -5);\r\n    } else {\r\n      ruler.attr(\"transform\", `translate(${this.margin[3] - 10}, ${this.margin[0]})`);\r\n      bg\r\n        .attr(\"height\", `calc(100% - ${this.margin[0] + this.margin[2] - 15}px)`)\r\n        .attr(\"width\", \"25px\")\r\n        .attr(\"x\", -25);\r\n    }\r\n    let axis = this.layout == \"horizontal\" ? d3.axisBottom() : d3.axisLeft();\r\n    if (this.type === \"tree\" && this.layout !== \"circular\") {\r\n      ruler\r\n        .attr(\"opacity\", 1)\r\n        .call(\r\n          axis.scale(\r\n            d3.scaleLinear(\r\n              [0, this.hierarchy.height / transform.k],\r\n              [0, this.scalar]\r\n            )\r\n          )\r\n        );\r\n    } else if (this.type === \"weighted\" && this.layout !== \"circular\") {\r\n      ruler\r\n        .attr(\"opacity\", 1)\r\n        .call(\r\n          axis.scale(\r\n            d3.scaleLinear(\r\n              [this.range[0], this.range[1] / transform.k],\r\n              [0, this.scalar]\r\n            )\r\n          )\r\n        );\r\n    } else {\r\n      ruler\r\n        .transition()\r\n        .duration(this.animation)\r\n        .attr(\"opacity\", 0);\r\n    }\r\n  } else {\r\n    ruler\r\n      .transition()\r\n      .duration(this.animation)\r\n      .attr(\"opacity\", 0);\r\n  }\r\n}\r\n\r\n/**\r\n * Recenters the tree in the center of the view\r\n * @return {TidyTree} The TidyTree object\r\n */\r\nTidyTree.prototype.recenter = function () {\r\n  let svg = this.parent.select(\"svg\"),\r\n    x = this.margin[0],\r\n    y = this.margin[3];\r\n  if (this.layout === \"circular\") {\r\n    x += parseFloat(svg.style(\"width\")) / 2;\r\n    y += parseFloat(svg.style(\"height\")) / 2;\r\n  }\r\n  svg\r\n    .transition()\r\n    .duration(this.animation)\r\n    .call(this.zoom.transform, d3.zoomIdentity.translate(x, y));\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set the TidyTree's layout\r\n * @param {String} newLayout The new layout\r\n * @return {TidyTree} The TidyTree Object\r\n */\r\nTidyTree.prototype.setLayout = function (newLayout) {\r\n  if (!TidyTree.validLayouts.includes(newLayout)) {\r\n    throw Error(`\r\n      Cannot set TidyTree to layout: ${newLayout}\\n\r\n      Valid layouts are: ${TidyTree.validLayouts.join(', ')}\r\n    `);\r\n  }\r\n  this.layout = newLayout;\r\n  if (this.parent) return this.redraw();\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set the TidyTree's colorOptions\r\n * @param {Object} newColorOptions The new colorOptions\r\n * @return {TidyTree} The TidyTree Object\r\n */\r\nTidyTree.prototype.setColorOptions = function (newColorOptions) {\r\n  if (!TidyTree.validNodeColorModes.includes(newColorOptions.nodeColorMode)) {\r\n    throw Error(`\r\n      Cannot set TidyTree colorOptions: ${newColorOptions.nodeColorMode}\\n\r\n      Valid nodeColorModes are: ${TidyTree.validNodeColorModes.join(', ')}\r\n    `);\r\n  }\r\n  if (!TidyTree.validBranchColorModes.includes(newColorOptions.branchColorMode)) {\r\n    throw Error(`\r\n      Cannot set TidyTree colorOptions: ${newColorOptions.branchColorMode}\\n\r\n      Valid branchColorModes are: ${TidyTree.validBranchColorModes.join(', ')}\r\n    `);\r\n  }\r\n\r\n  if (newColorOptions.nodeColorMode === 'list') {\r\n    if (!Array.isArray(newColorOptions.nodeList)) {\r\n      throw Error('nodeList must be an array for nodeColorMode \"list\"');\r\n    }\r\n  } else {\r\n    // nodeColorMode === 'none'\r\n    if (newColorOptions.branchColorMode !== 'none') {\r\n      throw Error('branchColorMode must be \"none\" for nodeColorMode \"none\"');\r\n    }\r\n  }\r\n\r\n  this.colorOptions = newColorOptions;\r\n  if (this.parent) return this.redraw();\r\n  return this;\r\n}\r\n\r\n/**\r\n * Set the TidyTree's mode\r\n * @param {String} newMode The new mode\r\n * @return {TidyTree} The TidyTree object\r\n */\r\nTidyTree.prototype.setMode = function (newMode) {\r\n  if (!TidyTree.validModes.includes(newMode)) {\r\n    throw Error(`\r\n      Cannot set TidyTree to mode: ${newMode},\\n\r\n      Valid modes are: ${TidyTree.validModes.join(', ')}\r\n    `);\r\n  }\r\n  this.mode = newMode;\r\n  if (this.parent) return this.redraw();\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set the TidyTree's type\r\n * @param {Boolean} newType The new type\r\n * @return {TidyTree} the TidyTree object\r\n */\r\nTidyTree.prototype.setType = function (newType) {\r\n  if (!TidyTree.validTypes.includes(newType)) {\r\n    throw Error(`\r\n      Cannot set TidyTree to type: ${newType},\\n\r\n      Valid types are: ${TidyTree.validTypes.join(', ')}\r\n    `);\r\n  }\r\n  this.type = newType;\r\n  if (this.parent) return this.redraw();\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set the TidyTree's rotation\r\n * @param {Number} degrees The new number of degrees by which to rotate the tree\r\n * @return {TidyTree} the TidyTree object\r\n */\r\nTidyTree.prototype.setRotation = function (degrees) {\r\n  this.rotation = degrees;\r\n  if (this.parent)\r\n    this.parent\r\n      .select(\"svg g\")\r\n      .attr(\"transform\", `\r\n        translate(${this.transform.x},${this.transform.y})\r\n        scale(${this.transform.k})\r\n        rotate(${this.rotation},\r\n          ${this.layout === \"circular\" ? 0 : this.width / 2},\r\n          ${this.layout === \"circular\" ? 0 : this.height / 2}\r\n        )\r\n      `);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set the TidyTree's Horizontal Stretch\r\n * @param {Number} proportion The new proportion by which to stretch the tree\r\n * @return {TidyTree} the TidyTree object\r\n */\r\nTidyTree.prototype.setHStretch = function (proportion) {\r\n  this.hStretch = parseFloat(proportion);\r\n  if (this.parent) {\r\n    let animCache = this.animation;\r\n    this.setAnimation(0);\r\n    this.redraw();\r\n    this.setAnimation(animCache);\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set the TidyTree's Vertical Stretch\r\n * @param {Number} proportion The new proportion by which to stretch the tree\r\n * @return {TidyTree} the TidyTree object\r\n */\r\nTidyTree.prototype.setVStretch = function (proportion) {\r\n  this.vStretch = parseFloat(proportion);\r\n  if (this.parent) {\r\n    let animCache = this.animation;\r\n    this.setAnimation(0);\r\n    this.redraw();\r\n    this.setAnimation(animCache);\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set the TidyTree's animation time. Note that this does not trigger a\r\n * redraw.\r\n * @param {number} time The desired duration of an animation, in ms. Set to 0\r\n * to turn animations off completely.\r\n * @return {TidyTree} The TidyTree object\r\n */\r\nTidyTree.prototype.setAnimation = function (time) {\r\n  this.animation = time;\r\n  return this;\r\n};\r\n\r\n/**\r\n * Shows or hides the Branch Nodes\r\n * @param  {Boolean} show Should Branch nodes be shown?\r\n * @return {TidyTree} the TidyTree object\r\n */\r\nTidyTree.prototype.setBranchNodes = function (show) {\r\n  this.branchNodes = show ? true : false;\r\n  if (this.parent) {\r\n    //i.e. has already been drawn\r\n    this.parent\r\n      .select(\"svg\")\r\n      .selectAll(\"g.tidytree-node-internal circle\")\r\n      .transition()\r\n      .duration(this.animation)\r\n      .style(\"opacity\", show ? 1 : 0);\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Restyles Leaf Nodes\r\n * @param  {Function} styler A function that restyles each node. `styler`\r\n * receives a reference to the DOM node to be styled, and an associated data\r\n * object.\r\n * @return {TidyTree} the TidyTree Object\r\n */\r\nTidyTree.prototype.eachBranchNode = function (styler) {\r\n  if (!this.parent)\r\n    throw Error(\r\n      \"Tree has not been rendered yet! Can't style Nodes that don't exist!\"\r\n    );\r\n  this.parent\r\n    .select(\"svg\")\r\n    .selectAll(\"g.tidytree-node-internal circle\")\r\n    .each(function (d) { styler(this, d); });\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set the TidyTree's branchLabels\r\n * @param  {Boolean} show Should the TidyTree show branchLabels?\r\n * @return {TidyTree}     the TidyTree Object\r\n */\r\nTidyTree.prototype.setBranchLabels = function (show) {\r\n  this.branchLabels = show ? true : false;\r\n  if (this.parent) {\r\n    //i.e. has already been drawn\r\n    this.parent\r\n      .select(\"svg\")\r\n      .selectAll(\"g.tidytree-node-internal text\")\r\n      .transition()\r\n      .duration(this.animation)\r\n      .style(\"opacity\", show ? 1 : 0);\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Restyles Branch Label\r\n * @param  {Function} styler A function that restyles each node. `styler`\r\n * receives a reference to the DOM node to be styled, and an associated data\r\n * object.\r\n * @return {TidyTree} the TidyTree Object\r\n */\r\nTidyTree.prototype.eachBranchLabel = function (styler) {\r\n  if (!this.parent){\r\n    throw Error(\"Tree has not been rendered yet! Can't style Nodes that don't exist!\");\r\n  }\r\n  this.parent\r\n    .select(\"svg\")\r\n    .selectAll(\"g.tidytree-node-internal text\")\r\n    .each(function (d, i, l) { styler(this, d); });\r\n  return this;\r\n};\r\n\r\n/**\r\n * Shows or hides the TidyTree's branch labels\r\n * @param {Boolean} show Should the TidyTree show branch distances?\r\n * @return {TidyTree} The TidyTree Object\r\n */\r\nTidyTree.prototype.setBranchDistances = function (show) {\r\n  this.branchDistances = show ? true : false;\r\n  if (this.parent) {\r\n    //i.e. has already been drawn\r\n    let links = this.parent\r\n      .select(\"svg g.tidytree-links\")\r\n      .selectAll(\"g.tidytree-link\")\r\n      .selectAll(\"text\");\r\n    links.attr(\"transform\", labelTransformers[this.type][this.mode][this.layout]);\r\n    links\r\n      .transition()\r\n      .duration(this.animation)\r\n      .style(\"opacity\", show ? 1 : 0);\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Restyles Branch Distances\r\n * @param  {Function} styler A function that restyles each node. `styler`\r\n * receives a reference to the DOM node to be styled, and an associated data\r\n * object.\r\n * @return {TidyTree} the TidyTree Object\r\n */\r\nTidyTree.prototype.eachBranchDistance = function (styler) {\r\n  if (!this.parent)\r\n    throw Error(\"Tree has not been rendered yet! Can't style Nodes that don't exist!\");\r\n  this.parent\r\n    .select(\"svg g.tidytree-links\")\r\n    .selectAll(\"g.tidytree-link\")\r\n    .selectAll(\"text\")\r\n    .each(function (d, i, l) { styler(this, d); });\r\n  return this;\r\n};\r\n\r\n/**\r\n * Shows or Hides the Leaf Nodes\r\n * @param  {Boolean} show Should leaf nodes be visible?\r\n * @return {TidyTree} The TidyTree Object\r\n */\r\nTidyTree.prototype.setLeafNodes = function (show) {\r\n  this.leafNodes = show ? true : false;\r\n  if (this.parent) {\r\n    //i.e. has already been drawn\r\n    this.parent\r\n      .select(\"svg\")\r\n      .selectAll(\"g.tidytree-node-leaf circle\")\r\n      .transition()\r\n      .duration(this.animation)\r\n      .style(\"opacity\", show ? 1 : 0);\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Restyles Leaf Nodes\r\n * @param  {Function} styler A function that restyles each node. `styler`\r\n * receives a reference to the DOM node to be styled, and an associated data\r\n * object.\r\n * @return {TidyTree} the TidyTree Object\r\n */\r\nTidyTree.prototype.eachLeafNode = function (styler) {\r\n  if (!this.parent){\r\n    throw Error(\"Tree has not been rendered yet! Can't style Nodes that don't exist!\");\r\n  }\r\n  this.parent\r\n    .select(\"svg\")\r\n    .selectAll(\"g.tidytree-node-leaf circle\")\r\n    .each(function (d) {\r\n      styler(this, d);\r\n    });\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set the TidyTree's leaves to be equidistant\r\n */\r\nTidyTree.prototype.setEquidistantLeaves = function (isEquidistant) {\r\n  this.equidistantLeaves = isEquidistant ? true : false;\r\n\r\n  if (this.parent) return this.redraw();\r\n  return this;\r\n}\r\n\r\n/**\r\n * Shows or Hides the TidyTree's Leaf Labels\r\n * @param  {Boolean} show Should the TidyTree show leafLabels?\r\n * @return {TidyTree}     the TidyTree Object\r\n */\r\nTidyTree.prototype.setLeafLabels = function (show) {\r\n  this.leafLabels = show ? true : false;\r\n  if (this.parent) {\r\n    //i.e. has already been drawn\r\n    this.parent\r\n      .select(\"svg\")\r\n      .selectAll(\"g.tidytree-node-leaf text\")\r\n      .transition()\r\n      .duration(this.animation)\r\n      .style(\"opacity\", show ? 1 : 0);\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Restyles Leaf Labels\r\n * @param  {Function} styler A function that restyles each node. `styler`\r\n * receives a reference to the DOM node to be styled, and an associated data\r\n * object.\r\n * @return {TidyTree} the TidyTree Object\r\n */\r\nTidyTree.prototype.eachLeafLabel = function (styler) {\r\n  if (!this.parent){\r\n    throw Error(\"Tree has not been rendered yet! Can't style Nodes that don't exist!\");\r\n  }\r\n  this.parent\r\n    .select(\"svg\")\r\n    .selectAll(\"g.tidytree-node-leaf text\")\r\n    .each(function (d) { styler(this, d); });\r\n  return this;\r\n};\r\n\r\n/**\r\n * Shows or hides the TidyTree's branch labels\r\n * @param {Boolean} show Should the TidyTree show branchLabels?\r\n * @return {TidyTree} The TidyTree Object\r\n */\r\nTidyTree.prototype.setRuler = function (show) {\r\n  this.ruler = show ? true : false;\r\n  if (this.parent) {\r\n    //i.e. has already been drawn\r\n    if (show) {\r\n      this.parent\r\n        .select(\"g.tidytree-ruler\")\r\n        .transition()\r\n        .duration(this.animation)\r\n        .attr(\"opacity\", 1);\r\n    } else {\r\n      this.parent\r\n        .select(\"g.tidytree-ruler\")\r\n        .transition()\r\n        .duration(this.animation)\r\n        .attr(\"opacity\", 0);\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Retrieves the GUIDs of the nodes in the TidyTree instance.\r\n *\r\n * @param {boolean} leavesOnly - Whether to retrieve GUIDs only for leaf nodes.\r\n * @param {function} predicate - A function that returns true if the node should be included\r\n * @return {Array} An array of GUIDs of the nodes.\r\n */\r\nTidyTree.prototype.getNodeGUIDs = function (leavesOnly, predicate) {\r\n  let nodeList = this.parent\r\n    .select(\"svg\")\r\n    .selectAll(\"g.tidytree-node-leaf circle\")\r\n    ._groups[0];\r\n\r\n  if (!leavesOnly) {\r\n    nodeList = this.parent\r\n      .select(\"svg\")\r\n      .selectAll(\"g.tidytree-node-leaf circle, g.tidytree-node-internal circle\")\r\n      ._groups[0];\r\n  }\r\n\r\n  let nodeGUIDs = [];\r\n  for (const node of nodeList.values()) {\r\n    if (!predicate || predicate(node)) {\r\n      nodeGUIDs.push(node.__data__.data._guid);\r\n    }\r\n  }\r\n\r\n  return nodeGUIDs;\r\n}\r\n\r\n/**\r\n * Searches the tree, returns Search Results\r\n * @param  {Function} test A function which takes a Branch and returns a Truthy\r\n * or Falsy value.\r\n * @return {Array} The array of results\r\n */\r\nTidyTree.prototype.search = function (test) {\r\n  if (!test) return;\r\n  let results = this.parent\r\n    .select(\"svg g.tidytree-nodes\")\r\n    .selectAll(\"g.tidytree-node\")\r\n    .filter(test);\r\n  if (this.events.search.length) this.events.search.forEach(c => c(results));\r\n  return results;\r\n};\r\n\r\n/**\r\n * Attaches a new event listener\r\n * Please note that this is not yet functioning.\r\n * @param  {String}   events   A space-delimited list of event names\r\n * @param  {Function} callback The function to run when one of the `events` occurs.\r\n * @return {TidyTree} The TidyTree on which this method was called.\r\n */\r\nTidyTree.prototype.on = function (events, callback) {\r\n  events.split(\" \").forEach(event => this.events[event].push(callback));\r\n  return this;\r\n};\r\n\r\n/**\r\n * Removes all event listeners from the given events\r\n * @param  {String}   events   A space-delimited list of event names\r\n * @return {TidyTree} The TidyTree on which this method was called.\r\n */\r\nTidyTree.prototype.off = function (events) {\r\n  events.split(\" \").forEach(event => (this.events[event] = []));\r\n  return this;\r\n};\r\n\r\n/**\r\n * Forces the tree to respond as though an `event` has occurred\r\n * @param  {String} events space-delimited list of names of events to trigger.\r\n * @param  {Spread} args Any arguments which should be passed to the event\r\n * handler(s).\r\n * @return The output of the callback run on `event`\r\n */\r\nTidyTree.prototype.trigger = function (events, ...args) {\r\n  return events.split(\" \").map(event => {\r\n    if (this.events[event].length)\r\n      return this.events[event].map(handler => handler(args));\r\n    return [];\r\n  });\r\n};\r\n\r\n/**\r\n * Destroys the TidyTree\r\n * @return {undefined}\r\n */\r\nTidyTree.prototype.destroy = function () {\r\n  if (this.parent) {\r\n    //i.e. has already been drawn\r\n    this.parent.html(null);\r\n  }\r\n  delete this; //Go to work, GC!\r\n};\r\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `\n    :host {\n      height: 100%;\n      width: 100%;\n      padding: 0;\n      display: block;\n      position: relative;\n    }\n    `, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/golden-layout-host.component.ts\"],\"names\":[],\"mappings\":\";IACI;MACE,YAAY;MACZ,WAAW;MACX,UAAU;MACV,cAAc;MACd,kBAAkB;IACpB\",\"sourcesContent\":[\"\\n    :host {\\n      height: 100%;\\n      width: 100%;\\n      padding: 0;\\n      display: block;\\n      position: relative;\\n    }\\n    \"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.mapStyle{\r\n    height:100%;\r\n    width:100%;\r\n    /* height:calc(100vh - 350px); */\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    z-index: 1;\r\n    /* position: sticky !important; */\r\n}\r\n\r\n:host {\r\n  position: absolute;\r\n  overflow: hidden;\r\n  z-index: 1 !important;\r\n}\r\n\r\n.map-container {\r\n  height: 100%;\r\n  width: 100%;\r\n  position: relative;\r\n}\r\n\r\n\r\n#mapTooltip {\r\n    color:#333333;\r\n    background:#f5f5f5;\r\n    border:1px solid #cccccc;\r\n    border-radius:.25rem;\r\n    padding:.25rem;\r\n  }\r\n\r\n  .bottom-table{\r\n    font-size: calc((.5vmax));   \r\n}\r\n\r\n.OSM-credit {\r\n  position: absolute;\r\n  bottom: 7px;\r\n  left: 50px;\r\n  z-index: 2;\r\n}\r\n\r\n.OSM-credit a {\r\n  color: #4e8bb7 !important;\r\n  text-decoration: underline !important;\r\n  cursor: pointer !important;\r\n}\r\n\r\n /* Button appearance on hover */\r\n .btn-icon:hover {\r\n  transform: scale(1.1); /* Slight enlarge on hover */\r\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\r\n}\r\n\r\n.btn-icon {\r\n  margin-right: 10px;\r\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\r\n  background: white;\r\n}\r\n\r\n.flaticon-settings:before {\r\n  font-weight: 800 !important;\r\n}\r\n\r\n\r\n.flaticon-download:before {\r\n  font-weight: 800 !important;\r\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/MapComponent/map-plugin.component.css\"],\"names\":[],\"mappings\":\"AAAA;IACI,WAAW;IACX,UAAU;IACV,gCAAgC;IAChC,kBAAkB;IAClB,MAAM;IACN,SAAS;IACT,OAAO;IACP,QAAQ;IACR,UAAU;IACV,iCAAiC;AACrC;;AAEA;EACE,kBAAkB;EAClB,gBAAgB;EAChB,qBAAqB;AACvB;;AAEA;EACE,YAAY;EACZ,WAAW;EACX,kBAAkB;AACpB;;;AAGA;IACI,aAAa;IACb,kBAAkB;IAClB,wBAAwB;IACxB,oBAAoB;IACpB,cAAc;EAChB;;EAEA;IACE,yBAAyB;AAC7B;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,UAAU;EACV,UAAU;AACZ;;AAEA;EACE,yBAAyB;EACzB,qCAAqC;EACrC,0BAA0B;AAC5B;;CAEC,+BAA+B;CAC/B;EACC,qBAAqB,EAAE,4BAA4B;EACnD,oCAAoC,EAAE,qCAAqC;AAC7E;;AAEA;EACE,kBAAkB;EAClB,0CAA0C;EAC1C,iBAAiB;AACnB;;AAEA;EACE,2BAA2B;AAC7B;;;AAGA;EACE,2BAA2B;AAC7B\",\"sourcesContent\":[\".mapStyle{\\r\\n    height:100%;\\r\\n    width:100%;\\r\\n    /* height:calc(100vh - 350px); */\\r\\n    position: absolute;\\r\\n    top: 0;\\r\\n    bottom: 0;\\r\\n    left: 0;\\r\\n    right: 0;\\r\\n    z-index: 1;\\r\\n    /* position: sticky !important; */\\r\\n}\\r\\n\\r\\n:host {\\r\\n  position: absolute;\\r\\n  overflow: hidden;\\r\\n  z-index: 1 !important;\\r\\n}\\r\\n\\r\\n.map-container {\\r\\n  height: 100%;\\r\\n  width: 100%;\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n\\r\\n#mapTooltip {\\r\\n    color:#333333;\\r\\n    background:#f5f5f5;\\r\\n    border:1px solid #cccccc;\\r\\n    border-radius:.25rem;\\r\\n    padding:.25rem;\\r\\n  }\\r\\n\\r\\n  .bottom-table{\\r\\n    font-size: calc((.5vmax));   \\r\\n}\\r\\n\\r\\n.OSM-credit {\\r\\n  position: absolute;\\r\\n  bottom: 7px;\\r\\n  left: 50px;\\r\\n  z-index: 2;\\r\\n}\\r\\n\\r\\n.OSM-credit a {\\r\\n  color: #4e8bb7 !important;\\r\\n  text-decoration: underline !important;\\r\\n  cursor: pointer !important;\\r\\n}\\r\\n\\r\\n /* Button appearance on hover */\\r\\n .btn-icon:hover {\\r\\n  transform: scale(1.1); /* Slight enlarge on hover */\\r\\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n}\\r\\n\\r\\n.btn-icon {\\r\\n  margin-right: 10px;\\r\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n  background: white;\\r\\n}\\r\\n\\r\\n.flaticon-settings:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n\\r\\n.flaticon-download:before {\\r\\n  font-weight: 800 !important;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `#main-tabset {\n  height: 100%;\n}\n\n#phylocanvas {\n  height: 100%;\n}\n\nbody .ui-tabview {\n  height: 100% !important;\n}\n\nbody .ui-tabview .ui-tabview-panels {\n  height: 100% !important;\n}\n\nbody .ui-tabview .ui-tabview-panels .ui-tabview-panel {\n  height: 100% !important;\n}\n\n:root {\n  --vis-graph-node-label-background: black;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/app.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,YAAA;AACJ;;AACA;EACI,YAAA;AAEJ;;AAAA;EACI,uBAAA;AAGJ;;AADA;EACI,uBAAA;AAIJ;;AAFA;EACI,uBAAA;AAKJ;;AAFA;EACI,wCAAA;AAKJ\",\"sourcesContent\":[\"#main-tabset {\\r\\n    height: 100%;\\r\\n}\\r\\n#phylocanvas {\\r\\n    height: 100%;\\r\\n}\\r\\nbody .ui-tabview {\\r\\n    height: 100% !important;\\r\\n}\\r\\nbody .ui-tabview .ui-tabview-panels {\\r\\n    height: 100% !important;\\r\\n}\\r\\nbody .ui-tabview .ui-tabview-panels .ui-tabview-panel {\\r\\n    height: 100% !important;\\r\\n}\\r\\n\\r\\n:root {\\r\\n    --vis-graph-node-label-background: black;\\r\\n  }\\r\\n\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n  padding: 1px;\n}\n\n:host ::ng-deep .p-accordion-tab:not(.p-accordion-tab-active) .p-toggleable-content {\n  height: 0;\n  overflow: hidden;\n}\n:host ::ng-deep .p-accordion-tab.p-accordion-tab-active .p-toggleable-content {\n  height: auto !important;\n  overflow: auto !important;\n}\n\n::ng-deep .p-orderlist-list-container {\n  width: 100% !important;\n  flex: 1 1 0 !important;\n  min-width: 0 !important;\n}\n\n.aggregate-wrapper {\n  padding: 50px 20px 5px 20px;\n}\n\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1); /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\n}\n\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n}\n\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-pin:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-download:before {\n  font-weight: 800 !important;\n}\n\n#tablesContainer p-table {\n  border: 2px solid #555555;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/AggregateComponent/aggregate.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,kBAAA;EACA,gBAAA;EACA,qBAAA;EACA,YAAA;AACJ;;AAII;EACE,SAAA;EACA,gBAAA;AADN;AAMI;EACE,uBAAA;EACA,yBAAA;AAJN;;AASA;EACE,sBAAA;EACA,sBAAA;EACA,uBAAA;AANF;;AASA;EACE,2BAAA;AANF;;AASA,+BAAA;AACA;EACE,qBAAA,EAAA,4BAAA;EACA,oCAAA,EAAA,qCAAA;AANF;;AASA;EACE,kBAAA;EACA,0CAAA;AANF;;AASA;EACE,2BAAA;AANF;;AASA;EACE,2BAAA;AANF;;AASA;EACE,2BAAA;AANF;;AASA;EACE,yBAAA;AANF\",\"sourcesContent\":[\":host {\\r\\n    position: absolute;\\r\\n    overflow: hidden;\\r\\n    z-index: 1 !important;\\r\\n    padding: 1px; \\r\\n}\\r\\n\\r\\n:host ::ng-deep {\\r\\n  .p-accordion-tab:not(.p-accordion-tab-active) {\\r\\n    .p-toggleable-content {\\r\\n      height: 0;\\r\\n      overflow: hidden;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  .p-accordion-tab.p-accordion-tab-active {\\r\\n    .p-toggleable-content {\\r\\n      height: auto !important;\\r\\n      overflow: auto !important;\\r\\n    }\\r\\n  }\\r\\n}\\r\\n\\r\\n::ng-deep .p-orderlist-list-container {\\r\\n  width: 100% !important;\\r\\n  flex: 1 1 0 !important;\\r\\n  min-width: 0 !important;\\r\\n}\\r\\n\\r\\n.aggregate-wrapper {\\r\\n  padding: 50px 20px 5px 20px;\\r\\n}\\r\\n\\r\\n/* Button appearance on hover */\\r\\n.btn-icon:hover {\\r\\n  transform: scale(1.1); /* Slight enlarge on hover */\\r\\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n}\\r\\n    \\r\\n.btn-icon {\\r\\n  margin-right: 10px;\\r\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.flaticon-settings:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-pin:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-download:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n#tablesContainer p-table {\\r\\n  border: 2px solid #555555;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n  padding: 1px;\n}\n\n:host ::ng-deep .p-accordion-tab:not(.p-accordion-tab-active) .p-toggleable-content {\n  height: 0;\n  overflow: hidden;\n}\n:host ::ng-deep .p-accordion-tab.p-accordion-tab-active .p-toggleable-content {\n  height: auto !important;\n  overflow: auto !important;\n}\n\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1); /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\n}\n\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n}\n\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-pin:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-download:before {\n  font-weight: 800 !important;\n}\n\n.msa-viewer-container {\n  position: relative;\n  top: 50px;\n  left: 5px;\n  padding-right: 5px;\n}\n\n#msa-viewer {\n  overflow-y: hidden;\n  overflow-x: hidden;\n  display: flex;\n  gap: 5px;\n}\n\n.title {\n  font-size: 24px;\n  text-align: right;\n  padding-right: 20px;\n}\n\n.canvasLabels {\n  overflow-y: auto;\n  overflow-x: hidden;\n  position: relative;\n}\n\n#searchHighlight {\n  width: 1500px;\n  position: absolute;\n  height: 10px;\n  top: 0px;\n  left: 0px;\n  border: red 2px dotted;\n}\n\n#searchHighlightHolder {\n  width: 250px;\n}\n\n.searchHighlight2 {\n  background-color: #E3F2FD;\n}\n\n.triangle {\n  width: 10px;\n  position: relative;\n  left: 42px;\n  border-left: 8px transparent solid;\n  border-right: 8px transparent solid;\n  border-bottom: 16px lightgray solid;\n}\n\n#tooltipHolder {\n  display: none;\n}\n\n#tooltipAlign {\n  background-color: lightgray;\n  padding: 5px;\n  display: block;\n}\n\n.canvasHolder {\n  overflow-x: auto;\n  overflow-y: scroll;\n}\n\n#alignmentTop {\n  overflow-x: auto;\n  height: 160px;\n}\n\n.alignRow {\n  display: flex;\n}\n\n.alignName {\n  width: 200px;\n  margin-right: 5px;\n  flex: none;\n}\n\n#miniMapHolder {\n  padding: 5px 10px;\n  border: 3px black solid;\n  background-color: white;\n  margin-bottom: 10px;\n}\n\n#miniMap {\n  position: relative;\n}\n\n#miniMapTitle {\n  margin-bottom: 10px;\n}\n\n#miniMapHighlight {\n  display: none;\n  background-color: rgba(128, 128, 128, 0.4);\n  position: absolute;\n}\n\n.customColorSchemeSelection div {\n  justify-content: space-around;\n}\n\n.customColorSchemeSelection label {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.customColorSchemeSelection input {\n  width: 46.63px;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/AlignmentViewComponent/alignment-view-plugin-component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,kBAAA;EACA,gBAAA;EACA,qBAAA;EACA,YAAA;AACJ;;AAKI;EACE,SAAA;EACA,gBAAA;AAFN;AAOI;EACE,uBAAA;EACA,yBAAA;AALN;;AAUI,+BAAA;AACJ;EACE,qBAAA,EAAA,4BAAA;EACA,oCAAA,EAAA,qCAAA;AAPF;;AAUA;EACE,kBAAA;EACA,0CAAA;AAPF;;AAUA;EACE,2BAAA;AAPF;;AAUA;EACE,2BAAA;AAPF;;AAUA;EACE,2BAAA;AAPF;;AAUA;EACE,kBAAA;EACA,SAAA;EACA,SAAA;EACA,kBAAA;AAPF;;AAUA;EACE,kBAAA;EACA,kBAAA;EACA,aAAA;EACA,QAAA;AAPF;;AAUA;EACE,eAAA;EACA,iBAAA;EACA,mBAAA;AAPF;;AAUA;EACE,gBAAA;EACA,kBAAA;EACA,kBAAA;AAPF;;AAUA;EACE,aAAA;EACA,kBAAA;EACA,YAAA;EACA,QAAA;EACA,SAAA;EACA,sBAAA;AAPF;;AAUA;EACE,YAAA;AAPF;;AAUA;EACE,yBAAA;AAPF;;AAUA;EACE,WAAA;EACA,kBAAA;EACA,UAAA;EACA,kCAAA;EACA,mCAAA;EACA,mCAAA;AAPF;;AAUA;EACE,aAAA;AAPF;;AAUA;EACE,2BAAA;EACA,YAAA;EACA,cAAA;AAPF;;AAUA;EACE,gBAAA;EACA,kBAAA;AAPF;;AAUA;EACE,gBAAA;EACA,aAAA;AAPF;;AAUA;EACE,aAAA;AAPF;;AAUA;EACE,YAAA;EACA,iBAAA;EACA,UAAA;AAPF;;AAUA;EACE,iBAAA;EACA,uBAAA;EACA,uBAAA;EACA,mBAAA;AAPF;;AAUA;EACE,kBAAA;AAPF;;AAUA;EACE,mBAAA;AAPF;;AAUA;EACE,aAAA;EACA,0CAAA;EACA,kBAAA;AAPF;;AAUA;EACE,6BAAA;AAPF;;AAUA;EACE,aAAA;EACA,mBAAA;EACA,SAAA;AAPF;;AAUA;EACE,cAAA;AAPF\",\"sourcesContent\":[\":host {\\r\\n    position: absolute;\\r\\n    overflow: hidden;\\r\\n    z-index: 1 !important;\\r\\n    padding: 1px; \\r\\n    //background-color: rgb(168, 125, 211, .2);\\r\\n}\\r\\n\\r\\n:host ::ng-deep {\\r\\n  .p-accordion-tab:not(.p-accordion-tab-active) {\\r\\n    .p-toggleable-content {\\r\\n      height: 0;\\r\\n      overflow: hidden;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  .p-accordion-tab.p-accordion-tab-active {\\r\\n    .p-toggleable-content {\\r\\n      height: auto !important;\\r\\n      overflow: auto !important;\\r\\n    }\\r\\n  }\\r\\n}\\r\\n\\r\\n    /* Button appearance on hover */\\r\\n.btn-icon:hover {\\r\\n  transform: scale(1.1); /* Slight enlarge on hover */\\r\\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n}\\r\\n\\r\\n.btn-icon {\\r\\n  margin-right: 10px;\\r\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.flaticon-settings:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-pin:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-download:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.msa-viewer-container {\\r\\n  position: relative;\\r\\n  top: 50px;\\r\\n  left: 5px;\\r\\n  padding-right: 5px;\\r\\n}\\r\\n\\r\\n#msa-viewer {\\r\\n  overflow-y: hidden;\\r\\n  overflow-x: hidden;\\r\\n  display: flex;\\r\\n  gap: 5px;\\r\\n}\\r\\n\\r\\n.title {\\r\\n  font-size: 24px;\\r\\n  text-align: right;\\r\\n  padding-right: 20px;\\r\\n}\\r\\n\\r\\n.canvasLabels {\\r\\n  overflow-y: auto;\\r\\n  overflow-x: hidden;\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n#searchHighlight {\\r\\n  width: 1500px;\\r\\n  position: absolute;\\r\\n  height: 10px;\\r\\n  top: 0px;\\r\\n  left: 0px;\\r\\n  border: red 2px dotted;\\r\\n}\\r\\n\\r\\n#searchHighlightHolder{\\r\\n  width: 250px;\\r\\n}\\r\\n\\r\\n.searchHighlight2 {\\r\\n  background-color: #E3F2FD;\\r\\n}\\r\\n\\r\\n.triangle {\\r\\n  width: 10px;\\r\\n  position: relative;\\r\\n  left: 42px;\\r\\n  border-left: 8px transparent solid;\\r\\n  border-right: 8px transparent solid;\\r\\n  border-bottom: 16px lightgray solid;\\r\\n}\\r\\n\\r\\n#tooltipHolder {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n#tooltipAlign {\\r\\n  background-color: lightgray; \\r\\n  padding: 5px;\\r\\n  display: block;\\r\\n}\\r\\n\\r\\n.canvasHolder {\\r\\n  overflow-x: auto;\\r\\n  overflow-y: scroll;\\r\\n}\\r\\n\\r\\n#alignmentTop {\\r\\n  overflow-x: auto;\\r\\n  height: 160px;\\r\\n}\\r\\n\\r\\n.alignRow {\\r\\n  display: flex;\\r\\n}\\r\\n\\r\\n.alignName {\\r\\n  width: 200px;\\r\\n  margin-right: 5px;\\r\\n  flex: none;\\r\\n}\\r\\n\\r\\n#miniMapHolder {\\r\\n  padding: 5px 10px;\\r\\n  border: 3px black solid;\\r\\n  background-color: white;\\r\\n  margin-bottom: 10px;\\r\\n}\\r\\n\\r\\n#miniMap {\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n#miniMapTitle{\\r\\n  margin-bottom: 10px;\\r\\n}\\r\\n\\r\\n#miniMapHighlight {\\r\\n  display: none;\\r\\n  background-color: rgb(gray, .4);\\r\\n  position: absolute;\\r\\n}\\r\\n\\r\\n.customColorSchemeSelection div {\\r\\n  justify-content: space-around;\\r\\n}\\r\\n\\r\\n.customColorSchemeSelection label {\\r\\n  display: flex; \\r\\n  align-items: center;\\r\\n  gap:10px;\\r\\n}\\r\\n\\r\\n.customColorSchemeSelection input {\\r\\n  width: 46.63px\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n  padding: 1px;\n}\n\n:host ::ng-deep .p-accordion-tab:not(.p-accordion-tab-active) .p-toggleable-content {\n  height: 0;\n  overflow: hidden;\n}\n:host ::ng-deep .p-accordion-tab.p-accordion-tab-active .p-toggleable-content {\n  height: auto !important;\n  overflow: auto !important;\n}\n\n.bubble-wrapper {\n  padding: 50px 20px 5px 20px;\n}\n\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1); /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\n}\n\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n}\n\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-pin:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-download:before {\n  font-weight: 800 !important;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/BubbleComponent/bubble.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,kBAAA;EACA,gBAAA;EACA,qBAAA;EACA,YAAA;AACJ;;AAII;EACE,SAAA;EACA,gBAAA;AADN;AAMI;EACE,uBAAA;EACA,yBAAA;AAJN;;AAQA;EACE,2BAAA;AALF;;AAQA,+BAAA;AACA;EACE,qBAAA,EAAA,4BAAA;EACA,oCAAA,EAAA,qCAAA;AALF;;AAQA;EACE,kBAAA;EACA,0CAAA;AALF;;AAQA;EACE,2BAAA;AALF;;AAQA;EACE,2BAAA;AALF;;AAQA;EACE,2BAAA;AALF\",\"sourcesContent\":[\":host {\\r\\n    position: absolute;\\r\\n    overflow: hidden;\\r\\n    z-index: 1 !important;\\r\\n    padding: 1px; \\r\\n}\\r\\n\\r\\n:host ::ng-deep {\\r\\n  .p-accordion-tab:not(.p-accordion-tab-active) {\\r\\n    .p-toggleable-content {\\r\\n      height: 0;\\r\\n      overflow: hidden;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  .p-accordion-tab.p-accordion-tab-active {\\r\\n    .p-toggleable-content {\\r\\n      height: auto !important;\\r\\n      overflow: auto !important;\\r\\n    }\\r\\n  }\\r\\n}\\r\\n.bubble-wrapper {\\r\\n  padding: 50px 20px 5px 20px;\\r\\n}\\r\\n\\r\\n/* Button appearance on hover */\\r\\n.btn-icon:hover {\\r\\n  transform: scale(1.1); /* Slight enlarge on hover */\\r\\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n}\\r\\n    \\r\\n.btn-icon {\\r\\n  margin-right: 10px;\\r\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.flaticon-settings:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-pin:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-download:before {\\r\\n  font-weight: 800 !important;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n  padding: 1px;\n}\n\n:host ::ng-deep .p-accordion-tab:not(.p-accordion-tab-active) .p-toggleable-content {\n  height: 0;\n  overflow: hidden;\n}\n:host ::ng-deep .p-accordion-tab.p-accordion-tab-active .p-toggleable-content {\n  height: auto !important;\n  overflow: auto !important;\n}\n\n.crosstab-wrapper {\n  padding: 70px 20px 10px 20px;\n}\n\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1); /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\n}\n\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n}\n\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-pin:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-download:before {\n  font-weight: 800 !important;\n}\n\np-table {\n  border: 2px solid #555555;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/CrosstabComponent/crosstab-plugin.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,kBAAA;EACA,gBAAA;EACA,qBAAA;EACA,YAAA;AACJ;;AAII;EACE,SAAA;EACA,gBAAA;AADN;AAMI;EACE,uBAAA;EACA,yBAAA;AAJN;;AAQA;EACE,4BAAA;AALF;;AAQA,+BAAA;AACA;EACE,qBAAA,EAAA,4BAAA;EACA,oCAAA,EAAA,qCAAA;AALF;;AAQA;EACE,kBAAA;EACA,0CAAA;AALF;;AAQA;EACE,2BAAA;AALF;;AAQA;EACE,2BAAA;AALF;;AAQA;EACE,2BAAA;AALF;;AAQA;EACE,yBAAA;AALF\",\"sourcesContent\":[\":host {\\r\\n    position: absolute;\\r\\n    overflow: hidden;\\r\\n    z-index: 1 !important;\\r\\n    padding: 1px; \\r\\n}\\r\\n\\r\\n:host ::ng-deep {\\r\\n  .p-accordion-tab:not(.p-accordion-tab-active) {\\r\\n    .p-toggleable-content {\\r\\n      height: 0;\\r\\n      overflow: hidden;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  .p-accordion-tab.p-accordion-tab-active {\\r\\n    .p-toggleable-content {\\r\\n      height: auto !important;\\r\\n      overflow: auto !important;\\r\\n    }\\r\\n  }\\r\\n}\\r\\n.crosstab-wrapper {\\r\\n  padding: 70px 20px 10px 20px;\\r\\n}\\r\\n\\r\\n/* Button appearance on hover */\\r\\n.btn-icon:hover {\\r\\n  transform: scale(1.1); /* Slight enlarge on hover */\\r\\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n}\\r\\n    \\r\\n.btn-icon {\\r\\n  margin-right: 10px;\\r\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.flaticon-settings:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-pin:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-download:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\np-table {\\r\\n  border: 2px solid #555555;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.gantt-entry {\n  opacity: 0.8;\n}\n.gantt-entry:hover {\n  opacity: 1;\n}\n\n#component .tooltip {\n  visibility: hidden;\n}\n\n#component:hover .tooltip {\n  visibility: visible;\n  position: absolute;\n}\n\n#component:hover:after .tooltip {\n  position: relative;\n  left: 0;\n  top: 100%;\n  white-space: nowrap;\n}\n\n.tooltip text {\n  fill: #eeeeee;\n  font-size: 12px;\n  font-family: sans-serif;\n}\n\n.tooltip rect {\n  fill: #222222;\n  stroke: #111111;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/GanttComponent/gantt-chart/gantt-chart.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,YAAA;AACJ;AAAI;EACI,UAAA;AAER;;AACA;EACI,kBAAA;AAEJ;;AACC;EACE,mBAAA;EACA,kBAAA;AAEH;;AACC;EACC,kBAAA;EACA,OAAA;EACA,SAAA;EACA,mBAAA;AAEF;;AAEA;EACI,aAAA;EACA,eAAA;EACA,uBAAA;AACJ;;AAEG;EACC,aAAA;EACA,eAAA;AACJ\",\"sourcesContent\":[\".gantt-entry {\\r\\n    opacity: 0.8;\\r\\n    &:hover {\\r\\n        opacity: 1;\\r\\n    }\\r\\n}\\r\\n#component .tooltip {\\r\\n    visibility: hidden\\r\\n }\\r\\n \\r\\n #component:hover .tooltip {\\r\\n   visibility: visible;\\r\\n   position: absolute;\\r\\n  }\\r\\n \\r\\n #component:hover:after .tooltip{\\r\\n  position: relative;\\r\\n  left: 0;\\r\\n  top: 100%;\\r\\n  white-space: nowrap;\\r\\n }\\r\\n \\r\\n \\r\\n.tooltip text {\\r\\n    fill: #eeeeee;\\r\\n    font-size: 12px;\\r\\n    font-family: sans-serif; \\r\\n   }\\r\\n   \\r\\n   .tooltip rect {\\r\\n    fill: #222222;\\r\\n    stroke: #111111;\\r\\n   }\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n}\n\n#gantt {\n  background-color: #fff;\n}\n\n:host ::ng-deep .p-accordion-tab.p-accordion-tab-active .p-toggleable-content {\n  height: auto !important;\n  overflow: auto !important;\n}\n\np-dropdown {\n  overflow: visible !important;\n}\n\n.btn-icon:hover {\n  transform: scale(1.1); /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\n}\n\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n}\n\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-pin:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-download:before {\n  font-weight: 800 !important;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/GanttComponent/gantt-plugin.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,kBAAA;EACA,gBAAA;EACA,qBAAA;AACJ;;AAEA;EACE,sBAAA;AACF;;AAII;EACE,uBAAA;EACA,yBAAA;AADN;;AAMA;EACI,4BAAA;AAHJ;;AAMA;EACE,qBAAA,EAAA,4BAAA;EACA,oCAAA,EAAA,qCAAA;AAHF;;AAMA;EACE,kBAAA;EACA,0CAAA;AAHF;;AAMA;EACE,2BAAA;AAHF;;AAMA;EACE,2BAAA;AAHF;;AAMA;EACE,2BAAA;AAHF\",\"sourcesContent\":[\":host {\\r\\n    position: absolute;\\r\\n    overflow: hidden;\\r\\n    z-index: 1 !important;\\r\\n  }\\r\\n\\r\\n#gantt {\\r\\n  background-color: #fff;\\r\\n}\\r\\n\\r\\n:host ::ng-deep {\\r\\n  .p-accordion-tab.p-accordion-tab-active {\\r\\n    .p-toggleable-content {\\r\\n      height: auto !important;\\r\\n      overflow: auto !important;\\r\\n    }\\r\\n  }\\r\\n}\\r\\n\\r\\np-dropdown {\\r\\n    overflow: visible !important;\\r\\n}\\r\\n\\r\\n.btn-icon:hover {\\r\\n  transform: scale(1.1); /* Slight enlarge on hover */\\r\\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n}\\r\\n    \\r\\n.btn-icon {\\r\\n  margin-right: 10px;\\r\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.flaticon-settings:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-pin:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-download:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.dialogSize {\n  width: 30vw;\n  height: 150px;\n  min-width: 150px;\n}\n\n:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n  padding: 1px;\n  /*top: 37px !important;\n  left: 1px !important; \n  width: 99% !important; */\n}\n\n.p-component p-dropdown {\n  overflow: visible !important;\n}\n\n.network {\n  margin-top: 0 !important;\n  cursor: grab;\n}\n\n.ui-dropdown {\n  width: 100% !important;\n}\n\n.display-none {\n  display: none;\n}\n\n.bottom-table {\n  font-size: 0.5vmax;\n}\n\n#node-max-radius-row, #node-min-radius-row {\n  display: none;\n}\n\n.clusters path {\n  cursor: grab;\n}\n\n:host ::ng-deep .p-accordion-tab:not(.p-accordion-tab-active) .p-toggleable-content {\n  height: 0;\n  overflow: hidden;\n}\n:host ::ng-deep .p-accordion-tab.p-accordion-tab-active .p-toggleable-content {\n  height: auto !important;\n  overflow: auto !important;\n}\n\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1); /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\n}\n\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n}\n\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-pin:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-download:before {\n  font-weight: 800 !important;\n}\n\n#network-export-filetype {\n  overflow: visible !important;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/HeatmapComponent/heatmap.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,WAAA;EACA,aAAA;EACA,gBAAA;AACJ;;AAEA;EACE,kBAAA;EACA,gBAAA;EACA,qBAAA;EACA,YAAA;EACA;;0BAAA;AAGF;;AAEA;EACI,4BAAA;AACJ;;AAEA;EACE,wBAAA;EACA,YAAA;AACF;;AAEA;EACI,sBAAA;AACJ;;AAEA;EACE,aAAA;AACF;;AAEA;EACI,kBAAA;AACJ;;AAEA;EACE,aAAA;AACF;;AAEA;EAEI,YAAA;AACJ;;AAII;EACE,SAAA;EACA,gBAAA;AADN;AAMI;EACE,uBAAA;EACA,yBAAA;AAJN;;AASE,+BAAA;AACF;EACE,qBAAA,EAAA,4BAAA;EACA,oCAAA,EAAA,qCAAA;AANF;;AASA;EACE,kBAAA;EACA,0CAAA;AANF;;AASA;EACE,2BAAA;AANF;;AASA;EACE,2BAAA;AANF;;AASA;EACE,2BAAA;AANF;;AASA;EACE,4BAAA;AANF\",\"sourcesContent\":[\".dialogSize{\\r\\n    width: 30vw;\\r\\n    height: 150px;\\r\\n    min-width: 150px;\\r\\n}\\r\\n\\r\\n:host {\\r\\n  position: absolute;\\r\\n  overflow: hidden;\\r\\n  z-index: 1 !important;\\r\\n  padding: 1px;\\r\\n  /*top: 37px !important;\\r\\n  left: 1px !important; \\r\\n  width: 99% !important; */ \\r\\n}\\r\\n\\r\\n.p-component p-dropdown {\\r\\n    overflow: visible !important;\\r\\n}\\r\\n\\r\\n.network {\\r\\n  margin-top: 0 !important;\\r\\n  cursor: grab;\\r\\n}\\r\\n\\r\\n.ui-dropdown {\\r\\n    width: 100% !important;\\r\\n}\\r\\n\\r\\n.display-none {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.bottom-table{\\r\\n    font-size: calc((.5vmax));   \\r\\n}\\r\\n\\r\\n#node-max-radius-row, #node-min-radius-row {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.clusters path {\\r\\n    cursor: -webkit-grab;\\r\\n    cursor: grab;\\r\\n  }\\r\\n\\r\\n:host ::ng-deep {\\r\\n  .p-accordion-tab:not(.p-accordion-tab-active) {\\r\\n    .p-toggleable-content {\\r\\n      height: 0;\\r\\n      overflow: hidden;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  .p-accordion-tab.p-accordion-tab-active {\\r\\n    .p-toggleable-content {\\r\\n      height: auto !important;\\r\\n      overflow: auto !important;\\r\\n    }\\r\\n  }\\r\\n}\\r\\n\\r\\n  /* Button appearance on hover */\\r\\n.btn-icon:hover {\\r\\n  transform: scale(1.1); /* Slight enlarge on hover */\\r\\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n}\\r\\n\\r\\n.btn-icon {\\r\\n  margin-right: 10px;\\r\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.flaticon-settings:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-pin:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-download:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n#network-export-filetype {\\r\\n  overflow: visible !important;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `#phylocanavas {\n  height: 100%;\n}\n\n:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n  padding: 1px;\n}\n\n#tree-image-filename, #newick-string-filename {\n  height: 46.5px;\n}\n\n#phyloTooltip {\n  border-radius: 0.25rem;\n  padding: 0.25rem;\n}\n\n:host ::ng-deep .p-accordion-tab:not(.p-accordion-tab-active) .p-toggleable-content {\n  height: 0;\n  overflow: hidden;\n}\n:host ::ng-deep .p-accordion-tab.p-accordion-tab-active .p-toggleable-content {\n  height: auto !important;\n  overflow: auto !important;\n}\n\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1); /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\n}\n\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n  background: white;\n}\n\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-download:before {\n  font-weight: 800 !important;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/PhylogeneticComponent/phylogenetic-plugin.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,YAAA;AACJ;;AAEA;EACE,kBAAA;EACA,gBAAA;EACA,qBAAA;EACA,YAAA;AACF;;AAEA;EACC,cAAA;AACD;;AAEA;EACI,sBAAA;EACA,gBAAA;AACJ;;AAII;EACE,SAAA;EACA,gBAAA;AADN;AAMI;EACE,uBAAA;EACA,yBAAA;AAJN;;AASC,+BAAA;AACA;EACC,qBAAA,EAAA,4BAAA;EACA,oCAAA,EAAA,qCAAA;AANF;;AASA;EACE,kBAAA;EACA,0CAAA;EACA,iBAAA;AANF;;AASA;EACE,2BAAA;AANF;;AAUA;EACE,2BAAA;AAPF\",\"sourcesContent\":[\"#phylocanavas {\\r\\n    height: 100%;\\r\\n}\\r\\n\\r\\n:host {\\r\\n  position: absolute;\\r\\n  overflow: hidden;\\r\\n  z-index: 1 !important;\\r\\n  padding: 1px;\\r\\n}\\r\\n\\r\\n#tree-image-filename, #newick-string-filename {\\r\\n height: 46.5px;\\r\\n}\\r\\n\\r\\n#phyloTooltip {\\r\\n    border-radius: 0.25rem;\\r\\n    padding: 0.25rem;\\r\\n}\\r\\n\\r\\n:host ::ng-deep {\\r\\n  .p-accordion-tab:not(.p-accordion-tab-active) {\\r\\n    .p-toggleable-content {\\r\\n      height: 0;\\r\\n      overflow: hidden;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  .p-accordion-tab.p-accordion-tab-active {\\r\\n    .p-toggleable-content {\\r\\n      height: auto !important;\\r\\n      overflow: auto !important;\\r\\n    }\\r\\n  }\\r\\n}\\r\\n\\r\\n /* Button appearance on hover */\\r\\n .btn-icon:hover {\\r\\n  transform: scale(1.1); /* Slight enlarge on hover */\\r\\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n}\\r\\n\\r\\n.btn-icon {\\r\\n  margin-right: 10px;\\r\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n  background: white;\\r\\n}\\r\\n\\r\\n.flaticon-settings:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n\\r\\n.flaticon-download:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n  \\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n}\n\n#sankey-tooltip-container {\n  position: absolute;\n  background: lightgray;\n  border-radius: 0.25rem;\n  padding: 0.25rem;\n  z-index: 1000 !important;\n}\n\n:host ::ng-deep .p-accordion-tab:not(.p-accordion-tab-active) .p-toggleable-content {\n  height: 0;\n  overflow: hidden;\n}\n:host ::ng-deep .p-accordion-tab.p-accordion-tab-active .p-toggleable-content {\n  height: auto !important;\n  overflow: auto !important;\n}\n\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1); /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\n}\n\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n  background: white;\n}\n\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-download:before {\n  font-weight: 800 !important;\n}\n\n.custom-tooltip {\n  position: absolute;\n  background-color: white;\n  border: 1px solid #aaa;\n  box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.2);\n  padding: 8px;\n  font-size: 12px;\n  z-index: 1000;\n  pointer-events: none;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/SankeyComponent/sankey.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACE,kBAAA;EACA,gBAAA;EACA,qBAAA;AACF;;AAEA;EACI,kBAAA;EACA,qBAAA;EACA,sBAAA;EACA,gBAAA;EACA,wBAAA;AACJ;;AAII;EACE,SAAA;EACA,gBAAA;AADN;AAMI;EACE,uBAAA;EACA,yBAAA;AAJN;;AASC,+BAAA;AACA;EACC,qBAAA,EAAA,4BAAA;EACA,oCAAA,EAAA,qCAAA;AANF;;AASA;EACE,kBAAA;EACA,0CAAA;EACA,iBAAA;AANF;;AASA;EACE,2BAAA;AANF;;AAUA;EACE,2BAAA;AAPF;;AAUA;EACE,kBAAA;EACA,uBAAA;EACA,sBAAA;EACA,0CAAA;EACA,YAAA;EACA,eAAA;EACA,aAAA;EACA,oBAAA;AAPF\",\"sourcesContent\":[\":host {\\r\\n  position: absolute;\\r\\n  overflow: hidden;\\r\\n  z-index: 1 !important;\\r\\n}\\r\\n\\r\\n#sankey-tooltip-container {\\r\\n    position: absolute;\\r\\n    background: lightgray;\\r\\n    border-radius: 0.25rem;\\r\\n    padding: 0.25rem;\\r\\n    z-index: 1000 !important;\\r\\n}\\r\\n\\r\\n:host ::ng-deep {\\r\\n  .p-accordion-tab:not(.p-accordion-tab-active) {\\r\\n    .p-toggleable-content {\\r\\n      height: 0;\\r\\n      overflow: hidden;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  .p-accordion-tab.p-accordion-tab-active {\\r\\n    .p-toggleable-content {\\r\\n      height: auto !important;\\r\\n      overflow: auto !important;\\r\\n    }\\r\\n  }\\r\\n}\\r\\n\\r\\n /* Button appearance on hover */\\r\\n .btn-icon:hover {\\r\\n  transform: scale(1.1); /* Slight enlarge on hover */\\r\\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n}\\r\\n\\r\\n.btn-icon {\\r\\n  margin-right: 10px;\\r\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n  background: white;\\r\\n}\\r\\n\\r\\n.flaticon-settings:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n\\r\\n.flaticon-download:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.custom-tooltip {\\r\\n  position: absolute;\\r\\n  background-color: white;\\r\\n  border: 1px solid #aaa;\\r\\n  box-shadow: 2px 2px 6px rgba(0,0,0,0.2);\\r\\n  padding: 8px;\\r\\n  font-size: 12px;\\r\\n  z-index: 1000;\\r\\n  pointer-events: none;\\r\\n}\\r\\n  \"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n}\n\n#epiCurve {\n  padding-top: 50px;\n}\n\n#epiCurve .axis--grid .domain {\n  fill: #ddd;\n  stroke: none;\n}\n\n#epiCurve .axis--x .domain,\n#epiCurve .axis--grid .tick line {\n  stroke: #fff;\n}\n\n#epiCurve .axis--grid .tick--minor line {\n  stroke-opacity: 0.5;\n}\n\n#epiCurve-date-field {\n  width: auto;\n}\n\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1); /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\n}\n\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n  background: white;\n}\n\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-download:before {\n  font-weight: 800 !important;\n}\n\n#tool-btn-container {\n  display: flex !important;\n}\n\n.tool-btn {\n  height: 30px;\n  width: 30px !important;\n  display: block !important;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/TimelineComponent/timeline-component.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,kBAAA;EACA,gBAAA;EACA,qBAAA;AACJ;;AAEE;EACE,iBAAA;AACJ;;AACE;EACE,UAAA;EACA,YAAA;AAEJ;;AACE;;EAEE,YAAA;AAEJ;;AACE;EACE,mBAAA;AAEJ;;AAAE;EACE,WAAA;AAGJ;;AACG,+BAAA;AACF;EACG,qBAAA,EAAA,4BAAA;EACA,oCAAA,EAAA,qCAAA;AAEJ;;AACE;EACE,kBAAA;EACA,0CAAA;EACA,iBAAA;AAEJ;;AACE;EACE,2BAAA;AAEJ;;AACE;EACE,2BAAA;AAEJ;;AACE;EACE,wBAAA;AAEJ;;AACE;EACE,YAAA;EACA,sBAAA;EACA,yBAAA;AAEJ\",\"sourcesContent\":[\":host {\\r\\n    position: absolute;\\r\\n    overflow: hidden;\\r\\n    z-index: 1 !important;\\r\\n  }\\r\\n\\r\\n  #epiCurve {\\r\\n    padding-top: 50px;\\r\\n  }\\r\\n  #epiCurve .axis--grid .domain {\\r\\n    fill: #ddd;\\r\\n    stroke: none;\\r\\n  }\\r\\n  \\r\\n  #epiCurve .axis--x .domain,\\r\\n  #epiCurve .axis--grid .tick line {\\r\\n    stroke: #fff;\\r\\n  }\\r\\n  \\r\\n  #epiCurve .axis--grid .tick--minor line {\\r\\n    stroke-opacity: 0.5;\\r\\n  }\\r\\n  #epiCurve-date-field {\\r\\n    width: auto;\\r\\n  }\\r\\n\\r\\n\\r\\n   /* Button appearance on hover */\\r\\n .btn-icon:hover {\\r\\n    transform: scale(1.1); /* Slight enlarge on hover */\\r\\n    background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n  }\\r\\n  \\r\\n  .btn-icon {\\r\\n    margin-right: 10px;\\r\\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n    background: white;\\r\\n  }\\r\\n  \\r\\n  .flaticon-settings:before {\\r\\n    font-weight: 800 !important;\\r\\n  }\\r\\n  \\r\\n  .flaticon-download:before {\\r\\n    font-weight: 800 !important;\\r\\n  }\\r\\n\\r\\n  #tool-btn-container {\\r\\n    display: flex !important;\\r\\n  }\\r\\n\\r\\n  .tool-btn {\\r\\n    height: 30px;\\r\\n    width: 30px !important;\\r\\n    display: block !important;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.dialogSize {\n  width: 30vw;\n  height: 150px;\n  min-width: 150px;\n}\n\n:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n  padding: 1px;\n  /*top: 37px !important;\n  left: 1px !important; \n  width: 99% !important; */\n}\n\n::ng-deep .css-1vv8bkf-link-arrow {\n  fill: #4e5f99;\n}\n::ng-deep .css-uryleg-label-background {\n  fill: transparent !important;\n}\n::ng-deep .css-14dxyvq-background {\n  fill: transparent !important;\n}\n\n/* Ensure the container is positioned relatively to position the grid overlay correctly */\n.cytoscape-container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n\n/* Grid Overlay Styling */\n.grid-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-image: linear-gradient(to right, lightgray 1px, transparent 1px), linear-gradient(to bottom, lightgray 1px, transparent 1px);\n  background-size: 100px 100px; /* Adjust grid spacing here */\n  pointer-events: none; /* Make sure grid doesn't capture mouse events */\n  z-index: 1; /* Position grid above Cytoscape's canvas */\n  transition: opacity 0.3s ease;\n  opacity: 1;\n}\n\n.grid-overlay.hidden {\n  opacity: 0;\n}\n\n#cy {\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n}\n\n.network {\n  margin-top: 0 !important;\n  cursor: grab;\n}\n\n.ui-dropdown {\n  width: 100% !important;\n}\n\n.display-none {\n  display: none;\n}\n\n.bottom-table {\n  font-size: 0.5vmax;\n}\n\n#node-max-radius-row, #node-min-radius-row {\n  display: none;\n}\n\n.clusters path {\n  cursor: grab;\n}\n\n:host ::ng-deep .p-accordion-tab:not(.p-accordion-tab-active) .p-toggleable-content {\n  height: 0;\n  overflow: hidden;\n}\n:host ::ng-deep .p-accordion-tab.p-accordion-tab-active .p-toggleable-content {\n  height: auto !important;\n  overflow: auto !important;\n}\n\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1); /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\n}\n\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n}\n\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-pin:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-download:before {\n  font-weight: 800 !important;\n}\n\n#network-export-filename {\n  height: 42px;\n}\n\n#network-attribute-table {\n  border-spacing: 0;\n  width: 100%;\n  border: 1px solid #ddd;\n}\n\n#network-attribute-table td, #network-attribute-table th {\n  text-align: left;\n  padding: 2px;\n  border: 1px solid #ddd;\n}\n\n#network-attribute-table tr:nth-child(even) {\n  background-color: #f2f2f2;\n}\n\n#network-attribute-table tr:nth-child(odd) {\n  background-color: #fff;\n}\n\n:root {\n  --vis-graph-link-label-background: black;\n  --vis-dark-graph-link-label-background: black;\n}\n\n#nodeShapeCounts, #nodeShapeFrequencies, #polygonColorCounts, #polygonColorFrequencies {\n  width: 100%;\n  border-radius: 0;\n  display: flex;\n  justify-content: space-between;\n  gap: 15px;\n}\n\n.rhombus {\n  color: black;\n  transform: rotate(80deg);\n  display: inline-block;\n}\n\n.tag {\n  transform: rotate(90deg);\n  display: inline-block;\n}\n\n.barrel {\n  width: 12px;\n  height: 12px;\n  display: inline-block;\n  background-color: black;\n  border: 1px black solid;\n  border-radius: 4px;\n}\n\n.shapeDropdown {\n  --p-select-padding-y: 4px;\n  --p-select-padding-x: 10px;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/TwoDComponent/twoD-plugin.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,WAAA;EACA,aAAA;EACA,gBAAA;AACJ;;AAEA;EACE,kBAAA;EACA,gBAAA;EACA,qBAAA;EACA,YAAA;EACA;;0BAAA;AAGF;;AAUE;EACE,aAAA;AAPJ;AASE;EACE,4BAAA;AAPJ;AAUE;EACE,4BAAA;AARJ;;AAaA,yFAAA;AACA;EACE,kBAAA;EACA,WAAA;EACA,YAAA;AAVF;;AAaA,yBAAA;AACA;EACE,kBAAA;EACA,MAAA;EACA,OAAA;EACA,WAAA;EACA,YAAA;EACA,uIACI;EAEJ,4BAAA,EAAA,6BAAA;EACA,oBAAA,EAAA,gDAAA;EACA,UAAA,EAAA,2CAAA;EACA,6BAAA;EACA,UAAA;AAZF;;AAeA;EACE,UAAA;AAZF;;AAeA;EAEE,WAAA;EACA,YAAA;EACA,MAAA;EACA,OAAA;AAbF;;AAkBA;EACE,wBAAA;EACA,YAAA;AAfF;;AAkBA;EACI,sBAAA;AAfJ;;AAkBA;EACE,aAAA;AAfF;;AAkBA;EACI,kBAAA;AAfJ;;AAkBA;EACE,aAAA;AAfF;;AAkBA;EAEI,YAAA;AAfJ;;AAoBI;EACE,SAAA;EACA,gBAAA;AAjBN;AAsBI;EACE,uBAAA;EACA,yBAAA;AApBN;;AAyBE,+BAAA;AACF;EACE,qBAAA,EAAA,4BAAA;EACA,oCAAA,EAAA,qCAAA;AAtBF;;AAyBA;EACE,kBAAA;EACA,0CAAA;AAtBF;;AAyBA;EACE,2BAAA;AAtBF;;AAyBA;EACE,2BAAA;AAtBF;;AAyBA;EACE,2BAAA;AAtBF;;AAyBA;EACE,YAAA;AAtBF;;AAyBA;EACE,iBAAA;EACA,WAAA;EACA,sBAAA;AAtBF;;AAyBA;EACE,gBAAA;EACA,YAAA;EACA,sBAAA;AAtBF;;AAyBA;EACE,yBAAA;AAtBF;;AAyBA;EACE,sBAAA;AAtBF;;AAyBA;EACE,wCAAA;EACA,6CAAA;AAtBF;;AAyBA;EACE,WAAA;EACA,gBAAA;EACA,aAAA;EACA,8BAAA;EACA,SAAA;AAtBF;;AAyBA;EACE,YAAA;EACA,wBAAA;EACA,qBAAA;AAtBF;;AAyBA;EACE,wBAAA;EACA,qBAAA;AAtBF;;AAyBA;EACE,WAAA;EACA,YAAA;EACA,qBAAA;EACA,uBAAA;EACA,uBAAA;EACA,kBAAA;AAtBF;;AAyBA;EACE,yBAAA;EACA,0BAAA;AAtBF\",\"sourcesContent\":[\".dialogSize{\\r\\n    width: 30vw;\\r\\n    height: 150px;\\r\\n    min-width: 150px;\\r\\n}\\r\\n\\r\\n:host {\\r\\n  position: absolute;\\r\\n  overflow: hidden;\\r\\n  z-index: 1 !important;\\r\\n  padding: 1px;\\r\\n  /*top: 37px !important;\\r\\n  left: 1px !important; \\r\\n  width: 99% !important; */ \\r\\n}\\r\\n\\r\\n// :root {\\r\\n//   --vis-graph-brush-selection-opacity: 0.5; // Adjust the opacity value as needed\\r\\n//   --vis-graph-brushed-node-stroke-color: #ff0000; // Adjust the color as needed\\r\\n//   --vis-graph-brushed-node-label-text-color: #00ff00; // Adjust the color as needed\\r\\n//   --vis-graph-brushed-node-icon-fill-color: #0000ff; // Adjust the color as needed\\r\\n// }\\r\\n\\r\\n::ng-deep {\\r\\n  .css-1vv8bkf-link-arrow {\\r\\n    fill: #4e5f99;\\r\\n  }\\r\\n  .css-uryleg-label-background {\\r\\n    fill: transparent !important;\\r\\n  }\\r\\n\\r\\n  .css-14dxyvq-background {\\r\\n    fill: transparent !important;\\r\\n}\\r\\n\\r\\n}\\r\\n\\r\\n/* Ensure the container is positioned relatively to position the grid overlay correctly */\\r\\n.cytoscape-container {\\r\\n  position: relative;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n}\\r\\n\\r\\n/* Grid Overlay Styling */\\r\\n.grid-overlay {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  left: 0;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  background-image: \\r\\n      linear-gradient(to right, lightgray 1px, transparent 1px),\\r\\n      linear-gradient(to bottom, lightgray 1px, transparent 1px);\\r\\n  background-size: 100px 100px; /* Adjust grid spacing here */\\r\\n  pointer-events: none; /* Make sure grid doesn't capture mouse events */\\r\\n  z-index: 1; /* Position grid above Cytoscape's canvas */\\r\\n  transition: opacity 0.3s ease;\\r\\n  opacity: 1;\\r\\n}\\r\\n\\r\\n.grid-overlay.hidden {\\r\\n  opacity: 0;\\r\\n}\\r\\n\\r\\n#cy {\\r\\n  // position: absolute;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  top: 0;\\r\\n  left: 0;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n.network {\\r\\n  margin-top: 0 !important;\\r\\n  cursor: grab;\\r\\n}\\r\\n\\r\\n.ui-dropdown {\\r\\n    width: 100% !important;\\r\\n}\\r\\n\\r\\n.display-none {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.bottom-table{\\r\\n    font-size: calc((.5vmax));   \\r\\n}\\r\\n\\r\\n#node-max-radius-row, #node-min-radius-row {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.clusters path {\\r\\n    cursor: -webkit-grab;\\r\\n    cursor: grab;\\r\\n  }\\r\\n\\r\\n:host ::ng-deep {\\r\\n  .p-accordion-tab:not(.p-accordion-tab-active) {\\r\\n    .p-toggleable-content {\\r\\n      height: 0;\\r\\n      overflow: hidden;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  .p-accordion-tab.p-accordion-tab-active {\\r\\n    .p-toggleable-content {\\r\\n      height: auto !important;\\r\\n      overflow: auto !important;\\r\\n    }\\r\\n  }\\r\\n}\\r\\n\\r\\n  /* Button appearance on hover */\\r\\n.btn-icon:hover {\\r\\n  transform: scale(1.1); /* Slight enlarge on hover */\\r\\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n}\\r\\n\\r\\n.btn-icon {\\r\\n  margin-right: 10px;\\r\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.flaticon-settings:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-pin:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-download:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n#network-export-filename{\\r\\n  height: 42px;  \\r\\n}\\r\\n\\r\\n#network-attribute-table {\\r\\n  border-spacing: 0;\\r\\n  width: 100%;\\r\\n  border: 1px solid #ddd;\\r\\n}\\r\\n\\r\\n#network-attribute-table td, #network-attribute-table th {\\r\\n  text-align: left;\\r\\n  padding: 2px;\\r\\n  border: 1px solid #ddd;\\r\\n}\\r\\n\\r\\n#network-attribute-table tr:nth-child(even) {\\r\\n  background-color: #f2f2f2;\\r\\n}\\r\\n\\r\\n#network-attribute-table tr:nth-child(odd) {\\r\\n  background-color: #fff;\\r\\n}\\r\\n\\r\\n:root {\\r\\n  --vis-graph-link-label-background: black;\\r\\n  --vis-dark-graph-link-label-background: black;\\r\\n}\\r\\n\\r\\n#nodeShapeCounts, #nodeShapeFrequencies, #polygonColorCounts, #polygonColorFrequencies {\\r\\n  width: 100%; \\r\\n  border-radius: 0; \\r\\n  display: flex; \\r\\n  justify-content: space-between;\\r\\n  gap: 15px;\\r\\n}\\r\\n\\r\\n.rhombus {\\r\\n  color: black;\\r\\n  transform: rotate(80deg);\\r\\n  display: inline-block;\\r\\n}\\r\\n\\r\\n.tag {\\r\\n  transform: rotate(90deg);\\r\\n  display: inline-block;\\r\\n}\\r\\n\\r\\n.barrel {\\r\\n  width: 12px;\\r\\n  height: 12px;\\r\\n  display: inline-block;\\r\\n  background-color: black;\\r\\n  border: 1px black solid;\\r\\n  border-radius: 4px;\\r\\n}\\r\\n\\r\\n.shapeDropdown { \\r\\n  --p-select-padding-y: 4px;\\r\\n  --p-select-padding-x: 10px;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n}\n\n.waterfall-wrapper {\n  padding: 40px 20px 10px 20px;\n}\n\n.rowExpansionContent {\n  background-color: #E3F2FD;\n  padding: 0px 0px 16px 16px;\n}\n\n.rowExpansionContent div {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  display: block;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/WaterfallComponent/waterfall.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,kBAAA;EACA,gBAAA;EACA,qBAAA;AACJ;;AAEA;EACI,4BAAA;AACJ;;AAEA;EACI,yBAAA;EACA,0BAAA;AACJ;;AAEA;EACI,gBAAA;EACA,mBAAA;EACA,uBAAA;EACA,cAAA;AACJ\",\"sourcesContent\":[\":host {\\r\\n    position: absolute;\\r\\n    overflow: hidden;\\r\\n    z-index: 1 !important;\\r\\n}\\r\\n\\r\\n.waterfall-wrapper {\\r\\n    padding: 40px 20px 10px 20px;\\r\\n}\\r\\n\\r\\n.rowExpansionContent {\\r\\n    background-color: #E3F2FD;\\r\\n    padding: 0px 0px 16px 16px;\\r\\n}\\r\\n\\r\\n.rowExpansionContent div {\\r\\n    overflow: hidden;\\r\\n    white-space: nowrap; \\r\\n    text-overflow: ellipsis; \\r\\n    display: block;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.example-container {\n  width: 400px;\n  height: 200px;\n  margin: 12px;\n  border: 1px solid #555;\n}\n:host {\n  position: absolute;\n  overflow: hidden;\n}\nmat-drawer-content {\n  padding: 12px;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n}\n.spinner-wrapper {\n  position: fixed;\n  /* Absolute positioning relative to the viewport */\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(255, 255, 255, 0.8);\n  /* Optional background overlay */\n  z-index: 9999;\n  /* Ensures it appears above all content */\n  display: flex;\n  /* Utilizes Flexbox */\n  align-items: center;\n  /* Center vertically */\n  justify-content: center;\n  /* Center horizontally */\n}\n#file-footer {\n  z-index: 1;\n  position: absolute;\n  bottom: 15px;\n  width: 100%;\n}\n#file-prompt {\n  z-index: 1;\n  position: relative;\n}\n#alignment-preview {\n  margin: 0 15px;\n  padding: 0;\n  min-height: 115px;\n  max-height: 200px;\n  overflow-x: scroll;\n  overflow-y: auto;\n}\n#distance-metrics_chosen .chosen-choices {\n  border: 1px solid #ced4da;\n  border-radius: 0.25rem;\n}\n.dna {\n  margin: 40px auto;\n  width: 360px;\n  height: 70px;\n  perspective: 466px;\n  transform-style: preserve-3d;\n}\n.ele {\n  width: 1px;\n  height: 70px;\n  float: left;\n  margin: 0 8px;\n  border-left: 1px #b0b0b0 dashed;\n  position: relative;\n  transform: rotateX(-360deg);\n  animation: run 2s linear infinite;\n}\n.ele:before,\n.ele:after {\n  content: \"\";\n  width: 10px;\n  height: 10px;\n  background: deepskyblue;\n  border-radius: 50%;\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.ele:before {\n  top: -2px;\n  background: #000000;\n}\n.ele:after {\n  bottom: -2px;\n}\n.ele:nth-of-type(1) {\n  animation-delay: -0.15s;\n}\n.ele:nth-of-type(2) {\n  animation-delay: -0.3s;\n}\n.ele:nth-of-type(3) {\n  animation-delay: -0.45s;\n}\n.ele:nth-of-type(4) {\n  animation-delay: -0.6s;\n}\n.ele:nth-of-type(5) {\n  animation-delay: -0.75s;\n}\n.ele:nth-of-type(6) {\n  animation-delay: -0.9s;\n}\n.ele:nth-of-type(7) {\n  animation-delay: -1.05s;\n}\n.ele:nth-of-type(8) {\n  animation-delay: -1.2s;\n}\n.ele:nth-of-type(9) {\n  animation-delay: -1.35s;\n}\n.ele:nth-of-type(10) {\n  animation-delay: -1.5s;\n}\n.ele:nth-of-type(11) {\n  animation-delay: -1.65s;\n}\n.ele:nth-of-type(12) {\n  animation-delay: -1.8s;\n}\n.ele:nth-of-type(13) {\n  animation-delay: -1.95s;\n}\n.ele:nth-of-type(14) {\n  animation-delay: -2.1s;\n}\n.ele:nth-of-type(15) {\n  animation-delay: -2.25s;\n}\n.ele:nth-of-type(16) {\n  animation-delay: -2.4s;\n}\n.ele:nth-of-type(17) {\n  animation-delay: -2.55s;\n}\n.ele:nth-of-type(18) {\n  animation-delay: -2.7s;\n}\n.ele:nth-of-type(19) {\n  animation-delay: -2.85s;\n}\n.ele:nth-of-type(20) {\n  animation-delay: -3s;\n}\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1);\n  /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1);\n  /* Subtle background color on hover */\n}\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/filesComponent/files-plugin.component.less\"],\"names\":[],\"mappings\":\"AAAA;EACI,YAAA;EACA,aAAA;EACA,YAAA;EACA,sBAAA;AACJ;AAEA;EACI,kBAAA;EACA,gBAAA;AAAJ;AAGA;EACI,aAAA;EACA,aAAA;EACA,sBAAA;EACA,uBAAA;AADJ;AAIA;EACI,eAAA;EAFF,kDAAkD;EAGhD,MAAA;EACA,OAAA;EACA,QAAA;EACA,SAAA;EACA,0CAAA;EADF,gCAAgC;EAE9B,aAAA;EAAF,yCAAyC;EACvC,aAAA;EACF,qBAAqB;EAAnB,mBAAA;EAEF,sBAAsB;EADpB,uBAAA;EAGF,wBAAwB;AAC1B;AADA;EACI,UAAA;EACA,kBAAA;EACA,YAAA;EACA,WAAA;AAGJ;AAAA;EACI,UAAA;EACA,kBAAA;AAEJ;AAEA;EACI,cAAA;EACA,UAAA;EACA,iBAAA;EACA,iBAAA;EACA,kBAAA;EACA,gBAAA;AAAJ;AAGA;EACI,yBAAA;EACA,sBAAA;AADJ;AAMA;EACI,iBAAA;EACA,YAAA;EACA,YAAA;EACA,kBAAA;EACA,4BAAA;AAJJ;AAOA;EACI,UAAA;EACA,YAAA;EACA,WAAA;EACA,aAAA;EACA,+BAAA;EACA,kBAAA;EACA,2BAAA;EACA,iCAAA;AALJ;AAQA;;EAEI,WAAA;EACA,WAAA;EACA,YAAA;EACA,uBAAA;EACA,kBAAA;EACA,kBAAA;EACA,SAAA;EACA,2BAAA;AANJ;AASA;EACI,SAAA;EACA,mBAAA;AAPJ;AAUA;EACI,YAAA;AARJ;AAWA;EACI,uBAAA;AATJ;AAYA;EACI,sBAAA;AAVJ;AAaA;EACI,uBAAA;AAXJ;AAcA;EACI,sBAAA;AAZJ;AAeA;EACI,uBAAA;AAbJ;AAgBA;EACI,sBAAA;AAdJ;AAiBA;EACI,uBAAA;AAfJ;AAkBA;EACI,sBAAA;AAhBJ;AAmBA;EACI,uBAAA;AAjBJ;AAoBA;EACI,sBAAA;AAlBJ;AAqBA;EACI,uBAAA;AAnBJ;AAsBA;EACI,sBAAA;AApBJ;AAuBA;EACI,uBAAA;AArBJ;AAwBA;EACI,sBAAA;AAtBJ;AAyBA;EACI,uBAAA;AAvBJ;AA0BA;EACI,sBAAA;AAxBJ;AA2BA;EACI,uBAAA;AAzBJ;AA4BA;EACI,sBAAA;AA1BJ;AA6BA;EACI,uBAAA;AA3BJ;AA8BA;EACI,oBAAA;AA5BJ;AA+BA;EACI,2BAAA;AA7BJ;AACA,+BAA+B;AAgC/B;EACI,qBAAA;EA9BF,4BAA4B;EA+B1B,oCAAA;EA7BF,qCAAqC;AACvC;AA+BA;EACI,kBAAA;EACA,0CAAA;AA7BJ\",\"sourcesContent\":[\".example-container {\\n    width: 400px;\\n    height: 200px;\\n    margin: 12px;\\n    border: 1px solid #555;\\n}\\n\\n:host {\\n    position: absolute;\\n    overflow: hidden;\\n}\\n\\nmat-drawer-content {\\n    padding: 12px;\\n    display: flex;\\n    flex-direction: column;\\n    align-items: flex-start;\\n}\\n\\n.spinner-wrapper {\\n    position: fixed; /* Absolute positioning relative to the viewport */\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    background-color: rgba(255, 255, 255, 0.8); /* Optional background overlay */\\n    z-index: 9999; /* Ensures it appears above all content */\\n    display: flex; /* Utilizes Flexbox */\\n    align-items: center; /* Center vertically */\\n    justify-content: center; /* Center horizontally */\\n  }\\n\\n#file-footer {\\n    z-index: 1;\\n    position: absolute;\\n    bottom: 15px;\\n    width: 100%;\\n}\\n\\n#file-prompt {\\n    z-index: 1;\\n    position: relative;\\n}\\n\\n\\n#alignment-preview {\\n    margin: 0 15px;\\n    padding: 0;\\n    min-height: 115px;\\n    max-height: 200px;\\n    overflow-x: scroll;\\n    overflow-y: auto;\\n}\\n\\n#distance-metrics_chosen .chosen-choices {\\n    border: 1px solid #ced4da;\\n    border-radius: 0.25rem;\\n}\\n\\n\\n\\n.dna {\\n    margin: 40px auto;\\n    width: 360px;\\n    height: 70px;\\n    perspective: 466px;\\n    transform-style: preserve-3d;\\n}\\n\\n.ele {\\n    width: 1px;\\n    height: 70px;\\n    float: left;\\n    margin: 0 8px;\\n    border-left: 1px #b0b0b0 dashed;\\n    position: relative;\\n    transform: rotateX(-360deg);\\n    animation: run 2s linear infinite;\\n}\\n\\n.ele:before,\\n.ele:after {\\n    content: \\\"\\\";\\n    width: 10px;\\n    height: 10px;\\n    background: deepskyblue;\\n    border-radius: 50%;\\n    position: absolute;\\n    left: 50%;\\n    transform: translateX(-50%);\\n}\\n\\n.ele:before {\\n    top: -2px;\\n    background: #000000;\\n}\\n\\n.ele:after {\\n    bottom: -2px;\\n}\\n\\n.ele:nth-of-type(1) {\\n    animation-delay: -0.15s;\\n}\\n\\n.ele:nth-of-type(2) {\\n    animation-delay: -0.3s;\\n}\\n\\n.ele:nth-of-type(3) {\\n    animation-delay: -0.45s;\\n}\\n\\n.ele:nth-of-type(4) {\\n    animation-delay: -0.6s;\\n}\\n\\n.ele:nth-of-type(5) {\\n    animation-delay: -0.75s;\\n}\\n\\n.ele:nth-of-type(6) {\\n    animation-delay: -0.9s;\\n}\\n\\n.ele:nth-of-type(7) {\\n    animation-delay: -1.05s;\\n}\\n\\n.ele:nth-of-type(8) {\\n    animation-delay: -1.2s;\\n}\\n\\n.ele:nth-of-type(9) {\\n    animation-delay: -1.35s;\\n}\\n\\n.ele:nth-of-type(10) {\\n    animation-delay: -1.5s;\\n}\\n\\n.ele:nth-of-type(11) {\\n    animation-delay: -1.65s;\\n}\\n\\n.ele:nth-of-type(12) {\\n    animation-delay: -1.8s;\\n}\\n\\n.ele:nth-of-type(13) {\\n    animation-delay: -1.95s;\\n}\\n\\n.ele:nth-of-type(14) {\\n    animation-delay: -2.1s;\\n}\\n\\n.ele:nth-of-type(15) {\\n    animation-delay: -2.25s;\\n}\\n\\n.ele:nth-of-type(16) {\\n    animation-delay: -2.4s;\\n}\\n\\n.ele:nth-of-type(17) {\\n    animation-delay: -2.55s;\\n}\\n\\n.ele:nth-of-type(18) {\\n    animation-delay: -2.7s;\\n}\\n\\n.ele:nth-of-type(19) {\\n    animation-delay: -2.85s;\\n}\\n\\n.ele:nth-of-type(20) {\\n    animation-delay: -3s;\\n}\\n\\n.flaticon-settings:before {\\n    font-weight: 800 !important;\\n}\\n\\n/* Button appearance on hover */\\n.btn-icon:hover {\\n    transform: scale(1.1); /* Slight enlarge on hover */\\n    background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\n}\\n  \\n.btn-icon {\\n    margin-right: 10px;\\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host ::ng-deep .ui-multiselected-item-token,\n:host ::ng-deep .ui-multiselected-empty-token {\n  padding: 2px 4px;\n  margin: 0 0.286em 0 0;\n  display: inline-block;\n  vertical-align: middle;\n  height: 1.857em;\n}\n.color-display {\n  width: 20px;\n  height: 20px;\n  border: 1px solid #ccc;\n  display: inline-block;\n  cursor: default;\n}\n#loading-information {\n  font-family: \"Courier New\", Courier, \"Lucida Sans Typewriter\", \"Lucida Typewriter\", monospace;\n  font-size: 11px;\n  font-style: normal;\n  font-variant: normal;\n  font-weight: 400;\n  line-height: 23px;\n  padding: 10px;\n  white-space: pre-line;\n}\n/* Search */\n.autocomplete-wrapper {\n  position: relative;\n  /*border: solid 1px #EEE;*/\n  padding: 1px 2px;\n  font-family: 'Verdana', sans-serif;\n}\n.autocomplete-wrapper #search {\n  padding: 0px 0px 0px 5px;\n  margin: 0;\n  width: 100%;\n  font-size: 13px;\n}\n.autocomplete-wrapper #search:focus {\n  outline: 0;\n}\n.autocomplete-wrapper #search-results {\n  display: none;\n  position: absolute;\n  z-index: 5;\n  top: 36px;\n  left: -1px;\n  right: -1px;\n  border: solid 1px #CCC;\n  min-height: 50px;\n  max-height: 200px;\n  overflow-y: scroll;\n  list-style: none;\n  padding: 2px;\n  background: white;\n}\n.autocomplete-wrapper #search-results li {\n  padding: 5px;\n  margin: 0;\n  font-size: 13px;\n}\n.autocomplete-wrapper #search-results li:hover {\n  background: #EEE;\n  cursor: pointer;\n}\n#url-warning-div {\n  bottom: 0;\n  position: absolute;\n  width: 100%;\n  z-index: 10;\n  background-color: #f00;\n  color: #fff;\n  font-weight: 600;\n  font-size: 14px;\n  text-align: center;\n}\n#url-warning-div a {\n  color: #fff;\n}\n#search-form {\n  display: none;\n  float: right;\n  z-index: 2;\n  position: relative;\n  margin-left: auto;\n}\nlabel[for=\"search\"] {\n  color: white;\n  margin-right: 10px;\n}\n#search {\n  border-radius: 0.25rem 0 0 0.25rem;\n}\n#search-field {\n  border-radius: 0 0.25rem 0.25rem 0;\n  border-left: 0;\n  margin-left: 2px;\n}\n#casesensitivebutton,\n#wholewordbutton {\n  margin: 2px;\n  border-radius: 0.25rem;\n}\n:host ::ng-deep .ui-multiselected-item-token {\n  background: #007ad9;\n  color: #ffffff;\n}\n:host ::ng-deep .ui-multiselected-empty-token {\n  background: #d95f00;\n  color: #ffffff;\n}\n.tab-content {\n  padding-top: 15px;\n}\n.loader {\n  position: absolute;\n  left: calc(50% - 20px);\n  top: 40%;\n}\n.pointer {\n  cursor: pointer;\n}\n.about-links {\n  padding: 10px 0 10px 0;\n}\n.tabulator {\n  font-size: 12px;\n  border: none;\n}\n.tabulator .tabulator-header {\n  font-weight: normal;\n  border-bottom: 1px solid;\n  border-bottom-color: rgba(0, 0, 0, 0.12);\n  color: rgba(0, 0, 0, 0.54);\n}\n.tabulator .tabulator-header .tabulator-col {\n  height: 48px;\n  background-color: #ffffff;\n  border: none;\n  padding: 0 7px;\n}\n.tabulator-row {\n  border-bottom: 1px solid;\n  border-bottom-color: rgba(0, 0, 0, 0.12);\n  min-height: 48px;\n  vertical-align: middle;\n}\n.tabulator-row .tabulator-cell {\n  padding: 16px 7px;\n  border-right: none;\n  vertical-align: middle;\n}\n.tabulator-row .tabulator-cell:first-of-type,\n.tabulator .tabulator-header .tabulator-col:first-of-type {\n  padding-left: 24px;\n}\n.tabulator-row.tabulator-row-even {\n  background-color: #ffffff;\n}\n/* Tooltip container */\n.tooltip {\n  position: relative;\n  display: inline-block;\n  border-bottom: 1px dotted black;\n  /* If you want dots under the hoverable text */\n}\n/* Tooltip text */\n.tooltip .tooltiptext {\n  visibility: hidden;\n  width: 120px;\n  background-color: black;\n  color: #fff;\n  text-align: center;\n  padding: 5px 0;\n  border-radius: 6px;\n  /* Position the tooltip text - see examples below! */\n  position: absolute;\n  z-index: 1;\n}\n/* Show the tooltip text when you mouse over the tooltip container */\n.tooltip:hover .tooltiptext {\n  visibility: visible;\n}\n.floater {\n  border: 1px solid #cccccc;\n  border-radius: 0.25rem;\n}\n#color-transparency-wrapper {\n  display: none;\n  position: absolute;\n  z-index: 1100;\n  border-radius: 0.25rem;\n  color: #303030;\n  background-color: #f8f9fa !important;\n  padding: 4px 8px;\n  transform: rotate(270deg);\n  transform-origin: top left;\n}\n.mt-icon-toolbar {\n  width: 26px;\n  height: 26px;\n  margin-left: 5px;\n}\n.transparency-symbol {\n  cursor: pointer;\n}\n#network-statistics-wrapper {\n  display: none;\n  position: absolute;\n  bottom: 10px;\n  right: 20px;\n  z-index: 1;\n  color: #303030;\n  background-color: #f8f9fa !important;\n  border: 1px solid #c0c0c0;\n  border-radius: 0.25rem;\n}\n#network-statistics-draghandle {\n  display: none;\n  width: 100%;\n  text-align: center;\n}\n#network-statistics-table td {\n  border: none;\n  padding: 0.125rem 0.25rem;\n}\nmat-slider {\n  width: 300px;\n}\n#reveal-all {\n  background-color: #dadada;\n}\n.custom-file-label {\n  margin-left: 15px;\n  margin-right: 15px;\n}\n#timeline {\n  padding-top: 50px;\n}\n#timeline .axis--grid .domain {\n  fill: #ddd;\n  stroke: none;\n}\n#timeline .axis--x .domain,\n#timeline .axis--grid .tick line {\n  stroke: #fff;\n}\n#timeline .axis--grid .tick--minor line {\n  stroke-opacity: 0.5;\n}\n#timeline-date-field {\n  width: auto;\n}\n#global-timeline-wrapper {\n  /* background: #f8f9fa; */\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  position: absolute;\n  left: 0px;\n  bottom: 0px;\n  right: 15px;\n  z-index: 1001;\n}\n#timeline-play-button {\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  background: #f08080;\n  padding-right: 10px;\n  border-radius: 3px;\n  border: none;\n  color: white;\n  margin: 0;\n  padding: 0 12px;\n  width: 60px;\n  cursor: pointer;\n  height: 30px;\n}\n#global-timeline-field {\n  padding: 4px;\n  font-size: 1.25em;\n}\n#timeline-play:hover {\n  background-color: #696969;\n}\n.track,\n.track-inset,\n.track-overlay {\n  stroke-linecap: round;\n}\n.track {\n  stroke: #000;\n  stroke-opacity: 0.3;\n  stroke-width: 10px;\n}\n.track-inset {\n  stroke: #dcdcdc;\n  stroke-width: 8px;\n}\n.track-overlay {\n  pointer-events: stroke;\n  stroke-width: 50px;\n  stroke: transparent;\n}\n.handle {\n  fill: #fff;\n  stroke: #000;\n  cursor: grab;\n  stroke-opacity: 0.5;\n  stroke-width: 1.25px;\n}\n.p-dialog .p-dialog-header button {\n  color: #495057;\n  width: 2rem;\n  height: 2rem;\n  border-radius: 50%;\n}\n.p-dialog .p-dialog-header button:enabled:hover {\n  border-color: transparent;\n  background: #e9ecef;\n}\n#nodeColorCounts,\n#nodeColorFrequencies,\n#linkColorCounts,\n#linkColorFrequencies {\n  width: 100%;\n  border-radius: 0;\n  display: flex;\n  justify-content: space-between;\n  gap: 15px;\n}\ninput[type=\"checkbox\"] + label {\n  margin-left: 8px;\n}\nlabel.disabled {\n  color: gray;\n}\n.p-confirmdialog {\n  width: 600px !important;\n}\n.p-confirmdialog .p-dialog-header {\n  height: 24px !important;\n  padding: 4px !important;\n  border-radius: 12px 12px 0px 0px;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/microbe-trace-next-plugin.component.less\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\":host ::ng-deep .ui-multiselected-item-token,\\n:host ::ng-deep .ui-multiselected-empty-token {\\n    padding: 2px 4px;\\n    margin: 0 0.286em 0 0;\\n    display: inline-block;\\n    vertical-align: middle;\\n    height: 1.857em;\\n}\\n\\n.color-display {\\n  width: 20px;\\n  height: 20px;\\n  border: 1px solid #ccc;\\n  display: inline-block;\\n  cursor: default;\\n}\\n\\n#loading-information {\\n  font-family: \\\"Courier New\\\", Courier, \\\"Lucida Sans Typewriter\\\", \\\"Lucida Typewriter\\\", monospace;\\n  font-size: 11px;\\n  font-style: normal;\\n  font-variant: normal;\\n  font-weight: 400;\\n  line-height: 23px;\\n  padding: 10px;\\n  white-space: pre-line;\\n}\\n\\n\\n/* Search */\\n.autocomplete-wrapper {\\n  position: relative;\\n  /*border: solid 1px #EEE;*/\\n  padding: 1px 2px;\\n  font-family: 'Verdana', sans-serif;\\n}\\n.autocomplete-wrapper #search {\\n  padding: 0px 0px 0px 5px;\\n  margin: 0;\\n  width: 100%;\\n  font-size: 13px;\\n}\\n.autocomplete-wrapper #search:focus {\\n  outline: 0;\\n}\\n.autocomplete-wrapper #search-results {\\n  display: none;\\n  position: absolute;\\n  z-index: 5;\\n  top: 36px;\\n  left: -1px;\\n  right: -1px;\\n  border: solid 1px #CCC;\\n  min-height: 50px;\\n  max-height: 200px;\\n  overflow-y: scroll;\\n  list-style: none;\\n  padding: 2px;\\n  background: white;\\n}\\n.autocomplete-wrapper #search-results li {\\n  padding: 5px;\\n  margin: 0;\\n  font-size: 13px;\\n}\\n.autocomplete-wrapper #search-results li:hover {\\n  background: #EEE;\\n  cursor: pointer;\\n}\\n\\n#url-warning-div {\\n  bottom: 0;\\n  position: absolute;\\n  width: 100%;\\n  z-index: 10;\\n  background-color: #f00;\\n  color: #fff;\\n  font-weight: 600;\\n  font-size: 14px;\\n  text-align: center;\\n  a {\\n    color: #fff;\\n  }\\n}\\n\\n#search-form {\\n  display: none;\\n  float: right;\\n  z-index: 2;\\n  position: relative;\\n  margin-left: auto;\\n}\\nlabel[for=\\\"search\\\"] {\\n  color: white;\\n  margin-right: 10px;\\n}\\n#search {\\n  border-radius: 0.25rem 0 0 0.25rem;\\n}\\n#search-field {\\n  border-radius: 0 0.25rem 0.25rem 0;\\n  border-left: 0;\\n  margin-left: 2px;\\n}\\n\\n#casesensitivebutton, #wholewordbutton {\\n  margin: 2px;\\n  border-radius: 0.25rem;\\n}\\n\\n:host ::ng-deep .ui-multiselected-item-token {\\n  background: #007ad9;\\n  color: #ffffff;\\n}\\n\\n:host ::ng-deep .ui-multiselected-empty-token {\\n  background: #d95f00;\\n  color: #ffffff;\\n}\\n\\n.tab-content {\\n  padding-top: 15px;\\n}\\n\\n.loader {\\n    position: absolute;\\n    left: calc(50% - 20px);\\n    top: 40%;\\n}\\n\\n.pointer {\\n    cursor: pointer;\\n}\\n\\n.about-links {\\n  padding: 10px 0 10px 0;\\n}\\n\\n//Tabulator styles override\\n\\n.tabulator {\\n  font-size: 12px;\\n  border: none;\\n}\\n\\n.tabulator .tabulator-header {\\n  font-weight: normal;\\n  border-bottom: 1px solid;\\n  border-bottom-color: rgba(0, 0, 0, 0.12);\\n  color: rgba(0, 0, 0, 0.54);\\n}\\n\\n.tabulator .tabulator-header .tabulator-col {\\n  height: 48px;\\n  background-color: #ffffff;\\n  border: none;\\n  padding: 0 7px;\\n}\\n\\n.tabulator-row {\\n  border-bottom: 1px solid;\\n  border-bottom-color: rgba(0, 0, 0, 0.12);\\n  min-height: 48px;\\n  vertical-align: middle;\\n}\\n\\n.tabulator-row .tabulator-cell {\\n  padding: 16px 7px;\\n  border-right: none;\\n  vertical-align: middle;\\n}\\n\\n.tabulator-row .tabulator-cell:first-of-type,\\n.tabulator .tabulator-header .tabulator-col:first-of-type {\\n  padding-left: 24px;\\n}\\n\\n.tabulator-row.tabulator-row-even {\\n  background-color: #ffffff;\\n}\\n\\n/* Tooltip container */\\n.tooltip {\\n    position: relative;\\n    display: inline-block;\\n    border-bottom: 1px dotted black; /* If you want dots under the hoverable text */\\n}\\n\\n/* Tooltip text */\\n.tooltip .tooltiptext {\\n    visibility: hidden;\\n    width: 120px;\\n    background-color: black;\\n    color: #fff;\\n    text-align: center;\\n    padding: 5px 0;\\n    border-radius: 6px;\\n    /* Position the tooltip text - see examples below! */\\n    position: absolute;\\n    z-index: 1;\\n}\\n\\n/* Show the tooltip text when you mouse over the tooltip container */\\n.tooltip:hover .tooltiptext {\\n    visibility: visible;\\n}\\n\\n// color table\\n.floater {\\n    border: 1px solid #cccccc;\\n    border-radius: 0.25rem;\\n}\\n\\n#color-transparency-wrapper {\\n    display: none;\\n    position: absolute;\\n    z-index: 1100;\\n    border-radius: 0.25rem;\\n    color: #303030;\\n    background-color: #f8f9fa !important;\\n    padding: 4px 8px;\\n    transform: rotate(270deg);\\n    transform-origin: top left;\\n}\\n\\n.mt-icon-toolbar {\\n  width: 26px;\\n  height: 26px;\\n  margin-left: 5px;\\n}\\n\\n.transparency-symbol {\\n    cursor: pointer;\\n}\\n\\n#network-statistics-wrapper {\\n    display: none;\\n    position: absolute;\\n    bottom: 10px;\\n    right: 20px;\\n    z-index: 1;\\n    color: #303030;\\n    background-color: #f8f9fa !important;\\n    border: 1px solid #c0c0c0;\\n    border-radius: 0.25rem;\\n  }\\n  #network-statistics-draghandle {\\n    display: none;\\n    width: 100%;\\n    text-align: center;\\n  }\\n  #network-statistics-table td {\\n    border: none;\\n    padding: 0.125rem 0.25rem;\\n  }\\n\\n  mat-slider {\\n    width: 300px;\\n  }\\n\\n  #reveal-all {\\n    background-color: #dadada;\\n  }\\n\\n  .custom-file-label {\\n    margin-left: 15px;\\n    margin-right: 15px;\\n  }\\n\\n  #timeline {\\n    padding-top: 50px;\\n  }\\n  #timeline .axis--grid .domain {\\n    fill: #ddd;\\n    stroke: none;\\n  }\\n  \\n  #timeline .axis--x .domain,\\n  #timeline .axis--grid .tick line {\\n    stroke: #fff;\\n  }\\n  \\n  #timeline .axis--grid .tick--minor line {\\n    stroke-opacity: 0.5;\\n  }\\n  #timeline-date-field {\\n    width: auto;\\n  }\\n  \\n\\n  #global-timeline-wrapper {\\n    /* background: #f8f9fa; */\\n    border-top: 1px solid rgba(0, 0, 0, 0.1);\\n    position: absolute;\\n    left: 0px;\\n    bottom: 0px;\\n    right: 15px;\\n    z-index: 1001;\\n  }\\n  \\n  #timeline-play-button {\\n    position: absolute;\\n    top: 10px;\\n    left: 10px;\\n    background: #f08080;\\n    padding-right: 10px;\\n    border-radius: 3px;\\n    border: none;\\n    color: white;\\n    margin: 0;\\n    padding: 0 12px;\\n    width: 60px;\\n    cursor: pointer;\\n    height: 30px;\\n  }\\n  #global-timeline-field {\\n    padding: 4px;\\n    font-size: 1.25em;\\n  }\\n  #timeline-play:hover {\\n    background-color: #696969;\\n  }    \\n  .track,\\n  .track-inset,\\n  .track-overlay {\\n    stroke-linecap: round;\\n  }\\n  .track {\\n    stroke: #000;\\n    stroke-opacity: 0.3;\\n    stroke-width: 10px;\\n  }\\n  .track-inset {\\n    stroke: #dcdcdc;\\n    stroke-width: 8px;\\n  }\\n  .track-overlay {\\n    pointer-events: stroke;\\n    stroke-width: 50px;\\n    stroke: transparent;\\n    // cursor: crosshair;\\n  }\\n  .handle {\\n    fill: #fff;\\n    stroke: #000;\\n    cursor:grab;\\n    stroke-opacity: 0.5;\\n    stroke-width: 1.25px;\\n  }\\n\\n  .p-dialog .p-dialog-header button {\\n    color: #495057;\\n    width: 2rem;\\n    height: 2rem;\\n    border-radius: 50%;\\n  }\\n  .p-dialog .p-dialog-header button:enabled:hover {\\n    border-color: transparent;\\n    background: #e9ecef;\\n  }\\n\\n#nodeColorCounts, #nodeColorFrequencies, #linkColorCounts, #linkColorFrequencies {\\n  width: 100%; \\n  border-radius: 0; \\n  display: flex; \\n  justify-content: space-between;\\n  gap: 15px;\\n}\\n  \\ninput[type=\\\"checkbox\\\"] + label {\\n  margin-left: 8px;\\n}\\nlabel.disabled {\\n  color: gray;\\n}\\n\\n.p-confirmdialog {\\n  width: 600px !important;\\n }\\n.p-confirmdialog .p-dialog-header {\\n  height: 24px !important;\\n  padding: 4px !important;\\n  border-radius: 12px 12px 0px 0px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n}\n#tool-btn-container {\n  display: flex !important;\n}\n.tool-btn {\n  height: 30px;\n}\n:host ::ng-deep .ui-table-customers {\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.2), 0 1px 1px 0 rgba(0, 0, 0, 0.14), 0 2px 1px -1px rgba(0, 0, 0, 0.12);\n}\n:host ::ng-deep .ui-table-customers .customer-badge {\n  border-radius: 2px;\n  padding: 0.25em 0.5em;\n  text-transform: uppercase;\n  font-weight: 700;\n  font-size: 12px;\n  letter-spacing: 0.3px;\n}\n:host ::ng-deep .ui-table-customers .customer-badge.status-qualified {\n  background-color: #C8E6C9;\n  color: #256029;\n}\n:host ::ng-deep .ui-table-customers .customer-badge.status-unqualified {\n  background-color: #FFCDD2;\n  color: #C63737;\n}\n:host ::ng-deep .ui-table-customers .customer-badge.status-negotiation {\n  background-color: #FEEDAF;\n  color: #8A5340;\n}\n:host ::ng-deep .ui-table-customers .customer-badge.status-new {\n  background-color: #B3E5FC;\n  color: #23547B;\n}\n:host ::ng-deep .ui-table-customers .customer-badge.status-renewal {\n  background-color: #ECCFFF;\n  color: #694382;\n}\n:host ::ng-deep .ui-table-customers .customer-badge.status-proposal {\n  background-color: #FFD8B2;\n  color: #805B36;\n}\n:host ::ng-deep .ui-table-customers .flag {\n  vertical-align: middle;\n  width: 30px;\n  height: 20px;\n}\n:host ::ng-deep .ui-table-customers .ui-multiselect-representative-option {\n  display: inline-block;\n  vertical-align: middle;\n}\n:host ::ng-deep .ui-table-customers .ui-multiselect-representative-option img {\n  vertical-align: middle;\n  width: 24px;\n}\n:host ::ng-deep .ui-table-customers .ui-multiselect-representative-option span {\n  margin-top: 0.125em;\n  vertical-align: middle;\n  margin-left: 0.5em;\n}\n:host ::ng-deep .ui-table-customers .ui-paginator .ui-dropdown {\n  float: left;\n}\n:host ::ng-deep .ui-table-customers .ui-paginator .ui-paginator-current {\n  float: right;\n}\n:host ::ng-deep .ui-table-customers .ui-progressbar {\n  height: 8px;\n  background-color: #D8DADC;\n}\n:host ::ng-deep .ui-table-customers .ui-progressbar .ui-progressbar-value {\n  background-color: #00ACAD;\n}\n:host ::ng-deep .ui-table-customers .ui-column-filter {\n  display: block;\n}\n:host ::ng-deep .ui-table-customers .ui-column-filter input {\n  width: 100%;\n}\n:host ::ng-deep .ui-table-customers .ui-table-globalfilter-container {\n  float: right;\n}\n:host ::ng-deep .ui-table-customers .ui-table-globalfilter-container input {\n  width: 200px;\n}\n:host ::ng-deep .ui-table-customers .ui-datepicker {\n  min-width: 25em;\n}\n:host ::ng-deep .ui-table-customers .ui-datepicker td {\n  font-weight: 400;\n}\n:host ::ng-deep .ui-table-customers .ui-table-caption {\n  border: 0 none;\n  padding: 12px;\n  text-align: left;\n  font-size: 20px;\n}\n:host ::ng-deep .ui-table-customers .ui-paginator {\n  border: 0 none;\n  padding: 1em;\n}\n:host ::ng-deep .ui-table-customers .ui-table-thead > tr > th {\n  border: 0 none;\n  text-align: left;\n}\n:host ::ng-deep .ui-table-customers .ui-table-thead > tr > th.ui-filter-column {\n  border-top: 1px solid #c8c8c8;\n}\n:host ::ng-deep .ui-table-customers .ui-table-thead > tr > th:first-child {\n  width: 5em;\n  text-align: center;\n}\n:host ::ng-deep .ui-table-customers .ui-table-thead > tr > th:last-child {\n  width: 8em;\n  text-align: center;\n}\n:host ::ng-deep .ui-table-customers .ui-table-tbody > tr > td {\n  border: 0 none;\n  cursor: auto;\n}\n:host ::ng-deep .ui-table-customers .ui-table-tbody > tr > td:first-child {\n  width: 3em;\n  text-align: center;\n}\n:host ::ng-deep .ui-table-customers .ui-table-tbody > tr > td:last-child {\n  width: 8em;\n  text-align: center;\n}\n:host ::ng-deep .ui-table-customers .ui-dropdown-label:not(.ui-placeholder) {\n  text-transform: uppercase;\n}\n:host ::ng-deep .ui-table-customers .ui-table-tbody > tr > td .ui-column-title {\n  display: none;\n}\n.item {\n  display: inline-block;\n  background: blue;\n}\n.filterType {\n  background: transparent;\n  border-color: transparent;\n  border-width: 0px;\n  border: 0px solid transparent;\n  border-style: inset;\n  outline-style: dashed;\n  outline-color: transparent;\n}\n/* Responsive */\n@media screen and (max-width: 64em) {\n  :host ::ng-deep .ui-table.ui-table-customers .ui-table-thead > tr > th,\n  :host ::ng-deep .ui-table.ui-table-customers .ui-table-tfoot > tr > td {\n    display: none !important;\n  }\n  :host ::ng-deep .ui-table.ui-table-customers .ui-table-tbody > tr > td {\n    text-align: left;\n    display: block;\n    border: 0 none !important;\n    width: 100% !important;\n    float: left;\n    clear: left;\n    border: 0 none;\n  }\n  :host ::ng-deep .ui-table.ui-table-customers .ui-table-tbody > tr > td .ui-column-title {\n    padding: 0.4em;\n    min-width: 30%;\n    display: inline-block;\n    margin: -0.4em 1em -0.4em -0.4em;\n    font-weight: bold;\n  }\n}\n.table-wrapper {\n  padding: 70px 20px 10px 20px;\n}\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1);\n  /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1);\n  /* Subtle background color on hover */\n}\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n  background: white;\n}\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n.flaticon-download:before {\n  font-weight: 800 !important;\n}\n::ng-deep .p-datatable-scrollable-table > .p-datatable-thead {\n  z-index: 1 !important;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/TableComponent/table-plugin-component.less\"],\"names\":[],\"mappings\":\"AAAA;EACI,kBAAA;EACA,gBAAA;EACA,qBAAA;AACJ;AAEA;EACI,wBAAA;AAAJ;AAGA;EACI,YAAA;AADJ;AAKA;EACI,+GAAA;AAHJ;AAEA;EAIQ,kBAAA;EACA,qBAAA;EACA,yBAAA;EACA,gBAAA;EACA,eAAA;EACA,qBAAA;AAHR;AAKQ;EACI,yBAAA;EACA,cAAA;AAHZ;AAMQ;EACI,yBAAA;EACA,cAAA;AAJZ;AAOQ;EACI,yBAAA;EACA,cAAA;AALZ;AAQQ;EACI,yBAAA;EACA,cAAA;AANZ;AASQ;EACI,yBAAA;EACA,cAAA;AAPZ;AAUQ;EACI,yBAAA;EACA,cAAA;AARZ;AA9BA;EA2CQ,sBAAA;EACA,WAAA;EACA,YAAA;AAVR;AAnCA;EAiDQ,qBAAA;EACA,sBAAA;AAXR;AAvCA;EAqDY,sBAAA;EACA,WAAA;AAXZ;AA3CA;EA0DY,mBAAA;EACA,sBAAA;EACA,kBAAA;AAZZ;AAhDA;EAkEY,WAAA;AAfZ;AAnDA;EAsEY,YAAA;AAhBZ;AAtDA;EA2EQ,WAAA;EACA,yBAAA;AAlBR;AA1DA;EA+EY,yBAAA;AAlBZ;AA7DA;EAoFQ,cAAA;AApBR;AAhEA;EAuFY,WAAA;AApBZ;AAnEA;EA4FQ,YAAA;AAtBR;AAtEA;EA+FY,YAAA;AAtBZ;AAzEA;EAoGQ,eAAA;AAxBR;AA5EA;EAuGY,gBAAA;AAxBZ;AA/EA;EA4GQ,cAAA;EACA,aAAA;EACA,gBAAA;EACA,eAAA;AA1BR;AArFA;EAmHQ,cAAA;EACA,YAAA;AA3BR;AAzFA;EAwHQ,cAAA;EACA,gBAAA;AA5BR;AA8BQ;EACI,6BAAA;AA5BZ;AA+BQ;EACI,UAAA;EACA,kBAAA;AA7BZ;AAgCQ;EACI,UAAA;EACA,kBAAA;AA9BZ;AAxGA;EA2IQ,cAAA;EACA,YAAA;AAhCR;AAkCQ;EACI,UAAA;EACA,kBAAA;AAhCZ;AAmCQ;EACI,UAAA;EACA,kBAAA;AAjCZ;AApHA;EA0JQ,yBAAA;AAnCR;AAvHA;EA8JQ,aAAA;AApCR;AA0CA;EACI,qBAAA;EACA,gBAAA;AAxCJ;AA2CA;EACI,uBAAA;EACA,yBAAA;EACA,iBAAA;EACA,6BAAA;EAEA,mBAAA;EACA,qBAAA;EACA,0BAAA;AA1CJ;AACA,eAAe;AA6Cf;EAEQ;;IAIQ,wBAAA;EA9Cd;EA0CM;IAQQ,gBAAA;IACA,cAAA;IACA,yBAAA;IACA,sBAAA;IACA,WAAA;IACA,WAAA;IACA,cAAA;EA/Cd;EAiCM;IAiBY,cAAA;IACA,cAAA;IACA,qBAAA;IACA,gCAAA;IACA,iBAAA;EA/ClB;AACF;AAqDA;EACI,4BAAA;AAnDJ;AACA,+BAA+B;AAuD/B;EACI,qBAAA;EArDF,4BAA4B;EAuD1B,oCAAA;EArDF,qCAAqC;AACvC;AAwDA;EACI,kBAAA;EACA,0CAAA;EACA,iBAAA;AAtDJ;AAyDA;EACI,2BAAA;AAvDJ;AA0DA;EACI,2BAAA;AAxDJ;AA2DA;EACI,qBAAA;AAzDJ\",\"sourcesContent\":[\":host {\\n    position: absolute;\\n    overflow: hidden;\\n    z-index: 1 !important;\\n}\\n\\n#tool-btn-container {\\n    display: flex !important;\\n}\\n\\n.tool-btn {\\n    height: 30px;\\n}\\n\\n\\n:host ::ng-deep .ui-table-customers {\\n    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.2), 0 1px 1px 0 rgba(0, 0, 0, 0.14), 0 2px 1px -1px rgba(0, 0, 0, 0.12);\\n\\n    .customer-badge {\\n        border-radius: 2px;\\n        padding: .25em .5em;\\n        text-transform: uppercase;\\n        font-weight: 700;\\n        font-size: 12px;\\n        letter-spacing: .3px;\\n\\n        &.status-qualified {\\n            background-color: #C8E6C9;\\n            color: #256029;\\n        }\\n\\n        &.status-unqualified {\\n            background-color: #FFCDD2;\\n            color: #C63737;\\n        }\\n\\n        &.status-negotiation {\\n            background-color: #FEEDAF;\\n            color: #8A5340;\\n        }\\n\\n        &.status-new {\\n            background-color: #B3E5FC;\\n            color: #23547B;\\n        }\\n\\n        &.status-renewal {\\n            background-color: #ECCFFF;\\n            color: #694382;\\n        }\\n\\n        &.status-proposal {\\n            background-color: #FFD8B2;\\n            color: #805B36;\\n        }\\n    }\\n\\n    .flag {\\n        vertical-align: middle;\\n        width: 30px;\\n        height: 20px;\\n    }\\n\\n    .ui-multiselect-representative-option {\\n        display: inline-block;\\n        vertical-align: middle;\\n\\n        img {\\n            vertical-align: middle;\\n            width: 24px;\\n        }\\n\\n        span {\\n            margin-top: .125em;\\n            vertical-align: middle;\\n            margin-left: .5em\\n        }\\n    }\\n\\n    .ui-paginator {\\n        .ui-dropdown {\\n            float: left;\\n        }\\n\\n        .ui-paginator-current {\\n            float: right;\\n        }\\n    }\\n\\n    .ui-progressbar {\\n        height: 8px;\\n        background-color: #D8DADC;\\n\\n        .ui-progressbar-value {\\n            background-color: #00ACAD;\\n        }\\n    }\\n\\n    .ui-column-filter {\\n        display: block;\\n\\n        input {\\n            width: 100%;\\n        }\\n    }\\n\\n    .ui-table-globalfilter-container {\\n        float: right;\\n\\n        input {\\n            width: 200px;\\n        }\\n    }\\n\\n    .ui-datepicker {\\n        min-width: 25em;\\n\\n        td {\\n            font-weight: 400;\\n        }\\n    }\\n\\n    .ui-table-caption {\\n        border: 0 none;\\n        padding: 12px;\\n        text-align: left;\\n        font-size: 20px;\\n    }\\n\\n    .ui-paginator {\\n        border: 0 none;\\n        padding: 1em;\\n    }\\n\\n    .ui-table-thead>tr>th {\\n        border: 0 none;\\n        text-align: left;\\n\\n        &.ui-filter-column {\\n            border-top: 1px solid #c8c8c8;\\n        }\\n\\n        &:first-child {\\n            width: 5em;\\n            text-align: center;\\n        }\\n\\n        &:last-child {\\n            width: 8em;\\n            text-align: center;\\n        }\\n    }\\n\\n    .ui-table-tbody>tr>td {\\n        border: 0 none;\\n        cursor: auto;\\n\\n        &:first-child {\\n            width: 3em;\\n            text-align: center;\\n        }\\n\\n        &:last-child {\\n            width: 8em;\\n            text-align: center;\\n        }\\n    }\\n\\n    .ui-dropdown-label:not(.ui-placeholder) {\\n        text-transform: uppercase;\\n    }\\n\\n    .ui-table-tbody>tr>td .ui-column-title {\\n        display: none;\\n    }\\n}\\n\\n.wrapper {}\\n\\n.item {\\n    display: inline-block;\\n    background: blue;\\n}\\n\\n.filterType {\\n    background: transparent;\\n    border-color: transparent;\\n    border-width: 0px;\\n    border: 0px solid transparent;\\n\\n    border-style: inset;\\n    outline-style: dashed;\\n    outline-color: transparent;\\n}\\n\\n/* Responsive */\\n@media screen and (max-width: 64em) {\\n    :host ::ng-deep .ui-table {\\n        &.ui-table-customers {\\n\\n            .ui-table-thead>tr>th,\\n            .ui-table-tfoot>tr>td {\\n                display: none !important;\\n            }\\n\\n            .ui-table-tbody>tr>td {\\n                text-align: left;\\n                display: block;\\n                border: 0 none !important;\\n                width: 100% !important;\\n                float: left;\\n                clear: left;\\n                border: 0 none;\\n\\n                .ui-column-title {\\n                    padding: .4em;\\n                    min-width: 30%;\\n                    display: inline-block;\\n                    margin: -.4em 1em -.4em -.4em;\\n                    font-weight: bold;\\n                }\\n            }\\n        }\\n    }\\n}\\n\\n.table-wrapper {\\n    padding: 70px 20px 10px 20px;\\n}\\n\\n\\n/* Button appearance on hover */\\n.btn-icon:hover {\\n    transform: scale(1.1);\\n    /* Slight enlarge on hover */\\n    background-color: rgba(0, 0, 0, 0.1);\\n    /* Subtle background color on hover */\\n}\\n\\n.btn-icon {\\n    margin-right: 10px;\\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\n    background: white;\\n}\\n\\n.flaticon-settings:before {\\n    font-weight: 800 !important;\\n}\\n\\n.flaticon-download:before {\\n    font-weight: 800 !important;\\n}\\n\\n::ng-deep .p-datatable-scrollable-table > .p-datatable-thead { \\n    z-index: 1 !important; \\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","var map = {\n\t\"./af\": 85637,\n\t\"./af.js\": 85637,\n\t\"./ar\": 6777,\n\t\"./ar-dz\": 74508,\n\t\"./ar-dz.js\": 74508,\n\t\"./ar-kw\": 67504,\n\t\"./ar-kw.js\": 67504,\n\t\"./ar-ly\": 95373,\n\t\"./ar-ly.js\": 95373,\n\t\"./ar-ma\": 92412,\n\t\"./ar-ma.js\": 92412,\n\t\"./ar-ps\": 78823,\n\t\"./ar-ps.js\": 78823,\n\t\"./ar-sa\": 36670,\n\t\"./ar-sa.js\": 36670,\n\t\"./ar-tn\": 36448,\n\t\"./ar-tn.js\": 36448,\n\t\"./ar.js\": 6777,\n\t\"./az\": 23009,\n\t\"./az.js\": 23009,\n\t\"./be\": 28299,\n\t\"./be.js\": 28299,\n\t\"./bg\": 4685,\n\t\"./bg.js\": 4685,\n\t\"./bm\": 11171,\n\t\"./bm.js\": 11171,\n\t\"./bn\": 23590,\n\t\"./bn-bd\": 5841,\n\t\"./bn-bd.js\": 5841,\n\t\"./bn.js\": 23590,\n\t\"./bo\": 54309,\n\t\"./bo.js\": 54309,\n\t\"./br\": 54130,\n\t\"./br.js\": 54130,\n\t\"./bs\": 8033,\n\t\"./bs.js\": 8033,\n\t\"./ca\": 55294,\n\t\"./ca.js\": 55294,\n\t\"./cs\": 53028,\n\t\"./cs.js\": 53028,\n\t\"./cv\": 5807,\n\t\"./cv.js\": 5807,\n\t\"./cy\": 70342,\n\t\"./cy.js\": 70342,\n\t\"./da\": 38269,\n\t\"./da.js\": 38269,\n\t\"./de\": 11489,\n\t\"./de-at\": 42123,\n\t\"./de-at.js\": 42123,\n\t\"./de-ch\": 17757,\n\t\"./de-ch.js\": 17757,\n\t\"./de.js\": 11489,\n\t\"./dv\": 28152,\n\t\"./dv.js\": 28152,\n\t\"./el\": 7687,\n\t\"./el.js\": 7687,\n\t\"./en-au\": 46668,\n\t\"./en-au.js\": 46668,\n\t\"./en-ca\": 76798,\n\t\"./en-ca.js\": 76798,\n\t\"./en-gb\": 53615,\n\t\"./en-gb.js\": 53615,\n\t\"./en-ie\": 91364,\n\t\"./en-ie.js\": 91364,\n\t\"./en-il\": 79907,\n\t\"./en-il.js\": 79907,\n\t\"./en-in\": 70533,\n\t\"./en-in.js\": 70533,\n\t\"./en-nz\": 33190,\n\t\"./en-nz.js\": 33190,\n\t\"./en-sg\": 51096,\n\t\"./en-sg.js\": 51096,\n\t\"./eo\": 3962,\n\t\"./eo.js\": 3962,\n\t\"./es\": 37726,\n\t\"./es-do\": 65010,\n\t\"./es-do.js\": 65010,\n\t\"./es-mx\": 63654,\n\t\"./es-mx.js\": 63654,\n\t\"./es-us\": 59043,\n\t\"./es-us.js\": 59043,\n\t\"./es.js\": 37726,\n\t\"./et\": 25343,\n\t\"./et.js\": 25343,\n\t\"./eu\": 90728,\n\t\"./eu.js\": 90728,\n\t\"./fa\": 60787,\n\t\"./fa.js\": 60787,\n\t\"./fi\": 71771,\n\t\"./fi.js\": 71771,\n\t\"./fil\": 45335,\n\t\"./fil.js\": 45335,\n\t\"./fo\": 69761,\n\t\"./fo.js\": 69761,\n\t\"./fr\": 1670,\n\t\"./fr-ca\": 28991,\n\t\"./fr-ca.js\": 28991,\n\t\"./fr-ch\": 97280,\n\t\"./fr-ch.js\": 97280,\n\t\"./fr.js\": 1670,\n\t\"./fy\": 24203,\n\t\"./fy.js\": 24203,\n\t\"./ga\": 69858,\n\t\"./ga.js\": 69858,\n\t\"./gd\": 38605,\n\t\"./gd.js\": 38605,\n\t\"./gl\": 27365,\n\t\"./gl.js\": 27365,\n\t\"./gom-deva\": 33896,\n\t\"./gom-deva.js\": 33896,\n\t\"./gom-latn\": 95587,\n\t\"./gom-latn.js\": 95587,\n\t\"./gu\": 97950,\n\t\"./gu.js\": 97950,\n\t\"./he\": 92029,\n\t\"./he.js\": 92029,\n\t\"./hi\": 51897,\n\t\"./hi.js\": 51897,\n\t\"./hr\": 29816,\n\t\"./hr.js\": 29816,\n\t\"./hu\": 22253,\n\t\"./hu.js\": 22253,\n\t\"./hy-am\": 28196,\n\t\"./hy-am.js\": 28196,\n\t\"./id\": 51307,\n\t\"./id.js\": 51307,\n\t\"./is\": 95474,\n\t\"./is.js\": 95474,\n\t\"./it\": 23099,\n\t\"./it-ch\": 45807,\n\t\"./it-ch.js\": 45807,\n\t\"./it.js\": 23099,\n\t\"./ja\": 19127,\n\t\"./ja.js\": 19127,\n\t\"./jv\": 30182,\n\t\"./jv.js\": 30182,\n\t\"./ka\": 10758,\n\t\"./ka.js\": 10758,\n\t\"./kk\": 93444,\n\t\"./kk.js\": 93444,\n\t\"./km\": 72034,\n\t\"./km.js\": 72034,\n\t\"./kn\": 46223,\n\t\"./kn.js\": 46223,\n\t\"./ko\": 83064,\n\t\"./ko.js\": 83064,\n\t\"./ku\": 8714,\n\t\"./ku-kmr\": 10961,\n\t\"./ku-kmr.js\": 10961,\n\t\"./ku.js\": 8714,\n\t\"./ky\": 12062,\n\t\"./ky.js\": 12062,\n\t\"./lb\": 84796,\n\t\"./lb.js\": 84796,\n\t\"./lo\": 19279,\n\t\"./lo.js\": 19279,\n\t\"./lt\": 106,\n\t\"./lt.js\": 106,\n\t\"./lv\": 11840,\n\t\"./lv.js\": 11840,\n\t\"./me\": 42240,\n\t\"./me.js\": 42240,\n\t\"./mi\": 13588,\n\t\"./mi.js\": 13588,\n\t\"./mk\": 15518,\n\t\"./mk.js\": 15518,\n\t\"./ml\": 37823,\n\t\"./ml.js\": 37823,\n\t\"./mn\": 98657,\n\t\"./mn.js\": 98657,\n\t\"./mr\": 61285,\n\t\"./mr.js\": 61285,\n\t\"./ms\": 43014,\n\t\"./ms-my\": 86253,\n\t\"./ms-my.js\": 86253,\n\t\"./ms.js\": 43014,\n\t\"./mt\": 20167,\n\t\"./mt.js\": 20167,\n\t\"./my\": 47940,\n\t\"./my.js\": 47940,\n\t\"./nb\": 50014,\n\t\"./nb.js\": 50014,\n\t\"./ne\": 49023,\n\t\"./ne.js\": 49023,\n\t\"./nl\": 34208,\n\t\"./nl-be\": 71412,\n\t\"./nl-be.js\": 71412,\n\t\"./nl.js\": 34208,\n\t\"./nn\": 81354,\n\t\"./nn.js\": 81354,\n\t\"./oc-lnc\": 40870,\n\t\"./oc-lnc.js\": 40870,\n\t\"./pa-in\": 80389,\n\t\"./pa-in.js\": 80389,\n\t\"./pl\": 7342,\n\t\"./pl.js\": 7342,\n\t\"./pt\": 34774,\n\t\"./pt-br\": 73003,\n\t\"./pt-br.js\": 73003,\n\t\"./pt.js\": 34774,\n\t\"./ro\": 85333,\n\t\"./ro.js\": 85333,\n\t\"./ru\": 73451,\n\t\"./ru.js\": 73451,\n\t\"./sd\": 66302,\n\t\"./sd.js\": 66302,\n\t\"./se\": 59682,\n\t\"./se.js\": 59682,\n\t\"./si\": 80582,\n\t\"./si.js\": 80582,\n\t\"./sk\": 4348,\n\t\"./sk.js\": 4348,\n\t\"./sl\": 95337,\n\t\"./sl.js\": 95337,\n\t\"./sq\": 39358,\n\t\"./sq.js\": 39358,\n\t\"./sr\": 50683,\n\t\"./sr-cyrl\": 69382,\n\t\"./sr-cyrl.js\": 69382,\n\t\"./sr.js\": 50683,\n\t\"./ss\": 51156,\n\t\"./ss.js\": 51156,\n\t\"./sv\": 29855,\n\t\"./sv.js\": 29855,\n\t\"./sw\": 18536,\n\t\"./sw.js\": 18536,\n\t\"./ta\": 15373,\n\t\"./ta.js\": 15373,\n\t\"./te\": 37809,\n\t\"./te.js\": 37809,\n\t\"./tet\": 61297,\n\t\"./tet.js\": 61297,\n\t\"./tg\": 92527,\n\t\"./tg.js\": 92527,\n\t\"./th\": 85862,\n\t\"./th.js\": 85862,\n\t\"./tk\": 79331,\n\t\"./tk.js\": 79331,\n\t\"./tl-ph\": 44387,\n\t\"./tl-ph.js\": 44387,\n\t\"./tlh\": 3592,\n\t\"./tlh.js\": 3592,\n\t\"./tr\": 79732,\n\t\"./tr.js\": 79732,\n\t\"./tzl\": 99570,\n\t\"./tzl.js\": 99570,\n\t\"./tzm\": 83553,\n\t\"./tzm-latn\": 7699,\n\t\"./tzm-latn.js\": 7699,\n\t\"./tzm.js\": 83553,\n\t\"./ug-cn\": 25674,\n\t\"./ug-cn.js\": 25674,\n\t\"./uk\": 69974,\n\t\"./uk.js\": 69974,\n\t\"./ur\": 45773,\n\t\"./ur.js\": 45773,\n\t\"./uz\": 357,\n\t\"./uz-latn\": 77135,\n\t\"./uz-latn.js\": 77135,\n\t\"./uz.js\": 357,\n\t\"./vi\": 20043,\n\t\"./vi.js\": 20043,\n\t\"./x-pseudo\": 40767,\n\t\"./x-pseudo.js\": 40767,\n\t\"./yo\": 80150,\n\t\"./yo.js\": 80150,\n\t\"./zh-cn\": 21828,\n\t\"./zh-cn.js\": 21828,\n\t\"./zh-hk\": 86644,\n\t\"./zh-hk.js\": 86644,\n\t\"./zh-mo\": 79305,\n\t\"./zh-mo.js\": 79305,\n\t\"./zh-tw\": 31860,\n\t\"./zh-tw.js\": 31860\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 35358;"],"names":["NgModule","RouterModule","MicrobeTraceNextHomeComponent","routes","path","component","AppRoutingModule","__decorate","imports","forRoot","exports","Component","AppComponent","constructor","title","selector","template","__NG_CLI_RESOURCE__0","BrowserModule","BrowserAnimationsModule","CommonModule","Lara","providePrimeNG","$","provideHttpClient","withInterceptorsFromDi","withJsonpSupport","FormsModule","UtilsModule","GoldenLayoutComponentService","GoldenLayoutHostComponent","ButtonModule","TableModule","FileUploadModule","ListboxModule","RadioButtonModule","CalendarModule","PaginatorModule","ProgressBarModule","ConfirmDialogModule","DropdownModule","AccordionModule","SidebarModule","MultiSelectModule","SliderModule","TabViewModule","SelectButtonModule","TreeModule","DialogModule","OrderListModule","CheckboxModule","AppSessionService","AppUiCustomizationService","AppUrlService","FilesComponent","PhylogeneticComponent","TimelineComponent","TwoDComponent","CoreModule","TableComponent","MapComponent","AlignmentViewComponent","LeafletModule","LeafletMarkerClusterModule","MatButtonModule","MatInputModule","MatMenuModule","MatToolbarModule","MatSliderModule","DndDirective","MatSelectModule","MatIconModule","MatProgressSpinnerModule","CrosstabComponent","AggregateComponent","BubbleComponent","TooltipModule","TabsModule","ModalModule","BsDropdownModule","PopoverModule","GanttComponent","GanttChartComponent","GanttChartService","HeatmapComponent","WaterfallComponent","GoogleTagManagerModule","SankeyComponent","PlotlyJS","PlotlyModule","plotlyjs","window","routerOptions","TestedComponent","AppModule","declarations","bootstrap","id","providers","theme","preset","options","darkModeSelector","Directive","InjectionToken","BaseComponentDirective","rootHtmlElement","setPositionAndSize","left","top","width","height","style","numberToPixels","setVisibility","visible","display","setZIndex","value","zIndex","toString","HTMLElement","GoldenLayoutContainerTokenName","GoldenLayoutContainerInjectionToken","REFERENCE","HBX2","WATERMARK","Injectable","d3","ColorMappingService","createNodeColorMap","nodes","nodeColorVariable","nodeColors","nodeAlphas","nodeColorsTable","nodeColorsTableKeys","nodeColorsTableHistory","debugMode","uniformMap","aggregates","colorMap","scaleOrdinal","domain","alphaMap","updatedNodeColors","updatedNodeAlphas","updatedColorsTable","updatedColorsTableKeys","updatedColorsTableHistory","console","log","forEach","d","val","distinctValues","Object","keys","length","expandedColors","neededTimes","Math","ceil","concat","Array","fill","historyKeys","i","indexInHistory","indexOf","createLinkColorMap","links","linkColorVariable","linkColors","linkAlphas","linkColorsTable","linkColorsTableKeys","uniformLinkColor","updatedLinkColors","updatedLinkAlphas","updatedLinkColorsTable","updatedLinkColorsTableKeys","multiLinkCount","l","toLowerCase","origin","o","key","createPolygonColorMap","polygonGroups","polygonColors","polygonAlphas","updatedPolygonColors","updatedPolygonAlphas","sort","a","b","values","map","g","group","index","expanded","contrastColor","hexcolor","r","parseInt","substr","yiq","providedIn","BehaviorSubject","Subject","CommonStoreService","_linkThreshold$","linkThreshold$","asObservable","_networkRendered$","networkRendered$","_loadingMessageUpdated$","loadingMessageUpdated$","_networkUpdated$","networkUpdated$","_settingsLoaded$","settingsLoaded$","_metricChanged$","metricChanged$","_sessionDestroyed$","sessionDestroyed$","_newSession$","newSession$","_styleFileApplied$","styleFileApplied$","_tableCleared$","tableCleared$","_statisticsChanged$","statisticsChanged$","_FP_removeFiles$","FP_removeFiles$","currentThresholdStepSize","_clusterUpdate$","clusterUpdate$","updateValue","subject","newValue","next","triggerClusterUpdate","linkThresholdValue","setLinkThreshold","newThreshold","networkRenderedValue","setNetworkRendered","isRendered","loadingMessageUpdatedValue","setLoadingMessageUpdated","message","networkUpdatedValue","setNetworkUpdated","isUpdated","settingsLoadedValue","setSettingsLoaded","loaded","metricChangedValue","setMetricChanged","newMetric","sessionDestroyedValue","setSessionDestroyed","newSessionValue","setNewSession","setStyleFileApplied","tableClearedValue","setTableCleared","statisticsChangedValue","setStatisticsChanged","FP_removeFilesValue","setFP_removeFiles","updatecurrentThresholdStepSize","distanceMetric","currentThresholdStepSizeValue","Output","EventEmitter","Injector","Observable","firstValueFrom","patristic","Papa","_","moment","WorkerModule","LocalStorageService","AuspiceHandler","AppComponentBase","MicrobeTraceNextVisuals","HttpClient","WorkerComputeService","CommonService","setLinkTableElement","element","linkElementSource","setNodeTableElement","nodeElementSource","injector","localStorageService","visuals","http","store","colorMappingService","workerComputeService","LoadViewEvent","decoder","TextDecoder","r01","random","activeTab","thirtyColorPalette","polygonPalette","currentLinkTableElement","currentNodeTableElement","_debouncedUpdateNetworkVisuals","debounce","updateNetworkVisuals","GlobalSettingsModel","SelectedColorNodesByVariable","SelectedColorLinksByVariable","SelectedNodeColorVariable","SelectedLinkColorVariable","SelectedPruneWithTypesVariable","SelectedStatisticsTypesVariable","SelectedClusterMinimumSizeVariable","SelectedLinkSortVariable","SelectedLinkThresholdVariable","SelectedDistanceMetricVariable","SelectedLinkColorTableTypesVariable","SelectedNodeColorTableTypesVariable","SelectedColorVariable","SelectedBackgroundColorVariable","SelectedApplyStyleVariable","SelectedRevealTypesVariable","demoNetworkRendered","dataSkeleton","unoNodes","unoLinks","clusters","nodeFields","nodeExclusions","linkFields","clusterFields","nodeFilter","linkFilter","clusterFilter","nodeFilteredValues","linkFilteredValues","clusterFilteredValues","nodeTableColumns","linkTableColumns","clusterTableColumns","tree","newickString","reference","watermark","HXB2","defaultWidgets","sessionSkeleton","data","files","layout","content","type","messages","tabLoaded","meta","loadTime","readyTime","Date","now","startTime","anySequences","network","allPinned","timelinePinned","timelineNodes","initialLoad","launched","isFullyLoaded","rendered","rendering","settingsLoaded","state","timeStart","timeEnd","timeTarget","schemePaired","linkValueNames","nodeSymbols","nodeSymbolsTable","nodeSymbolsTableKeys","nodeValueNames","polygonValueNames","overwrite","widgets","timeline","warnings","tempSkeleton","componentCache","mapData","matrix","messageTimeout","linkAlphaMap","session","linkColorMap","nodeAlphaMap","nodeColorMap","nodeSymbolMap","polygonAlphaMap","polygonColorMap","trees","temp","hasSeq","x","seq","includes","getNetworkNodes","n","out","node","push","JSON","parse","stringify","computer","resetData","ngOnInit","initialize","reset","capitalize","s","charAt","toUpperCase","slice","clearData","updateLegacyNodeSymbols","defaultNode","_id","selected","cluster","degree","hasDistance","cleanupData","onNewSession","onSessionDestroyed","onStyleFileApplied","onTableCleared","tableId","onStatisticsChanged","statisticsType","onlyUnique","self","container","returnValue","pos","filterXSS","t","e","argType","tempT","replace","isNumber","updateNodePosition","nodeId","newPosition","nodeToUpdate","find","y","warn","addNode","newNode","check","trim","uniq","assign","newElement","prototype","hasOwnProperty","call","addLink","newLink","serv","source","target","ids","linkIsNew","sdlinks","oldLink","myorigin","filter","globalOrder","distanceOrigin","directed","merge","seen","len","j","item","getSelectedNode","getColorByIndex","variable","color","convertToGraphDataArray","microbeData","label","nodeSize","borderWidth","link","chapter","distance","linkWidth","processSVG","svg","$xml","document","getElementById","each","$node","gephid","attr","size","parseFloat","$link","coords","split","base","$l","findIndex","abs","runHamsters","processJSON","json","extension","result","error","applySession","version","applyGHOST","applyHIVTrace","stashObject","_this","_asyncToGenerator","prop","tabs","templateRef","tabTitle","isActive","componentRef","oldSession","m","v","processData","geoJSONLayerName","geoJSON","applyStyle","finishUp","hivtrace","patient_attributes","metric","sequences","ghost","genotypes","dist","getURL","params","URLSearchParams","location","search","get","applyAuspice","auspice","Promise","resolve","auspiceHandler","auspiceData","run","openAuspiceUrl","url","auspiceDataHolder","subscribe","updateStatistics","decode","parseFASTA","text","fastaWorker","getParseFastaWorker","postMessage","sub","onmessage","response","Uint8Array","start","toLocaleString","terminate","unsubscribe","fromWorker","worker","observer","messageHandler","event","errorHandler","addEventListener","removeEventListener","auspiceCallBack","nodeCount","exec","nodeKeys","linkCount","generateSeqs","idPrefix","count","snps","seed","sampleCodons","sampleSNPs","sample","vec","nCodons","samples","idx","floor","seqs","randomCodonSet","join","oldseed","replacementCodonSet","newseed","addedSNPs","randomSNP","locOfSNP","align","aligner","referenceLength","alignWorker","getAlignWorker","subset","minPadding","Infinity","_seq","_padding","repeat","substring","padEnd","computeConsensus","consensusWorker","getConsensusWorker","consensus","computeAmbiguityCounts","subsetLength","ambiguityWorker","getAmbiguityCountsWorker","dists","Float32Array","counts","_ambiguity","computeConsensusDistances","nodesLength","Uint16Array","_diff","computeLinks","k","linksWorker","getLinksWorker","strategy","threshold","sourceID","targetID","getDM","labels","dm","treeObj","parseNewick","toMatrix","row","computeTree","toNewick","then","treeWorker","getTreeWorker","round","treeString","parseJSON","computeDirectionality","directionalityWorker","getDirectionalityWorker","flips","output","fliplink","fliptemp","computeMST","reject","found","mstWorker","getMSTWorker","epsilon","numLinks","nn","cloneDeep","computeNN","computeTriangulation","bind","catch","_this2","_this3","clearTimeout","fields","field","nodeSkeleton","fieldsToCheck","f","times","time","isValid","isNaN","toDate","minTime","min","minTimeString","String","html","titleize","css","hide","setLinkVisibility","silent","prevNumberOfVisibleClusters","prevVisNodeCount","reduce","acc","tagClusters","setClusterVisibility","setNodeVisibility","updatedNumberOfVisibleClusters","updatedVisNodeCount","launchView","getVisibleNodes","copy","getVisibleLinks","getVisibleClusters","is","vnodes","vlinks","clusterCount","src","tgt","singletons","schemeCategory10","groupMap","Map","polygonFoci","has","set","from","entries","newTempSkeleton","newSessionSkeleton","microbeTrace","onLinkThresholdChanged","getJurisdictions","appRootUrl","responseType","toPromise","header","getMapData","_this4","parts","name","format","peek","ra","view","callback","emit","thing","small","c","numNodes","tempnodes","lsv","DFS","clusterID","sum_distances","links_per_node","mean_genetic_distance","undefined","dateField","trigger","checkCluster","showNN","globalOriginOrder","finalOrigins","overrideNN","originWasFiltered","fileName","hasAuspice","test","includesDistanceOrigin","wasVisible","linkOriginSet","Set","globalOrderSet","every","updateThresholdHistogram","histogram","_this5","thresholdHistogram","select","max","Number","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","range","ticks","scaleLinear","bins","thresholds","bar","selectAll","enter","append","x0","that","updateThreshold","xc","mouse","decimalPlaces","toFixed","on","preventDefault","ExportService","exportRequestedSource","exportRequested$","exportSVGSource","exportSVG$","exportOptions","filename","filetype","scale","quality","setExportOptions","getExportOptions","requestExport","exportNodeTable","exportLinkTable","requestSVGExport","mainSVGString","exportTableAsSVG","tableElement","hasHeaderRow","rows","tableData","widthOffsets","heightOffsets","cells","rowData","offsetWidth","offsetHeight","getComputedStyle","querySelector","className","innerHTML","input","opacity","innerText","rowIndex","cell","colIndex","unparseSVG","svgNode","setAttribute","selectorTextArr","nClasses","classList","classSelector","getElementsByTagName","nNodes","child","childId","classes","extractedCSSText","nStylesheets","styleSheets","cssRules","nRules","rule","selectorText","some","cssText","styleElement","createElement","refNode","hasChildNodes","children","insertBefore","serializer","XMLSerializer","serializeToString","onerror","mergeStart","checkFlag","treeObjJSON","nnWorker","getNNWorker","triangulationWorker","getTriangulationWorker","matrixObj","Inject","ElementRef","ChangeDetectionStrategy","ChangeDetectorRef","XLSX","saveAs","fileto","generateCanvas","tn93","EventEmitterService","ComponentContainer","elRef","eventEmitterService","commonService","cdr","nativeElement","LoadDefaultVisualizationEvent","SelectedDefaultDistanceMetricVariable","SelectedAmbiguityResolutionStrategyVariable","SelectedAmbiguityThresholdVariable","SelectedDefaultDistanceThresholdVariable","SelectedDefaultViewVariable","SelectedGenerateNumberVariable","DirectionalityTypes","SelectedDirectionalityTypeVariable","TriangulationTypes","SelectedTriangulationTypeVariable","AutostashingTypes","SelectedAutostashingTypeVariable","AlignTypes","SelectedAlignTypeVariable","isLoadingFiles","ReferenceTypes","SelectedReferenceTypeVariable","SelectedRefSeqFileLoadVariable","RefSeqIDTypes","SelectedRefSeqIDVariable","SelectedAlignerMatchVariable","SelectedAlignerMismatchVariable","SelectedAlignerGapOVariable","SelectedAlignerGapEVariable","IsReferenceSourceSelected","IsReferenceOptionsSelected","SelectedAuditEmptyVariable","SelectedAuditGapsVariable","SelectedAuditRNAVariable","SelectedAuditAminoAcidsVariable","SelectedAuditCIGARVariable","SelectedAuditMalformedVariable","IsDataAvailable","displayFileSettings","displaySequenceSettings","displayloadingInformationModal","nodeIds","edgeIds","uniqueNodes","uniqueEdgeNodes","destroy$","onLinkThresholdChange","onDistanceMetricChange","slideUp","slideDown","parent","loadDefaultVisualization","subsVar","invokeFirstComponentFunction","processFile","removeAllFiles","applyStyleFileSettings","file","removeFile","empty","show","reader","FileReader","onloadend","readyState","DONE","readAsText","readFastas","updatePreview","auditBlock","logAudit","parentContext","match","button","thi$","removeClass","addClass","splice","isGaps","isRNA","isAA","isDNA","isCIGAR","isMalformed","checkEmpty","checkGaps","checkRNA","checkAA","checkCIGAR","checkMalformed","change","setItem","cachedLSV","getItem","cachedView","localStorage","autostash","clearInterval","interval","auspiceUrlVal","getJSON","populateTable","ngOnDestroy","complete","fileTableRows","remove","addToTable","toglleAll","InitView","handleContainerStateRequestEvent","changeDefaultView","selectedOptions","openSettings","showSequenceSettings","focus","showMessage","msg","launchClick","thresholdOnLaunch","metricOnLaunch","ambiguityOnLaunch","viewOnLaunch","setTimeout","creatLaunchSequences","nFiles","hierarchy","field2","fileNum","contents","nodeRegex","newNodes","sources","targets","forEachLink","safeLink","field1","srcIndex","tgtIndex","field3","bidirectional","workbook","read","utils","sheet_to_json","Sheets","SheetNames","nodeIDs","f1","f2","results","safeKey","totalNodes","dynamicTyping","skipEmptyLines","raw","dateNF","safeNode","step","nl","chunk","rowsInChunk","rowInChunk","close","f_nodes","tn","f_links","tl","skip","reversed","existing","newLinks","maxRow","apply","maxMax","processSequence","gapString","isLocal","gap","toInts","detectChanges","accordianToggle","open","processFiles","rawfile","pop","auspiceFile","promise","nodeEdgeCheck","isFasta","isNewick","isXL","isJSON","isAuspice","isNode","headers","addTableTile","loadNodes","loadEdges","context","root","fnamerow","isFileContentsEmpty","alert","Blob","appendTo","optionsrow","h","matchHeaders","these","list","refit","first","second","third","updateMetadata","fileTable","selectElements","querySelectorAll","ArrayBuffer","byteLength","el","$el","fname","selects","isJson","firstField","currentNodeId","currentEdgeId","allNodesListNodes","allEdgeListNodes","runNodeEdgeCheck","fastas","nodeFilesWithSeqs","fasta","csv","seqLabel","dataJSON","obj","canvas","onAmbiguityStrategyChanged","onAmbiguityThresholdChanged","generateSequences","File","unparse","args","changeDetection","OnPush","componentTypeName","ComponentFactoryResolver","componentFactoryResolver","_componentTypeMap","registerComponentType","componentType","getRegisteredComponentTypeNames","createComponent","componentTypeJsonValue","Error","provider","provide","useValue","create","componentFactoryRef","resolveComponentFactory","ApplicationRef","ViewChild","ViewContainerRef","GoldenLayout","goldenLayout","_goldenLayout","virtualActive","_virtualActive","viewContainerRefActive","_viewContainerRefActive","isGoldenLayoutSubWindow","isSubWindow","_appRef","_elRef","goldenLayoutComponentService","_componentRefMap","_goldenLayoutBoundingClientRect","DOMRect","_goldenLayoutBindComponentEventListener","itemConfig","handleBindComponentEvent","_goldenLayoutUnbindComponentEventListener","handleUnbindComponentEvent","TabRemovedEvent","TabChangedEvent","_goldenLayoutElement","destroy","initialise","resizeWithContainerAutomatically","beforeVirtualRectingEvent","handleBeforeVirtualRectingEvent","checkAddDefaultPopinButton","contentItem","handleActiveTabChange","setViewContainerRefActive","setVirtualActive","clear","setSize","getComponentRef","focusComponent","componentId","componentItem","instance","virtualRectingRequiredEvent","handleContainerVirtualRectingRequiredEvent","virtualVisibilityChangeRequiredEvent","handleContainerVisibilityChangeRequiredEvent","virtualZIndexChangeRequiredEvent","logicalZIndex","defaultZIndex","handleContainerVirtualZIndexChangeRequiredEvent","_componentViewContainerRef","insert","hostView","attachView","componentRootElement","appendChild","domElem","rootNodes","virtual","delete","viewRefIndex","removeChild","detachView","getBoundingClientRect","containerBoundingClientRect","removeComponent","_title","static","strainSymbol","Symbol","NODE_VISIBLE","invalidStrings","nodeList","linkList","recurseChildren","makeNode","branch","Branch","rootNode","newTree","addChild","branch_attrs","mutations","nuc","attribute","node_attrs","combineMutations","leaves","getLeaves","leaf","mutHolder","ancestor","getAncestors","nodeIndex","nodeHolder","parseAuspice","auspiceTree","treeToNewick","temporal","internalNodeNames","nodeAnnotation","getXVal","getTraitFromNode","getDivFromNode","recurse","parentX","childSubtrees","subtree","rootXVal","trait","entropy","confidence","isValueValid","div","makeLinksFromMatrix","addLatLong","metadata","geo_resolutions","deme","latitude","demes","longtude","longitude","jsonObj","fullTree","distanceMatrix","updatedTree","bareNewickString","newick","CustomShapes","diamondAlt","draw","tan30","sqrt","tan30_2","moveTo","lineTo","closePath","diamondSquare","w","hexagon","sideLength","area","num","denom","rotatePoint","theta","cos","sin","tau","PI","R","hexagonAlt","octogon","circumradiusCoeff","circumradius","side","octagonAlt","pentagon","triangleDown","triangleLeft","triangleRight","points","shapes","DialogSettings","dialogControlId","isVisible","linkTop","linkLeft","mapRight","nodeTop","nodeLeft","shapeTop","shapeRight","polygonRight","polygonTop","polygonLeft","getDialogControl","getDomRect","dialogControl","onShow","onHide","setStateBeforeExport","stateBeforeExport","domRect","restoreStateAfterExport","innerHeight","innerWidth","InlineWorker","func","onMessage","onError","WORKER_ENABLED","Worker","urls","functionBody","request","XMLHttpRequest","send","responseText","finish","URL","createObjectURL","ViewChildren","QueryList","ViewEncapsulation","ConfirmationService","DomSanitizer","debounceTime","distinctUntilChanged","takeUntil","Tabulator","JSZip","html2canvas","commitHash","confirmationService","domSanitizer","cdref","exportService","ambiguity","showSettings","showExport","showCenter","showPinAllNodes","showRefresh","showButtonGroup","showSorting","display_eula_modal","userConfirmedNN","showExportDashboardMenu","ExportDashboardFilename","ExportDashboardScale","ExportDashboardResolution","summary","thresholdDebouncer","showExportTablesMenu","ExportTablesFilename","ExportTablesFileType","ExportTablesScale","exportTables","displayHelp","displayAbout","displayStashDialog","displayUrlDialog","displayMTDialog","displayRecallStashDialog","displayLedgerLoaderDialog","saveFileName","saveByCluster","saveFileTypeOptions","selectedSaveFileType","searchField","searchText","FieldList","ToolTipFieldList","PruneWityTypes","RevealTypes","StatisticsTypes","SelectedTimelineVariable","timelineSpeed","LinkColorTableTypes","NodeColorTableTypes","activeTabNdx","ShowGlobalSettingsLinkColorTable","ShowGlobalSettingsNodeColorTable","roles","ShowGlobalSettingsSettingsPane","cachedGlobalSettingsVisibility","cachedGlobalSettingsLinkColorVisibility","cachedGlobalSettingsNodeColorVisibility","playBtnText","previousTab","bpaaSPayloadWrappers","networkRendered","DisplayGlobalSettingsDialogEvent","HideThisForNow","homepageTabs","_lastLinkThreshold","_lastClusterMinimum","_lastLinkSortValue","onDistanceMetricChanged","appSession","activeTabIndex","dataSetView","dataSetViewSelected","currentUrl","href","check_eula_acceptance","getGlobalSettingsData","info","performExport","performExportSVG","pipe","executeThresholdChange","loadUISettings","GlobalSettingsLinkColorDialogSettings","generateNodeLinkTable","generateNodeColorTable","networkRenderedSubscription","loadingMessageUpdatedSubscription","thresholdSubscription","elem","documentElement","GlobalSettingsDialogSettings","GlobalSettingsNodeColorDialogSettings","clearTable","onShowStatisticsChanged","err","fadeTo","animate","marginTop","on_eula_accept","on_eula_reject","addComponent","goldenLayoutComponent","_goldenLayoutHostComponent","newComponent","addTab","setActiveTabProperties","loadFilterSettings","elementsForExport","visualWrapperRef","settings","useCORS","allowTaint","onclone","clonedDoc","clonedTransparencySymbols","symbol","parentNode","clonedInputs","getAttribute","span","backgroundColor","margin","border","replaceChild","HTMLDivElement","linkColorTable","nodeColorTable","all","canvasArray","getContext","offsets","previousColWidth","currentColWidth","fillStyle","fillRect","strokeStyle","drawImage","strokeRect","imgData","toDataURL","download","body","click","unshift","parser","DOMParser","doc","parseFromString","svg1","tableSVGStrings","currentOffsetX","currentOffsetY","updatedSVGString","rect","createElementNS","firstChild","mainSVG","outerHTML","combinedSvgString","endsWith","blob","tab","deleteFile","onSearch","dataSet","fieldData","encodedField","charCodeAt","add","dataArray","vre","RegExp","$li","ac_v","ac_val","ac_vre","firstSelected","onSearchFieldChange","ev","onWholeWordChange","onCaseSensitiveChange","prepareFilesLists","$event","fadeOut","_removeGlView","getfileContent","updateMetric","toLocaleLowerCase","updateAmbiguity","toLocaleUpperCase","updateLaunchView","recallClicked","continueClicked","onBackgroundChanged","onMinimumClusterSizeChanged","previousNumberOfVisibleClusters","onLinkSortChanged","decimals","fixedThresholdValue","onApplyStyle","onload","onColorNodesByChanged","onColorLinksByChanged","onEpsilonValueChange","onPruneWithTypesChanged","openNNConfirmation","confirm","closable","closeOnEscape","icon","rejectButtonProps","severity","outlined","acceptButtonProps","accept","isArray","SelectedEpsilonValue","pow","toPrecision","onLinkColorTableChanged","tableComp","openSelectDataSetScreen","markForCheck","onNodeColorTableChanged","fadeIn","onNodeColorChanged","publishUpdateNodeColors","updateNodeColors","publishUpdateVisualization","updateVisualization","publishUpdateLinkColor","updateLinkColor","onLinkColorChanged","isEditable","aggregateValues","disabled","duoColors","duoLinkRow","colorinput","currentTarget","attributes","updateDuoLinkCell","alphainput","clientY","clientX","off","one","duoCell","background","padding","nonEditCell","finalCount","$this","isAscending","updateCountFreqTable","delay","table","parents","eq","toArray","comparer","reverse","valA","getCellValue","valB","localeCompare","onTimelineChanged","loadingJsonFile","bubble","sortData","nodeColor","globalTimelineField","encodedGlobalTimelineField","formatDateIntoYear","timeFormat","formatDateIntoMonthYear","formatDateIntoMonth","formatDateMonthYear","formatDateDateMonth","timeDomainStart","timeDomainEnd","days","diff","tickDateFormat","handleDateFormat","startDate","endDate","right","bottom","svgTimeline","currentTimelineValue","currentTimelineTargetValue","playButton","xAttribute","scaleTime","clamp","nice","slider","drag","interrupt","update","invert","handle","playTimeline","setInterval","showNodeColorTable","hideNodeColorTable","showLinkColorTable","hideLinkColorTable","prevColorNodesByVariable","asc","toggleColorTableSettings","tableName","settingsPane","toggleColorTableColumns","column","tableReferenceName","showCount","showFreq","countColumn","freqColumn","parsedThreshold","revealClicked","updateGlobalSettingsModel","updatedVisualization","ngAfterViewInit","DisplayUrlDialog","subscription","publishLoadNewData","convertToCSV","objArray","tmpArray","str","headerLoaded","line","index1","index2","officialInstance","prodVal","devVal","localVal","getHeight","timelineHeight","warningHeight","showSpinner","spinnerDivElement","spinnerElement","hideSpinner","resetLayout","Viewclick","fileList","getSinglefileContent","DisplayHelp","DisplayAbout","OpenExportDashboard","updateExportResolution","OpenExportTables","ExportDashboard","ExportTables","elementsToExport","nodeSymbolTable","polygonTable","visualWrapper","clusterSaveClick","DisplayStashDialog","saveStash","zip","lightTabs","clusterNodeList","clusterLinkList","singletonNodeList","dyadNodeList","dyadEdgeList","clusterNodes","clusterLinks","singletonFolder","dyadFolder","currentCluster","clusterFolder","folder","clusterNode","NodeList","clusterLink","LinkList","nodesBlob","edgesBlob","generateAsync","convertFileToCSV","stash","compression","compressionOptions","level","csvString","sheet_to_csv","getAuspiceName","nameParts","saveUrl","auspiceUrl","DisplayMTDialog","ResetTabs","home","NewSession","onReloadScreen","FileClick","actionName","stashSession","updateTable","SettingsClick","DisplayGlobalSettingsDialog","stashes","selectable","columns","sorter","fullname","date","toISOString","setData","viewName","tabNdx","loadSettings","linkThresholdSparkline","globalSettingsTab","active","WindowClick","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","reload","openMT_Classic","mt_url","HelpClick","activeComponentName","tabLabel","tabPosition","activate","onLoadNewData","publishFilterDataChange","onFilterDataChange","getCurrentThresholdStepSize","encapsulation","None","BpaaSPayloadWrapper","BlockHashCode","BlockName","BpaaSPayload","FuzzyMatchRatios","BpaaSPayloadWrapperData","Type","SubType","JurisdictionKey","JurisdictionName","Jurisdiction","FileName","Data","Renderer2","EventManager","OrderList","GoogleTagManagerService","renderer","eventManager","gtmService","SelectedDataTables","fieldOptions","items","SelectedDataFields","viewActive","settingsOpen","exportOpen","SelectedAggregateExportFilename","AggregateExportFileTypeList","SelectedAggregateExportFileType","aggregate","updateFieldOptions","pushTag","page_location","page_title","tableColumns","updateViewHeight","updateTableColWidth","tableUpdated","fullField","dataset","total","rawdata","arow","groupName","viewHeight","tableStyle","addTable","deleteTable","loc","short_label","formatTableTitle","inputString","colGroupName","openRefreshScreen","onRecallSession","openExport","exportVisualization","tmpData","percent","wb","book_new","ws","json_to_sheet","book_append_sheet","writeFile","outputData","datasetName","default","pdfMake","pdfFonts","vfs","documentDefinition","image","alignment","headerRow","widths","footer","currentPage","pageCount","styles","fontSize","bold","paddedTable","createPdf","reordered","updatedTableOrder","updateDataField","svgAsPngUri","alignmentDialogSettings","ShowAlignExportPane","showHideOptions","labelFieldList","showPopupMessage","longestSeqLength","alignmentTopDisplayOptions","charSettingOptions","seqTypeOptions","selectedSeqType","startPos","rulerIntervalOptions","translationSetting","sizes","colorSchemeOptions","AlignmentExportFileName","AlignmentExportFileTypeVis","AlignmentExportFileTypeData","setEvents","setDefaultWidgets","nodesWithSeq","nodesWithoutSeq","seqArray","isSeq","ID","labelArray","getData","calculateProportionAtEachLocation","onAlignmentTopChange","useCustomColorScheme","onSelectedColorChanged","onSelectedSizeChanged","shortenNodesWithSeq","updateMiniMapVisibility","goldenLayoutComponentResize","onLabelFieldChange","onSortFieldChange","highlightRows","indexList","currentObj","updateLongestSeqLength","longestSeq","updateAlignment","spanWidth","spanHeight","charSetting","colors","colorScheme","updateViewHeights","updateMiniMap","seqArrayShortened","showMiniMapHighlight","miniMap","mmDimensions","scaleFactorNumber","highlightHeight","scaleFactorLength","rightWidth","highlightWidth","canvasWidth","updateMiniMapHighlight","hideMiniMapHighlight","miniMapClick","canvasHolder","canvasLabels","alignmentTop","highlightDimensions","horizontalScroll","scrollLeft","verticalScroll","scrollTop","showTooltip","getRelativeMousePosition","adjX","offsetX","offsetY","htmlString","tabulate","hideTooltip","downSizedSeq","countMatrix","proportionMatrix","positionMatrix","nt","calcProportion","sum","calculatePosition","mergeA","mergeB","sortedIndexes","locA","locB","calculateProportionAminoAcids","cur","current","calculatePositionMatrixAminoAcids","proportionMatrixAA","nonZeroIndexes","compareIndices","calculateAdvancedProportion","xPos","getSVGWidth","onSeqTypeChange","revert2NT","NT2Codon","convertToAASequence","getNT2AATable","NT2AA_table","AAarray","NT_check","aaString","codon","checkAmbiguousCodons","gapCount","aa","A","N","D","C","Q","E","G","H","I","L","K","M","F","P","S","T","W","Y","V","X","positionMatrixAA","ambiguousCheck","positionPossibilities","currentNT","possibleCodons","nt0","nt1","nt2","possibleAA","AA","newSeqs","codons","rightViewHeight","calculateRightHeight","alignmentViewHeight","calculateViewHeight","canvasViewHeight","calculateCanvasViewHeight","miniMapHeight","outerHeight","calculateRightWidth","leftWidth","onSpanHeightChange","onSpanWidthChange","skipUpdateAlignment","updateColorScheme","fillColor","isFieldNumerical","indexes","scroll","topIndex","bottomIndex","scrollPos","selectedNodes","firstPositionSelected","calculateY","canvasScroll","dataType","tableHtml","index2NT","numberOfRows","AAindex","pageX","pageY","newSort","sortField","exportPNG","mainCanvas","exportWidth","exportHeight","encoderType","encoderOptions","topB64string","imageDataUrl","exportCanvas","ctx","iTop","Image","iMain","canvasDataURL","foreignObj","exportData","includeConsensus","megaFormat","getConsensus","consensusString","exportDataTable","option","csvHeader","innerArray","consensusInterator","getNextPosition","chars","char","bracketContent","consensusSeq","maxPos","config","longest","ch","cw","alpha","nucleotide","col","font","textAlign","textBaseline","fillText","refSeq","cytoscape","BubbleExportFileType","BubbleExportFileName","SelectedBubbleExportScaleVariable","selectedFieldList","xVarDate","yVarDate","nodeSpacing","labelSize","allData","visibleData","X_categories","X_tickValues","Y_categories","Y_tickValues","scaleFactor","svgDefs","OnOffTypes","suppressCySelectionEvents","use","viewWidth","setWidgets","updateAxisValues","onNodeSizeChange","setSelectedNodes","cy","xVariable","onDataChange","yVariable","updateVisibleNodes","updateNodes","generateCytoscape","removeAllListeners","cyContainer","SelectedNodeCollapsingTypeVariable","mapDataToCytoscapElements","totalCount","position","edges","estimateSize","metrics","measureText","AddAxes","Axes","toLocaleDateString","year","month","day","longestYLabel","yAxisLabelOffset","fit","lock","getCytoscapeStyle","elements","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","evt","ele","syncCySelectionFromSession","originalEvent","tooltipHTML","toolTip","transition","once","nodeDR","Xgroup","Ygroup","strokeColor","nodeX","locX","nodeY","locY","updateAxes","updateColors","currentLength","visibleNodes","vNode","getCollapsedData","axis","getTime","xLoc","yLoc","filteredNodes","calculateHexagonalGridPositions","initial","fullNodes","X_group","Y_group","currentFullNode","fNode","changedVisibleNodes","generateCollapsedCounts","generatePieChartsSVGDefs","resetToDefault","svgPattern","b64","btoa","onLabelSizeChange","unlock","newXPos","colorCategory","currentNodes","previousTotal","cNode","currentCategory","countItem","indexNumber","patternString","proportions","coordinates","proportion","cv","yPos","arcStart","largeArcFlag","arcEnd","fillcolor","colorVariable","Fnode","currentNode","dataNode","layerDistance","layer","nodesInLayer","angle","onNodeCollapsingChange","selectedIds","unselect","sortVariable","allNodes","recalculatePositions","onNodeSpacingChange","positions","showGlobalSettings","currrentVar","getAxisLabel","openCenter","setCalculatedResolution","CalculatedResolution","updateCalculatedResolution","full","bg","Table","showOptions","SelectedCrossTabExportFilename","SelectedCrossTabExportFileType","CrossTabExportFileTypeList","selectedSize","class","crossTab","updateFieldLists","pFooterHeight","scrollHeight","tableStyleCrosstab","fieldList","xValues","yValues","totalRow","newRow","SelectedTableData","convertToProportion","pivotCrosstab","tmp","prevData","prevColumns","newData","newTotalRow","newTableColumns","pcol","ncol","aRow","useProportionChanged","tempX","tempY","saveAsExcelFile","dataTable","exportFilename","exportCSV","dataBody","formatData","dataRow","headerRows","xlsx","worksheet","excelBuffer","write","bookType","EXCEL_TYPE","onTableSizeChange","colorSchemes","colorful","cool","warm","Input","addDays","newdate","setDate","getDate","monthIndex","getMonth","getFullYear","monthNames","shortenDate","computeGrid","flag","qts","ganttChartService","ganttDateRange","gridPrecisionX","gridWidthX","transformX","gridWidthY","rectHeight","ganttPhases","gridPath","xAxis","yAxis","ganttMinDate","yTrans","yPadding","ganttMaxDate","transformGanttDate","xPadding","transform","cnt","phase","getWidth","gEntry","to","setDimensions","host","currentElement","dims","setColors","team","customColorScheme","definePhaseTimelines","phaseTimelines","timelines","componentID","setValues","gridID","ngOnChanges","ganttOpacity","computeRectDimensions","rectWidth","computeLegionDimensions","noOfLines","legionWidth","legionHeight","maxX","minX","computeLegion","legion","legionLine","ganttTeams","oneDay","daysSinceMinDate","closestMultipleLessThanEqualTo","factor","closestMultipleMoreThanEqualTo","froms","tos","phases","minDate","maxDate","printAll","domToImage","svgStyle","customShapes","ShowNetworkAttributes","ShowStatistics","ShowGanttExportPane","ShowGanttSettingsPane","GanttEntryName","GanttStartVariable","GanttEndVariable","GanttEntryColor","ganttEntries","SelectedGanttChartImageFilenameVariable","NetworkExportFileTypeList","SelectedNetworkExportFileTypeListVariable","GanttSettingsDialogSettings","gantt","dataAvail","ganttChartData","isExportClosed","getNodeIds","makeBlankEntry","timelineEntry","blankEntry","makeGanttEntry","dateName","startVariable","endVariable","entryColor","nodeData","hasTimeZone","regExp","entry","ganttEntry","createGanttEntry","newEntry","entryName","existingData","resetEntryForm","removeGanttEntry","startingEntries","endingEntries","updateEntryColor","startingData","idSet","listGanttEntries","saveImage","domId","exportImageType","toPng","dataUrl","toJpeg","svgContent","deserialized","plotlyModule","HeatmapSettingsDialogSettings","ShowHeatmapExportPane","invertOptions","SelectedImageFilenameVariable","SelectedNetworkExportFileTypeVariable","SelectedDistanceMatrixFilenameVariable","heatmap","invertX","invertY","heatmapShowLabels","loColor","medColor","hiColor","heatmapMetric","reCenter","relayout","redrawHeatmap","drawHeatmap","xLabels","yLabels","heatmapLabels","heatmapData","z","colorscale","heatmapLayout","xaxis","yaxis","heatmapConfig","displaylogo","displayModeBar","plot","newPlot","purge","autotick","showticklabels","setBackground","contrast","updateLoColor","updateMedColor","updateHiColor","updateInvertX","direction","updateInvertY","fixedContent","fixGradient","insertionPoint","getElementsByClassName","startingUrl","idVal","saveDistanceMatrix","csvContent","tileLayer","latLng","markerClusterGroup","circleMarker","featureGroup","LongLatClass","layers","MapLayers","ShowGEOMapExportPane","ShowGEOMapSettingsPane","LinkToolTipList","SelectedLatitude","SelectedLongitude","SelectedCensusTract","SelectedZipCode","SelectedCounty","SelectedState","SelectedCountry","geocoder","markers","SelectedNetworkExportFilenameVariable","SelectedNetworkExportScaleVariable","SelectedNetworkExportQualityVariable","CalculatedResolutionWidth","CalculatedResolutionHeight","NodesTypes","SelectedNodesTypeVariable","LinksTypes","SelectedLinksTypeVariable","CountriesTypes","SelectedCountriesTypeVariable","StatesTypes","SelectedStatesTypeVariable","CountiesTypes","SelectedCountiesTypeVariable","BasemapTypes","SelectedBasemapTypeVariable","SatelliteTypes","SelectedSatelliteTypeVariable","NodeCollapsingTypes","SelectedNodeTransparencyVariable","SelectedNodeJitterVariable","SelectedNodeTooltipVariable","SelectedLinkTransparencyVariable","SelectedLinkTooltipVariable","mapTooltip","leafletMarkers","isExporting","exportTryCount","gisMap","NodeMapSettingsExportDialogSettings","initializeMap","zipcodes","drawNodes","visNodes","matchCoordinates","_jlat","_jlon","rerollNodeAndJitter","drawLinks","networkUpdatedSubscription","newPruned","lmap","invalidateSize","centerMap","address","codeAddress","Latitude","Longitude","initializeLeafletMap","mapTokenKey","basemap","maxZoom","attribution","satellite","leafletInitialOptions","zoom","zoomControl","preferCanvas","center","leafletMarkerClusterOptions","showCoverageOnHover","zoomToBoundsOnClick","spiderfyOnMaxZoom","removeOutsideVisibleBounds","maxClusterRadius","spiderLegPolylineOptions","onMapReady","setPosition","onMarkerClusterReady","markerCluster","getMarker","radius","showAllVisibleMarkers","getLayers","flyToBounds","getBounds","clearAllMarkers","clearAllMarkers_Leaflet","removeNodes","removeLinks","rerollCheck","jitter","resetStack","onMapNodeShowHideChange","onMapLinksShowHideChange","onCountriesShowHidChange","onSatelliteChange","onBasemapChange","countries","addTo","onStatesShowHideChange","states","onCountiesShowHideChange","counties","isReload","bringToFront","onGeospatialTypeChange","onNodeTransparencyChange","onNodeJitterChange","onNodeToolTipChange","onLinkTransparencyChange","onLinkToolTipChange","exportWork","onCloseExport","removeControl","exportContainer","addControl","displayColorOptions","addressList","positionList","geocode","status","geometry","lat","lng","weight","fillOpacity","norefresh","country","features","properties","_lat","_lon","sval","usps","cval","county","fips","zo","zipcode","tracts","tract","lon","nodesWithoutLoc","nodeLocSet","rerollNodes","drawLeafletMapNodes","drawLeafletMapNodesList","selectedColor","showNodeTooltip","clickHandler","addLayers","addLayer","lcv","color1","color2","dashPattern1","dashPattern2","polyline1","polyline","dashArray","polyline2","showLinkTooltip","connectorLine","locationData","locationDetail","htmlText","Name","FullAddress","containerPoint","duration","tooltip","sourceTarget","filtered","setSelected","ctrl","ctrlKey","bringToBack","_theta","_j","clearLayers","MarkerWithData","Marker","CircleWithData","CircleMarker","PolyLineWithData","Polyline","TidyTree","this","ShowPhylogeneticExportPane","ShowPhylogeneticSettingsPane","radToDeg","multidrag","nodeMin","nodeMax","nodeScale","minNodeWidth","maxNodeWidth","nodeMid","TreeLayouts","SelectedTreeLayoutVariable","TreeModes","SelectedTreeModeVariable","TreeTypes","SelectedTreeTypeVariable","SelectedVerticalStretchVariable","SelectedHorizontalStretchVariable","SelectedLeafLabelShowVariable","SelectedLeafLabelVariable","LeafLabelFieldList","SelectedLeafLabelSizeVariable","SelectedLeafTooltipShowVariable","SelectedLeafTooltipVariable","SelectedLeafNodeShowVariable","SelectedLeafNodeSizeVariable","SelectedLeafNodeSize","SelectedLeafNodeColorVariable","SelectedSelectedLeafNodeColorVariable","SelectedBranchNodeShowVariable","SelectedBranchNodeSizeVariable","SelectedBranchNodeColorVariable","SelectedBranchSizeVariable","SelectedBranchLabelSizeVariable","SelectedBranchLabelShowVariable","SelectedBranchDistanceShowVariable","SelectedBranchDistanceSizeVariable","hideShowOptions","SelectedTreeImageFilenameVariable","SelectedNewickStringFilenameVariable","ShowAdvancedExport","PhylogeneticTreeExportDialogSettings","openTree","phylogenetic","buildTree","styleTree","setBranchLabels","eachBranchLabel","styleBranchLabel","setBranchNodes","eachBranchNode","styleBranchNode","setBranchDistances","eachBranchDistance","styleBranchDistance","setLeafNodes","updateMinMaxNode","eachLeafNode","styleLeafNode","onLeafLabelVariableChange","setLeafLabels","eachLeafLabel","styleLeafLabel","branchEls","styleBranch","getLeafSize","node_id","defaultSize","med","oldrng","scaleValue","leafSize","isSelected","node_values","node_color","getTreeOptions","treeOpts","mode","leafNodes","branchNodes","leafLabels","branchLabels","branchDistances","ruler","animation","getTreeHandlers","handlers","contextmenu","showContextMenu","showtooltip","hidetooltip","getContextLeftVal","getContextTopVal","clientHeight","leftVal","topVal","reroot","hideContextMenu","rotate","getRoot","flip","leafId","htmlValue","MAX_VALUE","MIN_VALUE","clone","thisTree","recenter","redraw","onTreeLayoutChange","setLayout","onTreeModeChange","setMode","onTreeTypeChange","setType","labelVar","onLeafTooltipVariableChange","circle","onHorizontalStretchChange","cached","setAnimation","setHStretch","onVerticalStretchChange","setVStretch","onBranchLabelSizeChange","onBranchDistanceShowChange","onBranchDistanceSizeChange","onBranchNodeShowChange","onBranchNodeSizeChange","onLeafLabelTooltipShowChange","onLeafLabelShowChange","onLeafNodeShowChange","onLeafNodeSizeChange","onLeafNodeSizeVariableChange","onLeafLabelSizeChange","onBranchSizeChange","linkColor","treeId","saveNewickString","newickBlob","saveSvgAsPng","d3sankey","draggingNode","sankey","ShowSankeyExportPane","ShowSankeySettingsPane","layerPositions","layerColors","tooltipVisible","tooltipLeft","labelFontSize","axisFontSize","SelectedSankeyImageFilename","SankeyExportScaleVariable","svgWidth","svgHeight","widthOffset","labelHeight","SankeyFieldNames","SelectedFieldName","SankeyExportDialogSettings","LinkColorOptions","SelectedColorOption","SelectedColorForUniform","nodeWidth","nodePadding","updateGraph","sankeyGO","updateWidthOffset","longestLastLabel","getTextSize","textElem","textContent","bbox","getBBox","onlabelFontSizeChange","onaxisFontSizeChange","getAxisTextAnchor","lastAxisLabelWidth","getLinkColor","getLinkPathDefinition","sankeyLinkHorizontal","getNodeTransform","y0","reorderRows","dragIndex","dropIndex","updateLinkPosition","sourceLinks","ascendingTargetDepth","targetLinks","ascendingSourceDepth","y1","resolveColisions","py","resolveCollisionsBottomToTop","resolveCollisionsTopToBottom","dy","startDrag","move","endDrag","elementType","tooltipX","tooltipY","tooltipData","createSankeyData","sankeyFields","variables","fieldValues","makeVariableArray","variableCounts","getVariableCounts","variableValues","secondField","q","sourceIndex","targetIndex","queryObj","firstValue","secondValue","edgeVal","getEdgeValue","nodeCopy","dataColumn","fieldName","addSelectedField","fieldListFull","removeField","devicePixelRatio","sankeySVG","SelectedTableExportFilenameVariable","TableExportFileTypeList","exportColumnOptions","exportAllColumns","SelectedTableExportFileTypeListVariable","SelectedTextSizeVariable","ShowTableExportPane","ShowTableSettingsPane","TableColumns","SelectableTableColumns","AvailableColumns","TableDatas","TableDataSelection","TableType","filterTypes","selectedRows","_original_index_key","createTable","temp2","availableColumns","filteredValue","EXCEL_EXTENSION","onTableFilter","filterValue","filterType","onFilter","filteredValues","filters","onRowSelect","nodeSelect","onRowUnselect","isSelect","tableType","isNewTableData","dataSelection","selectedTableColumns","foundFilterItem","foundAvailableColumn","curVal","typeData","nrow","stringVal","foundTableData","selected_nodes","selected_rows","unselected_rows","order_by_original","new_data","order_changed","first_index","scrollToVirtualIndex","scrollTo","resetTextsize","reorderColumns","FieldListStack","binSizes","graphTypes","selectedGraphType","legendPositionOptions","ShowEpiSettingsPane","ShowEpiExportPane","EpiExportFileName","EpiExportFileType","localColorMap","tick","isPlaying","epiCurve","setDefaultsWidgets","tickInterval","updateSettingsRows","refresh","SelectedDateFieldVariable","SelectedDateFieldVariable2","SelectedDateFieldVariable3","setupEventListeners","refreshMulti","updateSizes","getTimes","binInterval","calculateBinInterval","rangeRound","epiCurveSVGElement","classed","nodeColorKeys","updateLocalColorMap","maxCount","updateBins","ind","x1","length2","generateLegend","currentCount","currentbin","numberOfBins","xOffset","nodeColorTableKeys","wrapper","epiCurveElement","middle","xLabelOffset","configureXAxisSettings","axisLeft","fieldNames","prevLength","rowCount","nLength","baseX","stopTimeline","startTimeline","setTimer","maxTime","timeMonth","timeDay","timeMonday","setMonth","timeYear","heights","bin","paritalSum","numberOfDays","axisBottom","tickFormat","onDateFieldChange","onBinSizeChange","onGraphTypeChange","onUseNodeColorChange","onTickIntevalChange","onLegendPositionChange","setCumulative","getImageDimensions","clientWidth","timer","stop","timerFlush","selection","brushSelection","brushG","brush","propagate","Clipboard","NgZone","clipboard","zone","vizLoaded","nodePositions","layoutParallelNodesPerColumn","overideTransparency","containerHeight","graphData","selectedNodeId","selectedNodeShape","symbolMapping","shapeAggregates","shapeSort","assending","linkMin","linkMax","linkMid","autoFit","Show2DExportPane","Show2DSettingsPane","halfWidth","halfHeight","force","ctrlPressed","dragging","isLoading","SelectedPolygonLabelVariable","SelectedPolygonColorVariable","SelectedPolygonLabelOrientationVariable","SelectedPolygonLabelSizeVariable","SelectedPolygonGatherValue","CenterPolygonVariable","SelectedPolygonLabelShowVariable","SelectedPolygonColorShowVariable","SelectedPolygonColorTableShowVariable","SelectedNodeLabelOrientationVariable","SelectedNodeLabelVariable","SelectedNodeSymbolVariable","SelectedNodeShapeVariable","SelectedNodeRadiusVariable","SelectedNodeRadiusSizeVariable","TableTypes","SelectedNetworkTableTypeVariable","SelectedLinkLabelVariable","SelectedLinkDecimalVariable","SelectedLinkWidthByVariable","SelectedLinkWidthMax","SelectedLinkWidthMin","ReciprocalTypes","SelectedLinkReciprocalTypeVariable","SelectedLinkWidthVariable","SelectedLinkLengthVariable","ArrowTypes","bidirectionalOptions","SelectedLinkArrowTypeVariable","SelectedLinkBidirectionalTypeVariable","NeighborTypes","SelectedNetworkNeighborTypeVariable","GridLineTypes","SelectedNetworkGridLineTypeVariable","SelecetedNetworkLinkStrengthVariable","rerenderOnActive","SelectedNodeLabelSizeVariable","nodeBorderWidth","ShowNodeSymbolWrapper","ShowNodeSymbolTable","ShowPolygonColorTable","NodeSymbolTableWrapperDialogSettings","PolygonColorTableWrapperDialogSettings","Node2DNetworkExportDialogSettings","ContextSelectedNodeAttributes","symbolTableWrapper","linkColorTableWrapper","nodeColorTableWrapper","isMac","navigator","userAgent","_rerender","mapPreviousShapeNameToCurrent","generateNodeSymbolSelectionTable","settingsLoadedSubscription","_partialUpdate","mapDataToCytoscapeElements","timelineTick","parentNodes","flatMap","originItem","lineSelectedColor","getLinkLabel","lineColor","lineOpacity","getLinkWidth","secondLink","getNodeLabel","getNodeSize","bgOpacity","getNodeColor","selectedBorderColor","getNodeFontSize","shape","getNodeShape","getNodeBorderWidth","getCytoscapeStyles","attachCytoscapeEvents","syncCySelectionToService","selectionChanged","shouldBeSelected","connectedEdges","edge","updateNodePos","gatherGroups","laidOutNodes","laidOutLinks","applyGatherForce","laidOutNodes3","laidOutLinks3","laidOutNodes2","laidOutLinks2","pNodes2","applySeparationForce","cyNode","tickCount","childNodes","parentY","gatherSimulation","forceSimulation","forceManyBody","strength","forceLink","forceCenter","forceCollide","forceX","forceY","max_dim","boundingBox","separationSimulation","p","precomputePositionsWithD3","simulation","mapNodeSize","styleFileSub","ensureArray","mtSelectedNodes","mtSelectedNodeIds","debouncedRerender","debounceDelay","rerenderTimeout","svgString","polygonColorTable","networkStatisticsTable","parentElement","onNetworkExportFiletypeChange","toggleAdvancedExport","networkWhitespaceClicked","updatePolygonColors","locInPolygonColors","updateGroupNodeColors","locInPolygonAlphas","polygonsToggle","updateNodeGrouping","onPolygonLabelOrientationChange","batch","addParentNodesAndGroupChildren","removeParentNodesAndUngroupChildren","foci","nodesInGroup","parentId","alphaVal","isParent","groups","newColor","polygonColorsToggle","onPolygonColorChanged","polygonColorsTableToggle","getVLinks","holder","oNum","origins","getLLinks","calcAngle","atan","copyID","copySeq","tt_var_len","tooltipHtml","tooltipVariables","varName","centerPolygons","updateLayout","updateGroupAssignments","pinNodes","existingParents","rawGroup","childNode","onPolygonLabelSizeChange","textValign","textHalign","onPolygonLabelShowChange","onPolygonColorTableChange","onNodeLabelVaribleChange","updateNodeLabels","onNodeShapeSort","sortBy","aKey","bKey","onNodeShapeTableChange","newShape","updateNodeShapes","onNodeShapeChange","sizeVariable","scalar","mid","linkScale","finalColor","alphaValue","labelVariable","labelValue","onNodeLabelSizeChange","setNodeLabelSize","updateNodeLabelSizes","onNodeLabelOrientationChange","onNodeTooltipVariableChange","selectedValue","onNodeSymbolVariableChange","onNodeSymbolTableChange","dv","symbols","onNodeRadiusVariableChange","updateNodeSizes","closeSettingsPane","onNodeRadiusMaxChange","onNodeRadiusMinChange","onNodeBorderWidthChange","updateNodeBorders","onNodeRadiusChange","_this6","networkData","visLinks","ensurePolygon","newElements","seenIds","hasSource","hasTarget","Cypress","cytoscapeInstance","dragNodeDelta","dx","locked","newPos","action","mockEvent","linkTooltip","edgeId","setNodeSize","setLinkWidth","onLinkWidthChange","togglePolygons","setNodeLabel","setNodeBorderWidth","toggleLinkArrows","onLinkDirectedUndirectedChange","toggleGridlines","onNetworkGridlinesShowHideChange","setNodeLabelSizeAndOrientation","orientation","setNodeSizeByVariable","setLinkOpacity","onLinkOpacityChange","toggleGroupLabels","setLinkWidthByVariable","onLinkWidthVariableChange","setLinkLength","onLinkLengthChange","toggleNeighborHighlighting","highlight","onDontHighlightNeighborsHighlightNeighborsChange","setGroupByVariable","setGroupLabelSizeAndOrientation","performance","endTime","numVisibleChildren","symbolVariable","toggleTableColumns","onNodeSymbolChange","onLinkTooltipVariableChange","onLinkLabelVariableChange","newLabel","onLinkDecimalVariableChange","updateLinkWidthRows","updateMinMaxLink","scaleLinkWidth","currentRange","targetRange","maxWidth","minWidth","onLinkWidthReciprocalNonReciprocalChange","onLinkWidthMaxChange","onLinkWidthMinChange","updateArrowStyles","onLinkBidirectionalChange","calculateLinkWidthScale","linearScale","dataMin","dataMax","reciprocal","scaledValue","onNodeChargeChange","onNetworkGravityChange","onNetworkFrictionChange","onNetworkLinkStrengthVariableChange","stroke","stroke_width","scaleValues","dataValue","scaledWidth","isFiltered","enableSettings","_this7","currentPosition","newNodeIds","newLinkIds","cyNodeCount","hasClass","countd","linkMap","cyEdge","labelVal","newArr","newSize","newBorderWidth","updateLinkWidths","newWidth","newFontSize","onNodeLabelChange","onNodeColorChange","metaDataToSkip","expandedClusterRowData","expandedNodeRowData","expandedLinkRowData","waterfall","clusterTableData","nodeTableData","linkTableData","cl","clearClusterTableSelection","clusterTableWidth","clusterTable","_totalTableWidth","nodeTableWidth","nodeTable","linkTableWidth","linkTable","onClusterRowSelect","degreeCount","selectedNodeRow","selectedLinkRow","onClusterRowUnselect","selectionChange","expandedRowKeys","onRowCollapse","onNodeRowSelect","onNodeRowUnselect","onLinkRowSelect","linkIndex","linkData","onLinkRowUnselect","bioseq","compute_parse_csv_matrixWorker","compute_align_sw","rst","fmt","cigar2gaps","CIGAR","_score","score","_cigar","encoder","TextEncoder","encode","buffer","compute_consensus","maxKey","maxVal","compute_ambiguity_counts","sequence","sequenceLength","compute_links","s1","s2","c1","c2","onInts","sourceInThreshold","sourceSeq","compute_tree","RNJ","parseMatrix","toObject","compute_directionality","getDescendant","compute_mst","minDist","nodeid","minKey","mstSet","min_index","primMST","graph","u","nearest_neighbour_graph","mst_parents","mst","nng","longest_edge","bfs_update_matrix","weights","visited","queue","shift","idxA","idxB","compute_nn","compute_triangulation","missingCell","minRange","companionA","companionB","newVal","compute_parse_fasta","currentSeq","lines","isblank","MenuAsideDirective","MenuAsideOffcanvasDirective","MenuHorizontalOffcanvasDirective","MenuHorizontalDirective","MenuAsideToggleDirective","NavigationEnd","Router","router","offcanvasClass","mUtil","menuOffcanvas","mOffcanvas","baseClass","overlay","closeBy","toggleBy","events","isMobileDevice","toggle","mToggle","targetState","togglerState","LayoutConfigService","objectPath","LayoutRefService","mergeMap","layoutConfigService","layoutRefService","onLayoutConfigUpdated$","layoutRefs$","initMenu","headerHeight","getViewPort","submenu","desktop","tablet","mobile","accordion","autoScroll","expandAll","menu","mMenu","slideSpeed","UtilsService","layoutRefs","addElement","HttpParams","HttpHeaders","urlParam","encodeURIComponent","isObject","mergeDeep","getPath","fullpath","getFindHTTPParams","queryParams","sortOrder","pageNumber","pageSize","getHTTPHeader","isInteger","isFinite","isString","environment","production","buildDate","enableProdMode","platformBrowserDynamic","bootstrapModule","AppConsts","tenancyNamePlaceHolderInUrl","localeMappings","userManagement","defaultAdminUserName","localization","defaultLocalizationSourceName","authorization","encrptedAuthTokenName","grid","defaultPageSize","PrimengTableHelper","localizationSourceName","ui","appUrlService","primengTableHelper","flattenDeep","array","ls","sourcename","localizedText","localize","isGranted","permissionName","permission","isGrantedAny","permissions","tenancyNamePlaceHolder","_appSessionService","getAppRootUrlOfTenant","tenancyName","baseUrl","ensureEndsWith","appBaseUrlFormat","appBaseHref","removeFromStart","AppUrlService_1","removeFromEnd","Pipe","LocalizePipe","init","getContainerClass","_theme","baseSettings","layoutType","isLeftMenuUsed","getAppModuleBodyClass","topMenuUsed","contentSkin","desktopFixedHeader","mobileFixedHeader","fixedAside","defaultMinimizedAside","defaultHiddenAside","asideSkin","fixedFooter","fixedBody","mobileFixedBody","getAccountModuleBodyClass","getSelectEditionBodyClass","getSideBarMenuClass","menuCssClass","submenuToggle","getMenuListClass","getTopBarMenuContainerClass","getIsMenuScrollable","allowMenuScroll","getSideBarMenuItemClass","isMenuActive","HostBinding","HostListener","fileDropped","onDragOver","stopPropagation","fileOver","onDragLeave","ondrop","dataTransfer","predefinedRecordsCountPerPage","defaultRecordsCountPerPage","isResponsive","totalRecordsCount","showLoadingIndicator","hideLoadingIndicator","getSorting","sorting","getMaxResultCount","paginator","getSkipCount","shouldResetPaging","Subscription","onFirstComponentButtonClick","localForage","removeItem","defaults","colorOptions","nodeColorMode","equidistantLeaves","hStretch","vStretch","rotation","setTree","eachBefore","validLayouts","validTypes","validModes","validNodeColorModes","validBranchColorModes","updateRuler","getX","getY","getLength","linkTransformers","smooth","horizontal","linkHorizontal","vertical","linkVertical","circular","linkRadial","straight","startAngle","startRadius","endAngle","endRadius","square","weighted","dendrogram","circularPoint","nodeTransformers","findNodeColor","defaultNodeColor","_guid","highlightColor","findBranchColor","branchColorMode","defaultBranchColor","childLeafNodes","getAllLeaves","allChildLeafNodesInNodeList","includeSelf","labelTransformers","labeler","separation","depth","linkTransformer","labelTransformer","paths","end","exit","descendants","nodeLabels","nodeTransformer","nodeGlyphs","zoomIdentity","translate","newLayout","setColorOptions","newColorOptions","newMode","newType","setRotation","degrees","animCache","styler","setEquidistantLeaves","isEquidistant","setRuler","getNodeGUIDs","leavesOnly","predicate","_groups","nodeGUIDs","__data__","handler"],"sourceRoot":"webpack:///","x_google_ignoreList":[79]}